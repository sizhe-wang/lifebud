{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 14, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/core/src/types.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/core/src/events.ts"],"sourcesContent":["import { z } from \"zod\";\n\nexport const FunctionCallSchema = z.object({\n  name: z.string(),\n  arguments: z.string(),\n});\n\nexport const ToolCallSchema = z.object({\n  id: z.string(),\n  type: z.literal(\"function\"),\n  function: FunctionCallSchema,\n});\n\nexport const BaseMessageSchema = z.object({\n  id: z.string(),\n  role: z.string(),\n  content: z.string().optional(),\n  name: z.string().optional(),\n});\n\nexport const TextInputContentSchema = z.object({\n  type: z.literal(\"text\"),\n  text: z.string(),\n});\n\nconst BinaryInputContentObjectSchema = z.object({\n  type: z.literal(\"binary\"),\n  mimeType: z.string(),\n  id: z.string().optional(),\n  url: z.string().optional(),\n  data: z.string().optional(),\n  filename: z.string().optional(),\n});\n\nconst ensureBinaryPayload = (\n  value: { id?: string; url?: string; data?: string },\n  ctx: z.RefinementCtx,\n) => {\n  if (!value.id && !value.url && !value.data) {\n    ctx.addIssue({\n      code: z.ZodIssueCode.custom,\n      message: \"BinaryInputContent requires at least one of id, url, or data.\",\n      path: [\"id\"],\n    });\n  }\n};\n\nexport const BinaryInputContentSchema = BinaryInputContentObjectSchema.superRefine((value, ctx) => {\n  ensureBinaryPayload(value, ctx);\n});\n\nconst InputContentBaseSchema = z.discriminatedUnion(\"type\", [\n  TextInputContentSchema,\n  BinaryInputContentObjectSchema,\n]);\n\nexport const InputContentSchema = InputContentBaseSchema.superRefine((value, ctx) => {\n  if (value.type === \"binary\") {\n    ensureBinaryPayload(value, ctx);\n  }\n});\n\nexport const DeveloperMessageSchema = BaseMessageSchema.extend({\n  role: z.literal(\"developer\"),\n  content: z.string(),\n});\n\nexport const SystemMessageSchema = BaseMessageSchema.extend({\n  role: z.literal(\"system\"),\n  content: z.string(),\n});\n\nexport const AssistantMessageSchema = BaseMessageSchema.extend({\n  role: z.literal(\"assistant\"),\n  content: z.string().optional(),\n  toolCalls: z.array(ToolCallSchema).optional(),\n});\n\nexport const UserMessageSchema = BaseMessageSchema.extend({\n  role: z.literal(\"user\"),\n  content: z.union([z.string(), z.array(InputContentSchema)]),\n});\n\nexport const ToolMessageSchema = z.object({\n  id: z.string(),\n  content: z.string(),\n  role: z.literal(\"tool\"),\n  toolCallId: z.string(),\n  error: z.string().optional(),\n});\n\nexport const ActivityMessageSchema = z.object({\n  id: z.string(),\n  role: z.literal(\"activity\"),\n  activityType: z.string(),\n  content: z.record(z.any()),\n});\n\nexport const MessageSchema = z.discriminatedUnion(\"role\", [\n  DeveloperMessageSchema,\n  SystemMessageSchema,\n  AssistantMessageSchema,\n  UserMessageSchema,\n  ToolMessageSchema,\n  ActivityMessageSchema,\n]);\n\nexport const RoleSchema = z.union([\n  z.literal(\"developer\"),\n  z.literal(\"system\"),\n  z.literal(\"assistant\"),\n  z.literal(\"user\"),\n  z.literal(\"tool\"),\n  z.literal(\"activity\"),\n]);\n\nexport const ContextSchema = z.object({\n  description: z.string(),\n  value: z.string(),\n});\n\nexport const ToolSchema = z.object({\n  name: z.string(),\n  description: z.string(),\n  parameters: z.any(), // JSON Schema for the tool parameters\n});\n\nexport const RunAgentInputSchema = z.object({\n  threadId: z.string(),\n  runId: z.string(),\n  parentRunId: z.string().optional(),\n  state: z.any(),\n  messages: z.array(MessageSchema),\n  tools: z.array(ToolSchema),\n  context: z.array(ContextSchema),\n  forwardedProps: z.any(),\n});\n\nexport const StateSchema = z.any();\n\nexport type ToolCall = z.infer<typeof ToolCallSchema>;\nexport type FunctionCall = z.infer<typeof FunctionCallSchema>;\nexport type TextInputContent = z.infer<typeof TextInputContentSchema>;\nexport type BinaryInputContent = z.infer<typeof BinaryInputContentSchema>;\nexport type InputContent = z.infer<typeof InputContentSchema>;\nexport type DeveloperMessage = z.infer<typeof DeveloperMessageSchema>;\nexport type SystemMessage = z.infer<typeof SystemMessageSchema>;\nexport type AssistantMessage = z.infer<typeof AssistantMessageSchema>;\nexport type UserMessage = z.infer<typeof UserMessageSchema>;\nexport type ToolMessage = z.infer<typeof ToolMessageSchema>;\nexport type ActivityMessage = z.infer<typeof ActivityMessageSchema>;\nexport type Message = z.infer<typeof MessageSchema>;\nexport type Context = z.infer<typeof ContextSchema>;\nexport type Tool = z.infer<typeof ToolSchema>;\nexport type RunAgentInput = z.infer<typeof RunAgentInputSchema>;\nexport type State = z.infer<typeof StateSchema>;\nexport type Role = z.infer<typeof RoleSchema>;\n\nexport class AGUIError extends Error {\n  constructor(message: string) {\n    super(message);\n  }\n}\n\nexport class AGUIConnectNotImplementedError extends AGUIError {\n  constructor() {\n    super(\"Connect not implemented. This method is not supported by the current agent.\");\n  }\n}\n","import { z } from \"zod\";\nimport { MessageSchema, StateSchema, RunAgentInputSchema } from \"./types\";\n\n// Text messages can have any role except \"tool\"\nconst TextMessageRoleSchema = z.union([\n  z.literal(\"developer\"),\n  z.literal(\"system\"),\n  z.literal(\"assistant\"),\n  z.literal(\"user\"),\n]);\n\nexport enum EventType {\n  TEXT_MESSAGE_START = \"TEXT_MESSAGE_START\",\n  TEXT_MESSAGE_CONTENT = \"TEXT_MESSAGE_CONTENT\",\n  TEXT_MESSAGE_END = \"TEXT_MESSAGE_END\",\n  TEXT_MESSAGE_CHUNK = \"TEXT_MESSAGE_CHUNK\",\n  THINKING_TEXT_MESSAGE_START = \"THINKING_TEXT_MESSAGE_START\",\n  THINKING_TEXT_MESSAGE_CONTENT = \"THINKING_TEXT_MESSAGE_CONTENT\",\n  THINKING_TEXT_MESSAGE_END = \"THINKING_TEXT_MESSAGE_END\",\n  TOOL_CALL_START = \"TOOL_CALL_START\",\n  TOOL_CALL_ARGS = \"TOOL_CALL_ARGS\",\n  TOOL_CALL_END = \"TOOL_CALL_END\",\n  TOOL_CALL_CHUNK = \"TOOL_CALL_CHUNK\",\n  TOOL_CALL_RESULT = \"TOOL_CALL_RESULT\",\n  THINKING_START = \"THINKING_START\",\n  THINKING_END = \"THINKING_END\",\n  STATE_SNAPSHOT = \"STATE_SNAPSHOT\",\n  STATE_DELTA = \"STATE_DELTA\",\n  MESSAGES_SNAPSHOT = \"MESSAGES_SNAPSHOT\",\n  ACTIVITY_SNAPSHOT = \"ACTIVITY_SNAPSHOT\",\n  ACTIVITY_DELTA = \"ACTIVITY_DELTA\",\n  RAW = \"RAW\",\n  CUSTOM = \"CUSTOM\",\n  RUN_STARTED = \"RUN_STARTED\",\n  RUN_FINISHED = \"RUN_FINISHED\",\n  RUN_ERROR = \"RUN_ERROR\",\n  STEP_STARTED = \"STEP_STARTED\",\n  STEP_FINISHED = \"STEP_FINISHED\",\n}\n\nexport const BaseEventSchema = z.object({\n  type: z.nativeEnum(EventType),\n  timestamp: z.number().optional(),\n  rawEvent: z.any().optional(),\n});\n\nexport const TextMessageStartEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TEXT_MESSAGE_START),\n  messageId: z.string(),\n  role: TextMessageRoleSchema.default(\"assistant\"),\n});\n\nexport const TextMessageContentEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TEXT_MESSAGE_CONTENT),\n  messageId: z.string(),\n  delta: z.string().refine((s) => s.length > 0, \"Delta must not be an empty string\"),\n});\n\nexport const TextMessageEndEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TEXT_MESSAGE_END),\n  messageId: z.string(),\n});\n\nexport const TextMessageChunkEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TEXT_MESSAGE_CHUNK),\n  messageId: z.string().optional(),\n  role: TextMessageRoleSchema.optional(),\n  delta: z.string().optional(),\n});\n\nexport const ThinkingTextMessageStartEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.THINKING_TEXT_MESSAGE_START),\n});\n\nexport const ThinkingTextMessageContentEventSchema = TextMessageContentEventSchema.omit({\n  messageId: true,\n  type: true,\n}).extend({\n  type: z.literal(EventType.THINKING_TEXT_MESSAGE_CONTENT),\n});\n\nexport const ThinkingTextMessageEndEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.THINKING_TEXT_MESSAGE_END),\n});\n\nexport const ToolCallStartEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TOOL_CALL_START),\n  toolCallId: z.string(),\n  toolCallName: z.string(),\n  parentMessageId: z.string().optional(),\n});\n\nexport const ToolCallArgsEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TOOL_CALL_ARGS),\n  toolCallId: z.string(),\n  delta: z.string(),\n});\n\nexport const ToolCallEndEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TOOL_CALL_END),\n  toolCallId: z.string(),\n});\n\nexport const ToolCallResultEventSchema = BaseEventSchema.extend({\n  messageId: z.string(),\n  type: z.literal(EventType.TOOL_CALL_RESULT),\n  toolCallId: z.string(),\n  content: z.string(),\n  role: z.literal(\"tool\").optional(),\n});\n\nexport const ToolCallChunkEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.TOOL_CALL_CHUNK),\n  toolCallId: z.string().optional(),\n  toolCallName: z.string().optional(),\n  parentMessageId: z.string().optional(),\n  delta: z.string().optional(),\n});\n\nexport const ThinkingStartEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.THINKING_START),\n  title: z.string().optional(),\n});\n\nexport const ThinkingEndEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.THINKING_END),\n});\n\nexport const StateSnapshotEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.STATE_SNAPSHOT),\n  snapshot: StateSchema,\n});\n\nexport const StateDeltaEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.STATE_DELTA),\n  delta: z.array(z.any()), // JSON Patch (RFC 6902)\n});\n\nexport const MessagesSnapshotEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.MESSAGES_SNAPSHOT),\n  messages: z.array(MessageSchema),\n});\n\nexport const ActivitySnapshotEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.ACTIVITY_SNAPSHOT),\n  messageId: z.string(),\n  activityType: z.string(),\n  content: z.record(z.any()),\n  replace: z.boolean().optional().default(true),\n});\n\nexport const ActivityDeltaEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.ACTIVITY_DELTA),\n  messageId: z.string(),\n  activityType: z.string(),\n  patch: z.array(z.any()),\n});\n\nexport const RawEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.RAW),\n  event: z.any(),\n  source: z.string().optional(),\n});\n\nexport const CustomEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.CUSTOM),\n  name: z.string(),\n  value: z.any(),\n});\n\nexport const RunStartedEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.RUN_STARTED),\n  threadId: z.string(),\n  runId: z.string(),\n  parentRunId: z.string().optional(),\n  input: RunAgentInputSchema.optional(),\n});\n\nexport const RunFinishedEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.RUN_FINISHED),\n  threadId: z.string(),\n  runId: z.string(),\n  result: z.any().optional(),\n});\n\nexport const RunErrorEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.RUN_ERROR),\n  message: z.string(),\n  code: z.string().optional(),\n});\n\nexport const StepStartedEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.STEP_STARTED),\n  stepName: z.string(),\n});\n\nexport const StepFinishedEventSchema = BaseEventSchema.extend({\n  type: z.literal(EventType.STEP_FINISHED),\n  stepName: z.string(),\n});\n\nexport const EventSchemas = z.discriminatedUnion(\"type\", [\n  TextMessageStartEventSchema,\n  TextMessageContentEventSchema,\n  TextMessageEndEventSchema,\n  TextMessageChunkEventSchema,\n  ThinkingStartEventSchema,\n  ThinkingEndEventSchema,\n  ThinkingTextMessageStartEventSchema,\n  ThinkingTextMessageContentEventSchema,\n  ThinkingTextMessageEndEventSchema,\n  ToolCallStartEventSchema,\n  ToolCallArgsEventSchema,\n  ToolCallEndEventSchema,\n  ToolCallChunkEventSchema,\n  ToolCallResultEventSchema,\n  StateSnapshotEventSchema,\n  StateDeltaEventSchema,\n  MessagesSnapshotEventSchema,\n  ActivitySnapshotEventSchema,\n  ActivityDeltaEventSchema,\n  RawEventSchema,\n  CustomEventSchema,\n  RunStartedEventSchema,\n  RunFinishedEventSchema,\n  RunErrorEventSchema,\n  StepStartedEventSchema,\n  StepFinishedEventSchema,\n]);\n\nexport type BaseEvent = z.infer<typeof BaseEventSchema>;\nexport type TextMessageStartEvent = z.infer<typeof TextMessageStartEventSchema>;\nexport type TextMessageContentEvent = z.infer<typeof TextMessageContentEventSchema>;\nexport type TextMessageEndEvent = z.infer<typeof TextMessageEndEventSchema>;\nexport type TextMessageChunkEvent = z.infer<typeof TextMessageChunkEventSchema>;\nexport type ThinkingTextMessageStartEvent = z.infer<typeof ThinkingTextMessageStartEventSchema>;\nexport type ThinkingTextMessageContentEvent = z.infer<typeof ThinkingTextMessageContentEventSchema>;\nexport type ThinkingTextMessageEndEvent = z.infer<typeof ThinkingTextMessageEndEventSchema>;\nexport type ToolCallStartEvent = z.infer<typeof ToolCallStartEventSchema>;\nexport type ToolCallArgsEvent = z.infer<typeof ToolCallArgsEventSchema>;\nexport type ToolCallEndEvent = z.infer<typeof ToolCallEndEventSchema>;\nexport type ToolCallChunkEvent = z.infer<typeof ToolCallChunkEventSchema>;\nexport type ToolCallResultEvent = z.infer<typeof ToolCallResultEventSchema>;\nexport type ThinkingStartEvent = z.infer<typeof ThinkingStartEventSchema>;\nexport type ThinkingEndEvent = z.infer<typeof ThinkingEndEventSchema>;\nexport type StateSnapshotEvent = z.infer<typeof StateSnapshotEventSchema>;\nexport type StateDeltaEvent = z.infer<typeof StateDeltaEventSchema>;\nexport type MessagesSnapshotEvent = z.infer<typeof MessagesSnapshotEventSchema>;\nexport type ActivitySnapshotEvent = z.infer<typeof ActivitySnapshotEventSchema>;\nexport type ActivityDeltaEvent = z.infer<typeof ActivityDeltaEventSchema>;\nexport type RawEvent = z.infer<typeof RawEventSchema>;\nexport type CustomEvent = z.infer<typeof CustomEventSchema>;\nexport type RunStartedEvent = z.infer<typeof RunStartedEventSchema>;\nexport type RunFinishedEvent = z.infer<typeof RunFinishedEventSchema>;\nexport type RunErrorEvent = z.infer<typeof RunErrorEventSchema>;\nexport type StepStartedEvent = z.infer<typeof StepStartedEventSchema>;\nexport type StepFinishedEvent = z.infer<typeof StepFinishedEventSchema>;\n"],"names":["z","z","EventType"],"mappings":"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"}},
    {"offset": {"line": 450, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/uuid/dist/esm/native.js"],"sourcesContent":["import { randomUUID } from 'crypto';\nexport default { randomUUID };\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,YAAA,mHAAU;AAAC","ignoreList":[0]}},
    {"offset": {"line": 463, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/uuid/dist/esm/rng.js"],"sourcesContent":["import { randomFillSync } from 'crypto';\nconst rnds8Pool = new Uint8Array(256);\nlet poolPtr = rnds8Pool.length;\nexport default function rng() {\n    if (poolPtr > rnds8Pool.length - 16) {\n        randomFillSync(rnds8Pool);\n        poolPtr = 0;\n    }\n    return rnds8Pool.slice(poolPtr, (poolPtr += 16));\n}\n"],"names":[],"mappings":";;;;AAAA;;AACA,MAAM,YAAY,IAAI,WAAW;AACjC,IAAI,UAAU,UAAU,MAAM;AACf,SAAS;IACpB,IAAI,UAAU,UAAU,MAAM,GAAG,IAAI;QACjC,IAAA,uHAAc,EAAC;QACf,UAAU;IACd;IACA,OAAO,UAAU,KAAK,CAAC,SAAU,WAAW;AAChD","ignoreList":[0]}},
    {"offset": {"line": 482, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/uuid/dist/esm/regex.js"],"sourcesContent":["export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;\n"],"names":[],"mappings":";;;;uCAAe","ignoreList":[0]}},
    {"offset": {"line": 491, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/uuid/dist/esm/validate.js"],"sourcesContent":["import REGEX from './regex.js';\nfunction validate(uuid) {\n    return typeof uuid === 'string' && REGEX.test(uuid);\n}\nexport default validate;\n"],"names":[],"mappings":";;;;AAAA;;AACA,SAAS,SAAS,IAAI;IAClB,OAAO,OAAO,SAAS,YAAY,yJAAK,CAAC,IAAI,CAAC;AAClD;uCACe","ignoreList":[0]}},
    {"offset": {"line": 505, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/uuid/dist/esm/stringify.js"],"sourcesContent":["import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n"],"names":[],"mappings":";;;;;;AAAA;;AACA,MAAM,YAAY,EAAE;AACpB,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,EAAE,EAAG;IAC1B,UAAU,IAAI,CAAC,CAAC,IAAI,KAAK,EAAE,QAAQ,CAAC,IAAI,KAAK,CAAC;AAClD;AACO,SAAS,gBAAgB,GAAG,EAAE,SAAS,CAAC;IAC3C,OAAO,CAAC,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC9B,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,MACA,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,MACA,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,MACA,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,SAAS,CAAC,GAAG,CAAC,SAAS,EAAE,CAAC,GAC1B,MACA,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,GAC3B,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,GAC3B,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,GAC3B,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,GAC3B,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,GAC3B,SAAS,CAAC,GAAG,CAAC,SAAS,GAAG,CAAC,EAAE,WAAW;AAChD;AACA,SAAS,UAAU,GAAG,EAAE,SAAS,CAAC;IAC9B,MAAM,OAAO,gBAAgB,KAAK;IAClC,IAAI,CAAC,IAAA,4JAAQ,EAAC,OAAO;QACjB,MAAM,UAAU;IACpB;IACA,OAAO;AACX;uCACe","ignoreList":[0]}},
    {"offset": {"line": 532, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/uuid/dist/esm/v4.js"],"sourcesContent":["import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AACA,SAAS,GAAG,OAAO,EAAE,GAAG,EAAE,MAAM;IAC5B,IAAI,0JAAM,CAAC,UAAU,IAAI,CAAC,OAAO,CAAC,SAAS;QACvC,OAAO,0JAAM,CAAC,UAAU;IAC5B;IACA,UAAU,WAAW,CAAC;IACtB,MAAM,OAAO,QAAQ,MAAM,IAAI,QAAQ,GAAG,QAAQ,IAAA,uJAAG;IACrD,IAAI,KAAK,MAAM,GAAG,IAAI;QAClB,MAAM,IAAI,MAAM;IACpB;IACA,IAAI,CAAC,EAAE,GAAG,AAAC,IAAI,CAAC,EAAE,GAAG,OAAQ;IAC7B,IAAI,CAAC,EAAE,GAAG,AAAC,IAAI,CAAC,EAAE,GAAG,OAAQ;IAC7B,IAAI,KAAK;QACL,SAAS,UAAU;QACnB,IAAI,SAAS,KAAK,SAAS,KAAK,IAAI,MAAM,EAAE;YACxC,MAAM,IAAI,WAAW,CAAC,gBAAgB,EAAE,OAAO,CAAC,EAAE,SAAS,GAAG,wBAAwB,CAAC;QAC3F;QACA,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,EAAE,EAAG;YACzB,GAAG,CAAC,SAAS,EAAE,GAAG,IAAI,CAAC,EAAE;QAC7B;QACA,OAAO;IACX;IACA,OAAO,IAAA,qKAAe,EAAC;AAC3B;uCACe","ignoreList":[0]}},
    {"offset": {"line": 579, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/fast-json-patch/module/helpers.mjs"],"sourcesContent":["/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2017-2022 Joachim Wester\n * MIT licensed\n */\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar _hasOwnProperty = Object.prototype.hasOwnProperty;\nexport function hasOwnProperty(obj, key) {\n    return _hasOwnProperty.call(obj, key);\n}\nexport function _objectKeys(obj) {\n    if (Array.isArray(obj)) {\n        var keys_1 = new Array(obj.length);\n        for (var k = 0; k < keys_1.length; k++) {\n            keys_1[k] = \"\" + k;\n        }\n        return keys_1;\n    }\n    if (Object.keys) {\n        return Object.keys(obj);\n    }\n    var keys = [];\n    for (var i in obj) {\n        if (hasOwnProperty(obj, i)) {\n            keys.push(i);\n        }\n    }\n    return keys;\n}\n;\n/**\n* Deeply clone the object.\n* https://jsperf.com/deep-copy-vs-json-stringify-json-parse/25 (recursiveDeepCopy)\n* @param  {any} obj value to clone\n* @return {any} cloned obj\n*/\nexport function _deepClone(obj) {\n    switch (typeof obj) {\n        case \"object\":\n            return JSON.parse(JSON.stringify(obj)); //Faster than ES5 clone - http://jsperf.com/deep-cloning-of-objects/5\n        case \"undefined\":\n            return null; //this is how JSON.stringify behaves for array items\n        default:\n            return obj; //no need to clone primitives\n    }\n}\n//3x faster than cached /^\\d+$/.test(str)\nexport function isInteger(str) {\n    var i = 0;\n    var len = str.length;\n    var charCode;\n    while (i < len) {\n        charCode = str.charCodeAt(i);\n        if (charCode >= 48 && charCode <= 57) {\n            i++;\n            continue;\n        }\n        return false;\n    }\n    return true;\n}\n/**\n* Escapes a json pointer path\n* @param path The raw pointer\n* @return the Escaped path\n*/\nexport function escapePathComponent(path) {\n    if (path.indexOf('/') === -1 && path.indexOf('~') === -1)\n        return path;\n    return path.replace(/~/g, '~0').replace(/\\//g, '~1');\n}\n/**\n * Unescapes a json pointer path\n * @param path The escaped pointer\n * @return The unescaped path\n */\nexport function unescapePathComponent(path) {\n    return path.replace(/~1/g, '/').replace(/~0/g, '~');\n}\nexport function _getPathRecursive(root, obj) {\n    var found;\n    for (var key in root) {\n        if (hasOwnProperty(root, key)) {\n            if (root[key] === obj) {\n                return escapePathComponent(key) + '/';\n            }\n            else if (typeof root[key] === 'object') {\n                found = _getPathRecursive(root[key], obj);\n                if (found != '') {\n                    return escapePathComponent(key) + '/' + found;\n                }\n            }\n        }\n    }\n    return '';\n}\nexport function getPath(root, obj) {\n    if (root === obj) {\n        return '/';\n    }\n    var path = _getPathRecursive(root, obj);\n    if (path === '') {\n        throw new Error(\"Object not found in root\");\n    }\n    return \"/\" + path;\n}\n/**\n* Recursively checks whether an object has any undefined values inside.\n*/\nexport function hasUndefined(obj) {\n    if (obj === undefined) {\n        return true;\n    }\n    if (obj) {\n        if (Array.isArray(obj)) {\n            for (var i_1 = 0, len = obj.length; i_1 < len; i_1++) {\n                if (hasUndefined(obj[i_1])) {\n                    return true;\n                }\n            }\n        }\n        else if (typeof obj === \"object\") {\n            var objKeys = _objectKeys(obj);\n            var objKeysLength = objKeys.length;\n            for (var i = 0; i < objKeysLength; i++) {\n                if (hasUndefined(obj[objKeys[i]])) {\n                    return true;\n                }\n            }\n        }\n    }\n    return false;\n}\nfunction patchErrorMessageFormatter(message, args) {\n    var messageParts = [message];\n    for (var key in args) {\n        var value = typeof args[key] === 'object' ? JSON.stringify(args[key], null, 2) : args[key]; // pretty print\n        if (typeof value !== 'undefined') {\n            messageParts.push(key + \": \" + value);\n        }\n    }\n    return messageParts.join('\\n');\n}\nvar PatchError = /** @class */ (function (_super) {\n    __extends(PatchError, _super);\n    function PatchError(message, name, index, operation, tree) {\n        var _newTarget = this.constructor;\n        var _this = _super.call(this, patchErrorMessageFormatter(message, { name: name, index: index, operation: operation, tree: tree })) || this;\n        _this.name = name;\n        _this.index = index;\n        _this.operation = operation;\n        _this.tree = tree;\n        Object.setPrototypeOf(_this, _newTarget.prototype); // restore prototype chain, see https://stackoverflow.com/a/48342359\n        _this.message = patchErrorMessageFormatter(message, { name: name, index: index, operation: operation, tree: tree });\n        return _this;\n    }\n    return PatchError;\n}(Error));\nexport { PatchError };\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 770, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/fast-json-patch/module/core.mjs"],"sourcesContent":["import { PatchError, _deepClone, isInteger, unescapePathComponent, hasUndefined } from './helpers.mjs';\nexport var JsonPatchError = PatchError;\nexport var deepClone = _deepClone;\n/* We use a Javascript hash to store each\n function. Each hash entry (property) uses\n the operation identifiers specified in rfc6902.\n In this way, we can map each patch operation\n to its dedicated function in efficient way.\n */\n/* The operations applicable to an object */\nvar objOps = {\n    add: function (obj, key, document) {\n        obj[key] = this.value;\n        return { newDocument: document };\n    },\n    remove: function (obj, key, document) {\n        var removed = obj[key];\n        delete obj[key];\n        return { newDocument: document, removed: removed };\n    },\n    replace: function (obj, key, document) {\n        var removed = obj[key];\n        obj[key] = this.value;\n        return { newDocument: document, removed: removed };\n    },\n    move: function (obj, key, document) {\n        /* in case move target overwrites an existing value,\n        return the removed value, this can be taxing performance-wise,\n        and is potentially unneeded */\n        var removed = getValueByPointer(document, this.path);\n        if (removed) {\n            removed = _deepClone(removed);\n        }\n        var originalValue = applyOperation(document, { op: \"remove\", path: this.from }).removed;\n        applyOperation(document, { op: \"add\", path: this.path, value: originalValue });\n        return { newDocument: document, removed: removed };\n    },\n    copy: function (obj, key, document) {\n        var valueToCopy = getValueByPointer(document, this.from);\n        // enforce copy by value so further operations don't affect source (see issue #177)\n        applyOperation(document, { op: \"add\", path: this.path, value: _deepClone(valueToCopy) });\n        return { newDocument: document };\n    },\n    test: function (obj, key, document) {\n        return { newDocument: document, test: _areEquals(obj[key], this.value) };\n    },\n    _get: function (obj, key, document) {\n        this.value = obj[key];\n        return { newDocument: document };\n    }\n};\n/* The operations applicable to an array. Many are the same as for the object */\nvar arrOps = {\n    add: function (arr, i, document) {\n        if (isInteger(i)) {\n            arr.splice(i, 0, this.value);\n        }\n        else { // array props\n            arr[i] = this.value;\n        }\n        // this may be needed when using '-' in an array\n        return { newDocument: document, index: i };\n    },\n    remove: function (arr, i, document) {\n        var removedList = arr.splice(i, 1);\n        return { newDocument: document, removed: removedList[0] };\n    },\n    replace: function (arr, i, document) {\n        var removed = arr[i];\n        arr[i] = this.value;\n        return { newDocument: document, removed: removed };\n    },\n    move: objOps.move,\n    copy: objOps.copy,\n    test: objOps.test,\n    _get: objOps._get\n};\n/**\n * Retrieves a value from a JSON document by a JSON pointer.\n * Returns the value.\n *\n * @param document The document to get the value from\n * @param pointer an escaped JSON pointer\n * @return The retrieved value\n */\nexport function getValueByPointer(document, pointer) {\n    if (pointer == '') {\n        return document;\n    }\n    var getOriginalDestination = { op: \"_get\", path: pointer };\n    applyOperation(document, getOriginalDestination);\n    return getOriginalDestination.value;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the {newDocument, result} of the operation.\n * It modifies the `document` and `operation` objects - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyOperation(document, jsonpatch._deepClone(operation))`.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return `{newDocument, result}` after the operation\n */\nexport function applyOperation(document, operation, validateOperation, mutateDocument, banPrototypeModifications, index) {\n    if (validateOperation === void 0) { validateOperation = false; }\n    if (mutateDocument === void 0) { mutateDocument = true; }\n    if (banPrototypeModifications === void 0) { banPrototypeModifications = true; }\n    if (index === void 0) { index = 0; }\n    if (validateOperation) {\n        if (typeof validateOperation == 'function') {\n            validateOperation(operation, 0, document, operation.path);\n        }\n        else {\n            validator(operation, 0);\n        }\n    }\n    /* ROOT OPERATIONS */\n    if (operation.path === \"\") {\n        var returnValue = { newDocument: document };\n        if (operation.op === 'add') {\n            returnValue.newDocument = operation.value;\n            return returnValue;\n        }\n        else if (operation.op === 'replace') {\n            returnValue.newDocument = operation.value;\n            returnValue.removed = document; //document we removed\n            return returnValue;\n        }\n        else if (operation.op === 'move' || operation.op === 'copy') { // it's a move or copy to root\n            returnValue.newDocument = getValueByPointer(document, operation.from); // get the value by json-pointer in `from` field\n            if (operation.op === 'move') { // report removed item\n                returnValue.removed = document;\n            }\n            return returnValue;\n        }\n        else if (operation.op === 'test') {\n            returnValue.test = _areEquals(document, operation.value);\n            if (returnValue.test === false) {\n                throw new JsonPatchError(\"Test operation failed\", 'TEST_OPERATION_FAILED', index, operation, document);\n            }\n            returnValue.newDocument = document;\n            return returnValue;\n        }\n        else if (operation.op === 'remove') { // a remove on root\n            returnValue.removed = document;\n            returnValue.newDocument = null;\n            return returnValue;\n        }\n        else if (operation.op === '_get') {\n            operation.value = document;\n            return returnValue;\n        }\n        else { /* bad operation */\n            if (validateOperation) {\n                throw new JsonPatchError('Operation `op` property is not one of operations defined in RFC-6902', 'OPERATION_OP_INVALID', index, operation, document);\n            }\n            else {\n                return returnValue;\n            }\n        }\n    } /* END ROOT OPERATIONS */\n    else {\n        if (!mutateDocument) {\n            document = _deepClone(document);\n        }\n        var path = operation.path || \"\";\n        var keys = path.split('/');\n        var obj = document;\n        var t = 1; //skip empty element - http://jsperf.com/to-shift-or-not-to-shift\n        var len = keys.length;\n        var existingPathFragment = undefined;\n        var key = void 0;\n        var validateFunction = void 0;\n        if (typeof validateOperation == 'function') {\n            validateFunction = validateOperation;\n        }\n        else {\n            validateFunction = validator;\n        }\n        while (true) {\n            key = keys[t];\n            if (key && key.indexOf('~') != -1) {\n                key = unescapePathComponent(key);\n            }\n            if (banPrototypeModifications &&\n                (key == '__proto__' ||\n                    (key == 'prototype' && t > 0 && keys[t - 1] == 'constructor'))) {\n                throw new TypeError('JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README');\n            }\n            if (validateOperation) {\n                if (existingPathFragment === undefined) {\n                    if (obj[key] === undefined) {\n                        existingPathFragment = keys.slice(0, t).join('/');\n                    }\n                    else if (t == len - 1) {\n                        existingPathFragment = operation.path;\n                    }\n                    if (existingPathFragment !== undefined) {\n                        validateFunction(operation, 0, document, existingPathFragment);\n                    }\n                }\n            }\n            t++;\n            if (Array.isArray(obj)) {\n                if (key === '-') {\n                    key = obj.length;\n                }\n                else {\n                    if (validateOperation && !isInteger(key)) {\n                        throw new JsonPatchError(\"Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index\", \"OPERATION_PATH_ILLEGAL_ARRAY_INDEX\", index, operation, document);\n                    } // only parse key when it's an integer for `arr.prop` to work\n                    else if (isInteger(key)) {\n                        key = ~~key;\n                    }\n                }\n                if (t >= len) {\n                    if (validateOperation && operation.op === \"add\" && key > obj.length) {\n                        throw new JsonPatchError(\"The specified index MUST NOT be greater than the number of elements in the array\", \"OPERATION_VALUE_OUT_OF_BOUNDS\", index, operation, document);\n                    }\n                    var returnValue = arrOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", 'TEST_OPERATION_FAILED', index, operation, document);\n                    }\n                    return returnValue;\n                }\n            }\n            else {\n                if (t >= len) {\n                    var returnValue = objOps[operation.op].call(operation, obj, key, document); // Apply patch\n                    if (returnValue.test === false) {\n                        throw new JsonPatchError(\"Test operation failed\", 'TEST_OPERATION_FAILED', index, operation, document);\n                    }\n                    return returnValue;\n                }\n            }\n            obj = obj[key];\n            // If we have more keys in the path, but the next value isn't a non-null object,\n            // throw an OPERATION_PATH_UNRESOLVABLE error instead of iterating again.\n            if (validateOperation && t < len && (!obj || typeof obj !== \"object\")) {\n                throw new JsonPatchError('Cannot perform operation at the desired path', 'OPERATION_PATH_UNRESOLVABLE', index, operation, document);\n            }\n        }\n    }\n}\n/**\n * Apply a full JSON Patch array on a JSON document.\n * Returns the {newDocument, result} of the patch.\n * It modifies the `document` object and `patch` - it gets the values by reference.\n * If you would like to avoid touching your values, clone them:\n * `jsonpatch.applyPatch(document, jsonpatch._deepClone(patch))`.\n *\n * @param document The document to patch\n * @param patch The patch to apply\n * @param validateOperation `false` is without validation, `true` to use default jsonpatch's validation, or you can pass a `validateOperation` callback to be used for validation.\n * @param mutateDocument Whether to mutate the original document or clone it before applying\n * @param banPrototypeModifications Whether to ban modifications to `__proto__`, defaults to `true`.\n * @return An array of `{newDocument, result}` after the patch\n */\nexport function applyPatch(document, patch, validateOperation, mutateDocument, banPrototypeModifications) {\n    if (mutateDocument === void 0) { mutateDocument = true; }\n    if (banPrototypeModifications === void 0) { banPrototypeModifications = true; }\n    if (validateOperation) {\n        if (!Array.isArray(patch)) {\n            throw new JsonPatchError('Patch sequence must be an array', 'SEQUENCE_NOT_AN_ARRAY');\n        }\n    }\n    if (!mutateDocument) {\n        document = _deepClone(document);\n    }\n    var results = new Array(patch.length);\n    for (var i = 0, length_1 = patch.length; i < length_1; i++) {\n        // we don't need to pass mutateDocument argument because if it was true, we already deep cloned the object, we'll just pass `true`\n        results[i] = applyOperation(document, patch[i], validateOperation, true, banPrototypeModifications, i);\n        document = results[i].newDocument; // in case root was replaced\n    }\n    results.newDocument = document;\n    return results;\n}\n/**\n * Apply a single JSON Patch Operation on a JSON document.\n * Returns the updated document.\n * Suitable as a reducer.\n *\n * @param document The document to patch\n * @param operation The operation to apply\n * @return The updated document\n */\nexport function applyReducer(document, operation, index) {\n    var operationResult = applyOperation(document, operation);\n    if (operationResult.test === false) { // failed test\n        throw new JsonPatchError(\"Test operation failed\", 'TEST_OPERATION_FAILED', index, operation, document);\n    }\n    return operationResult.newDocument;\n}\n/**\n * Validates a single operation. Called from `jsonpatch.validate`. Throws `JsonPatchError` in case of an error.\n * @param {object} operation - operation object (patch)\n * @param {number} index - index of operation in the sequence\n * @param {object} [document] - object where the operation is supposed to be applied\n * @param {string} [existingPathFragment] - comes along with `document`\n */\nexport function validator(operation, index, document, existingPathFragment) {\n    if (typeof operation !== 'object' || operation === null || Array.isArray(operation)) {\n        throw new JsonPatchError('Operation is not an object', 'OPERATION_NOT_AN_OBJECT', index, operation, document);\n    }\n    else if (!objOps[operation.op]) {\n        throw new JsonPatchError('Operation `op` property is not one of operations defined in RFC-6902', 'OPERATION_OP_INVALID', index, operation, document);\n    }\n    else if (typeof operation.path !== 'string') {\n        throw new JsonPatchError('Operation `path` property is not a string', 'OPERATION_PATH_INVALID', index, operation, document);\n    }\n    else if (operation.path.indexOf('/') !== 0 && operation.path.length > 0) {\n        // paths that aren't empty string should start with \"/\"\n        throw new JsonPatchError('Operation `path` property must start with \"/\"', 'OPERATION_PATH_INVALID', index, operation, document);\n    }\n    else if ((operation.op === 'move' || operation.op === 'copy') && typeof operation.from !== 'string') {\n        throw new JsonPatchError('Operation `from` property is not present (applicable in `move` and `copy` operations)', 'OPERATION_FROM_REQUIRED', index, operation, document);\n    }\n    else if ((operation.op === 'add' || operation.op === 'replace' || operation.op === 'test') && operation.value === undefined) {\n        throw new JsonPatchError('Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)', 'OPERATION_VALUE_REQUIRED', index, operation, document);\n    }\n    else if ((operation.op === 'add' || operation.op === 'replace' || operation.op === 'test') && hasUndefined(operation.value)) {\n        throw new JsonPatchError('Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)', 'OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED', index, operation, document);\n    }\n    else if (document) {\n        if (operation.op == \"add\") {\n            var pathLen = operation.path.split(\"/\").length;\n            var existingPathLen = existingPathFragment.split(\"/\").length;\n            if (pathLen !== existingPathLen + 1 && pathLen !== existingPathLen) {\n                throw new JsonPatchError('Cannot perform an `add` operation at the desired path', 'OPERATION_PATH_CANNOT_ADD', index, operation, document);\n            }\n        }\n        else if (operation.op === 'replace' || operation.op === 'remove' || operation.op === '_get') {\n            if (operation.path !== existingPathFragment) {\n                throw new JsonPatchError('Cannot perform the operation at a path that does not exist', 'OPERATION_PATH_UNRESOLVABLE', index, operation, document);\n            }\n        }\n        else if (operation.op === 'move' || operation.op === 'copy') {\n            var existingValue = { op: \"_get\", path: operation.from, value: undefined };\n            var error = validate([existingValue], document);\n            if (error && error.name === 'OPERATION_PATH_UNRESOLVABLE') {\n                throw new JsonPatchError('Cannot perform the operation from a path that does not exist', 'OPERATION_FROM_UNRESOLVABLE', index, operation, document);\n            }\n        }\n    }\n}\n/**\n * Validates a sequence of operations. If `document` parameter is provided, the sequence is additionally validated against the object document.\n * If error is encountered, returns a JsonPatchError object\n * @param sequence\n * @param document\n * @returns {JsonPatchError|undefined}\n */\nexport function validate(sequence, document, externalValidator) {\n    try {\n        if (!Array.isArray(sequence)) {\n            throw new JsonPatchError('Patch sequence must be an array', 'SEQUENCE_NOT_AN_ARRAY');\n        }\n        if (document) {\n            //clone document and sequence so that we can safely try applying operations\n            applyPatch(_deepClone(document), _deepClone(sequence), externalValidator || true);\n        }\n        else {\n            externalValidator = externalValidator || validator;\n            for (var i = 0; i < sequence.length; i++) {\n                externalValidator(sequence[i], i, document, undefined);\n            }\n        }\n    }\n    catch (e) {\n        if (e instanceof JsonPatchError) {\n            return e;\n        }\n        else {\n            throw e;\n        }\n    }\n}\n// based on https://github.com/epoberezkin/fast-deep-equal\n// MIT License\n// Copyright (c) 2017 Evgeny Poberezkin\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n// The above copyright notice and this permission notice shall be included in all\n// copies or substantial portions of the Software.\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n// SOFTWARE.\nexport function _areEquals(a, b) {\n    if (a === b)\n        return true;\n    if (a && b && typeof a == 'object' && typeof b == 'object') {\n        var arrA = Array.isArray(a), arrB = Array.isArray(b), i, length, key;\n        if (arrA && arrB) {\n            length = a.length;\n            if (length != b.length)\n                return false;\n            for (i = length; i-- !== 0;)\n                if (!_areEquals(a[i], b[i]))\n                    return false;\n            return true;\n        }\n        if (arrA != arrB)\n            return false;\n        var keys = Object.keys(a);\n        length = keys.length;\n        if (length !== Object.keys(b).length)\n            return false;\n        for (i = length; i-- !== 0;)\n            if (!b.hasOwnProperty(keys[i]))\n                return false;\n        for (i = length; i-- !== 0;) {\n            key = keys[i];\n            if (!_areEquals(a[key], b[key]))\n                return false;\n        }\n        return true;\n    }\n    return a !== a && b !== b;\n}\n;\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1169, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/fast-json-patch/module/duplex.mjs"],"sourcesContent":["/*!\n * https://github.com/Starcounter-Jack/JSON-Patch\n * (c) 2017-2021 Joachim Wester\n * MIT license\n */\nimport { _deepClone, _objectKeys, escapePathComponent, hasOwnProperty } from './helpers.mjs';\nimport { applyPatch } from './core.mjs';\nvar beforeDict = new WeakMap();\nvar Mirror = /** @class */ (function () {\n    function Mirror(obj) {\n        this.observers = new Map();\n        this.obj = obj;\n    }\n    return Mirror;\n}());\nvar ObserverInfo = /** @class */ (function () {\n    function ObserverInfo(callback, observer) {\n        this.callback = callback;\n        this.observer = observer;\n    }\n    return ObserverInfo;\n}());\nfunction getMirror(obj) {\n    return beforeDict.get(obj);\n}\nfunction getObserverFromMirror(mirror, callback) {\n    return mirror.observers.get(callback);\n}\nfunction removeObserverFromMirror(mirror, observer) {\n    mirror.observers.delete(observer.callback);\n}\n/**\n * Detach an observer from an object\n */\nexport function unobserve(root, observer) {\n    observer.unobserve();\n}\n/**\n * Observes changes made to an object, which can then be retrieved using generate\n */\nexport function observe(obj, callback) {\n    var patches = [];\n    var observer;\n    var mirror = getMirror(obj);\n    if (!mirror) {\n        mirror = new Mirror(obj);\n        beforeDict.set(obj, mirror);\n    }\n    else {\n        var observerInfo = getObserverFromMirror(mirror, callback);\n        observer = observerInfo && observerInfo.observer;\n    }\n    if (observer) {\n        return observer;\n    }\n    observer = {};\n    mirror.value = _deepClone(obj);\n    if (callback) {\n        observer.callback = callback;\n        observer.next = null;\n        var dirtyCheck = function () {\n            generate(observer);\n        };\n        var fastCheck = function () {\n            clearTimeout(observer.next);\n            observer.next = setTimeout(dirtyCheck);\n        };\n        if (typeof window !== 'undefined') { //not Node\n            window.addEventListener('mouseup', fastCheck);\n            window.addEventListener('keyup', fastCheck);\n            window.addEventListener('mousedown', fastCheck);\n            window.addEventListener('keydown', fastCheck);\n            window.addEventListener('change', fastCheck);\n        }\n    }\n    observer.patches = patches;\n    observer.object = obj;\n    observer.unobserve = function () {\n        generate(observer);\n        clearTimeout(observer.next);\n        removeObserverFromMirror(mirror, observer);\n        if (typeof window !== 'undefined') {\n            window.removeEventListener('mouseup', fastCheck);\n            window.removeEventListener('keyup', fastCheck);\n            window.removeEventListener('mousedown', fastCheck);\n            window.removeEventListener('keydown', fastCheck);\n            window.removeEventListener('change', fastCheck);\n        }\n    };\n    mirror.observers.set(callback, new ObserverInfo(callback, observer));\n    return observer;\n}\n/**\n * Generate an array of patches from an observer\n */\nexport function generate(observer, invertible) {\n    if (invertible === void 0) { invertible = false; }\n    var mirror = beforeDict.get(observer.object);\n    _generate(mirror.value, observer.object, observer.patches, \"\", invertible);\n    if (observer.patches.length) {\n        applyPatch(mirror.value, observer.patches);\n    }\n    var temp = observer.patches;\n    if (temp.length > 0) {\n        observer.patches = [];\n        if (observer.callback) {\n            observer.callback(temp);\n        }\n    }\n    return temp;\n}\n// Dirty check if obj is different from mirror, generate patches and update mirror\nfunction _generate(mirror, obj, patches, path, invertible) {\n    if (obj === mirror) {\n        return;\n    }\n    if (typeof obj.toJSON === \"function\") {\n        obj = obj.toJSON();\n    }\n    var newKeys = _objectKeys(obj);\n    var oldKeys = _objectKeys(mirror);\n    var changed = false;\n    var deleted = false;\n    //if ever \"move\" operation is implemented here, make sure this test runs OK: \"should not generate the same patch twice (move)\"\n    for (var t = oldKeys.length - 1; t >= 0; t--) {\n        var key = oldKeys[t];\n        var oldVal = mirror[key];\n        if (hasOwnProperty(obj, key) && !(obj[key] === undefined && oldVal !== undefined && Array.isArray(obj) === false)) {\n            var newVal = obj[key];\n            if (typeof oldVal == \"object\" && oldVal != null && typeof newVal == \"object\" && newVal != null && Array.isArray(oldVal) === Array.isArray(newVal)) {\n                _generate(oldVal, newVal, patches, path + \"/\" + escapePathComponent(key), invertible);\n            }\n            else {\n                if (oldVal !== newVal) {\n                    changed = true;\n                    if (invertible) {\n                        patches.push({ op: \"test\", path: path + \"/\" + escapePathComponent(key), value: _deepClone(oldVal) });\n                    }\n                    patches.push({ op: \"replace\", path: path + \"/\" + escapePathComponent(key), value: _deepClone(newVal) });\n                }\n            }\n        }\n        else if (Array.isArray(mirror) === Array.isArray(obj)) {\n            if (invertible) {\n                patches.push({ op: \"test\", path: path + \"/\" + escapePathComponent(key), value: _deepClone(oldVal) });\n            }\n            patches.push({ op: \"remove\", path: path + \"/\" + escapePathComponent(key) });\n            deleted = true; // property has been deleted\n        }\n        else {\n            if (invertible) {\n                patches.push({ op: \"test\", path: path, value: mirror });\n            }\n            patches.push({ op: \"replace\", path: path, value: obj });\n            changed = true;\n        }\n    }\n    if (!deleted && newKeys.length == oldKeys.length) {\n        return;\n    }\n    for (var t = 0; t < newKeys.length; t++) {\n        var key = newKeys[t];\n        if (!hasOwnProperty(mirror, key) && obj[key] !== undefined) {\n            patches.push({ op: \"add\", path: path + \"/\" + escapePathComponent(key), value: _deepClone(obj[key]) });\n        }\n    }\n}\n/**\n * Create an array of patches from the differences in two objects\n */\nexport function compare(tree1, tree2, invertible) {\n    if (invertible === void 0) { invertible = false; }\n    var patches = [];\n    _generate(tree1, tree2, patches, '', invertible);\n    return patches;\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1365, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/fast-json-patch/index.mjs"],"sourcesContent":["export * from './module/core.mjs';\nexport * from './module/duplex.mjs';\nexport {\n    PatchError as JsonPatchError,\n    _deepClone as deepClone,\n    escapePathComponent,\n    unescapePathComponent\n} from './module/helpers.mjs';\n\n\n/**\n * Default export for backwards compat\n */\n\nimport * as core from './module/core.mjs';\nimport * as duplex from './module/duplex.mjs';\nimport {\n    PatchError as JsonPatchError,\n    _deepClone as deepClone,\n    escapePathComponent,\n    unescapePathComponent\n} from './module/helpers.mjs';\n\nexport default Object.assign({}, core, duplex, {\n    JsonPatchError,\n    deepClone,\n    escapePathComponent,\n    unescapePathComponent\n});"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;uCAqBe,OAAO,MAAM,CAAC,CAAC,GAAG,4JAAM,8JAAQ;IAC3C,gBAAA,2KAAc;IACd,WAAA,2KAAS;IACT,qBAAA,oLAAmB;IACnB,uBAAA,sLAAqB;AACzB","ignoreList":[0]}},
    {"offset": {"line": 1388, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/untruncate-json/dist/esm/index.js","sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/untruncate-json/src/index.ts"],"sourcesContent":["const enum ContextType {\n  TOP_LEVEL = \"topLevel\",\n  STRING = \"string\",\n  STRING_ESCAPED = \"stringEscaped\",\n  STRING_UNICODE = \"stringUnicode\",\n  NUMBER = \"number\",\n  NUMBER_NEEDS_DIGIT = \"numberNeedsDigit\",\n  NUMBER_NEEDS_EXPONENT = \"numberNeedsExponent\",\n  TRUE = \"true\",\n  FALSE = \"false\",\n  NULL = \"null\",\n  ARRAY_NEEDS_VALUE = \"arrayNeedsValue\",\n  ARRAY_NEEDS_COMMA = \"arrayNeedsComma\",\n  OBJECT_NEEDS_KEY = \"objectNeedsKey\",\n  OBJECT_NEEDS_COLON = \"objectNeedsColon\",\n  OBJECT_NEEDS_VALUE = \"objectNeedsValue\",\n  OBJECT_NEEDS_COMMA = \"objectNeedsComma\",\n}\n\nconst enum RespawnReason {\n  STRING_ESCAPE = \"stringEscape\",\n  COLLECTION_ITEM = \"collectionItem\",\n}\n\nfunction isWhitespace(char: string): boolean {\n  return \"\\u0020\\u000D\\u000A\\u0009\".indexOf(char) >= 0;\n}\n\nexport default function untruncateJson(json: string): string {\n  const contextStack: ContextType[] = [ContextType.TOP_LEVEL];\n  let position = 0;\n  let respawnPosition: number | undefined;\n  let respawnStackLength: number | undefined;\n  let respawnReason: RespawnReason | undefined;\n\n  const push = (context: ContextType) => contextStack.push(context);\n  const replace = (context: ContextType) =>\n    (contextStack[contextStack.length - 1] = context);\n  const setRespawn = (reason: RespawnReason) => {\n    if (respawnPosition == null) {\n      respawnPosition = position;\n      respawnStackLength = contextStack.length;\n      respawnReason = reason;\n    }\n  };\n  const clearRespawn = (reason: RespawnReason) => {\n    if (reason === respawnReason) {\n      respawnPosition = undefined;\n      respawnStackLength = undefined;\n      respawnReason = undefined;\n    }\n  };\n  const pop = () => contextStack.pop();\n  const dontConsumeCharacter = () => position--;\n\n  const startAny = (char: string) => {\n    if (\"0\" <= char && char <= \"9\") {\n      push(ContextType.NUMBER);\n      return;\n    }\n    switch (char) {\n      case '\"':\n        push(ContextType.STRING);\n        return;\n      case \"-\":\n        push(ContextType.NUMBER_NEEDS_DIGIT);\n        return;\n      case \"t\":\n        push(ContextType.TRUE);\n        return;\n      case \"f\":\n        push(ContextType.FALSE);\n        return;\n      case \"n\":\n        push(ContextType.NULL);\n        return;\n      case \"[\":\n        push(ContextType.ARRAY_NEEDS_VALUE);\n        return;\n      case \"{\":\n        push(ContextType.OBJECT_NEEDS_KEY);\n        return;\n    }\n  };\n\n  for (const { length } = json; position < length; position++) {\n    const char = json[position];\n    switch (contextStack[contextStack.length - 1]) {\n      case ContextType.TOP_LEVEL:\n        startAny(char);\n        break;\n      case ContextType.STRING:\n        switch (char) {\n          case '\"':\n            pop();\n            break;\n          case \"\\\\\":\n            setRespawn(RespawnReason.STRING_ESCAPE);\n            push(ContextType.STRING_ESCAPED);\n            break;\n        }\n        break;\n      case ContextType.STRING_ESCAPED:\n        if (char === \"u\") {\n          push(ContextType.STRING_UNICODE);\n        } else {\n          clearRespawn(RespawnReason.STRING_ESCAPE);\n          pop();\n        }\n        break;\n      case ContextType.STRING_UNICODE:\n        if (position - json.lastIndexOf(\"u\", position) === 4) {\n          clearRespawn(RespawnReason.STRING_ESCAPE);\n          pop();\n        }\n        break;\n      case ContextType.NUMBER:\n        if (char === \".\") {\n          replace(ContextType.NUMBER_NEEDS_DIGIT);\n        } else if (char === \"e\" || char === \"E\") {\n          replace(ContextType.NUMBER_NEEDS_EXPONENT);\n        } else if (char < \"0\" || char > \"9\") {\n          dontConsumeCharacter();\n          pop();\n        }\n        break;\n      case ContextType.NUMBER_NEEDS_DIGIT:\n        replace(ContextType.NUMBER);\n        break;\n      case ContextType.NUMBER_NEEDS_EXPONENT:\n        if (char === \"+\" || char === \"-\") {\n          replace(ContextType.NUMBER_NEEDS_DIGIT);\n        } else {\n          replace(ContextType.NUMBER);\n        }\n        break;\n      case ContextType.TRUE:\n      case ContextType.FALSE:\n      case ContextType.NULL:\n        if (char < \"a\" || char > \"z\") {\n          dontConsumeCharacter();\n          pop();\n        }\n        break;\n      case ContextType.ARRAY_NEEDS_VALUE:\n        if (char === \"]\") {\n          pop();\n        } else if (!isWhitespace(char)) {\n          clearRespawn(RespawnReason.COLLECTION_ITEM);\n          replace(ContextType.ARRAY_NEEDS_COMMA);\n          startAny(char);\n        }\n        break;\n      case ContextType.ARRAY_NEEDS_COMMA:\n        if (char === \"]\") {\n          pop();\n        } else if (char === \",\") {\n          setRespawn(RespawnReason.COLLECTION_ITEM);\n          replace(ContextType.ARRAY_NEEDS_VALUE);\n        }\n        break;\n      case ContextType.OBJECT_NEEDS_KEY:\n        if (char === \"}\") {\n          pop();\n        } else if (char === '\"') {\n          setRespawn(RespawnReason.COLLECTION_ITEM);\n          replace(ContextType.OBJECT_NEEDS_COLON);\n          push(ContextType.STRING);\n        }\n        break;\n      case ContextType.OBJECT_NEEDS_COLON:\n        if (char === \":\") {\n          replace(ContextType.OBJECT_NEEDS_VALUE);\n        }\n        break;\n      case ContextType.OBJECT_NEEDS_VALUE:\n        if (!isWhitespace(char)) {\n          clearRespawn(RespawnReason.COLLECTION_ITEM);\n          replace(ContextType.OBJECT_NEEDS_COMMA);\n          startAny(char);\n        }\n        break;\n      case ContextType.OBJECT_NEEDS_COMMA:\n        if (char === \"}\") {\n          pop();\n        } else if (char === \",\") {\n          setRespawn(RespawnReason.COLLECTION_ITEM);\n          replace(ContextType.OBJECT_NEEDS_KEY);\n        }\n        break;\n    }\n  }\n\n  if (respawnStackLength != null) {\n    contextStack.length = respawnStackLength;\n  }\n  const result = [\n    respawnPosition != null ? json.slice(0, respawnPosition) : json,\n  ];\n  const finishWord = (word: string) =>\n    result.push(word.slice(json.length - json.lastIndexOf(word[0])));\n  for (let i = contextStack.length - 1; i >= 0; i--) {\n    switch (contextStack[i]) {\n      case ContextType.STRING:\n        result.push('\"');\n        break;\n      case ContextType.NUMBER_NEEDS_DIGIT:\n      case ContextType.NUMBER_NEEDS_EXPONENT:\n        result.push(\"0\");\n        break;\n      case ContextType.TRUE:\n        finishWord(\"true\");\n        break;\n      case ContextType.FALSE:\n        finishWord(\"false\");\n        break;\n      case ContextType.NULL:\n        finishWord(\"null\");\n        break;\n      case ContextType.ARRAY_NEEDS_VALUE:\n      case ContextType.ARRAY_NEEDS_COMMA:\n        result.push(\"]\");\n        break;\n      case ContextType.OBJECT_NEEDS_KEY:\n      case ContextType.OBJECT_NEEDS_COLON:\n      case ContextType.OBJECT_NEEDS_VALUE:\n      case ContextType.OBJECT_NEEDS_COMMA:\n        result.push(\"}\");\n        break;\n    }\n  }\n  return result.join(\"\");\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1610, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40bufbuild/protobuf/dist/esm/wire/varint.js"],"sourcesContent":["// Copyright 2008 Google Inc.  All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions are\n// met:\n//\n// * Redistributions of source code must retain the above copyright\n// notice, this list of conditions and the following disclaimer.\n// * Redistributions in binary form must reproduce the above\n// copyright notice, this list of conditions and the following disclaimer\n// in the documentation and/or other materials provided with the\n// distribution.\n// * Neither the name of Google Inc. nor the names of its\n// contributors may be used to endorse or promote products derived from\n// this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n// \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n// LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n// A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n// OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n// SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n// LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n// DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n// THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n// Code generated by the Protocol Buffer compiler is owned by the owner\n// of the input file used when generating it.  This code is not\n// standalone and requires a support library to be linked with it.  This\n// support library is itself covered by the above license.\n/**\n * Read a 64 bit varint as two JS numbers.\n *\n * Returns tuple:\n * [0]: low bits\n * [1]: high bits\n *\n * Copyright 2008 Google Inc.  All rights reserved.\n *\n * See https://github.com/protocolbuffers/protobuf/blob/8a71927d74a4ce34efe2d8769fda198f52d20d12/js/experimental/runtime/kernel/buffer_decoder.js#L175\n */\nexport function varint64read() {\n    let lowBits = 0;\n    let highBits = 0;\n    for (let shift = 0; shift < 28; shift += 7) {\n        let b = this.buf[this.pos++];\n        lowBits |= (b & 0x7f) << shift;\n        if ((b & 0x80) == 0) {\n            this.assertBounds();\n            return [lowBits, highBits];\n        }\n    }\n    let middleByte = this.buf[this.pos++];\n    // last four bits of the first 32 bit number\n    lowBits |= (middleByte & 0x0f) << 28;\n    // 3 upper bits are part of the next 32 bit number\n    highBits = (middleByte & 0x70) >> 4;\n    if ((middleByte & 0x80) == 0) {\n        this.assertBounds();\n        return [lowBits, highBits];\n    }\n    for (let shift = 3; shift <= 31; shift += 7) {\n        let b = this.buf[this.pos++];\n        highBits |= (b & 0x7f) << shift;\n        if ((b & 0x80) == 0) {\n            this.assertBounds();\n            return [lowBits, highBits];\n        }\n    }\n    throw new Error(\"invalid varint\");\n}\n/**\n * Write a 64 bit varint, given as two JS numbers, to the given bytes array.\n *\n * Copyright 2008 Google Inc.  All rights reserved.\n *\n * See https://github.com/protocolbuffers/protobuf/blob/8a71927d74a4ce34efe2d8769fda198f52d20d12/js/experimental/runtime/kernel/writer.js#L344\n */\nexport function varint64write(lo, hi, bytes) {\n    for (let i = 0; i < 28; i = i + 7) {\n        const shift = lo >>> i;\n        const hasNext = !(shift >>> 7 == 0 && hi == 0);\n        const byte = (hasNext ? shift | 0x80 : shift) & 0xff;\n        bytes.push(byte);\n        if (!hasNext) {\n            return;\n        }\n    }\n    const splitBits = ((lo >>> 28) & 0x0f) | ((hi & 0x07) << 4);\n    const hasMoreBits = !(hi >> 3 == 0);\n    bytes.push((hasMoreBits ? splitBits | 0x80 : splitBits) & 0xff);\n    if (!hasMoreBits) {\n        return;\n    }\n    for (let i = 3; i < 31; i = i + 7) {\n        const shift = hi >>> i;\n        const hasNext = !(shift >>> 7 == 0);\n        const byte = (hasNext ? shift | 0x80 : shift) & 0xff;\n        bytes.push(byte);\n        if (!hasNext) {\n            return;\n        }\n    }\n    bytes.push((hi >>> 31) & 0x01);\n}\n// constants for binary math\nconst TWO_PWR_32_DBL = 0x100000000;\n/**\n * Parse decimal string of 64 bit integer value as two JS numbers.\n *\n * Copyright 2008 Google Inc.  All rights reserved.\n *\n * See https://github.com/protocolbuffers/protobuf-javascript/blob/a428c58273abad07c66071d9753bc4d1289de426/experimental/runtime/int64.js#L10\n */\nexport function int64FromString(dec) {\n    // Check for minus sign.\n    const minus = dec[0] === \"-\";\n    if (minus) {\n        dec = dec.slice(1);\n    }\n    // Work 6 decimal digits at a time, acting like we're converting base 1e6\n    // digits to binary. This is safe to do with floating point math because\n    // Number.isSafeInteger(ALL_32_BITS * 1e6) == true.\n    const base = 1e6;\n    let lowBits = 0;\n    let highBits = 0;\n    function add1e6digit(begin, end) {\n        // Note: Number('') is 0.\n        const digit1e6 = Number(dec.slice(begin, end));\n        highBits *= base;\n        lowBits = lowBits * base + digit1e6;\n        // Carry bits from lowBits to\n        if (lowBits >= TWO_PWR_32_DBL) {\n            highBits = highBits + ((lowBits / TWO_PWR_32_DBL) | 0);\n            lowBits = lowBits % TWO_PWR_32_DBL;\n        }\n    }\n    add1e6digit(-24, -18);\n    add1e6digit(-18, -12);\n    add1e6digit(-12, -6);\n    add1e6digit(-6);\n    return minus ? negate(lowBits, highBits) : newBits(lowBits, highBits);\n}\n/**\n * Losslessly converts a 64-bit signed integer in 32:32 split representation\n * into a decimal string.\n *\n * Copyright 2008 Google Inc.  All rights reserved.\n *\n * See https://github.com/protocolbuffers/protobuf-javascript/blob/a428c58273abad07c66071d9753bc4d1289de426/experimental/runtime/int64.js#L10\n */\nexport function int64ToString(lo, hi) {\n    let bits = newBits(lo, hi);\n    // If we're treating the input as a signed value and the high bit is set, do\n    // a manual two's complement conversion before the decimal conversion.\n    const negative = bits.hi & 0x80000000;\n    if (negative) {\n        bits = negate(bits.lo, bits.hi);\n    }\n    const result = uInt64ToString(bits.lo, bits.hi);\n    return negative ? \"-\" + result : result;\n}\n/**\n * Losslessly converts a 64-bit unsigned integer in 32:32 split representation\n * into a decimal string.\n *\n * Copyright 2008 Google Inc.  All rights reserved.\n *\n * See https://github.com/protocolbuffers/protobuf-javascript/blob/a428c58273abad07c66071d9753bc4d1289de426/experimental/runtime/int64.js#L10\n */\nexport function uInt64ToString(lo, hi) {\n    ({ lo, hi } = toUnsigned(lo, hi));\n    // Skip the expensive conversion if the number is small enough to use the\n    // built-in conversions.\n    // Number.MAX_SAFE_INTEGER = 0x001FFFFF FFFFFFFF, thus any number with\n    // highBits <= 0x1FFFFF can be safely expressed with a double and retain\n    // integer precision.\n    // Proven by: Number.isSafeInteger(0x1FFFFF * 2**32 + 0xFFFFFFFF) == true.\n    if (hi <= 0x1fffff) {\n        return String(TWO_PWR_32_DBL * hi + lo);\n    }\n    // What this code is doing is essentially converting the input number from\n    // base-2 to base-1e7, which allows us to represent the 64-bit range with\n    // only 3 (very large) digits. Those digits are then trivial to convert to\n    // a base-10 string.\n    // The magic numbers used here are -\n    // 2^24 = 16777216 = (1,6777216) in base-1e7.\n    // 2^48 = 281474976710656 = (2,8147497,6710656) in base-1e7.\n    // Split 32:32 representation into 16:24:24 representation so our\n    // intermediate digits don't overflow.\n    const low = lo & 0xffffff;\n    const mid = ((lo >>> 24) | (hi << 8)) & 0xffffff;\n    const high = (hi >> 16) & 0xffff;\n    // Assemble our three base-1e7 digits, ignoring carries. The maximum\n    // value in a digit at this step is representable as a 48-bit integer, which\n    // can be stored in a 64-bit floating point number.\n    let digitA = low + mid * 6777216 + high * 6710656;\n    let digitB = mid + high * 8147497;\n    let digitC = high * 2;\n    // Apply carries from A to B and from B to C.\n    const base = 10000000;\n    if (digitA >= base) {\n        digitB += Math.floor(digitA / base);\n        digitA %= base;\n    }\n    if (digitB >= base) {\n        digitC += Math.floor(digitB / base);\n        digitB %= base;\n    }\n    // If digitC is 0, then we should have returned in the trivial code path\n    // at the top for non-safe integers. Given this, we can assume both digitB\n    // and digitA need leading zeros.\n    return (digitC.toString() +\n        decimalFrom1e7WithLeadingZeros(digitB) +\n        decimalFrom1e7WithLeadingZeros(digitA));\n}\nfunction toUnsigned(lo, hi) {\n    return { lo: lo >>> 0, hi: hi >>> 0 };\n}\nfunction newBits(lo, hi) {\n    return { lo: lo | 0, hi: hi | 0 };\n}\n/**\n * Returns two's compliment negation of input.\n * @see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Bitwise_Operators#Signed_32-bit_integers\n */\nfunction negate(lowBits, highBits) {\n    highBits = ~highBits;\n    if (lowBits) {\n        lowBits = ~lowBits + 1;\n    }\n    else {\n        // If lowBits is 0, then bitwise-not is 0xFFFFFFFF,\n        // adding 1 to that, results in 0x100000000, which leaves\n        // the low bits 0x0 and simply adds one to the high bits.\n        highBits += 1;\n    }\n    return newBits(lowBits, highBits);\n}\n/**\n * Returns decimal representation of digit1e7 with leading zeros.\n */\nconst decimalFrom1e7WithLeadingZeros = (digit1e7) => {\n    const partial = String(digit1e7);\n    return \"0000000\".slice(partial.length) + partial;\n};\n/**\n * Write a 32 bit varint, signed or unsigned. Same as `varint64write(0, value, bytes)`\n *\n * Copyright 2008 Google Inc.  All rights reserved.\n *\n * See https://github.com/protocolbuffers/protobuf/blob/1b18833f4f2a2f681f4e4a25cdf3b0a43115ec26/js/binary/encoder.js#L144\n */\nexport function varint32write(value, bytes) {\n    if (value >= 0) {\n        // write value as varint 32\n        while (value > 0x7f) {\n            bytes.push((value & 0x7f) | 0x80);\n            value = value >>> 7;\n        }\n        bytes.push(value);\n    }\n    else {\n        for (let i = 0; i < 9; i++) {\n            bytes.push((value & 127) | 128);\n            value = value >> 7;\n        }\n        bytes.push(1);\n    }\n}\n/**\n * Read an unsigned 32 bit varint.\n *\n * See https://github.com/protocolbuffers/protobuf/blob/8a71927d74a4ce34efe2d8769fda198f52d20d12/js/experimental/runtime/kernel/buffer_decoder.js#L220\n */\nexport function varint32read() {\n    let b = this.buf[this.pos++];\n    let result = b & 0x7f;\n    if ((b & 0x80) == 0) {\n        this.assertBounds();\n        return result;\n    }\n    b = this.buf[this.pos++];\n    result |= (b & 0x7f) << 7;\n    if ((b & 0x80) == 0) {\n        this.assertBounds();\n        return result;\n    }\n    b = this.buf[this.pos++];\n    result |= (b & 0x7f) << 14;\n    if ((b & 0x80) == 0) {\n        this.assertBounds();\n        return result;\n    }\n    b = this.buf[this.pos++];\n    result |= (b & 0x7f) << 21;\n    if ((b & 0x80) == 0) {\n        this.assertBounds();\n        return result;\n    }\n    // Extract only last 4 bits\n    b = this.buf[this.pos++];\n    result |= (b & 0x0f) << 28;\n    for (let readBytes = 5; (b & 0x80) !== 0 && readBytes < 10; readBytes++)\n        b = this.buf[this.pos++];\n    if ((b & 0x80) != 0)\n        throw new Error(\"invalid varint\");\n    this.assertBounds();\n    // Result can have 32 bits, convert it to unsigned\n    return result >>> 0;\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 1907, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40bufbuild/protobuf/dist/esm/proto-int64.js"],"sourcesContent":["// Copyright 2021-2025 Buf Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { int64FromString, int64ToString, uInt64ToString, } from \"./wire/varint.js\";\n/**\n * Int64Support for the current environment.\n */\nexport const protoInt64 = /*@__PURE__*/ makeInt64Support();\nfunction makeInt64Support() {\n    const dv = new DataView(new ArrayBuffer(8));\n    // note that Safari 14 implements BigInt, but not the DataView methods\n    const ok = typeof BigInt === \"function\" &&\n        typeof dv.getBigInt64 === \"function\" &&\n        typeof dv.getBigUint64 === \"function\" &&\n        typeof dv.setBigInt64 === \"function\" &&\n        typeof dv.setBigUint64 === \"function\" &&\n        (!!globalThis.Deno ||\n            typeof process != \"object\" ||\n            typeof process.env != \"object\" ||\n            process.env.BUF_BIGINT_DISABLE !== \"1\");\n    if (ok) {\n        const MIN = BigInt(\"-9223372036854775808\");\n        const MAX = BigInt(\"9223372036854775807\");\n        const UMIN = BigInt(\"0\");\n        const UMAX = BigInt(\"18446744073709551615\");\n        return {\n            zero: BigInt(0),\n            supported: true,\n            parse(value) {\n                const bi = typeof value == \"bigint\" ? value : BigInt(value);\n                if (bi > MAX || bi < MIN) {\n                    throw new Error(`invalid int64: ${value}`);\n                }\n                return bi;\n            },\n            uParse(value) {\n                const bi = typeof value == \"bigint\" ? value : BigInt(value);\n                if (bi > UMAX || bi < UMIN) {\n                    throw new Error(`invalid uint64: ${value}`);\n                }\n                return bi;\n            },\n            enc(value) {\n                dv.setBigInt64(0, this.parse(value), true);\n                return {\n                    lo: dv.getInt32(0, true),\n                    hi: dv.getInt32(4, true),\n                };\n            },\n            uEnc(value) {\n                dv.setBigInt64(0, this.uParse(value), true);\n                return {\n                    lo: dv.getInt32(0, true),\n                    hi: dv.getInt32(4, true),\n                };\n            },\n            dec(lo, hi) {\n                dv.setInt32(0, lo, true);\n                dv.setInt32(4, hi, true);\n                return dv.getBigInt64(0, true);\n            },\n            uDec(lo, hi) {\n                dv.setInt32(0, lo, true);\n                dv.setInt32(4, hi, true);\n                return dv.getBigUint64(0, true);\n            },\n        };\n    }\n    return {\n        zero: \"0\",\n        supported: false,\n        parse(value) {\n            if (typeof value != \"string\") {\n                value = value.toString();\n            }\n            assertInt64String(value);\n            return value;\n        },\n        uParse(value) {\n            if (typeof value != \"string\") {\n                value = value.toString();\n            }\n            assertUInt64String(value);\n            return value;\n        },\n        enc(value) {\n            if (typeof value != \"string\") {\n                value = value.toString();\n            }\n            assertInt64String(value);\n            return int64FromString(value);\n        },\n        uEnc(value) {\n            if (typeof value != \"string\") {\n                value = value.toString();\n            }\n            assertUInt64String(value);\n            return int64FromString(value);\n        },\n        dec(lo, hi) {\n            return int64ToString(lo, hi);\n        },\n        uDec(lo, hi) {\n            return uInt64ToString(lo, hi);\n        },\n    };\n}\nfunction assertInt64String(value) {\n    if (!/^-?[0-9]+$/.test(value)) {\n        throw new Error(\"invalid int64: \" + value);\n    }\n}\nfunction assertUInt64String(value) {\n    if (!/^[0-9]+$/.test(value)) {\n        throw new Error(\"invalid uint64: \" + value);\n    }\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 2032, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40bufbuild/protobuf/dist/esm/wire/text-encoding.js"],"sourcesContent":["// Copyright 2021-2025 Buf Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nconst symbol = Symbol.for(\"@bufbuild/protobuf/text-encoding\");\n/**\n * Protobuf-ES requires the Text Encoding API to convert UTF-8 from and to\n * binary. This WHATWG API is widely available, but it is not part of the\n * ECMAScript standard. On runtimes where it is not available, use this\n * function to provide your own implementation.\n *\n * Note that the Text Encoding API does not provide a way to validate UTF-8.\n * Our implementation falls back to use encodeURIComponent().\n */\nexport function configureTextEncoding(textEncoding) {\n    globalThis[symbol] = textEncoding;\n}\nexport function getTextEncoding() {\n    if (globalThis[symbol] == undefined) {\n        const te = new globalThis.TextEncoder();\n        const td = new globalThis.TextDecoder();\n        globalThis[symbol] = {\n            encodeUtf8(text) {\n                return te.encode(text);\n            },\n            decodeUtf8(bytes) {\n                return td.decode(bytes);\n            },\n            checkUtf8(text) {\n                try {\n                    encodeURIComponent(text);\n                    return true;\n                }\n                catch (_) {\n                    return false;\n                }\n            },\n        };\n    }\n    return globalThis[symbol];\n}\n"],"names":[],"mappings":";;;;;;AAAA,6CAA6C;AAC7C,EAAE;AACF,kEAAkE;AAClE,mEAAmE;AACnE,0CAA0C;AAC1C,EAAE;AACF,kDAAkD;AAClD,EAAE;AACF,sEAAsE;AACtE,oEAAoE;AACpE,2EAA2E;AAC3E,sEAAsE;AACtE,iCAAiC;AACjC,MAAM,SAAS,OAAO,GAAG,CAAC;AAUnB,SAAS,sBAAsB,YAAY;IAC9C,UAAU,CAAC,OAAO,GAAG;AACzB;AACO,SAAS;IACZ,IAAI,UAAU,CAAC,OAAO,IAAI,WAAW;QACjC,MAAM,KAAK,IAAI,WAAW,WAAW;QACrC,MAAM,KAAK,IAAI,WAAW,WAAW;QACrC,UAAU,CAAC,OAAO,GAAG;YACjB,YAAW,IAAI;gBACX,OAAO,GAAG,MAAM,CAAC;YACrB;YACA,YAAW,KAAK;gBACZ,OAAO,GAAG,MAAM,CAAC;YACrB;YACA,WAAU,IAAI;gBACV,IAAI;oBACA,mBAAmB;oBACnB,OAAO;gBACX,EACA,OAAO,GAAG;oBACN,OAAO;gBACX;YACJ;QACJ;IACJ;IACA,OAAO,UAAU,CAAC,OAAO;AAC7B","ignoreList":[0]}},
    {"offset": {"line": 2082, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40bufbuild/protobuf/dist/esm/wire/binary-encoding.js"],"sourcesContent":["// Copyright 2021-2025 Buf Technologies, Inc.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//      http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\nimport { varint32read, varint32write, varint64read, varint64write, } from \"./varint.js\";\nimport { protoInt64 } from \"../proto-int64.js\";\nimport { getTextEncoding } from \"./text-encoding.js\";\n/**\n * Protobuf binary format wire types.\n *\n * A wire type provides just enough information to find the length of the\n * following value.\n *\n * See https://developers.google.com/protocol-buffers/docs/encoding#structure\n */\nexport var WireType;\n(function (WireType) {\n    /**\n     * Used for int32, int64, uint32, uint64, sint32, sint64, bool, enum\n     */\n    WireType[WireType[\"Varint\"] = 0] = \"Varint\";\n    /**\n     * Used for fixed64, sfixed64, double.\n     * Always 8 bytes with little-endian byte order.\n     */\n    WireType[WireType[\"Bit64\"] = 1] = \"Bit64\";\n    /**\n     * Used for string, bytes, embedded messages, packed repeated fields\n     *\n     * Only repeated numeric types (types which use the varint, 32-bit,\n     * or 64-bit wire types) can be packed. In proto3, such fields are\n     * packed by default.\n     */\n    WireType[WireType[\"LengthDelimited\"] = 2] = \"LengthDelimited\";\n    /**\n     * Start of a tag-delimited aggregate, such as a proto2 group, or a message\n     * in editions with message_encoding = DELIMITED.\n     */\n    WireType[WireType[\"StartGroup\"] = 3] = \"StartGroup\";\n    /**\n     * End of a tag-delimited aggregate.\n     */\n    WireType[WireType[\"EndGroup\"] = 4] = \"EndGroup\";\n    /**\n     * Used for fixed32, sfixed32, float.\n     * Always 4 bytes with little-endian byte order.\n     */\n    WireType[WireType[\"Bit32\"] = 5] = \"Bit32\";\n})(WireType || (WireType = {}));\n/**\n * Maximum value for a 32-bit floating point value (Protobuf FLOAT).\n */\nexport const FLOAT32_MAX = 3.4028234663852886e38;\n/**\n * Minimum value for a 32-bit floating point value (Protobuf FLOAT).\n */\nexport const FLOAT32_MIN = -3.4028234663852886e38;\n/**\n * Maximum value for an unsigned 32-bit integer (Protobuf UINT32, FIXED32).\n */\nexport const UINT32_MAX = 0xffffffff;\n/**\n * Maximum value for a signed 32-bit integer (Protobuf INT32, SFIXED32, SINT32).\n */\nexport const INT32_MAX = 0x7fffffff;\n/**\n * Minimum value for a signed 32-bit integer (Protobuf INT32, SFIXED32, SINT32).\n */\nexport const INT32_MIN = -0x80000000;\nexport class BinaryWriter {\n    constructor(encodeUtf8 = getTextEncoding().encodeUtf8) {\n        this.encodeUtf8 = encodeUtf8;\n        /**\n         * Previous fork states.\n         */\n        this.stack = [];\n        this.chunks = [];\n        this.buf = [];\n    }\n    /**\n     * Return all bytes written and reset this writer.\n     */\n    finish() {\n        if (this.buf.length) {\n            this.chunks.push(new Uint8Array(this.buf)); // flush the buffer\n            this.buf = [];\n        }\n        let len = 0;\n        for (let i = 0; i < this.chunks.length; i++)\n            len += this.chunks[i].length;\n        let bytes = new Uint8Array(len);\n        let offset = 0;\n        for (let i = 0; i < this.chunks.length; i++) {\n            bytes.set(this.chunks[i], offset);\n            offset += this.chunks[i].length;\n        }\n        this.chunks = [];\n        return bytes;\n    }\n    /**\n     * Start a new fork for length-delimited data like a message\n     * or a packed repeated field.\n     *\n     * Must be joined later with `join()`.\n     */\n    fork() {\n        this.stack.push({ chunks: this.chunks, buf: this.buf });\n        this.chunks = [];\n        this.buf = [];\n        return this;\n    }\n    /**\n     * Join the last fork. Write its length and bytes, then\n     * return to the previous state.\n     */\n    join() {\n        // get chunk of fork\n        let chunk = this.finish();\n        // restore previous state\n        let prev = this.stack.pop();\n        if (!prev)\n            throw new Error(\"invalid state, fork stack empty\");\n        this.chunks = prev.chunks;\n        this.buf = prev.buf;\n        // write length of chunk as varint\n        this.uint32(chunk.byteLength);\n        return this.raw(chunk);\n    }\n    /**\n     * Writes a tag (field number and wire type).\n     *\n     * Equivalent to `uint32( (fieldNo << 3 | type) >>> 0 )`.\n     *\n     * Generated code should compute the tag ahead of time and call `uint32()`.\n     */\n    tag(fieldNo, type) {\n        return this.uint32(((fieldNo << 3) | type) >>> 0);\n    }\n    /**\n     * Write a chunk of raw bytes.\n     */\n    raw(chunk) {\n        if (this.buf.length) {\n            this.chunks.push(new Uint8Array(this.buf));\n            this.buf = [];\n        }\n        this.chunks.push(chunk);\n        return this;\n    }\n    /**\n     * Write a `uint32` value, an unsigned 32 bit varint.\n     */\n    uint32(value) {\n        assertUInt32(value);\n        // write value as varint 32, inlined for speed\n        while (value > 0x7f) {\n            this.buf.push((value & 0x7f) | 0x80);\n            value = value >>> 7;\n        }\n        this.buf.push(value);\n        return this;\n    }\n    /**\n     * Write a `int32` value, a signed 32 bit varint.\n     */\n    int32(value) {\n        assertInt32(value);\n        varint32write(value, this.buf);\n        return this;\n    }\n    /**\n     * Write a `bool` value, a variant.\n     */\n    bool(value) {\n        this.buf.push(value ? 1 : 0);\n        return this;\n    }\n    /**\n     * Write a `bytes` value, length-delimited arbitrary data.\n     */\n    bytes(value) {\n        this.uint32(value.byteLength); // write length of chunk as varint\n        return this.raw(value);\n    }\n    /**\n     * Write a `string` value, length-delimited data converted to UTF-8 text.\n     */\n    string(value) {\n        let chunk = this.encodeUtf8(value);\n        this.uint32(chunk.byteLength); // write length of chunk as varint\n        return this.raw(chunk);\n    }\n    /**\n     * Write a `float` value, 32-bit floating point number.\n     */\n    float(value) {\n        assertFloat32(value);\n        let chunk = new Uint8Array(4);\n        new DataView(chunk.buffer).setFloat32(0, value, true);\n        return this.raw(chunk);\n    }\n    /**\n     * Write a `double` value, a 64-bit floating point number.\n     */\n    double(value) {\n        let chunk = new Uint8Array(8);\n        new DataView(chunk.buffer).setFloat64(0, value, true);\n        return this.raw(chunk);\n    }\n    /**\n     * Write a `fixed32` value, an unsigned, fixed-length 32-bit integer.\n     */\n    fixed32(value) {\n        assertUInt32(value);\n        let chunk = new Uint8Array(4);\n        new DataView(chunk.buffer).setUint32(0, value, true);\n        return this.raw(chunk);\n    }\n    /**\n     * Write a `sfixed32` value, a signed, fixed-length 32-bit integer.\n     */\n    sfixed32(value) {\n        assertInt32(value);\n        let chunk = new Uint8Array(4);\n        new DataView(chunk.buffer).setInt32(0, value, true);\n        return this.raw(chunk);\n    }\n    /**\n     * Write a `sint32` value, a signed, zigzag-encoded 32-bit varint.\n     */\n    sint32(value) {\n        assertInt32(value);\n        // zigzag encode\n        value = ((value << 1) ^ (value >> 31)) >>> 0;\n        varint32write(value, this.buf);\n        return this;\n    }\n    /**\n     * Write a `fixed64` value, a signed, fixed-length 64-bit integer.\n     */\n    sfixed64(value) {\n        let chunk = new Uint8Array(8), view = new DataView(chunk.buffer), tc = protoInt64.enc(value);\n        view.setInt32(0, tc.lo, true);\n        view.setInt32(4, tc.hi, true);\n        return this.raw(chunk);\n    }\n    /**\n     * Write a `fixed64` value, an unsigned, fixed-length 64 bit integer.\n     */\n    fixed64(value) {\n        let chunk = new Uint8Array(8), view = new DataView(chunk.buffer), tc = protoInt64.uEnc(value);\n        view.setInt32(0, tc.lo, true);\n        view.setInt32(4, tc.hi, true);\n        return this.raw(chunk);\n    }\n    /**\n     * Write a `int64` value, a signed 64-bit varint.\n     */\n    int64(value) {\n        let tc = protoInt64.enc(value);\n        varint64write(tc.lo, tc.hi, this.buf);\n        return this;\n    }\n    /**\n     * Write a `sint64` value, a signed, zig-zag-encoded 64-bit varint.\n     */\n    sint64(value) {\n        const tc = protoInt64.enc(value), \n        // zigzag encode\n        sign = tc.hi >> 31, lo = (tc.lo << 1) ^ sign, hi = ((tc.hi << 1) | (tc.lo >>> 31)) ^ sign;\n        varint64write(lo, hi, this.buf);\n        return this;\n    }\n    /**\n     * Write a `uint64` value, an unsigned 64-bit varint.\n     */\n    uint64(value) {\n        const tc = protoInt64.uEnc(value);\n        varint64write(tc.lo, tc.hi, this.buf);\n        return this;\n    }\n}\nexport class BinaryReader {\n    constructor(buf, decodeUtf8 = getTextEncoding().decodeUtf8) {\n        this.decodeUtf8 = decodeUtf8;\n        this.varint64 = varint64read; // dirty cast for `this`\n        /**\n         * Read a `uint32` field, an unsigned 32 bit varint.\n         */\n        this.uint32 = varint32read;\n        this.buf = buf;\n        this.len = buf.length;\n        this.pos = 0;\n        this.view = new DataView(buf.buffer, buf.byteOffset, buf.byteLength);\n    }\n    /**\n     * Reads a tag - field number and wire type.\n     */\n    tag() {\n        let tag = this.uint32(), fieldNo = tag >>> 3, wireType = tag & 7;\n        if (fieldNo <= 0 || wireType < 0 || wireType > 5)\n            throw new Error(\"illegal tag: field no \" + fieldNo + \" wire type \" + wireType);\n        return [fieldNo, wireType];\n    }\n    /**\n     * Skip one element and return the skipped data.\n     *\n     * When skipping StartGroup, provide the tags field number to check for\n     * matching field number in the EndGroup tag.\n     */\n    skip(wireType, fieldNo) {\n        let start = this.pos;\n        switch (wireType) {\n            case WireType.Varint:\n                while (this.buf[this.pos++] & 0x80) {\n                    // ignore\n                }\n                break;\n            // @ts-ignore TS7029: Fallthrough case in switch -- ignore instead of expect-error for compiler settings without noFallthroughCasesInSwitch: true\n            case WireType.Bit64:\n                this.pos += 4;\n            case WireType.Bit32:\n                this.pos += 4;\n                break;\n            case WireType.LengthDelimited:\n                let len = this.uint32();\n                this.pos += len;\n                break;\n            case WireType.StartGroup:\n                for (;;) {\n                    const [fn, wt] = this.tag();\n                    if (wt === WireType.EndGroup) {\n                        if (fieldNo !== undefined && fn !== fieldNo) {\n                            throw new Error(\"invalid end group tag\");\n                        }\n                        break;\n                    }\n                    this.skip(wt, fn);\n                }\n                break;\n            default:\n                throw new Error(\"cant skip wire type \" + wireType);\n        }\n        this.assertBounds();\n        return this.buf.subarray(start, this.pos);\n    }\n    /**\n     * Throws error if position in byte array is out of range.\n     */\n    assertBounds() {\n        if (this.pos > this.len)\n            throw new RangeError(\"premature EOF\");\n    }\n    /**\n     * Read a `int32` field, a signed 32 bit varint.\n     */\n    int32() {\n        return this.uint32() | 0;\n    }\n    /**\n     * Read a `sint32` field, a signed, zigzag-encoded 32-bit varint.\n     */\n    sint32() {\n        let zze = this.uint32();\n        // decode zigzag\n        return (zze >>> 1) ^ -(zze & 1);\n    }\n    /**\n     * Read a `int64` field, a signed 64-bit varint.\n     */\n    int64() {\n        return protoInt64.dec(...this.varint64());\n    }\n    /**\n     * Read a `uint64` field, an unsigned 64-bit varint.\n     */\n    uint64() {\n        return protoInt64.uDec(...this.varint64());\n    }\n    /**\n     * Read a `sint64` field, a signed, zig-zag-encoded 64-bit varint.\n     */\n    sint64() {\n        let [lo, hi] = this.varint64();\n        // decode zig zag\n        let s = -(lo & 1);\n        lo = ((lo >>> 1) | ((hi & 1) << 31)) ^ s;\n        hi = (hi >>> 1) ^ s;\n        return protoInt64.dec(lo, hi);\n    }\n    /**\n     * Read a `bool` field, a variant.\n     */\n    bool() {\n        let [lo, hi] = this.varint64();\n        return lo !== 0 || hi !== 0;\n    }\n    /**\n     * Read a `fixed32` field, an unsigned, fixed-length 32-bit integer.\n     */\n    fixed32() {\n        // biome-ignore lint/suspicious/noAssignInExpressions: no\n        return this.view.getUint32((this.pos += 4) - 4, true);\n    }\n    /**\n     * Read a `sfixed32` field, a signed, fixed-length 32-bit integer.\n     */\n    sfixed32() {\n        // biome-ignore lint/suspicious/noAssignInExpressions: no\n        return this.view.getInt32((this.pos += 4) - 4, true);\n    }\n    /**\n     * Read a `fixed64` field, an unsigned, fixed-length 64 bit integer.\n     */\n    fixed64() {\n        return protoInt64.uDec(this.sfixed32(), this.sfixed32());\n    }\n    /**\n     * Read a `fixed64` field, a signed, fixed-length 64-bit integer.\n     */\n    sfixed64() {\n        return protoInt64.dec(this.sfixed32(), this.sfixed32());\n    }\n    /**\n     * Read a `float` field, 32-bit floating point number.\n     */\n    float() {\n        // biome-ignore lint/suspicious/noAssignInExpressions: no\n        return this.view.getFloat32((this.pos += 4) - 4, true);\n    }\n    /**\n     * Read a `double` field, a 64-bit floating point number.\n     */\n    double() {\n        // biome-ignore lint/suspicious/noAssignInExpressions: no\n        return this.view.getFloat64((this.pos += 8) - 8, true);\n    }\n    /**\n     * Read a `bytes` field, length-delimited arbitrary data.\n     */\n    bytes() {\n        let len = this.uint32(), start = this.pos;\n        this.pos += len;\n        this.assertBounds();\n        return this.buf.subarray(start, start + len);\n    }\n    /**\n     * Read a `string` field, length-delimited data converted to UTF-8 text.\n     */\n    string() {\n        return this.decodeUtf8(this.bytes());\n    }\n}\n/**\n * Assert a valid signed protobuf 32-bit integer as a number or string.\n */\nfunction assertInt32(arg) {\n    if (typeof arg == \"string\") {\n        arg = Number(arg);\n    }\n    else if (typeof arg != \"number\") {\n        throw new Error(\"invalid int32: \" + typeof arg);\n    }\n    if (!Number.isInteger(arg) ||\n        arg > INT32_MAX ||\n        arg < INT32_MIN)\n        throw new Error(\"invalid int32: \" + arg);\n}\n/**\n * Assert a valid unsigned protobuf 32-bit integer as a number or string.\n */\nfunction assertUInt32(arg) {\n    if (typeof arg == \"string\") {\n        arg = Number(arg);\n    }\n    else if (typeof arg != \"number\") {\n        throw new Error(\"invalid uint32: \" + typeof arg);\n    }\n    if (!Number.isInteger(arg) ||\n        arg > UINT32_MAX ||\n        arg < 0)\n        throw new Error(\"invalid uint32: \" + arg);\n}\n/**\n * Assert a valid protobuf float value as a number or string.\n */\nfunction assertFloat32(arg) {\n    if (typeof arg == \"string\") {\n        const o = arg;\n        arg = Number(arg);\n        if (Number.isNaN(arg) && o !== \"NaN\") {\n            throw new Error(\"invalid float32: \" + o);\n        }\n    }\n    else if (typeof arg != \"number\") {\n        throw new Error(\"invalid float32: \" + typeof arg);\n    }\n    if (Number.isFinite(arg) &&\n        (arg > FLOAT32_MAX || arg < FLOAT32_MIN))\n        throw new Error(\"invalid float32: \" + arg);\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 2536, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/proto/src/proto.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/proto/src/generated/events.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/proto/src/generated/google/protobuf/struct.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/proto/src/generated/patch.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/proto/src/generated/types.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/proto/src/index.ts"],"sourcesContent":["import { BaseEvent, EventSchemas, EventType, Message } from \"@ag-ui/core\";\nimport * as protoEvents from \"./generated/events\";\nimport * as protoPatch from \"./generated/patch\";\n\nfunction toCamelCase(str: string): string {\n  return str.toLowerCase().replace(/_([a-z])/g, (_, letter) => letter.toUpperCase());\n}\n\n/**\n * Encodes an event message to a protocol buffer binary format.\n */\nexport function encode(event: BaseEvent): Uint8Array {\n  const oneofField = toCamelCase(event.type);\n  const { type, timestamp, rawEvent, ...rest } = event as any;\n\n  // since protobuf does not support optional arrays, we need to ensure that the toolCalls array is always present\n  if (type === EventType.MESSAGES_SNAPSHOT) {\n    rest.messages = rest.messages.map((message: Message) => {\n      const untypedMessage = message as any;\n      if (untypedMessage.toolCalls === undefined) {\n        return { ...message, toolCalls: [] };\n      }\n      return message;\n    });\n  }\n\n  // custom mapping for json patch operations\n  if (type === EventType.STATE_DELTA) {\n    rest.delta = rest.delta.map((operation: any) => ({\n      ...operation,\n      op: protoPatch.JsonPatchOperationType[operation.op.toUpperCase()],\n    }));\n  }\n\n  const eventMessage = {\n    [oneofField]: {\n      baseEvent: {\n        type: protoEvents.EventType[event.type as keyof typeof protoEvents.EventType],\n        timestamp,\n        rawEvent,\n      },\n      ...rest,\n    },\n  };\n  return protoEvents.Event.encode(eventMessage).finish();\n}\n\n/**\n * Decodes a protocol buffer binary format to an event message.\n * The format includes a 4-byte length prefix followed by the message.\n */\nexport function decode(data: Uint8Array): BaseEvent {\n  const event = protoEvents.Event.decode(data);\n  const decoded = Object.values(event).find((value) => value !== undefined);\n  if (!decoded) {\n    throw new Error(\"Invalid event\");\n  }\n  decoded.type = protoEvents.EventType[decoded.baseEvent.type];\n  decoded.timestamp = decoded.baseEvent.timestamp;\n  decoded.rawEvent = decoded.baseEvent.rawEvent;\n\n  // we want tool calls to be optional, so we need to remove them if they are empty\n  if (decoded.type === EventType.MESSAGES_SNAPSHOT) {\n    for (const message of (decoded as any).messages as Message[]) {\n      const untypedMessage = message as any;\n      if (untypedMessage.toolCalls?.length === 0) {\n        untypedMessage.toolCalls = undefined;\n      }\n    }\n  }\n\n  // custom mapping for json patch operations\n  if (decoded.type === EventType.STATE_DELTA) {\n    for (const operation of (decoded as any).delta) {\n      operation.op = protoPatch.JsonPatchOperationType[operation.op].toLowerCase();\n      Object.keys(operation).forEach((key) => {\n        if (operation[key] === undefined) {\n          delete operation[key];\n        }\n      });\n    }\n  }\n\n  Object.keys(decoded).forEach((key) => {\n    if (decoded[key] === undefined) {\n      delete decoded[key];\n    }\n  });\n\n  return EventSchemas.parse(decoded);\n}\n","// Code generated by protoc-gen-ts_proto. DO NOT EDIT.\n// versions:\n//   protoc-gen-ts_proto  v2.7.7\n//   protoc               v5.29.3\n// source: events.proto\n\n/* eslint-disable */\nimport { BinaryReader, BinaryWriter } from \"@bufbuild/protobuf/wire\";\nimport { Value } from \"./google/protobuf/struct\";\nimport { JsonPatchOperation } from \"./patch\";\nimport { Message } from \"./types\";\n\nexport const protobufPackage = \"ag_ui\";\n\nexport enum EventType {\n  TEXT_MESSAGE_START = 0,\n  TEXT_MESSAGE_CONTENT = 1,\n  TEXT_MESSAGE_END = 2,\n  TOOL_CALL_START = 3,\n  TOOL_CALL_ARGS = 4,\n  TOOL_CALL_END = 5,\n  STATE_SNAPSHOT = 6,\n  STATE_DELTA = 7,\n  MESSAGES_SNAPSHOT = 8,\n  RAW = 9,\n  CUSTOM = 10,\n  RUN_STARTED = 11,\n  RUN_FINISHED = 12,\n  RUN_ERROR = 13,\n  STEP_STARTED = 14,\n  STEP_FINISHED = 15,\n  UNRECOGNIZED = -1,\n}\n\nexport interface BaseEvent {\n  type: EventType;\n  timestamp?: number | undefined;\n  rawEvent?: any | undefined;\n}\n\nexport interface TextMessageStartEvent {\n  baseEvent: BaseEvent | undefined;\n  messageId: string;\n  role?: string | undefined;\n}\n\nexport interface TextMessageContentEvent {\n  baseEvent: BaseEvent | undefined;\n  messageId: string;\n  delta: string;\n}\n\nexport interface TextMessageEndEvent {\n  baseEvent: BaseEvent | undefined;\n  messageId: string;\n}\n\nexport interface ToolCallStartEvent {\n  baseEvent: BaseEvent | undefined;\n  toolCallId: string;\n  toolCallName: string;\n  parentMessageId?: string | undefined;\n}\n\nexport interface ToolCallArgsEvent {\n  baseEvent: BaseEvent | undefined;\n  toolCallId: string;\n  delta: string;\n}\n\nexport interface ToolCallEndEvent {\n  baseEvent: BaseEvent | undefined;\n  toolCallId: string;\n}\n\nexport interface StateSnapshotEvent {\n  baseEvent: BaseEvent | undefined;\n  snapshot: any | undefined;\n}\n\nexport interface StateDeltaEvent {\n  baseEvent: BaseEvent | undefined;\n  delta: JsonPatchOperation[];\n}\n\nexport interface MessagesSnapshotEvent {\n  baseEvent: BaseEvent | undefined;\n  messages: Message[];\n}\n\nexport interface RawEvent {\n  baseEvent: BaseEvent | undefined;\n  event: any | undefined;\n  source?: string | undefined;\n}\n\nexport interface CustomEvent {\n  baseEvent: BaseEvent | undefined;\n  name: string;\n  value?: any | undefined;\n}\n\nexport interface RunStartedEvent {\n  baseEvent: BaseEvent | undefined;\n  threadId: string;\n  runId: string;\n}\n\nexport interface RunFinishedEvent {\n  baseEvent: BaseEvent | undefined;\n  threadId: string;\n  runId: string;\n  result?: any | undefined;\n}\n\nexport interface RunErrorEvent {\n  baseEvent: BaseEvent | undefined;\n  code?: string | undefined;\n  message: string;\n}\n\nexport interface StepStartedEvent {\n  baseEvent: BaseEvent | undefined;\n  stepName: string;\n}\n\nexport interface StepFinishedEvent {\n  baseEvent: BaseEvent | undefined;\n  stepName: string;\n}\n\nexport interface TextMessageChunkEvent {\n  baseEvent: BaseEvent | undefined;\n  messageId?: string | undefined;\n  role?: string | undefined;\n  delta?: string | undefined;\n}\n\nexport interface ToolCallChunkEvent {\n  baseEvent: BaseEvent | undefined;\n  toolCallId?: string | undefined;\n  toolCallName?: string | undefined;\n  parentMessageId?: string | undefined;\n  delta?: string | undefined;\n}\n\nexport interface Event {\n  textMessageStart?: TextMessageStartEvent | undefined;\n  textMessageContent?: TextMessageContentEvent | undefined;\n  textMessageEnd?: TextMessageEndEvent | undefined;\n  toolCallStart?: ToolCallStartEvent | undefined;\n  toolCallArgs?: ToolCallArgsEvent | undefined;\n  toolCallEnd?: ToolCallEndEvent | undefined;\n  stateSnapshot?: StateSnapshotEvent | undefined;\n  stateDelta?: StateDeltaEvent | undefined;\n  messagesSnapshot?: MessagesSnapshotEvent | undefined;\n  raw?: RawEvent | undefined;\n  custom?: CustomEvent | undefined;\n  runStarted?: RunStartedEvent | undefined;\n  runFinished?: RunFinishedEvent | undefined;\n  runError?: RunErrorEvent | undefined;\n  stepStarted?: StepStartedEvent | undefined;\n  stepFinished?: StepFinishedEvent | undefined;\n  textMessageChunk?: TextMessageChunkEvent | undefined;\n  toolCallChunk?: ToolCallChunkEvent | undefined;\n}\n\nfunction createBaseBaseEvent(): BaseEvent {\n  return { type: 0, timestamp: undefined, rawEvent: undefined };\n}\n\nexport const BaseEvent: MessageFns<BaseEvent> = {\n  encode(message: BaseEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.type !== 0) {\n      writer.uint32(8).int32(message.type);\n    }\n    if (message.timestamp !== undefined) {\n      writer.uint32(16).int64(message.timestamp);\n    }\n    if (message.rawEvent !== undefined) {\n      Value.encode(Value.wrap(message.rawEvent), writer.uint32(26).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): BaseEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseBaseEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 8) {\n            break;\n          }\n\n          message.type = reader.int32() as any;\n          continue;\n        }\n        case 2: {\n          if (tag !== 16) {\n            break;\n          }\n\n          message.timestamp = longToNumber(reader.int64());\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.rawEvent = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<BaseEvent>, I>>(base?: I): BaseEvent {\n    return BaseEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<BaseEvent>, I>>(object: I): BaseEvent {\n    const message = createBaseBaseEvent();\n    message.type = object.type ?? 0;\n    message.timestamp = object.timestamp ?? undefined;\n    message.rawEvent = object.rawEvent ?? undefined;\n    return message;\n  },\n};\n\nfunction createBaseTextMessageStartEvent(): TextMessageStartEvent {\n  return { baseEvent: undefined, messageId: \"\", role: undefined };\n}\n\nexport const TextMessageStartEvent: MessageFns<TextMessageStartEvent> = {\n  encode(message: TextMessageStartEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.messageId !== \"\") {\n      writer.uint32(18).string(message.messageId);\n    }\n    if (message.role !== undefined) {\n      writer.uint32(26).string(message.role);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): TextMessageStartEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseTextMessageStartEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.messageId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.role = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<TextMessageStartEvent>, I>>(base?: I): TextMessageStartEvent {\n    return TextMessageStartEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<TextMessageStartEvent>, I>>(object: I): TextMessageStartEvent {\n    const message = createBaseTextMessageStartEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.messageId = object.messageId ?? \"\";\n    message.role = object.role ?? undefined;\n    return message;\n  },\n};\n\nfunction createBaseTextMessageContentEvent(): TextMessageContentEvent {\n  return { baseEvent: undefined, messageId: \"\", delta: \"\" };\n}\n\nexport const TextMessageContentEvent: MessageFns<TextMessageContentEvent> = {\n  encode(message: TextMessageContentEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.messageId !== \"\") {\n      writer.uint32(18).string(message.messageId);\n    }\n    if (message.delta !== \"\") {\n      writer.uint32(26).string(message.delta);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): TextMessageContentEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseTextMessageContentEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.messageId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.delta = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<TextMessageContentEvent>, I>>(base?: I): TextMessageContentEvent {\n    return TextMessageContentEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<TextMessageContentEvent>, I>>(object: I): TextMessageContentEvent {\n    const message = createBaseTextMessageContentEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.messageId = object.messageId ?? \"\";\n    message.delta = object.delta ?? \"\";\n    return message;\n  },\n};\n\nfunction createBaseTextMessageEndEvent(): TextMessageEndEvent {\n  return { baseEvent: undefined, messageId: \"\" };\n}\n\nexport const TextMessageEndEvent: MessageFns<TextMessageEndEvent> = {\n  encode(message: TextMessageEndEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.messageId !== \"\") {\n      writer.uint32(18).string(message.messageId);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): TextMessageEndEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseTextMessageEndEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.messageId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<TextMessageEndEvent>, I>>(base?: I): TextMessageEndEvent {\n    return TextMessageEndEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<TextMessageEndEvent>, I>>(object: I): TextMessageEndEvent {\n    const message = createBaseTextMessageEndEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.messageId = object.messageId ?? \"\";\n    return message;\n  },\n};\n\nfunction createBaseToolCallStartEvent(): ToolCallStartEvent {\n  return { baseEvent: undefined, toolCallId: \"\", toolCallName: \"\", parentMessageId: undefined };\n}\n\nexport const ToolCallStartEvent: MessageFns<ToolCallStartEvent> = {\n  encode(message: ToolCallStartEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.toolCallId !== \"\") {\n      writer.uint32(18).string(message.toolCallId);\n    }\n    if (message.toolCallName !== \"\") {\n      writer.uint32(26).string(message.toolCallName);\n    }\n    if (message.parentMessageId !== undefined) {\n      writer.uint32(34).string(message.parentMessageId);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): ToolCallStartEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseToolCallStartEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.toolCallId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.toolCallName = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n\n          message.parentMessageId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<ToolCallStartEvent>, I>>(base?: I): ToolCallStartEvent {\n    return ToolCallStartEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<ToolCallStartEvent>, I>>(object: I): ToolCallStartEvent {\n    const message = createBaseToolCallStartEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.toolCallId = object.toolCallId ?? \"\";\n    message.toolCallName = object.toolCallName ?? \"\";\n    message.parentMessageId = object.parentMessageId ?? undefined;\n    return message;\n  },\n};\n\nfunction createBaseToolCallArgsEvent(): ToolCallArgsEvent {\n  return { baseEvent: undefined, toolCallId: \"\", delta: \"\" };\n}\n\nexport const ToolCallArgsEvent: MessageFns<ToolCallArgsEvent> = {\n  encode(message: ToolCallArgsEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.toolCallId !== \"\") {\n      writer.uint32(18).string(message.toolCallId);\n    }\n    if (message.delta !== \"\") {\n      writer.uint32(26).string(message.delta);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): ToolCallArgsEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseToolCallArgsEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.toolCallId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.delta = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<ToolCallArgsEvent>, I>>(base?: I): ToolCallArgsEvent {\n    return ToolCallArgsEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<ToolCallArgsEvent>, I>>(object: I): ToolCallArgsEvent {\n    const message = createBaseToolCallArgsEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.toolCallId = object.toolCallId ?? \"\";\n    message.delta = object.delta ?? \"\";\n    return message;\n  },\n};\n\nfunction createBaseToolCallEndEvent(): ToolCallEndEvent {\n  return { baseEvent: undefined, toolCallId: \"\" };\n}\n\nexport const ToolCallEndEvent: MessageFns<ToolCallEndEvent> = {\n  encode(message: ToolCallEndEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.toolCallId !== \"\") {\n      writer.uint32(18).string(message.toolCallId);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): ToolCallEndEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseToolCallEndEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.toolCallId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<ToolCallEndEvent>, I>>(base?: I): ToolCallEndEvent {\n    return ToolCallEndEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<ToolCallEndEvent>, I>>(object: I): ToolCallEndEvent {\n    const message = createBaseToolCallEndEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.toolCallId = object.toolCallId ?? \"\";\n    return message;\n  },\n};\n\nfunction createBaseStateSnapshotEvent(): StateSnapshotEvent {\n  return { baseEvent: undefined, snapshot: undefined };\n}\n\nexport const StateSnapshotEvent: MessageFns<StateSnapshotEvent> = {\n  encode(message: StateSnapshotEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.snapshot !== undefined) {\n      Value.encode(Value.wrap(message.snapshot), writer.uint32(18).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): StateSnapshotEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseStateSnapshotEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.snapshot = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<StateSnapshotEvent>, I>>(base?: I): StateSnapshotEvent {\n    return StateSnapshotEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<StateSnapshotEvent>, I>>(object: I): StateSnapshotEvent {\n    const message = createBaseStateSnapshotEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.snapshot = object.snapshot ?? undefined;\n    return message;\n  },\n};\n\nfunction createBaseStateDeltaEvent(): StateDeltaEvent {\n  return { baseEvent: undefined, delta: [] };\n}\n\nexport const StateDeltaEvent: MessageFns<StateDeltaEvent> = {\n  encode(message: StateDeltaEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    for (const v of message.delta) {\n      JsonPatchOperation.encode(v!, writer.uint32(18).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): StateDeltaEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseStateDeltaEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.delta.push(JsonPatchOperation.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<StateDeltaEvent>, I>>(base?: I): StateDeltaEvent {\n    return StateDeltaEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<StateDeltaEvent>, I>>(object: I): StateDeltaEvent {\n    const message = createBaseStateDeltaEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.delta = object.delta?.map((e) => JsonPatchOperation.fromPartial(e)) || [];\n    return message;\n  },\n};\n\nfunction createBaseMessagesSnapshotEvent(): MessagesSnapshotEvent {\n  return { baseEvent: undefined, messages: [] };\n}\n\nexport const MessagesSnapshotEvent: MessageFns<MessagesSnapshotEvent> = {\n  encode(message: MessagesSnapshotEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    for (const v of message.messages) {\n      Message.encode(v!, writer.uint32(18).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): MessagesSnapshotEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseMessagesSnapshotEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.messages.push(Message.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<MessagesSnapshotEvent>, I>>(base?: I): MessagesSnapshotEvent {\n    return MessagesSnapshotEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<MessagesSnapshotEvent>, I>>(object: I): MessagesSnapshotEvent {\n    const message = createBaseMessagesSnapshotEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.messages = object.messages?.map((e) => Message.fromPartial(e)) || [];\n    return message;\n  },\n};\n\nfunction createBaseRawEvent(): RawEvent {\n  return { baseEvent: undefined, event: undefined, source: undefined };\n}\n\nexport const RawEvent: MessageFns<RawEvent> = {\n  encode(message: RawEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.event !== undefined) {\n      Value.encode(Value.wrap(message.event), writer.uint32(18).fork()).join();\n    }\n    if (message.source !== undefined) {\n      writer.uint32(26).string(message.source);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): RawEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseRawEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.event = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.source = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<RawEvent>, I>>(base?: I): RawEvent {\n    return RawEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<RawEvent>, I>>(object: I): RawEvent {\n    const message = createBaseRawEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.event = object.event ?? undefined;\n    message.source = object.source ?? undefined;\n    return message;\n  },\n};\n\nfunction createBaseCustomEvent(): CustomEvent {\n  return { baseEvent: undefined, name: \"\", value: undefined };\n}\n\nexport const CustomEvent: MessageFns<CustomEvent> = {\n  encode(message: CustomEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.name !== \"\") {\n      writer.uint32(18).string(message.name);\n    }\n    if (message.value !== undefined) {\n      Value.encode(Value.wrap(message.value), writer.uint32(26).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): CustomEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseCustomEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.name = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.value = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<CustomEvent>, I>>(base?: I): CustomEvent {\n    return CustomEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<CustomEvent>, I>>(object: I): CustomEvent {\n    const message = createBaseCustomEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.name = object.name ?? \"\";\n    message.value = object.value ?? undefined;\n    return message;\n  },\n};\n\nfunction createBaseRunStartedEvent(): RunStartedEvent {\n  return { baseEvent: undefined, threadId: \"\", runId: \"\" };\n}\n\nexport const RunStartedEvent: MessageFns<RunStartedEvent> = {\n  encode(message: RunStartedEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.threadId !== \"\") {\n      writer.uint32(18).string(message.threadId);\n    }\n    if (message.runId !== \"\") {\n      writer.uint32(26).string(message.runId);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): RunStartedEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseRunStartedEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.threadId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.runId = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<RunStartedEvent>, I>>(base?: I): RunStartedEvent {\n    return RunStartedEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<RunStartedEvent>, I>>(object: I): RunStartedEvent {\n    const message = createBaseRunStartedEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.threadId = object.threadId ?? \"\";\n    message.runId = object.runId ?? \"\";\n    return message;\n  },\n};\n\nfunction createBaseRunFinishedEvent(): RunFinishedEvent {\n  return { baseEvent: undefined, threadId: \"\", runId: \"\", result: undefined };\n}\n\nexport const RunFinishedEvent: MessageFns<RunFinishedEvent> = {\n  encode(message: RunFinishedEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.threadId !== \"\") {\n      writer.uint32(18).string(message.threadId);\n    }\n    if (message.runId !== \"\") {\n      writer.uint32(26).string(message.runId);\n    }\n    if (message.result !== undefined) {\n      Value.encode(Value.wrap(message.result), writer.uint32(34).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): RunFinishedEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseRunFinishedEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.threadId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.runId = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n\n          message.result = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<RunFinishedEvent>, I>>(base?: I): RunFinishedEvent {\n    return RunFinishedEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<RunFinishedEvent>, I>>(object: I): RunFinishedEvent {\n    const message = createBaseRunFinishedEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.threadId = object.threadId ?? \"\";\n    message.runId = object.runId ?? \"\";\n    message.result = object.result ?? undefined;\n    return message;\n  },\n};\n\nfunction createBaseRunErrorEvent(): RunErrorEvent {\n  return { baseEvent: undefined, code: undefined, message: \"\" };\n}\n\nexport const RunErrorEvent: MessageFns<RunErrorEvent> = {\n  encode(message: RunErrorEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.code !== undefined) {\n      writer.uint32(18).string(message.code);\n    }\n    if (message.message !== \"\") {\n      writer.uint32(26).string(message.message);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): RunErrorEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseRunErrorEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.code = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.message = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<RunErrorEvent>, I>>(base?: I): RunErrorEvent {\n    return RunErrorEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<RunErrorEvent>, I>>(object: I): RunErrorEvent {\n    const message = createBaseRunErrorEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.code = object.code ?? undefined;\n    message.message = object.message ?? \"\";\n    return message;\n  },\n};\n\nfunction createBaseStepStartedEvent(): StepStartedEvent {\n  return { baseEvent: undefined, stepName: \"\" };\n}\n\nexport const StepStartedEvent: MessageFns<StepStartedEvent> = {\n  encode(message: StepStartedEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.stepName !== \"\") {\n      writer.uint32(18).string(message.stepName);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): StepStartedEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseStepStartedEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.stepName = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<StepStartedEvent>, I>>(base?: I): StepStartedEvent {\n    return StepStartedEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<StepStartedEvent>, I>>(object: I): StepStartedEvent {\n    const message = createBaseStepStartedEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.stepName = object.stepName ?? \"\";\n    return message;\n  },\n};\n\nfunction createBaseStepFinishedEvent(): StepFinishedEvent {\n  return { baseEvent: undefined, stepName: \"\" };\n}\n\nexport const StepFinishedEvent: MessageFns<StepFinishedEvent> = {\n  encode(message: StepFinishedEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.stepName !== \"\") {\n      writer.uint32(18).string(message.stepName);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): StepFinishedEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseStepFinishedEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.stepName = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<StepFinishedEvent>, I>>(base?: I): StepFinishedEvent {\n    return StepFinishedEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<StepFinishedEvent>, I>>(object: I): StepFinishedEvent {\n    const message = createBaseStepFinishedEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.stepName = object.stepName ?? \"\";\n    return message;\n  },\n};\n\nfunction createBaseTextMessageChunkEvent(): TextMessageChunkEvent {\n  return { baseEvent: undefined, messageId: undefined, role: undefined, delta: undefined };\n}\n\nexport const TextMessageChunkEvent: MessageFns<TextMessageChunkEvent> = {\n  encode(message: TextMessageChunkEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.messageId !== undefined) {\n      writer.uint32(18).string(message.messageId);\n    }\n    if (message.role !== undefined) {\n      writer.uint32(26).string(message.role);\n    }\n    if (message.delta !== undefined) {\n      writer.uint32(34).string(message.delta);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): TextMessageChunkEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseTextMessageChunkEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.messageId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.role = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n\n          message.delta = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<TextMessageChunkEvent>, I>>(base?: I): TextMessageChunkEvent {\n    return TextMessageChunkEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<TextMessageChunkEvent>, I>>(object: I): TextMessageChunkEvent {\n    const message = createBaseTextMessageChunkEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.messageId = object.messageId ?? undefined;\n    message.role = object.role ?? undefined;\n    message.delta = object.delta ?? undefined;\n    return message;\n  },\n};\n\nfunction createBaseToolCallChunkEvent(): ToolCallChunkEvent {\n  return {\n    baseEvent: undefined,\n    toolCallId: undefined,\n    toolCallName: undefined,\n    parentMessageId: undefined,\n    delta: undefined,\n  };\n}\n\nexport const ToolCallChunkEvent: MessageFns<ToolCallChunkEvent> = {\n  encode(message: ToolCallChunkEvent, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.baseEvent !== undefined) {\n      BaseEvent.encode(message.baseEvent, writer.uint32(10).fork()).join();\n    }\n    if (message.toolCallId !== undefined) {\n      writer.uint32(18).string(message.toolCallId);\n    }\n    if (message.toolCallName !== undefined) {\n      writer.uint32(26).string(message.toolCallName);\n    }\n    if (message.parentMessageId !== undefined) {\n      writer.uint32(34).string(message.parentMessageId);\n    }\n    if (message.delta !== undefined) {\n      writer.uint32(42).string(message.delta);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): ToolCallChunkEvent {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseToolCallChunkEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.baseEvent = BaseEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.toolCallId = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.toolCallName = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n\n          message.parentMessageId = reader.string();\n          continue;\n        }\n        case 5: {\n          if (tag !== 42) {\n            break;\n          }\n\n          message.delta = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<ToolCallChunkEvent>, I>>(base?: I): ToolCallChunkEvent {\n    return ToolCallChunkEvent.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<ToolCallChunkEvent>, I>>(object: I): ToolCallChunkEvent {\n    const message = createBaseToolCallChunkEvent();\n    message.baseEvent = (object.baseEvent !== undefined && object.baseEvent !== null)\n      ? BaseEvent.fromPartial(object.baseEvent)\n      : undefined;\n    message.toolCallId = object.toolCallId ?? undefined;\n    message.toolCallName = object.toolCallName ?? undefined;\n    message.parentMessageId = object.parentMessageId ?? undefined;\n    message.delta = object.delta ?? undefined;\n    return message;\n  },\n};\n\nfunction createBaseEvent(): Event {\n  return {\n    textMessageStart: undefined,\n    textMessageContent: undefined,\n    textMessageEnd: undefined,\n    toolCallStart: undefined,\n    toolCallArgs: undefined,\n    toolCallEnd: undefined,\n    stateSnapshot: undefined,\n    stateDelta: undefined,\n    messagesSnapshot: undefined,\n    raw: undefined,\n    custom: undefined,\n    runStarted: undefined,\n    runFinished: undefined,\n    runError: undefined,\n    stepStarted: undefined,\n    stepFinished: undefined,\n    textMessageChunk: undefined,\n    toolCallChunk: undefined,\n  };\n}\n\nexport const Event: MessageFns<Event> = {\n  encode(message: Event, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.textMessageStart !== undefined) {\n      TextMessageStartEvent.encode(message.textMessageStart, writer.uint32(10).fork()).join();\n    }\n    if (message.textMessageContent !== undefined) {\n      TextMessageContentEvent.encode(message.textMessageContent, writer.uint32(18).fork()).join();\n    }\n    if (message.textMessageEnd !== undefined) {\n      TextMessageEndEvent.encode(message.textMessageEnd, writer.uint32(26).fork()).join();\n    }\n    if (message.toolCallStart !== undefined) {\n      ToolCallStartEvent.encode(message.toolCallStart, writer.uint32(34).fork()).join();\n    }\n    if (message.toolCallArgs !== undefined) {\n      ToolCallArgsEvent.encode(message.toolCallArgs, writer.uint32(42).fork()).join();\n    }\n    if (message.toolCallEnd !== undefined) {\n      ToolCallEndEvent.encode(message.toolCallEnd, writer.uint32(50).fork()).join();\n    }\n    if (message.stateSnapshot !== undefined) {\n      StateSnapshotEvent.encode(message.stateSnapshot, writer.uint32(58).fork()).join();\n    }\n    if (message.stateDelta !== undefined) {\n      StateDeltaEvent.encode(message.stateDelta, writer.uint32(66).fork()).join();\n    }\n    if (message.messagesSnapshot !== undefined) {\n      MessagesSnapshotEvent.encode(message.messagesSnapshot, writer.uint32(74).fork()).join();\n    }\n    if (message.raw !== undefined) {\n      RawEvent.encode(message.raw, writer.uint32(82).fork()).join();\n    }\n    if (message.custom !== undefined) {\n      CustomEvent.encode(message.custom, writer.uint32(90).fork()).join();\n    }\n    if (message.runStarted !== undefined) {\n      RunStartedEvent.encode(message.runStarted, writer.uint32(98).fork()).join();\n    }\n    if (message.runFinished !== undefined) {\n      RunFinishedEvent.encode(message.runFinished, writer.uint32(106).fork()).join();\n    }\n    if (message.runError !== undefined) {\n      RunErrorEvent.encode(message.runError, writer.uint32(114).fork()).join();\n    }\n    if (message.stepStarted !== undefined) {\n      StepStartedEvent.encode(message.stepStarted, writer.uint32(122).fork()).join();\n    }\n    if (message.stepFinished !== undefined) {\n      StepFinishedEvent.encode(message.stepFinished, writer.uint32(130).fork()).join();\n    }\n    if (message.textMessageChunk !== undefined) {\n      TextMessageChunkEvent.encode(message.textMessageChunk, writer.uint32(138).fork()).join();\n    }\n    if (message.toolCallChunk !== undefined) {\n      ToolCallChunkEvent.encode(message.toolCallChunk, writer.uint32(146).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): Event {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseEvent();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.textMessageStart = TextMessageStartEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.textMessageContent = TextMessageContentEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.textMessageEnd = TextMessageEndEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n\n          message.toolCallStart = ToolCallStartEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 5: {\n          if (tag !== 42) {\n            break;\n          }\n\n          message.toolCallArgs = ToolCallArgsEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 6: {\n          if (tag !== 50) {\n            break;\n          }\n\n          message.toolCallEnd = ToolCallEndEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 7: {\n          if (tag !== 58) {\n            break;\n          }\n\n          message.stateSnapshot = StateSnapshotEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 8: {\n          if (tag !== 66) {\n            break;\n          }\n\n          message.stateDelta = StateDeltaEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 9: {\n          if (tag !== 74) {\n            break;\n          }\n\n          message.messagesSnapshot = MessagesSnapshotEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 10: {\n          if (tag !== 82) {\n            break;\n          }\n\n          message.raw = RawEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 11: {\n          if (tag !== 90) {\n            break;\n          }\n\n          message.custom = CustomEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 12: {\n          if (tag !== 98) {\n            break;\n          }\n\n          message.runStarted = RunStartedEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 13: {\n          if (tag !== 106) {\n            break;\n          }\n\n          message.runFinished = RunFinishedEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 14: {\n          if (tag !== 114) {\n            break;\n          }\n\n          message.runError = RunErrorEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 15: {\n          if (tag !== 122) {\n            break;\n          }\n\n          message.stepStarted = StepStartedEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 16: {\n          if (tag !== 130) {\n            break;\n          }\n\n          message.stepFinished = StepFinishedEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 17: {\n          if (tag !== 138) {\n            break;\n          }\n\n          message.textMessageChunk = TextMessageChunkEvent.decode(reader, reader.uint32());\n          continue;\n        }\n        case 18: {\n          if (tag !== 146) {\n            break;\n          }\n\n          message.toolCallChunk = ToolCallChunkEvent.decode(reader, reader.uint32());\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<Event>, I>>(base?: I): Event {\n    return Event.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<Event>, I>>(object: I): Event {\n    const message = createBaseEvent();\n    message.textMessageStart = (object.textMessageStart !== undefined && object.textMessageStart !== null)\n      ? TextMessageStartEvent.fromPartial(object.textMessageStart)\n      : undefined;\n    message.textMessageContent = (object.textMessageContent !== undefined && object.textMessageContent !== null)\n      ? TextMessageContentEvent.fromPartial(object.textMessageContent)\n      : undefined;\n    message.textMessageEnd = (object.textMessageEnd !== undefined && object.textMessageEnd !== null)\n      ? TextMessageEndEvent.fromPartial(object.textMessageEnd)\n      : undefined;\n    message.toolCallStart = (object.toolCallStart !== undefined && object.toolCallStart !== null)\n      ? ToolCallStartEvent.fromPartial(object.toolCallStart)\n      : undefined;\n    message.toolCallArgs = (object.toolCallArgs !== undefined && object.toolCallArgs !== null)\n      ? ToolCallArgsEvent.fromPartial(object.toolCallArgs)\n      : undefined;\n    message.toolCallEnd = (object.toolCallEnd !== undefined && object.toolCallEnd !== null)\n      ? ToolCallEndEvent.fromPartial(object.toolCallEnd)\n      : undefined;\n    message.stateSnapshot = (object.stateSnapshot !== undefined && object.stateSnapshot !== null)\n      ? StateSnapshotEvent.fromPartial(object.stateSnapshot)\n      : undefined;\n    message.stateDelta = (object.stateDelta !== undefined && object.stateDelta !== null)\n      ? StateDeltaEvent.fromPartial(object.stateDelta)\n      : undefined;\n    message.messagesSnapshot = (object.messagesSnapshot !== undefined && object.messagesSnapshot !== null)\n      ? MessagesSnapshotEvent.fromPartial(object.messagesSnapshot)\n      : undefined;\n    message.raw = (object.raw !== undefined && object.raw !== null) ? RawEvent.fromPartial(object.raw) : undefined;\n    message.custom = (object.custom !== undefined && object.custom !== null)\n      ? CustomEvent.fromPartial(object.custom)\n      : undefined;\n    message.runStarted = (object.runStarted !== undefined && object.runStarted !== null)\n      ? RunStartedEvent.fromPartial(object.runStarted)\n      : undefined;\n    message.runFinished = (object.runFinished !== undefined && object.runFinished !== null)\n      ? RunFinishedEvent.fromPartial(object.runFinished)\n      : undefined;\n    message.runError = (object.runError !== undefined && object.runError !== null)\n      ? RunErrorEvent.fromPartial(object.runError)\n      : undefined;\n    message.stepStarted = (object.stepStarted !== undefined && object.stepStarted !== null)\n      ? StepStartedEvent.fromPartial(object.stepStarted)\n      : undefined;\n    message.stepFinished = (object.stepFinished !== undefined && object.stepFinished !== null)\n      ? StepFinishedEvent.fromPartial(object.stepFinished)\n      : undefined;\n    message.textMessageChunk = (object.textMessageChunk !== undefined && object.textMessageChunk !== null)\n      ? TextMessageChunkEvent.fromPartial(object.textMessageChunk)\n      : undefined;\n    message.toolCallChunk = (object.toolCallChunk !== undefined && object.toolCallChunk !== null)\n      ? ToolCallChunkEvent.fromPartial(object.toolCallChunk)\n      : undefined;\n    return message;\n  },\n};\n\ntype Builtin = Date | Function | Uint8Array | string | number | boolean | undefined;\n\nexport type DeepPartial<T> = T extends Builtin ? T\n  : T extends globalThis.Array<infer U> ? globalThis.Array<DeepPartial<U>>\n  : T extends ReadonlyArray<infer U> ? ReadonlyArray<DeepPartial<U>>\n  : T extends {} ? { [K in keyof T]?: DeepPartial<T[K]> }\n  : Partial<T>;\n\ntype KeysOfUnion<T> = T extends T ? keyof T : never;\nexport type Exact<P, I extends P> = P extends Builtin ? P\n  : P & { [K in keyof P]: Exact<P[K], I[K]> } & { [K in Exclude<keyof I, KeysOfUnion<P>>]: never };\n\nfunction longToNumber(int64: { toString(): string }): number {\n  const num = globalThis.Number(int64.toString());\n  if (num > globalThis.Number.MAX_SAFE_INTEGER) {\n    throw new globalThis.Error(\"Value is larger than Number.MAX_SAFE_INTEGER\");\n  }\n  if (num < globalThis.Number.MIN_SAFE_INTEGER) {\n    throw new globalThis.Error(\"Value is smaller than Number.MIN_SAFE_INTEGER\");\n  }\n  return num;\n}\n\nexport interface MessageFns<T> {\n  encode(message: T, writer?: BinaryWriter): BinaryWriter;\n  decode(input: BinaryReader | Uint8Array, length?: number): T;\n  create<I extends Exact<DeepPartial<T>, I>>(base?: I): T;\n  fromPartial<I extends Exact<DeepPartial<T>, I>>(object: I): T;\n}\n","// Code generated by protoc-gen-ts_proto. DO NOT EDIT.\n// versions:\n//   protoc-gen-ts_proto  v2.7.7\n//   protoc               v5.29.3\n// source: google/protobuf/struct.proto\n\n/* eslint-disable */\nimport { BinaryReader, BinaryWriter } from \"@bufbuild/protobuf/wire\";\n\nexport const protobufPackage = \"google.protobuf\";\n\n/**\n * `NullValue` is a singleton enumeration to represent the null value for the\n * `Value` type union.\n *\n * The JSON representation for `NullValue` is JSON `null`.\n */\nexport enum NullValue {\n  /** NULL_VALUE - Null value. */\n  NULL_VALUE = 0,\n  UNRECOGNIZED = -1,\n}\n\n/**\n * `Struct` represents a structured data value, consisting of fields\n * which map to dynamically typed values. In some languages, `Struct`\n * might be supported by a native representation. For example, in\n * scripting languages like JS a struct is represented as an\n * object. The details of that representation are described together\n * with the proto support for the language.\n *\n * The JSON representation for `Struct` is JSON object.\n */\nexport interface Struct {\n  /** Unordered map of dynamically typed values. */\n  fields: { [key: string]: any | undefined };\n}\n\nexport interface Struct_FieldsEntry {\n  key: string;\n  value: any | undefined;\n}\n\n/**\n * `Value` represents a dynamically typed value which can be either\n * null, a number, a string, a boolean, a recursive struct value, or a\n * list of values. A producer of value is expected to set one of these\n * variants. Absence of any variant indicates an error.\n *\n * The JSON representation for `Value` is JSON value.\n */\nexport interface Value {\n  /** Represents a null value. */\n  nullValue?:\n    | NullValue\n    | undefined;\n  /** Represents a double value. */\n  numberValue?:\n    | number\n    | undefined;\n  /** Represents a string value. */\n  stringValue?:\n    | string\n    | undefined;\n  /** Represents a boolean value. */\n  boolValue?:\n    | boolean\n    | undefined;\n  /** Represents a structured value. */\n  structValue?:\n    | { [key: string]: any }\n    | undefined;\n  /** Represents a repeated `Value`. */\n  listValue?: Array<any> | undefined;\n}\n\n/**\n * `ListValue` is a wrapper around a repeated field of values.\n *\n * The JSON representation for `ListValue` is JSON array.\n */\nexport interface ListValue {\n  /** Repeated field of dynamically typed values. */\n  values: any[];\n}\n\nfunction createBaseStruct(): Struct {\n  return { fields: {} };\n}\n\nexport const Struct: MessageFns<Struct> & StructWrapperFns = {\n  encode(message: Struct, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    Object.entries(message.fields).forEach(([key, value]) => {\n      if (value !== undefined) {\n        Struct_FieldsEntry.encode({ key: key as any, value }, writer.uint32(10).fork()).join();\n      }\n    });\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): Struct {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseStruct();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          const entry1 = Struct_FieldsEntry.decode(reader, reader.uint32());\n          if (entry1.value !== undefined) {\n            message.fields[entry1.key] = entry1.value;\n          }\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<Struct>, I>>(base?: I): Struct {\n    return Struct.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<Struct>, I>>(object: I): Struct {\n    const message = createBaseStruct();\n    message.fields = Object.entries(object.fields ?? {}).reduce<{ [key: string]: any | undefined }>(\n      (acc, [key, value]) => {\n        if (value !== undefined) {\n          acc[key] = value;\n        }\n        return acc;\n      },\n      {},\n    );\n    return message;\n  },\n\n  wrap(object: { [key: string]: any } | undefined): Struct {\n    const struct = createBaseStruct();\n\n    if (object !== undefined) {\n      for (const key of Object.keys(object)) {\n        struct.fields[key] = object[key];\n      }\n    }\n    return struct;\n  },\n\n  unwrap(message: Struct): { [key: string]: any } {\n    const object: { [key: string]: any } = {};\n    if (message.fields) {\n      for (const key of Object.keys(message.fields)) {\n        object[key] = message.fields[key];\n      }\n    }\n    return object;\n  },\n};\n\nfunction createBaseStruct_FieldsEntry(): Struct_FieldsEntry {\n  return { key: \"\", value: undefined };\n}\n\nexport const Struct_FieldsEntry: MessageFns<Struct_FieldsEntry> = {\n  encode(message: Struct_FieldsEntry, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.key !== \"\") {\n      writer.uint32(10).string(message.key);\n    }\n    if (message.value !== undefined) {\n      Value.encode(Value.wrap(message.value), writer.uint32(18).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): Struct_FieldsEntry {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseStruct_FieldsEntry();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.key = reader.string();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.value = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<Struct_FieldsEntry>, I>>(base?: I): Struct_FieldsEntry {\n    return Struct_FieldsEntry.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<Struct_FieldsEntry>, I>>(object: I): Struct_FieldsEntry {\n    const message = createBaseStruct_FieldsEntry();\n    message.key = object.key ?? \"\";\n    message.value = object.value ?? undefined;\n    return message;\n  },\n};\n\nfunction createBaseValue(): Value {\n  return {\n    nullValue: undefined,\n    numberValue: undefined,\n    stringValue: undefined,\n    boolValue: undefined,\n    structValue: undefined,\n    listValue: undefined,\n  };\n}\n\nexport const Value: MessageFns<Value> & AnyValueWrapperFns = {\n  encode(message: Value, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.nullValue !== undefined) {\n      writer.uint32(8).int32(message.nullValue);\n    }\n    if (message.numberValue !== undefined) {\n      writer.uint32(17).double(message.numberValue);\n    }\n    if (message.stringValue !== undefined) {\n      writer.uint32(26).string(message.stringValue);\n    }\n    if (message.boolValue !== undefined) {\n      writer.uint32(32).bool(message.boolValue);\n    }\n    if (message.structValue !== undefined) {\n      Struct.encode(Struct.wrap(message.structValue), writer.uint32(42).fork()).join();\n    }\n    if (message.listValue !== undefined) {\n      ListValue.encode(ListValue.wrap(message.listValue), writer.uint32(50).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): Value {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseValue();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 8) {\n            break;\n          }\n\n          message.nullValue = reader.int32() as any;\n          continue;\n        }\n        case 2: {\n          if (tag !== 17) {\n            break;\n          }\n\n          message.numberValue = reader.double();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.stringValue = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 32) {\n            break;\n          }\n\n          message.boolValue = reader.bool();\n          continue;\n        }\n        case 5: {\n          if (tag !== 42) {\n            break;\n          }\n\n          message.structValue = Struct.unwrap(Struct.decode(reader, reader.uint32()));\n          continue;\n        }\n        case 6: {\n          if (tag !== 50) {\n            break;\n          }\n\n          message.listValue = ListValue.unwrap(ListValue.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<Value>, I>>(base?: I): Value {\n    return Value.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<Value>, I>>(object: I): Value {\n    const message = createBaseValue();\n    message.nullValue = object.nullValue ?? undefined;\n    message.numberValue = object.numberValue ?? undefined;\n    message.stringValue = object.stringValue ?? undefined;\n    message.boolValue = object.boolValue ?? undefined;\n    message.structValue = object.structValue ?? undefined;\n    message.listValue = object.listValue ?? undefined;\n    return message;\n  },\n\n  wrap(value: any): Value {\n    const result = createBaseValue();\n    if (value === null) {\n      result.nullValue = NullValue.NULL_VALUE;\n    } else if (typeof value === \"boolean\") {\n      result.boolValue = value;\n    } else if (typeof value === \"number\") {\n      result.numberValue = value;\n    } else if (typeof value === \"string\") {\n      result.stringValue = value;\n    } else if (globalThis.Array.isArray(value)) {\n      result.listValue = value;\n    } else if (typeof value === \"object\") {\n      result.structValue = value;\n    } else if (typeof value !== \"undefined\") {\n      throw new globalThis.Error(\"Unsupported any value type: \" + typeof value);\n    }\n    return result;\n  },\n\n  unwrap(message: any): string | number | boolean | Object | null | Array<any> | undefined {\n    if (message.stringValue !== undefined) {\n      return message.stringValue;\n    } else if (message?.numberValue !== undefined) {\n      return message.numberValue;\n    } else if (message?.boolValue !== undefined) {\n      return message.boolValue;\n    } else if (message?.structValue !== undefined) {\n      return message.structValue as any;\n    } else if (message?.listValue !== undefined) {\n      return message.listValue;\n    } else if (message?.nullValue !== undefined) {\n      return null;\n    }\n    return undefined;\n  },\n};\n\nfunction createBaseListValue(): ListValue {\n  return { values: [] };\n}\n\nexport const ListValue: MessageFns<ListValue> & ListValueWrapperFns = {\n  encode(message: ListValue, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    for (const v of message.values) {\n      Value.encode(Value.wrap(v!), writer.uint32(10).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): ListValue {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseListValue();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.values.push(Value.unwrap(Value.decode(reader, reader.uint32())));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<ListValue>, I>>(base?: I): ListValue {\n    return ListValue.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<ListValue>, I>>(object: I): ListValue {\n    const message = createBaseListValue();\n    message.values = object.values?.map((e) => e) || [];\n    return message;\n  },\n\n  wrap(array: Array<any> | undefined): ListValue {\n    const result = createBaseListValue();\n    result.values = array ?? [];\n    return result;\n  },\n\n  unwrap(message: ListValue): Array<any> {\n    if (message?.hasOwnProperty(\"values\") && globalThis.Array.isArray(message.values)) {\n      return message.values;\n    } else {\n      return message as any;\n    }\n  },\n};\n\ntype Builtin = Date | Function | Uint8Array | string | number | boolean | undefined;\n\nexport type DeepPartial<T> = T extends Builtin ? T\n  : T extends globalThis.Array<infer U> ? globalThis.Array<DeepPartial<U>>\n  : T extends ReadonlyArray<infer U> ? ReadonlyArray<DeepPartial<U>>\n  : T extends {} ? { [K in keyof T]?: DeepPartial<T[K]> }\n  : Partial<T>;\n\ntype KeysOfUnion<T> = T extends T ? keyof T : never;\nexport type Exact<P, I extends P> = P extends Builtin ? P\n  : P & { [K in keyof P]: Exact<P[K], I[K]> } & { [K in Exclude<keyof I, KeysOfUnion<P>>]: never };\n\nexport interface MessageFns<T> {\n  encode(message: T, writer?: BinaryWriter): BinaryWriter;\n  decode(input: BinaryReader | Uint8Array, length?: number): T;\n  create<I extends Exact<DeepPartial<T>, I>>(base?: I): T;\n  fromPartial<I extends Exact<DeepPartial<T>, I>>(object: I): T;\n}\n\nexport interface StructWrapperFns {\n  wrap(object: { [key: string]: any } | undefined): Struct;\n  unwrap(message: Struct): { [key: string]: any };\n}\n\nexport interface AnyValueWrapperFns {\n  wrap(value: any): Value;\n  unwrap(message: any): string | number | boolean | Object | null | Array<any> | undefined;\n}\n\nexport interface ListValueWrapperFns {\n  wrap(array: Array<any> | undefined): ListValue;\n  unwrap(message: ListValue): Array<any>;\n}\n","// Code generated by protoc-gen-ts_proto. DO NOT EDIT.\n// versions:\n//   protoc-gen-ts_proto  v2.7.7\n//   protoc               v5.29.3\n// source: patch.proto\n\n/* eslint-disable */\nimport { BinaryReader, BinaryWriter } from \"@bufbuild/protobuf/wire\";\nimport { Value } from \"./google/protobuf/struct\";\n\nexport const protobufPackage = \"ag_ui\";\n\nexport enum JsonPatchOperationType {\n  ADD = 0,\n  REMOVE = 1,\n  REPLACE = 2,\n  MOVE = 3,\n  COPY = 4,\n  TEST = 5,\n  UNRECOGNIZED = -1,\n}\n\nexport interface JsonPatchOperation {\n  op: JsonPatchOperationType;\n  path: string;\n  from?: string | undefined;\n  value?: any | undefined;\n}\n\nfunction createBaseJsonPatchOperation(): JsonPatchOperation {\n  return { op: 0, path: \"\", from: undefined, value: undefined };\n}\n\nexport const JsonPatchOperation: MessageFns<JsonPatchOperation> = {\n  encode(message: JsonPatchOperation, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.op !== 0) {\n      writer.uint32(8).int32(message.op);\n    }\n    if (message.path !== \"\") {\n      writer.uint32(18).string(message.path);\n    }\n    if (message.from !== undefined) {\n      writer.uint32(26).string(message.from);\n    }\n    if (message.value !== undefined) {\n      Value.encode(Value.wrap(message.value), writer.uint32(34).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): JsonPatchOperation {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseJsonPatchOperation();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 8) {\n            break;\n          }\n\n          message.op = reader.int32() as any;\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.path = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.from = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n\n          message.value = Value.unwrap(Value.decode(reader, reader.uint32()));\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<JsonPatchOperation>, I>>(base?: I): JsonPatchOperation {\n    return JsonPatchOperation.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<JsonPatchOperation>, I>>(object: I): JsonPatchOperation {\n    const message = createBaseJsonPatchOperation();\n    message.op = object.op ?? 0;\n    message.path = object.path ?? \"\";\n    message.from = object.from ?? undefined;\n    message.value = object.value ?? undefined;\n    return message;\n  },\n};\n\ntype Builtin = Date | Function | Uint8Array | string | number | boolean | undefined;\n\nexport type DeepPartial<T> = T extends Builtin ? T\n  : T extends globalThis.Array<infer U> ? globalThis.Array<DeepPartial<U>>\n  : T extends ReadonlyArray<infer U> ? ReadonlyArray<DeepPartial<U>>\n  : T extends {} ? { [K in keyof T]?: DeepPartial<T[K]> }\n  : Partial<T>;\n\ntype KeysOfUnion<T> = T extends T ? keyof T : never;\nexport type Exact<P, I extends P> = P extends Builtin ? P\n  : P & { [K in keyof P]: Exact<P[K], I[K]> } & { [K in Exclude<keyof I, KeysOfUnion<P>>]: never };\n\nexport interface MessageFns<T> {\n  encode(message: T, writer?: BinaryWriter): BinaryWriter;\n  decode(input: BinaryReader | Uint8Array, length?: number): T;\n  create<I extends Exact<DeepPartial<T>, I>>(base?: I): T;\n  fromPartial<I extends Exact<DeepPartial<T>, I>>(object: I): T;\n}\n","// Code generated by protoc-gen-ts_proto. DO NOT EDIT.\n// versions:\n//   protoc-gen-ts_proto  v2.7.7\n//   protoc               v5.29.3\n// source: types.proto\n\n/* eslint-disable */\nimport { BinaryReader, BinaryWriter } from \"@bufbuild/protobuf/wire\";\n\nexport const protobufPackage = \"ag_ui\";\n\nexport interface ToolCall {\n  id: string;\n  type: string;\n  function: ToolCall_Function | undefined;\n}\n\nexport interface ToolCall_Function {\n  name: string;\n  arguments: string;\n}\n\nexport interface Message {\n  id: string;\n  role: string;\n  content?: string | undefined;\n  name?: string | undefined;\n  toolCalls: ToolCall[];\n  toolCallId?: string | undefined;\n  error?: string | undefined;\n}\n\nfunction createBaseToolCall(): ToolCall {\n  return { id: \"\", type: \"\", function: undefined };\n}\n\nexport const ToolCall: MessageFns<ToolCall> = {\n  encode(message: ToolCall, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.id !== \"\") {\n      writer.uint32(10).string(message.id);\n    }\n    if (message.type !== \"\") {\n      writer.uint32(18).string(message.type);\n    }\n    if (message.function !== undefined) {\n      ToolCall_Function.encode(message.function, writer.uint32(26).fork()).join();\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): ToolCall {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseToolCall();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.id = reader.string();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.type = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.function = ToolCall_Function.decode(reader, reader.uint32());\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<ToolCall>, I>>(base?: I): ToolCall {\n    return ToolCall.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<ToolCall>, I>>(object: I): ToolCall {\n    const message = createBaseToolCall();\n    message.id = object.id ?? \"\";\n    message.type = object.type ?? \"\";\n    message.function = (object.function !== undefined && object.function !== null)\n      ? ToolCall_Function.fromPartial(object.function)\n      : undefined;\n    return message;\n  },\n};\n\nfunction createBaseToolCall_Function(): ToolCall_Function {\n  return { name: \"\", arguments: \"\" };\n}\n\nexport const ToolCall_Function: MessageFns<ToolCall_Function> = {\n  encode(message: ToolCall_Function, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.name !== \"\") {\n      writer.uint32(10).string(message.name);\n    }\n    if (message.arguments !== \"\") {\n      writer.uint32(18).string(message.arguments);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): ToolCall_Function {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseToolCall_Function();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.name = reader.string();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.arguments = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<ToolCall_Function>, I>>(base?: I): ToolCall_Function {\n    return ToolCall_Function.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<ToolCall_Function>, I>>(object: I): ToolCall_Function {\n    const message = createBaseToolCall_Function();\n    message.name = object.name ?? \"\";\n    message.arguments = object.arguments ?? \"\";\n    return message;\n  },\n};\n\nfunction createBaseMessage(): Message {\n  return {\n    id: \"\",\n    role: \"\",\n    content: undefined,\n    name: undefined,\n    toolCalls: [],\n    toolCallId: undefined,\n    error: undefined,\n  };\n}\n\nexport const Message: MessageFns<Message> = {\n  encode(message: Message, writer: BinaryWriter = new BinaryWriter()): BinaryWriter {\n    if (message.id !== \"\") {\n      writer.uint32(10).string(message.id);\n    }\n    if (message.role !== \"\") {\n      writer.uint32(18).string(message.role);\n    }\n    if (message.content !== undefined) {\n      writer.uint32(26).string(message.content);\n    }\n    if (message.name !== undefined) {\n      writer.uint32(34).string(message.name);\n    }\n    for (const v of message.toolCalls) {\n      ToolCall.encode(v!, writer.uint32(42).fork()).join();\n    }\n    if (message.toolCallId !== undefined) {\n      writer.uint32(50).string(message.toolCallId);\n    }\n    if (message.error !== undefined) {\n      writer.uint32(58).string(message.error);\n    }\n    return writer;\n  },\n\n  decode(input: BinaryReader | Uint8Array, length?: number): Message {\n    const reader = input instanceof BinaryReader ? input : new BinaryReader(input);\n    const end = length === undefined ? reader.len : reader.pos + length;\n    const message = createBaseMessage();\n    while (reader.pos < end) {\n      const tag = reader.uint32();\n      switch (tag >>> 3) {\n        case 1: {\n          if (tag !== 10) {\n            break;\n          }\n\n          message.id = reader.string();\n          continue;\n        }\n        case 2: {\n          if (tag !== 18) {\n            break;\n          }\n\n          message.role = reader.string();\n          continue;\n        }\n        case 3: {\n          if (tag !== 26) {\n            break;\n          }\n\n          message.content = reader.string();\n          continue;\n        }\n        case 4: {\n          if (tag !== 34) {\n            break;\n          }\n\n          message.name = reader.string();\n          continue;\n        }\n        case 5: {\n          if (tag !== 42) {\n            break;\n          }\n\n          message.toolCalls.push(ToolCall.decode(reader, reader.uint32()));\n          continue;\n        }\n        case 6: {\n          if (tag !== 50) {\n            break;\n          }\n\n          message.toolCallId = reader.string();\n          continue;\n        }\n        case 7: {\n          if (tag !== 58) {\n            break;\n          }\n\n          message.error = reader.string();\n          continue;\n        }\n      }\n      if ((tag & 7) === 4 || tag === 0) {\n        break;\n      }\n      reader.skip(tag & 7);\n    }\n    return message;\n  },\n\n  create<I extends Exact<DeepPartial<Message>, I>>(base?: I): Message {\n    return Message.fromPartial(base ?? ({} as any));\n  },\n  fromPartial<I extends Exact<DeepPartial<Message>, I>>(object: I): Message {\n    const message = createBaseMessage();\n    message.id = object.id ?? \"\";\n    message.role = object.role ?? \"\";\n    message.content = object.content ?? undefined;\n    message.name = object.name ?? undefined;\n    message.toolCalls = object.toolCalls?.map((e) => ToolCall.fromPartial(e)) || [];\n    message.toolCallId = object.toolCallId ?? undefined;\n    message.error = object.error ?? undefined;\n    return message;\n  },\n};\n\ntype Builtin = Date | Function | Uint8Array | string | number | boolean | undefined;\n\nexport type DeepPartial<T> = T extends Builtin ? T\n  : T extends globalThis.Array<infer U> ? globalThis.Array<DeepPartial<U>>\n  : T extends ReadonlyArray<infer U> ? ReadonlyArray<DeepPartial<U>>\n  : T extends {} ? { [K in keyof T]?: DeepPartial<T[K]> }\n  : Partial<T>;\n\ntype KeysOfUnion<T> = T extends T ? keyof T : never;\nexport type Exact<P, I extends P> = P extends Builtin ? P\n  : P & { [K in keyof P]: Exact<P[K], I[K]> } & { [K in Exclude<keyof I, KeysOfUnion<P>>]: never };\n\nexport interface MessageFns<T> {\n  encode(message: T, writer?: BinaryWriter): BinaryWriter;\n  decode(input: BinaryReader | Uint8Array, length?: number): T;\n  create<I extends Exact<DeepPartial<T>, I>>(base?: I): T;\n  fromPartial<I extends Exact<DeepPartial<T>, I>>(object: I): T;\n}\n","export { encode, decode } from \"./proto\";\n\nexport const AGUI_MEDIA_TYPE = \"application/vnd.ag-ui.event+proto\";\n"],"names":["EventType","BinaryReader","BinaryWriter","BinaryReader","BinaryWriter","JsonPatchOperationType","BinaryWriter","BinaryReader","BinaryReader","BinaryWriter","BinaryWriter","BinaryReader","EventType","BinaryWriter","BinaryReader","EventType"],"mappings":"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"}},
    {"offset": {"line": 4934, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/compare-versions/lib/esm/utils.js","sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/compare-versions/src/utils.ts"],"sourcesContent":["/**\n * Allowed arithmetic operators\n */\nexport type CompareOperator = '>' | '>=' | '=' | '<' | '<=' | '!=';\n\nexport const semver =\n  /^[v^~<>=]*?(\\d+)(?:\\.([x*]|\\d+)(?:\\.([x*]|\\d+)(?:\\.([x*]|\\d+))?(?:-([\\da-z\\-]+(?:\\.[\\da-z\\-]+)*))?(?:\\+[\\da-z\\-]+(?:\\.[\\da-z\\-]+)*)?)?)?$/i;\n\nexport const validateAndParse = (version: string) => {\n  if (typeof version !== 'string') {\n    throw new TypeError('Invalid argument expected string');\n  }\n  const match = version.match(semver);\n  if (!match) {\n    throw new Error(\n      `Invalid argument not valid semver ('${version}' received)`\n    );\n  }\n  match.shift();\n  return match;\n};\n\nconst isWildcard = (s: string) => s === '*' || s === 'x' || s === 'X';\n\nconst tryParse = (v: string) => {\n  const n = parseInt(v, 10);\n  return isNaN(n) ? v : n;\n};\n\nconst forceType = (a: string | number, b: string | number) =>\n  typeof a !== typeof b ? [String(a), String(b)] : [a, b];\n\nconst compareStrings = (a: string, b: string) => {\n  if (isWildcard(a) || isWildcard(b)) return 0;\n  const [ap, bp] = forceType(tryParse(a), tryParse(b));\n  if (ap > bp) return 1;\n  if (ap < bp) return -1;\n  return 0;\n};\n\nexport const compareSegments = (\n  a: string | string[] | RegExpMatchArray,\n  b: string | string[] | RegExpMatchArray\n) => {\n  for (let i = 0; i < Math.max(a.length, b.length); i++) {\n    const r = compareStrings(a[i] || '0', b[i] || '0');\n    if (r !== 0) return r;\n  }\n  return 0;\n};\n"],"names":[],"mappings":";;;;;;;;AAKO,MAAM,MAAM,GACjB,4IAA4I,CAAC;AAExI,MAAM,gBAAgB,GAAG,CAAC,OAAe,EAAE,EAAE;IAClD,IAAI,OAAO,OAAO,KAAK,QAAQ,EAAE,CAAC;QAChC,MAAM,IAAI,SAAS,CAAC,kCAAkC,CAAC,CAAC;IAC1D,CAAC;IACD,MAAM,KAAK,GAAG,OAAO,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;IACpC,IAAI,CAAC,KAAK,EAAE,CAAC;QACX,MAAM,IAAI,KAAK,CACb,CAAA,oCAAA,EAAuC,OAAO,CAAA,WAAA,CAAa,CAC5D,CAAC;IACJ,CAAC;IACD,KAAK,CAAC,KAAK,EAAE,CAAC;IACd,OAAO,KAAK,CAAC;AACf,CAAC,CAAC;AAEF,MAAM,UAAU,GAAG,CAAC,CAAS,EAAE,CAAG,CAAD,AAAE,KAAK,GAAG,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,KAAK,GAAG,CAAC;AAEtE,MAAM,QAAQ,GAAG,CAAC,CAAS,EAAE,EAAE;IAC7B,MAAM,CAAC,GAAG,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;IAC1B,OAAO,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAC1B,CAAC,CAAC;AAEF,MAAM,SAAS,GAAG,CAAC,CAAkB,EAAE,CAAkB,EAAE,CACzD,CAD2D,MACpD,CAAC,KAAK,OAAO,CAAC,CAAC,CAAC,CAAC;QAAC,MAAM,CAAC,CAAC,CAAC;QAAE,MAAM,CAAC,CAAC,CAAC;KAAC,CAAC,CAAC,CAAC;QAAC,CAAC;QAAE,CAAC;KAAC,CAAC;AAE1D,MAAM,cAAc,GAAG,CAAC,CAAS,EAAE,CAAS,EAAE,EAAE;IAC9C,IAAI,UAAU,CAAC,CAAC,CAAC,IAAI,UAAU,CAAC,CAAC,CAAC,EAAE,OAAO,CAAC,CAAC;IAC7C,MAAM,CAAC,EAAE,EAAE,EAAE,CAAC,GAAG,SAAS,CAAC,QAAQ,CAAC,CAAC,CAAC,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC;IACrD,IAAI,EAAE,GAAG,EAAE,EAAE,OAAO,CAAC,CAAC;IACtB,IAAI,EAAE,GAAG,EAAE,EAAE,OAAO,CAAC,CAAC,CAAC;IACvB,OAAO,CAAC,CAAC;AACX,CAAC,CAAC;AAEK,MAAM,eAAe,GAAG,CAC7B,CAAuC,EACvC,CAAuC,EACvC,EAAE;IACF,IAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,MAAM,EAAE,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,EAAE,CAAE,CAAC;QACtD,MAAM,CAAC,GAAG,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC,IAAI,GAAG,CAAC,CAAC;QACnD,IAAI,CAAC,KAAK,CAAC,EAAE,OAAO,CAAC,CAAC;IACxB,CAAC;IACD,OAAO,CAAC,CAAC;AACX,CAAC,CAAC"}},
    {"offset": {"line": 4984, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/compare-versions/lib/esm/compareVersions.js","sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/compare-versions/src/compareVersions.ts"],"sourcesContent":["import { compareSegments, validateAndParse } from './utils.js';\n\n/**\n * Compare [semver](https://semver.org/) version strings to find greater, equal or lesser.\n * This library supports the full semver specification, including comparing versions with different number of digits like `1.0.0`, `1.0`, `1`, and pre-release versions like `1.0.0-alpha`.\n * @param v1 - First version to compare\n * @param v2 - Second version to compare\n * @returns Numeric value compatible with the [Array.sort(fn) interface](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/sort#Parameters).\n */\nexport const compareVersions = (v1: string, v2: string) => {\n  // validate input and split into segments\n  const n1 = validateAndParse(v1);\n  const n2 = validateAndParse(v2);\n\n  // pop off the patch\n  const p1 = n1.pop();\n  const p2 = n2.pop();\n\n  // validate numbers\n  const r = compareSegments(n1, n2);\n  if (r !== 0) return r;\n\n  // validate pre-release\n  if (p1 && p2) {\n    return compareSegments(p1.split('.'), p2.split('.'));\n  } else if (p1 || p2) {\n    return p1 ? -1 : 1;\n  }\n\n  return 0;\n};\n"],"names":[],"mappings":";;;;AAAA,OAAO,EAAE,eAAe,EAAE,gBAAgB,EAAE,MAAM,YAAY,CAAC;;AASxD,MAAM,eAAe,GAAG,CAAC,EAAU,EAAE,EAAU,EAAE,EAAE;IACxD,yCAAyC;IACzC,MAAM,EAAE,OAAG,gLAAgB,EAAC,EAAE,CAAC,CAAC;IAChC,MAAM,EAAE,OAAG,gLAAgB,EAAC,EAAE,CAAC,CAAC;IAEhC,oBAAoB;IACpB,MAAM,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;IACpB,MAAM,EAAE,GAAG,EAAE,CAAC,GAAG,EAAE,CAAC;IAEpB,mBAAmB;IACnB,MAAM,CAAC,OAAG,+KAAe,EAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IAClC,IAAI,CAAC,KAAK,CAAC,EAAE,OAAO,CAAC,CAAC;IAEtB,uBAAuB;IACvB,IAAI,EAAE,IAAI,EAAE,EAAE,CAAC;QACb,WAAO,+KAAe,EAAC,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC;IACvD,CAAC,MAAM,IAAI,EAAE,IAAI,EAAE,EAAE,CAAC;QACpB,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACrB,CAAC;IAED,OAAO,CAAC,CAAC;AACX,CAAC,CAAC"}},
    {"offset": {"line": 5012, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/client/src/apply/default.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/client/src/utils.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/client/src/agent/subscriber.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/client/src/verify/verify.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/client/src/transform/http.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/client/src/run/http-request.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/client/src/transform/sse.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/client/src/transform/proto.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/client/src/legacy/convert.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/client/src/legacy/types.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/client/src/agent/agent.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/client/src/chunks/transform.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/client/src/middleware/middleware.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/client/src/middleware/filter-tool-calls.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/client/src/middleware/backward-compatibility-0-0-39.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/client/package.json","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/client/src/agent/http.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/client/src/compact/compact.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/client/src/index.ts"],"sourcesContent":["import {\n  EventType,\n  TextMessageStartEvent,\n  TextMessageContentEvent,\n  Message,\n  DeveloperMessage,\n  SystemMessage,\n  AssistantMessage,\n  UserMessage,\n  ToolCallStartEvent,\n  ToolCallArgsEvent,\n  StateSnapshotEvent,\n  StateDeltaEvent,\n  MessagesSnapshotEvent,\n  CustomEvent,\n  BaseEvent,\n  ToolCallResultEvent,\n  ToolMessage,\n  RunAgentInput,\n  TextMessageEndEvent,\n  ToolCallEndEvent,\n  RawEvent,\n  RunStartedEvent,\n  RunFinishedEvent,\n  RunErrorEvent,\n  StepStartedEvent,\n  StepFinishedEvent,\n  ActivitySnapshotEvent,\n  ActivityDeltaEvent,\n  ActivityMessage,\n} from \"@ag-ui/core\";\nimport { mergeMap, mergeAll, defaultIfEmpty, concatMap } from \"rxjs/operators\";\nimport { of, EMPTY } from \"rxjs\";\nimport { structuredClone_ } from \"../utils\";\nimport { applyPatch } from \"fast-json-patch\";\nimport {\n  AgentStateMutation,\n  AgentSubscriber,\n  runSubscribersWithMutation,\n} from \"@/agent/subscriber\";\nimport { Observable } from \"rxjs\";\nimport { AbstractAgent } from \"@/agent/agent\";\nimport untruncateJson from \"untruncate-json\";\n\nexport const defaultApplyEvents = (\n  input: RunAgentInput,\n  events$: Observable<BaseEvent>,\n  agent: AbstractAgent,\n  subscribers: AgentSubscriber[],\n): Observable<AgentStateMutation> => {\n  let messages = structuredClone_(agent.messages);\n  let state = structuredClone_(input.state);\n  let currentMutation: AgentStateMutation = {};\n\n  const applyMutation = (mutation: AgentStateMutation) => {\n    if (mutation.messages !== undefined) {\n      messages = mutation.messages;\n      currentMutation.messages = mutation.messages;\n    }\n    if (mutation.state !== undefined) {\n      state = mutation.state;\n      currentMutation.state = mutation.state;\n    }\n  };\n\n  const emitUpdates = () => {\n    const result = structuredClone_(currentMutation) as AgentStateMutation;\n    currentMutation = {};\n    if (result.messages !== undefined || result.state !== undefined) {\n      return of(result);\n    }\n    return EMPTY;\n  };\n\n  return events$.pipe(\n    concatMap(async (event) => {\n      const mutation = await runSubscribersWithMutation(\n        subscribers,\n        messages,\n        state,\n        (subscriber, messages, state) =>\n          subscriber.onEvent?.({ event, agent, input, messages, state }),\n      );\n      applyMutation(mutation);\n\n      if (mutation.stopPropagation === true) {\n        return emitUpdates();\n      }\n\n      switch (event.type) {\n        case EventType.TEXT_MESSAGE_START: {\n          const mutation = await runSubscribersWithMutation(\n            subscribers,\n            messages,\n            state,\n            (subscriber, messages, state) =>\n              subscriber.onTextMessageStartEvent?.({\n                event: event as TextMessageStartEvent,\n                messages,\n                state,\n                agent,\n                input,\n              }),\n          );\n          applyMutation(mutation);\n\n          if (mutation.stopPropagation !== true) {\n            const { messageId, role = \"assistant\" } = event as TextMessageStartEvent;\n\n            // Create a new message using properties from the event\n            // Text messages can be developer, system, assistant, or user (not tool)\n            const newMessage: Message = {\n              id: messageId,\n              role: role,\n              content: \"\",\n            };\n\n            // Add the new message to the messages array\n            messages.push(newMessage);\n            applyMutation({ messages });\n          }\n          return emitUpdates();\n        }\n\n        case EventType.TEXT_MESSAGE_CONTENT: {\n          const { messageId, delta } = event as TextMessageContentEvent;\n\n          // Find the target message by ID\n          const targetMessage = messages.find((m) => m.id === messageId);\n          if (!targetMessage) {\n            console.warn(`TEXT_MESSAGE_CONTENT: No message found with ID '${messageId}'`);\n            return emitUpdates();\n          }\n\n          const mutation = await runSubscribersWithMutation(\n            subscribers,\n            messages,\n            state,\n            (subscriber, messages, state) =>\n              subscriber.onTextMessageContentEvent?.({\n                event: event as TextMessageContentEvent,\n                messages,\n                state,\n                agent,\n                input,\n                textMessageBuffer:\n                  typeof targetMessage.content === \"string\" ? targetMessage.content : \"\",\n              }),\n          );\n          applyMutation(mutation);\n\n          if (mutation.stopPropagation !== true) {\n            // Append content to the correct message by ID\n            const existingContent =\n              typeof targetMessage.content === \"string\" ? targetMessage.content : \"\";\n            targetMessage.content = `${existingContent}${delta}`;\n            applyMutation({ messages });\n          }\n\n          return emitUpdates();\n        }\n\n        case EventType.TEXT_MESSAGE_END: {\n          const { messageId } = event as TextMessageEndEvent;\n\n          // Find the target message by ID\n          const targetMessage = messages.find((m) => m.id === messageId);\n          if (!targetMessage) {\n            console.warn(`TEXT_MESSAGE_END: No message found with ID '${messageId}'`);\n            return emitUpdates();\n          }\n\n          const mutation = await runSubscribersWithMutation(\n            subscribers,\n            messages,\n            state,\n            (subscriber, messages, state) =>\n              subscriber.onTextMessageEndEvent?.({\n                event: event as TextMessageEndEvent,\n                messages,\n                state,\n                agent,\n                input,\n                textMessageBuffer:\n                  typeof targetMessage.content === \"string\" ? targetMessage.content : \"\",\n              }),\n          );\n          applyMutation(mutation);\n\n          await Promise.all(\n            subscribers.map((subscriber) => {\n              subscriber.onNewMessage?.({\n                message: targetMessage,\n                messages,\n                state,\n                agent,\n                input,\n              });\n            }),\n          );\n\n          return emitUpdates();\n        }\n\n        case EventType.TOOL_CALL_START: {\n          const mutation = await runSubscribersWithMutation(\n            subscribers,\n            messages,\n            state,\n            (subscriber, messages, state) =>\n              subscriber.onToolCallStartEvent?.({\n                event: event as ToolCallStartEvent,\n                messages,\n                state,\n                agent,\n                input,\n              }),\n          );\n          applyMutation(mutation);\n\n          if (mutation.stopPropagation !== true) {\n            const { toolCallId, toolCallName, parentMessageId } = event as ToolCallStartEvent;\n\n            let targetMessage: AssistantMessage;\n\n            // Use last message if parentMessageId exists, we have messages, and the parentMessageId matches the last message's id\n            if (\n              parentMessageId &&\n              messages.length > 0 &&\n              messages[messages.length - 1].id === parentMessageId\n            ) {\n              targetMessage = messages[messages.length - 1] as AssistantMessage;\n            } else {\n              // Create a new message otherwise\n              targetMessage = {\n                id: parentMessageId || toolCallId,\n                role: \"assistant\",\n                toolCalls: [],\n              };\n              messages.push(targetMessage);\n            }\n\n            targetMessage.toolCalls ??= [];\n\n            // Add the new tool call\n            targetMessage.toolCalls.push({\n              id: toolCallId,\n              type: \"function\",\n              function: {\n                name: toolCallName,\n                arguments: \"\",\n              },\n            });\n\n            applyMutation({ messages });\n          }\n\n          return emitUpdates();\n        }\n\n        case EventType.TOOL_CALL_ARGS: {\n          const { toolCallId, delta } = event as ToolCallArgsEvent;\n\n          // Find the message containing this tool call\n          const targetMessage = messages.find((m) =>\n            (m as AssistantMessage).toolCalls?.some((tc) => tc.id === toolCallId),\n          ) as AssistantMessage;\n\n          if (!targetMessage) {\n            console.warn(\n              `TOOL_CALL_ARGS: No message found containing tool call with ID '${toolCallId}'`,\n            );\n            return emitUpdates();\n          }\n\n          // Find the specific tool call\n          const targetToolCall = targetMessage.toolCalls!.find((tc) => tc.id === toolCallId);\n          if (!targetToolCall) {\n            console.warn(`TOOL_CALL_ARGS: No tool call found with ID '${toolCallId}'`);\n            return emitUpdates();\n          }\n\n          const mutation = await runSubscribersWithMutation(\n            subscribers,\n            messages,\n            state,\n            (subscriber, messages, state) => {\n              const toolCallBuffer = targetToolCall.function.arguments;\n              const toolCallName = targetToolCall.function.name;\n              let partialToolCallArgs = {};\n              try {\n                // Parse from toolCallBuffer only (before current delta is applied)\n                partialToolCallArgs = untruncateJson(toolCallBuffer);\n              } catch (error) {}\n\n              return subscriber.onToolCallArgsEvent?.({\n                event: event as ToolCallArgsEvent,\n                messages,\n                state,\n                agent,\n                input,\n                toolCallBuffer,\n                toolCallName,\n                partialToolCallArgs,\n              });\n            },\n          );\n          applyMutation(mutation);\n\n          if (mutation.stopPropagation !== true) {\n            // Append the arguments to the correct tool call by ID\n            targetToolCall.function.arguments += delta;\n            applyMutation({ messages });\n          }\n\n          return emitUpdates();\n        }\n\n        case EventType.TOOL_CALL_END: {\n          const { toolCallId } = event as ToolCallEndEvent;\n\n          // Find the message containing this tool call\n          const targetMessage = messages.find((m) =>\n            (m as AssistantMessage).toolCalls?.some((tc) => tc.id === toolCallId),\n          ) as AssistantMessage;\n\n          if (!targetMessage) {\n            console.warn(\n              `TOOL_CALL_END: No message found containing tool call with ID '${toolCallId}'`,\n            );\n            return emitUpdates();\n          }\n\n          // Find the specific tool call\n          const targetToolCall = targetMessage.toolCalls!.find((tc) => tc.id === toolCallId);\n          if (!targetToolCall) {\n            console.warn(`TOOL_CALL_END: No tool call found with ID '${toolCallId}'`);\n            return emitUpdates();\n          }\n\n          const mutation = await runSubscribersWithMutation(\n            subscribers,\n            messages,\n            state,\n            (subscriber, messages, state) => {\n              const toolCallArgsString = targetToolCall.function.arguments;\n              const toolCallName = targetToolCall.function.name;\n              let toolCallArgs = {};\n              try {\n                toolCallArgs = JSON.parse(toolCallArgsString);\n              } catch (error) {}\n              return subscriber.onToolCallEndEvent?.({\n                event: event as ToolCallEndEvent,\n                messages,\n                state,\n                agent,\n                input,\n                toolCallName,\n                toolCallArgs,\n              });\n            },\n          );\n          applyMutation(mutation);\n\n          await Promise.all(\n            subscribers.map((subscriber) => {\n              subscriber.onNewToolCall?.({\n                toolCall: targetToolCall,\n                messages,\n                state,\n                agent,\n                input,\n              });\n            }),\n          );\n\n          return emitUpdates();\n        }\n\n        case EventType.TOOL_CALL_RESULT: {\n          const mutation = await runSubscribersWithMutation(\n            subscribers,\n            messages,\n            state,\n            (subscriber, messages, state) =>\n              subscriber.onToolCallResultEvent?.({\n                event: event as ToolCallResultEvent,\n                messages,\n                state,\n                agent,\n                input,\n              }),\n          );\n\n          applyMutation(mutation);\n\n          if (mutation.stopPropagation !== true) {\n            const { messageId, toolCallId, content, role } = event as ToolCallResultEvent;\n\n            const toolMessage: ToolMessage = {\n              id: messageId,\n              toolCallId,\n              role: role || \"tool\",\n              content: content,\n            };\n\n            messages.push(toolMessage);\n\n            await Promise.all(\n              subscribers.map((subscriber) => {\n                subscriber.onNewMessage?.({\n                  message: toolMessage,\n                  messages,\n                  state,\n                  agent,\n                  input,\n                });\n              }),\n            );\n\n            applyMutation({ messages });\n          }\n\n          return emitUpdates();\n        }\n\n        case EventType.STATE_SNAPSHOT: {\n          const mutation = await runSubscribersWithMutation(\n            subscribers,\n            messages,\n            state,\n            (subscriber, messages, state) =>\n              subscriber.onStateSnapshotEvent?.({\n                event: event as StateSnapshotEvent,\n                messages,\n                state,\n                agent,\n                input,\n              }),\n          );\n          applyMutation(mutation);\n\n          if (mutation.stopPropagation !== true) {\n            const { snapshot } = event as StateSnapshotEvent;\n\n            // Replace state with the literal snapshot\n            state = snapshot;\n\n            applyMutation({ state });\n          }\n\n          return emitUpdates();\n        }\n\n        case EventType.STATE_DELTA: {\n          const mutation = await runSubscribersWithMutation(\n            subscribers,\n            messages,\n            state,\n            (subscriber, messages, state) =>\n              subscriber.onStateDeltaEvent?.({\n                event: event as StateDeltaEvent,\n                messages,\n                state,\n                agent,\n                input,\n              }),\n          );\n          applyMutation(mutation);\n\n          if (mutation.stopPropagation !== true) {\n            const { delta } = event as StateDeltaEvent;\n\n            try {\n              // Apply the JSON Patch operations to the current state without mutating the original\n              const result = applyPatch(state, delta, true, false);\n              state = result.newDocument;\n              applyMutation({ state });\n            } catch (error: unknown) {\n              const errorMessage = error instanceof Error ? error.message : String(error);\n              console.warn(\n                `Failed to apply state patch:\\n` +\n                  `Current state: ${JSON.stringify(state, null, 2)}\\n` +\n                  `Patch operations: ${JSON.stringify(delta, null, 2)}\\n` +\n                  `Error: ${errorMessage}`,\n              );\n              // If patch failed, only emit updates if there were subscriber mutations\n              // This prevents emitting updates when both patch fails AND no subscriber mutations\n            }\n          }\n\n          return emitUpdates();\n        }\n\n        case EventType.MESSAGES_SNAPSHOT: {\n          const mutation = await runSubscribersWithMutation(\n            subscribers,\n            messages,\n            state,\n            (subscriber, messages, state) =>\n              subscriber.onMessagesSnapshotEvent?.({\n                event: event as MessagesSnapshotEvent,\n                messages,\n                state,\n                agent,\n                input,\n              }),\n          );\n          applyMutation(mutation);\n\n          if (mutation.stopPropagation !== true) {\n            const { messages: newMessages } = event as MessagesSnapshotEvent;\n\n            // Replace messages with the snapshot\n            messages = newMessages;\n\n            applyMutation({ messages });\n          }\n\n          return emitUpdates();\n        }\n\n        case EventType.ACTIVITY_SNAPSHOT: {\n          const activityEvent = event as ActivitySnapshotEvent;\n          const existingIndex = messages.findIndex((m) => m.id === activityEvent.messageId);\n          const existingMessage = existingIndex >= 0 ? messages[existingIndex] : undefined;\n          const existingActivityMessage =\n            existingMessage?.role === \"activity\" ? (existingMessage as ActivityMessage) : undefined;\n          const replace = activityEvent.replace ?? true;\n\n          const mutation = await runSubscribersWithMutation(\n            subscribers,\n            messages,\n            state,\n            (subscriber, messages, state) =>\n              subscriber.onActivitySnapshotEvent?.({\n                event: activityEvent,\n                messages,\n                state,\n                agent,\n                input,\n                activityMessage: existingActivityMessage,\n                existingMessage,\n              }),\n          );\n          applyMutation(mutation);\n\n          if (mutation.stopPropagation !== true) {\n            const activityMessage: ActivityMessage = {\n              id: activityEvent.messageId,\n              role: \"activity\",\n              activityType: activityEvent.activityType,\n              content: structuredClone_(activityEvent.content),\n            };\n\n            let createdMessage: ActivityMessage | undefined;\n\n            if (existingIndex === -1) {\n              messages.push(activityMessage);\n              createdMessage = activityMessage;\n            } else if (existingActivityMessage) {\n              if (replace) {\n                messages[existingIndex] = {\n                  ...existingActivityMessage,\n                  activityType: activityEvent.activityType,\n                  content: structuredClone_(activityEvent.content),\n                };\n              }\n            } else if (replace) {\n              messages[existingIndex] = activityMessage;\n              createdMessage = activityMessage;\n            }\n\n            applyMutation({ messages });\n\n            if (createdMessage) {\n              await Promise.all(\n                subscribers.map((subscriber) =>\n                  subscriber.onNewMessage?.({\n                    message: createdMessage,\n                    messages,\n                    state,\n                    agent,\n                    input,\n                  }),\n                ),\n              );\n            }\n          }\n\n          return emitUpdates();\n        }\n\n        case EventType.ACTIVITY_DELTA: {\n          const activityEvent = event as ActivityDeltaEvent;\n          const existingIndex = messages.findIndex((m) => m.id === activityEvent.messageId);\n          if (existingIndex === -1) {\n            console.warn(\n              `ACTIVITY_DELTA: No message found with ID '${activityEvent.messageId}' to apply patch`,\n            );\n            return emitUpdates();\n          }\n\n          const existingMessage = messages[existingIndex];\n          if (existingMessage.role !== \"activity\") {\n            console.warn(\n              `ACTIVITY_DELTA: Message '${activityEvent.messageId}' is not an activity message`,\n            );\n            return emitUpdates();\n          }\n\n          const existingActivityMessage = existingMessage as ActivityMessage;\n\n          const mutation = await runSubscribersWithMutation(\n            subscribers,\n            messages,\n            state,\n            (subscriber, messages, state) =>\n              subscriber.onActivityDeltaEvent?.({\n                event: activityEvent,\n                messages,\n                state,\n                agent,\n                input,\n                activityMessage: existingActivityMessage,\n              }),\n          );\n          applyMutation(mutation);\n\n          if (mutation.stopPropagation !== true) {\n            try {\n              const baseContent = structuredClone_(existingActivityMessage.content ?? {});\n\n              const result = applyPatch(\n                baseContent,\n                activityEvent.patch ?? [],\n                true,\n                false,\n              );\n              const updatedContent = result.newDocument as ActivityMessage[\"content\"];\n\n              messages[existingIndex] = {\n                ...existingActivityMessage,\n                content: structuredClone_(updatedContent),\n                activityType: activityEvent.activityType,\n              };\n\n              applyMutation({ messages });\n            } catch (error: unknown) {\n              const errorMessage = error instanceof Error ? error.message : String(error);\n              console.warn(\n                `Failed to apply activity patch for '${activityEvent.messageId}': ${errorMessage}`,\n              );\n            }\n          }\n\n          return emitUpdates();\n        }\n\n        case EventType.RAW: {\n          const mutation = await runSubscribersWithMutation(\n            subscribers,\n            messages,\n            state,\n            (subscriber, messages, state) =>\n              subscriber.onRawEvent?.({\n                event: event as RawEvent,\n                messages,\n                state,\n                agent,\n                input,\n              }),\n          );\n          applyMutation(mutation);\n\n          return emitUpdates();\n        }\n\n        case EventType.CUSTOM: {\n          const mutation = await runSubscribersWithMutation(\n            subscribers,\n            messages,\n            state,\n            (subscriber, messages, state) =>\n              subscriber.onCustomEvent?.({\n                event: event as CustomEvent,\n                messages,\n                state,\n                agent,\n                input,\n              }),\n          );\n          applyMutation(mutation);\n\n          return emitUpdates();\n        }\n\n        case EventType.RUN_STARTED: {\n          const mutation = await runSubscribersWithMutation(\n            subscribers,\n            messages,\n            state,\n            (subscriber, messages, state) =>\n              subscriber.onRunStartedEvent?.({\n                event: event as RunStartedEvent,\n                messages,\n                state,\n                agent,\n                input,\n              }),\n          );\n          applyMutation(mutation);\n\n          // Handle input.messages if present and stopPropagation is not set\n          if (mutation.stopPropagation !== true) {\n            const runStartedEvent = event as RunStartedEvent;\n\n            // Check if the event contains input with messages\n            if (runStartedEvent.input?.messages) {\n              // Add messages that aren't already present (checked by ID)\n              for (const message of runStartedEvent.input.messages) {\n                const existingMessage = messages.find((m) => m.id === message.id);\n                if (!existingMessage) {\n                  messages.push(message);\n                }\n              }\n\n              // Apply mutation to emit the updated messages\n              applyMutation({ messages });\n            }\n          }\n\n          return emitUpdates();\n        }\n\n        case EventType.RUN_FINISHED: {\n          const mutation = await runSubscribersWithMutation(\n            subscribers,\n            messages,\n            state,\n            (subscriber, messages, state) =>\n              subscriber.onRunFinishedEvent?.({\n                event: event as RunFinishedEvent,\n                messages,\n                state,\n                agent,\n                input,\n                result: (event as RunFinishedEvent).result,\n              }),\n          );\n          applyMutation(mutation);\n\n          return emitUpdates();\n        }\n\n        case EventType.RUN_ERROR: {\n          const mutation = await runSubscribersWithMutation(\n            subscribers,\n            messages,\n            state,\n            (subscriber, messages, state) =>\n              subscriber.onRunErrorEvent?.({\n                event: event as RunErrorEvent,\n                messages,\n                state,\n                agent,\n                input,\n              }),\n          );\n          applyMutation(mutation);\n\n          return emitUpdates();\n        }\n\n        case EventType.STEP_STARTED: {\n          const mutation = await runSubscribersWithMutation(\n            subscribers,\n            messages,\n            state,\n            (subscriber, messages, state) =>\n              subscriber.onStepStartedEvent?.({\n                event: event as StepStartedEvent,\n                messages,\n                state,\n                agent,\n                input,\n              }),\n          );\n          applyMutation(mutation);\n\n          return emitUpdates();\n        }\n\n        case EventType.STEP_FINISHED: {\n          const mutation = await runSubscribersWithMutation(\n            subscribers,\n            messages,\n            state,\n            (subscriber, messages, state) =>\n              subscriber.onStepFinishedEvent?.({\n                event: event as StepFinishedEvent,\n                messages,\n                state,\n                agent,\n                input,\n              }),\n          );\n          applyMutation(mutation);\n\n          return emitUpdates();\n        }\n\n        case EventType.TEXT_MESSAGE_CHUNK: {\n          throw new Error(\"TEXT_MESSAGE_CHUNK must be tranformed before being applied\");\n        }\n\n        case EventType.TOOL_CALL_CHUNK: {\n          throw new Error(\"TOOL_CALL_CHUNK must be tranformed before being applied\");\n        }\n\n        case EventType.THINKING_START: {\n          return emitUpdates();\n        }\n\n        case EventType.THINKING_END: {\n          return emitUpdates();\n        }\n\n        case EventType.THINKING_TEXT_MESSAGE_START: {\n          return emitUpdates();\n        }\n\n        case EventType.THINKING_TEXT_MESSAGE_CONTENT: {\n          return emitUpdates();\n        }\n\n        case EventType.THINKING_TEXT_MESSAGE_END: {\n          return emitUpdates();\n        }\n      }\n\n      // This makes TypeScript check that the switch is exhaustive\n      // If a new EventType is added, this will cause a compile error\n      const _exhaustiveCheck: never = event.type;\n      return emitUpdates();\n    }),\n    mergeAll(),\n    // Only use defaultIfEmpty when there are subscribers to avoid emitting empty updates\n    // when patches fail and there are no subscribers (like in state patching test)\n    subscribers.length > 0 ? defaultIfEmpty({} as AgentStateMutation) : (stream: any) => stream,\n  );\n};\n","import { v4 as uuidv4 } from \"uuid\";\n\nexport const structuredClone_ = <T>(obj: T): T => {\n  if (typeof structuredClone === \"function\") {\n    return structuredClone(obj);\n  }\n\n  try {\n    return JSON.parse(JSON.stringify(obj));\n  } catch (err) {\n    return { ...obj } as T;\n  }\n};\n\n/**\n * Generate a random UUID v4\n * Cross-platform compatible (Node.js, browsers, React Native)\n */\nexport function randomUUID(): string {\n  return uuidv4();\n}\n\n// Note: semver helpers were removed in favor of using\n// the external `compare-versions` library directly at call sites.\n\n\n/**\n * Parses a semantic version string into its numeric components.\n * Supports incomplete versions (e.g. \"1\", \"1.2\") by defaulting missing segments to zero.\n *\n * @throws If the version string is not a valid semantic version.\n */\n// (Intentionally left minimal.)\n","import {\n  BaseEvent,\n  Message,\n  RunAgentInput,\n  RunErrorEvent,\n  RunFinishedEvent,\n  RunStartedEvent,\n  State,\n  StateDeltaEvent,\n  StateSnapshotEvent,\n  StepFinishedEvent,\n  StepStartedEvent,\n  TextMessageContentEvent,\n  TextMessageEndEvent,\n  TextMessageStartEvent,\n  ToolCallArgsEvent,\n  ToolCallEndEvent,\n  ToolCallResultEvent,\n  ToolCallStartEvent,\n  MessagesSnapshotEvent,\n  RawEvent,\n  CustomEvent,\n  ToolCall,\n  ActivitySnapshotEvent,\n  ActivityDeltaEvent,\n  ActivityMessage,\n} from \"@ag-ui/core\";\nimport { AbstractAgent } from \"./agent\";\nimport { structuredClone_ } from \"@/utils\";\n\nexport interface AgentStateMutation {\n  messages?: Message[];\n  state?: State;\n  stopPropagation?: boolean;\n}\n\nexport interface AgentSubscriberParams {\n  messages: Message[];\n  state: State;\n  agent: AbstractAgent;\n  input: RunAgentInput;\n}\n\n// Utility type to allow callbacks to be implemented either synchronously or asynchronously.\nexport type MaybePromise<T> = T | Promise<T>;\n\nexport interface AgentSubscriber {\n  // Request lifecycle\n  onRunInitialized?(\n    params: AgentSubscriberParams,\n  ): MaybePromise<Omit<AgentStateMutation, \"stopPropagation\"> | void>;\n  onRunFailed?(\n    params: { error: Error } & AgentSubscriberParams,\n  ): MaybePromise<Omit<AgentStateMutation, \"stopPropagation\"> | void>;\n  onRunFinalized?(\n    params: AgentSubscriberParams,\n  ): MaybePromise<Omit<AgentStateMutation, \"stopPropagation\"> | void>;\n\n  // Events\n  onEvent?(\n    params: { event: BaseEvent } & AgentSubscriberParams,\n  ): MaybePromise<AgentStateMutation | void>;\n\n  onRunStartedEvent?(\n    params: { event: RunStartedEvent } & AgentSubscriberParams,\n  ): MaybePromise<AgentStateMutation | void>;\n  onRunFinishedEvent?(\n    params: { event: RunFinishedEvent; result?: any } & AgentSubscriberParams,\n  ): MaybePromise<AgentStateMutation | void>;\n  onRunErrorEvent?(\n    params: { event: RunErrorEvent } & AgentSubscriberParams,\n  ): MaybePromise<AgentStateMutation | void>;\n\n  onStepStartedEvent?(\n    params: { event: StepStartedEvent } & AgentSubscriberParams,\n  ): MaybePromise<AgentStateMutation | void>;\n  onStepFinishedEvent?(\n    params: { event: StepFinishedEvent } & AgentSubscriberParams,\n  ): MaybePromise<AgentStateMutation | void>;\n\n  onTextMessageStartEvent?(\n    params: { event: TextMessageStartEvent } & AgentSubscriberParams,\n  ): MaybePromise<AgentStateMutation | void>;\n  onTextMessageContentEvent?(\n    params: {\n      event: TextMessageContentEvent;\n      textMessageBuffer: string;\n    } & AgentSubscriberParams,\n  ): MaybePromise<AgentStateMutation | void>;\n  onTextMessageEndEvent?(\n    params: { event: TextMessageEndEvent; textMessageBuffer: string } & AgentSubscriberParams,\n  ): MaybePromise<AgentStateMutation | void>;\n\n  onToolCallStartEvent?(\n    params: { event: ToolCallStartEvent } & AgentSubscriberParams,\n  ): MaybePromise<AgentStateMutation | void>;\n  onToolCallArgsEvent?(\n    params: {\n      event: ToolCallArgsEvent;\n      toolCallBuffer: string;\n      toolCallName: string;\n      partialToolCallArgs: Record<string, any>;\n    } & AgentSubscriberParams,\n  ): MaybePromise<AgentStateMutation | void>;\n  onToolCallEndEvent?(\n    params: {\n      event: ToolCallEndEvent;\n      toolCallName: string;\n      toolCallArgs: Record<string, any>;\n    } & AgentSubscriberParams,\n  ): MaybePromise<AgentStateMutation | void>;\n\n  onToolCallResultEvent?(\n    params: { event: ToolCallResultEvent } & AgentSubscriberParams,\n  ): MaybePromise<AgentStateMutation | void>;\n\n  onStateSnapshotEvent?(\n    params: { event: StateSnapshotEvent } & AgentSubscriberParams,\n  ): MaybePromise<AgentStateMutation | void>;\n\n  onStateDeltaEvent?(\n    params: { event: StateDeltaEvent } & AgentSubscriberParams,\n  ): MaybePromise<AgentStateMutation | void>;\n\n  onMessagesSnapshotEvent?(\n    params: { event: MessagesSnapshotEvent } & AgentSubscriberParams,\n  ): MaybePromise<AgentStateMutation | void>;\n\n  onActivitySnapshotEvent?(\n    params: {\n      event: ActivitySnapshotEvent;\n      activityMessage?: ActivityMessage;\n      existingMessage?: Message;\n    } & AgentSubscriberParams,\n  ): MaybePromise<AgentStateMutation | void>;\n\n  onActivityDeltaEvent?(\n    params: {\n      event: ActivityDeltaEvent;\n      activityMessage?: ActivityMessage;\n    } & AgentSubscriberParams,\n  ): MaybePromise<AgentStateMutation | void>;\n\n  onRawEvent?(\n    params: { event: RawEvent } & AgentSubscriberParams,\n  ): MaybePromise<AgentStateMutation | void>;\n\n  onCustomEvent?(\n    params: { event: CustomEvent } & AgentSubscriberParams,\n  ): MaybePromise<AgentStateMutation | void>;\n\n  // State changes\n  onMessagesChanged?(\n    params: Omit<AgentSubscriberParams, \"input\"> & { input?: RunAgentInput },\n  ): MaybePromise<void>;\n  onStateChanged?(\n    params: Omit<AgentSubscriberParams, \"input\"> & { input?: RunAgentInput },\n  ): MaybePromise<void>;\n  onNewMessage?(\n    params: { message: Message } & Omit<AgentSubscriberParams, \"input\"> & {\n        input?: RunAgentInput;\n      },\n  ): MaybePromise<void>;\n  onNewToolCall?(\n    params: { toolCall: ToolCall } & Omit<AgentSubscriberParams, \"input\"> & {\n        input?: RunAgentInput;\n      },\n  ): MaybePromise<void>;\n}\n\nexport async function runSubscribersWithMutation(\n  subscribers: AgentSubscriber[],\n  initialMessages: Message[],\n  initialState: State,\n  executor: (\n    subscriber: AgentSubscriber,\n    messages: Message[],\n    state: State,\n  ) => MaybePromise<AgentStateMutation | void>,\n): Promise<AgentStateMutation> {\n  let messages: Message[] = initialMessages;\n  let state: State = initialState;\n\n  let stopPropagation: boolean | undefined = undefined;\n\n  for (const subscriber of subscribers) {\n    try {\n      const mutation = await executor(\n        subscriber,\n        structuredClone_(messages),\n        structuredClone_(state),\n      );\n\n      if (mutation === undefined) {\n        // Nothing returned  keep going\n        continue;\n      }\n\n      // Merge messages/state so next subscriber sees latest view\n      if (mutation.messages !== undefined) {\n        messages = mutation.messages;\n      }\n\n      if (mutation.state !== undefined) {\n        state = mutation.state;\n      }\n\n      stopPropagation = mutation.stopPropagation;\n\n      if (stopPropagation === true) {\n        break;\n      }\n    } catch (error) {\n      // Log subscriber errors but continue processing (silence during tests)\n      const isTestEnvironment =\n        process.env.NODE_ENV === \"test\" || process.env.JEST_WORKER_ID !== undefined;\n\n      if (!isTestEnvironment) {\n        console.error(\"Subscriber error:\", error);\n      }\n      // Continue to next subscriber unless we want to stop propagation\n      continue;\n    }\n  }\n\n  return {\n    ...(JSON.stringify(messages) !== JSON.stringify(initialMessages) ? { messages } : {}),\n    ...(JSON.stringify(state) !== JSON.stringify(initialState) ? { state } : {}),\n    ...(stopPropagation !== undefined ? { stopPropagation } : {}),\n  };\n}\n","import { BaseEvent, EventType, AGUIError } from \"@ag-ui/core\";\nimport { Observable, throwError, of } from \"rxjs\";\nimport { mergeMap } from \"rxjs/operators\";\n\nexport const verifyEvents =\n  (debug: boolean) =>\n  (source$: Observable<BaseEvent>): Observable<BaseEvent> => {\n    // Declare variables in closure to maintain state across events\n    let activeMessages = new Map<string, boolean>(); // Map of message ID -> active status\n    let activeToolCalls = new Map<string, boolean>(); // Map of tool call ID -> active status\n    let runFinished = false;\n    let runError = false; // New flag to track if RUN_ERROR has been sent\n    // New flags to track first/last event requirements\n    let firstEventReceived = false;\n    // Track active steps\n    let activeSteps = new Map<string, boolean>(); // Map of step name -> active status\n    let activeThinkingStep = false;\n    let activeThinkingStepMessage = false;\n    let runStarted = false; // Track if a run has started\n\n    // Function to reset state for a new run\n    const resetRunState = () => {\n      activeMessages.clear();\n      activeToolCalls.clear();\n      activeSteps.clear();\n      activeThinkingStep = false;\n      activeThinkingStepMessage = false;\n      runFinished = false;\n      runError = false;\n      runStarted = true;\n    };\n\n    return source$.pipe(\n      // Process each event through our state machine\n      mergeMap((event) => {\n        const eventType = event.type;\n\n        if (debug) {\n          console.debug(\"[VERIFY]:\", JSON.stringify(event));\n        }\n\n        // Check if run has errored\n        if (runError) {\n          return throwError(\n            () =>\n              new AGUIError(\n                `Cannot send event type '${eventType}': The run has already errored with 'RUN_ERROR'. No further events can be sent.`,\n              ),\n          );\n        }\n\n        // Check if run has already finished (but allow new RUN_STARTED to start a new run)\n        if (runFinished && eventType !== EventType.RUN_ERROR && eventType !== EventType.RUN_STARTED) {\n          return throwError(\n            () =>\n              new AGUIError(\n                `Cannot send event type '${eventType}': The run has already finished with 'RUN_FINISHED'. Start a new run with 'RUN_STARTED'.`,\n              ),\n          );\n        }\n\n        // Handle first event requirement and sequential RUN_STARTED\n        if (!firstEventReceived) {\n          firstEventReceived = true;\n          if (eventType !== EventType.RUN_STARTED && eventType !== EventType.RUN_ERROR) {\n            return throwError(() => new AGUIError(`First event must be 'RUN_STARTED'`));\n          }\n        } else if (eventType === EventType.RUN_STARTED) {\n          // Allow RUN_STARTED after RUN_FINISHED (new run), but not during an active run\n          if (runStarted && !runFinished) {\n            return throwError(\n              () =>\n                new AGUIError(\n                  `Cannot send 'RUN_STARTED' while a run is still active. The previous run must be finished with 'RUN_FINISHED' before starting a new run.`,\n                ),\n            );\n          }\n          // If we're here, it's either the first RUN_STARTED or a new run after RUN_FINISHED\n          if (runFinished) {\n            // This is a new run after the previous one finished, reset state\n            resetRunState();\n          }\n        }\n\n        // Validate event based on type and current state\n        switch (eventType) {\n          // Text message flow\n          case EventType.TEXT_MESSAGE_START: {\n            const messageId = (event as any).messageId;\n\n            // Check if this message is already in progress\n            if (activeMessages.has(messageId)) {\n              return throwError(\n                () =>\n                  new AGUIError(\n                    `Cannot send 'TEXT_MESSAGE_START' event: A text message with ID '${messageId}' is already in progress. Complete it with 'TEXT_MESSAGE_END' first.`,\n                  ),\n              );\n            }\n\n            activeMessages.set(messageId, true);\n            return of(event);\n          }\n\n          case EventType.TEXT_MESSAGE_CONTENT: {\n            const messageId = (event as any).messageId;\n\n            // Must be in a message with this ID\n            if (!activeMessages.has(messageId)) {\n              return throwError(\n                () =>\n                  new AGUIError(\n                    `Cannot send 'TEXT_MESSAGE_CONTENT' event: No active text message found with ID '${messageId}'. Start a text message with 'TEXT_MESSAGE_START' first.`,\n                  ),\n              );\n            }\n\n            return of(event);\n          }\n\n          case EventType.TEXT_MESSAGE_END: {\n            const messageId = (event as any).messageId;\n\n            // Must be in a message with this ID\n            if (!activeMessages.has(messageId)) {\n              return throwError(\n                () =>\n                  new AGUIError(\n                    `Cannot send 'TEXT_MESSAGE_END' event: No active text message found with ID '${messageId}'. A 'TEXT_MESSAGE_START' event must be sent first.`,\n                  ),\n              );\n            }\n\n            // Remove message from active set\n            activeMessages.delete(messageId);\n            return of(event);\n          }\n\n          // Tool call flow\n          case EventType.TOOL_CALL_START: {\n            const toolCallId = (event as any).toolCallId;\n\n            // Check if this tool call is already in progress\n            if (activeToolCalls.has(toolCallId)) {\n              return throwError(\n                () =>\n                  new AGUIError(\n                    `Cannot send 'TOOL_CALL_START' event: A tool call with ID '${toolCallId}' is already in progress. Complete it with 'TOOL_CALL_END' first.`,\n                  ),\n              );\n            }\n\n            activeToolCalls.set(toolCallId, true);\n            return of(event);\n          }\n\n          case EventType.TOOL_CALL_ARGS: {\n            const toolCallId = (event as any).toolCallId;\n\n            // Must be in a tool call with this ID\n            if (!activeToolCalls.has(toolCallId)) {\n              return throwError(\n                () =>\n                  new AGUIError(\n                    `Cannot send 'TOOL_CALL_ARGS' event: No active tool call found with ID '${toolCallId}'. Start a tool call with 'TOOL_CALL_START' first.`,\n                  ),\n              );\n            }\n\n            return of(event);\n          }\n\n          case EventType.TOOL_CALL_END: {\n            const toolCallId = (event as any).toolCallId;\n\n            // Must be in a tool call with this ID\n            if (!activeToolCalls.has(toolCallId)) {\n              return throwError(\n                () =>\n                  new AGUIError(\n                    `Cannot send 'TOOL_CALL_END' event: No active tool call found with ID '${toolCallId}'. A 'TOOL_CALL_START' event must be sent first.`,\n                  ),\n              );\n            }\n\n            // Remove tool call from active set\n            activeToolCalls.delete(toolCallId);\n            return of(event);\n          }\n\n          // Step flow\n          case EventType.STEP_STARTED: {\n            const stepName = (event as any).stepName;\n            if (activeSteps.has(stepName)) {\n              return throwError(\n                () => new AGUIError(`Step \"${stepName}\" is already active for 'STEP_STARTED'`),\n              );\n            }\n            activeSteps.set(stepName, true);\n            return of(event);\n          }\n\n          case EventType.STEP_FINISHED: {\n            const stepName = (event as any).stepName;\n            if (!activeSteps.has(stepName)) {\n              return throwError(\n                () =>\n                  new AGUIError(\n                    `Cannot send 'STEP_FINISHED' for step \"${stepName}\" that was not started`,\n                  ),\n              );\n            }\n            activeSteps.delete(stepName);\n            return of(event);\n          }\n\n          // Run flow\n          case EventType.RUN_STARTED: {\n            // We've already validated this above\n            runStarted = true;\n            return of(event);\n          }\n\n          case EventType.RUN_FINISHED: {\n            // Can't be the first event (already checked)\n            // and can't happen after already being finished (already checked)\n\n            // Check that all steps are finished before run ends\n            if (activeSteps.size > 0) {\n              const unfinishedSteps = Array.from(activeSteps.keys()).join(\", \");\n              return throwError(\n                () =>\n                  new AGUIError(\n                    `Cannot send 'RUN_FINISHED' while steps are still active: ${unfinishedSteps}`,\n                  ),\n              );\n            }\n\n            // Check that all messages are finished before run ends\n            if (activeMessages.size > 0) {\n              const unfinishedMessages = Array.from(activeMessages.keys()).join(\", \");\n              return throwError(\n                () =>\n                  new AGUIError(\n                    `Cannot send 'RUN_FINISHED' while text messages are still active: ${unfinishedMessages}`,\n                  ),\n              );\n            }\n\n            // Check that all tool calls are finished before run ends\n            if (activeToolCalls.size > 0) {\n              const unfinishedToolCalls = Array.from(activeToolCalls.keys()).join(\", \");\n              return throwError(\n                () =>\n                  new AGUIError(\n                    `Cannot send 'RUN_FINISHED' while tool calls are still active: ${unfinishedToolCalls}`,\n                  ),\n              );\n            }\n\n            runFinished = true;\n            return of(event);\n          }\n\n          case EventType.RUN_ERROR: {\n            // RUN_ERROR can happen at any time\n            runError = true; // Set flag to prevent any further events\n            return of(event);\n          }\n\n          case EventType.CUSTOM: {\n            return of(event);\n          }\n\n          // Text message flow\n          case EventType.THINKING_TEXT_MESSAGE_START: {\n            if (!activeThinkingStep) {\n              return throwError(\n                () =>\n                  new AGUIError(\n                    `Cannot send 'THINKING_TEXT_MESSAGE_START' event: A thinking step is not in progress. Create one with 'THINKING_START' first.`,\n                  ),\n              );\n            }\n            // Can't start a message if one is already in progress\n            if (activeThinkingStepMessage) {\n              return throwError(\n                () =>\n                  new AGUIError(\n                    `Cannot send 'THINKING_TEXT_MESSAGE_START' event: A thinking message is already in progress. Complete it with 'THINKING_TEXT_MESSAGE_END' first.`,\n                  ),\n              );\n            }\n\n            activeThinkingStepMessage = true;\n            return of(event);\n          }\n\n          case EventType.THINKING_TEXT_MESSAGE_CONTENT: {\n            // Must be in a message and IDs must match\n            if (!activeThinkingStepMessage) {\n              return throwError(\n                () =>\n                  new AGUIError(\n                    `Cannot send 'THINKING_TEXT_MESSAGE_CONTENT' event: No active thinking message found. Start a message with 'THINKING_TEXT_MESSAGE_START' first.`,\n                  ),\n              );\n            }\n\n            return of(event);\n          }\n\n          case EventType.THINKING_TEXT_MESSAGE_END: {\n            // Must be in a message and IDs must match\n            if (!activeThinkingStepMessage) {\n              return throwError(\n                () =>\n                  new AGUIError(\n                    `Cannot send 'THINKING_TEXT_MESSAGE_END' event: No active thinking message found. A 'THINKING_TEXT_MESSAGE_START' event must be sent first.`,\n                  ),\n              );\n            }\n\n            // Reset message state\n            activeThinkingStepMessage = false;\n            return of(event);\n          }\n\n          case EventType.THINKING_START: {\n            if (activeThinkingStep) {\n              return throwError(\n                () =>\n                  new AGUIError(\n                    `Cannot send 'THINKING_START' event: A thinking step is already in progress. End it with 'THINKING_END' first.`,\n                  ),\n              );\n            }\n\n            activeThinkingStep = true;\n            return of(event);\n          }\n\n          case EventType.THINKING_END: {\n            // Must be in a message and IDs must match\n            if (!activeThinkingStep) {\n              return throwError(\n                () =>\n                  new AGUIError(\n                    `Cannot send 'THINKING_END' event: No active thinking step found. A 'THINKING_START' event must be sent first.`,\n                  ),\n              );\n            }\n\n            // Reset message state\n            activeThinkingStep = false;\n            return of(event);\n          }\n\n          default: {\n            return of(event);\n          }\n        }\n      }),\n    );\n  };\n","import { BaseEvent, EventSchemas } from \"@ag-ui/core\";\nimport { Subject, ReplaySubject, Observable } from \"rxjs\";\nimport { HttpEvent, HttpEventType } from \"../run/http-request\";\nimport { parseSSEStream } from \"./sse\";\nimport { parseProtoStream } from \"./proto\";\nimport * as proto from \"@ag-ui/proto\";\nimport { EventType } from \"@ag-ui/core\";\n\n/**\n * Transforms HTTP events into BaseEvents using the appropriate format parser based on content type.\n */\nexport const transformHttpEventStream = (source$: Observable<HttpEvent>): Observable<BaseEvent> => {\n  const eventSubject = new Subject<BaseEvent>();\n\n  // Use ReplaySubject to buffer events until we decide on the parser\n  const bufferSubject = new ReplaySubject<HttpEvent>();\n\n  // Flag to track whether we've set up the parser\n  let parserInitialized = false;\n\n  // Subscribe to source and buffer events while we determine the content type\n  source$.subscribe({\n    next: (event: HttpEvent) => {\n      // Forward event to buffer\n      bufferSubject.next(event);\n\n      // If we get headers and haven't initialized a parser yet, check content type\n      if (event.type === HttpEventType.HEADERS && !parserInitialized) {\n        parserInitialized = true;\n        const contentType = event.headers.get(\"content-type\");\n\n        // Choose parser based on content type\n        if (contentType === proto.AGUI_MEDIA_TYPE) {\n          // Use protocol buffer parser\n          parseProtoStream(bufferSubject).subscribe({\n            next: (event) => eventSubject.next(event),\n            error: (err) => eventSubject.error(err),\n            complete: () => eventSubject.complete(),\n          });\n        } else {\n          // Use SSE JSON parser for all other cases\n          parseSSEStream(bufferSubject).subscribe({\n            next: (json) => {\n              try {\n                const parsedEvent = EventSchemas.parse(json);\n                eventSubject.next(parsedEvent as BaseEvent);\n              } catch (err) {\n                eventSubject.error(err);\n              }\n            },\n            error: (err) => {\n              if ((err as DOMException)?.name === \"AbortError\") {\n                eventSubject.next({\n                  type: EventType.RUN_ERROR,\n                  rawEvent: err,\n                });\n                eventSubject.complete();\n                return;\n              }\n              return eventSubject.error(err)\n            },\n            complete: () => eventSubject.complete(),\n          });\n        }\n      } else if (!parserInitialized) {\n        eventSubject.error(new Error(\"No headers event received before data events\"));\n      }\n    },\n    error: (err) => {\n      bufferSubject.error(err);\n      eventSubject.error(err);\n    },\n    complete: () => {\n      bufferSubject.complete();\n    },\n  });\n\n  return eventSubject.asObservable();\n};\n","import { Observable, from, defer, throwError } from \"rxjs\";\nimport { mergeMap, switchMap } from \"rxjs/operators\";\n\nexport enum HttpEventType {\n  HEADERS = \"headers\",\n  DATA = \"data\",\n}\n\nexport interface HttpDataEvent {\n  type: HttpEventType.DATA;\n  data?: Uint8Array;\n}\n\nexport interface HttpHeadersEvent {\n  type: HttpEventType.HEADERS;\n  status: number;\n  headers: Headers;\n}\n\nexport type HttpEvent = HttpDataEvent | HttpHeadersEvent;\n\nexport const runHttpRequest = (url: string, requestInit: RequestInit): Observable<HttpEvent> => {\n  // Defer the fetch so that it's executed when subscribed to\n  return defer(() => from(fetch(url, requestInit))).pipe(\n    switchMap((response) => {\n      if (!response.ok) {\n        const contentType = response.headers.get(\"content-type\") || \"\";\n        // Read the (small) error body once, then error the stream\n        return from(response.text()).pipe(\n          mergeMap((text) => {\n            let payload: unknown = text;\n            if (contentType.includes(\"application/json\")) {\n              try { payload = JSON.parse(text); } catch {/* keep raw text */}\n            }\n            const err: any = new Error(\n              `HTTP ${response.status}: ${typeof payload === \"string\" ? payload : JSON.stringify(payload)}`\n            );\n            err.status = response.status;\n            err.payload = payload;\n            return throwError(() => err);\n          })\n        );\n      }\n      // Emit headers event first\n      const headersEvent: HttpHeadersEvent = {\n        type: HttpEventType.HEADERS,\n        status: response.status,\n        headers: response.headers,\n      };\n\n      const reader = response.body?.getReader();\n      if (!reader) {\n        return throwError(() => new Error(\"Failed to getReader() from response\"));\n      }\n\n      return new Observable<HttpEvent>((subscriber) => {\n        // Emit headers event first\n        subscriber.next(headersEvent);\n\n        (async () => {\n          try {\n            while (true) {\n              const { done, value } = await reader.read();\n              if (done) break;\n              // Emit data event instead of raw Uint8Array\n              const dataEvent: HttpDataEvent = {\n                type: HttpEventType.DATA,\n                data: value,\n              };\n              subscriber.next(dataEvent);\n            }\n            subscriber.complete();\n          } catch (error) {\n            subscriber.error(error);\n          }\n        })();\n\n        return () => {\n          reader.cancel().catch((error) => {\n            if ((error as DOMException)?.name === \"AbortError\") {\n              return;\n            }\n\n            throw error;\n          });\n        };\n      });\n    }),\n  );\n};\n","import { Observable, Subject } from \"rxjs\";\nimport { HttpEvent, HttpEventType } from \"../run/http-request\";\n\n/**\n * Parses a stream of HTTP events into a stream of JSON objects using Server-Sent Events (SSE) format.\n * Strictly follows the SSE standard where:\n * - Events are separated by double newlines ('\\n\\n')\n * - Only 'data:' prefixed lines are processed\n * - Multi-line data events are supported and joined\n * - Non-data fields (event, id, retry) are ignored\n */\nexport const parseSSEStream = (source$: Observable<HttpEvent>): Observable<any> => {\n  const jsonSubject = new Subject<any>();\n  // Create TextDecoder with stream option set to true to handle split UTF-8 characters\n  const decoder = new TextDecoder(\"utf-8\", { fatal: false });\n  let buffer = \"\";\n\n  // Subscribe to the source once and multicast to all subscribers\n  source$.subscribe({\n    next: (event: HttpEvent) => {\n      if (event.type === HttpEventType.HEADERS) {\n        return;\n      }\n\n      if (event.type === HttpEventType.DATA && event.data) {\n        // Decode chunk carefully to handle UTF-8\n        const text = decoder.decode(event.data, { stream: true });\n        buffer += text;\n\n        // Process complete events (separated by double newlines)\n        const events = buffer.split(/\\n\\n/);\n        // Keep the last potentially incomplete event in buffer\n        buffer = events.pop() || \"\";\n\n        for (const event of events) {\n          processSSEEvent(event);\n        }\n      }\n    },\n    error: (err) => jsonSubject.error(err),\n    complete: () => {\n      // Use the final call to decoder.decode() to flush any remaining bytes\n      if (buffer) {\n        buffer += decoder.decode();\n        // Process any remaining SSE event data\n        processSSEEvent(buffer);\n      }\n      jsonSubject.complete();\n    },\n  });\n\n  /**\n   * Helper function to process an SSE event.\n   * Extracts and joins data lines, then parses the result as JSON.\n   * Follows the SSE spec by only processing 'data:' prefixed lines.\n   * @param eventText The raw event text to process\n   */\n  function processSSEEvent(eventText: string) {\n    const lines = eventText.split(\"\\n\");\n    const dataLines: string[] = [];\n\n    for (const line of lines) {\n      if (line.startsWith(\"data: \")) {\n        // Extract data content (remove 'data: ' prefix)\n        dataLines.push(line.slice(6));\n      }\n    }\n\n    // Only process if we have data lines\n    if (dataLines.length > 0) {\n      try {\n        // Join multi-line data and parse JSON\n        const jsonStr = dataLines.join(\"\\n\");\n        const json = JSON.parse(jsonStr);\n        jsonSubject.next(json);\n      } catch (err) {\n        jsonSubject.error(err);\n      }\n    }\n  }\n\n  return jsonSubject.asObservable();\n};\n","import { Observable, Subject } from \"rxjs\";\nimport { HttpEvent, HttpEventType } from \"../run/http-request\";\nimport { BaseEvent } from \"@ag-ui/core\";\nimport * as proto from \"@ag-ui/proto\";\n\n/**\n * Parses a stream of HTTP events into a stream of BaseEvent objects using Protocol Buffer format.\n * Each message is prefixed with a 4-byte length header (uint32 in big-endian format)\n * followed by the protocol buffer encoded message.\n */\nexport const parseProtoStream = (source$: Observable<HttpEvent>): Observable<BaseEvent> => {\n  const eventSubject = new Subject<BaseEvent>();\n  let buffer = new Uint8Array(0);\n\n  source$.subscribe({\n    next: (event: HttpEvent) => {\n      if (event.type === HttpEventType.HEADERS) {\n        return;\n      }\n\n      if (event.type === HttpEventType.DATA && event.data) {\n        // Append the new data to our buffer\n        const newBuffer = new Uint8Array(buffer.length + event.data.length);\n        newBuffer.set(buffer, 0);\n        newBuffer.set(event.data, buffer.length);\n        buffer = newBuffer;\n\n        // Process as many complete messages as possible\n        processBuffer();\n      }\n    },\n    error: (err) => eventSubject.error(err),\n    complete: () => {\n      // Try to process any remaining data in the buffer\n      if (buffer.length > 0) {\n        try {\n          processBuffer();\n        } catch (error: unknown) {\n          console.warn(\"Incomplete or invalid protocol buffer data at stream end\");\n        }\n      }\n      eventSubject.complete();\n    },\n  });\n\n  /**\n   * Process as many complete messages as possible from the buffer\n   */\n  function processBuffer() {\n    // Keep processing while we have enough data for at least a header (4 bytes)\n    while (buffer.length >= 4) {\n      // Read message length from the first 4 bytes (big-endian uint32)\n      const view = new DataView(buffer.buffer, buffer.byteOffset, 4);\n      const messageLength = view.getUint32(0, false); // false = big-endian\n\n      // Check if we have the complete message (header + message body)\n      const totalLength = 4 + messageLength;\n      if (buffer.length < totalLength) {\n        // Not enough data yet, wait for more\n        break;\n      }\n\n      try {\n        // Extract the message (skipping the 4-byte header)\n        const message = buffer.slice(4, totalLength);\n\n        // Decode the protocol buffer message using the imported decode function\n        const event = proto.decode(message);\n\n        // Emit the parsed event\n        eventSubject.next(event);\n\n        // Remove the processed message from the buffer\n        buffer = buffer.slice(totalLength);\n      } catch (error: unknown) {\n        const errorMessage = error instanceof Error ? error.message : String(error);\n        eventSubject.error(new Error(`Failed to decode protocol buffer message: ${errorMessage}`));\n        return;\n      }\n    }\n  }\n\n  return eventSubject.asObservable();\n};\n","import { mergeMap } from \"rxjs/operators\";\nimport { applyPatch } from \"fast-json-patch\";\n\nimport {\n  BaseEvent,\n  EventType,\n  TextMessageStartEvent,\n  TextMessageContentEvent,\n  TextMessageEndEvent,\n  ToolCallStartEvent,\n  ToolCallArgsEvent,\n  ToolCallEndEvent,\n  ToolCallResultEvent,\n  CustomEvent,\n  StateSnapshotEvent,\n  StepStartedEvent,\n  Message,\n  StateDeltaEvent,\n  MessagesSnapshotEvent,\n  ToolCall,\n  RunErrorEvent,\n} from \"@ag-ui/core\";\nimport { Observable } from \"rxjs\";\nimport {\n  LegacyTextMessageStart,\n  LegacyTextMessageContent,\n  LegacyTextMessageEnd,\n  LegacyActionExecutionStart,\n  LegacyActionExecutionArgs,\n  LegacyActionExecutionEnd,\n  LegacyRuntimeEventTypes,\n  LegacyRuntimeProtocolEvent,\n  LegacyMetaEvent,\n  LegacyAgentStateMessage,\n  LegacyMessage,\n  LegacyTextMessage,\n  LegacyActionExecutionMessage,\n  LegacyResultMessage,\n  LegacyActionExecutionResult,\n  LegacyRunError\n} from \"./types\";\nimport untruncateJson from \"untruncate-json\";\n\nconst flattenMessageContentToText = (content: Message[\"content\"]) => {\n  if (typeof content === \"string\") {\n    return content;\n  }\n\n  if (!Array.isArray(content)) {\n    return undefined;\n  }\n\n  const textParts = content\n    .filter((part): part is { type: \"text\"; text: string } => part.type === \"text\")\n    .map((part) => part.text)\n    .filter((text) => text.length > 0);\n\n  if (textParts.length === 0) {\n    return undefined;\n  }\n\n  return textParts.join(\"\\n\");\n};\n\ninterface PredictStateValue {\n  state_key: string;\n  tool: string;\n  tool_argument: string;\n}\n\nexport const convertToLegacyEvents =\n  (threadId: string, runId: string, agentName: string) =>\n  (events$: Observable<BaseEvent>): Observable<LegacyRuntimeProtocolEvent> => {\n    let currentState: any = {};\n    let running = true;\n    let active = true;\n    let nodeName = \"\";\n    let syncedMessages: Message[] | null = null;\n    let predictState: PredictStateValue[] | null = null;\n    let currentToolCalls: ToolCall[] = [];\n    let toolCallNames: Record<string, string> = {};\n\n    const updateCurrentState = (newState: any) => {\n      // the legacy protocol will only support object state\n      if (typeof newState === \"object\" && newState !== null) {\n        if (\"messages\" in newState) {\n          delete newState.messages;\n        }\n        currentState = newState;\n      }\n    };\n\n    return events$.pipe(\n      mergeMap((event) => {\n        switch (event.type) {\n          case EventType.TEXT_MESSAGE_START: {\n            const startEvent = event as TextMessageStartEvent;\n            return [\n              {\n                type: LegacyRuntimeEventTypes.enum.TextMessageStart,\n                messageId: startEvent.messageId,\n                role: startEvent.role,\n              } as LegacyTextMessageStart,\n            ];\n          }\n          case EventType.TEXT_MESSAGE_CONTENT: {\n            const contentEvent = event as TextMessageContentEvent;\n            return [\n              {\n                type: LegacyRuntimeEventTypes.enum.TextMessageContent,\n                messageId: contentEvent.messageId,\n                content: contentEvent.delta,\n              } as LegacyTextMessageContent,\n            ];\n          }\n          case EventType.TEXT_MESSAGE_END: {\n            const endEvent = event as TextMessageEndEvent;\n            return [\n              {\n                type: LegacyRuntimeEventTypes.enum.TextMessageEnd,\n                messageId: endEvent.messageId,\n              } as LegacyTextMessageEnd,\n            ];\n          }\n          case EventType.TOOL_CALL_START: {\n            const startEvent = event as ToolCallStartEvent;\n\n            currentToolCalls.push({\n              id: startEvent.toolCallId,\n              type: \"function\",\n              function: {\n                name: startEvent.toolCallName,\n                arguments: \"\",\n              },\n            });\n\n            active = true;\n            toolCallNames[startEvent.toolCallId] = startEvent.toolCallName;\n\n            return [\n              {\n                type: LegacyRuntimeEventTypes.enum.ActionExecutionStart,\n                actionExecutionId: startEvent.toolCallId,\n                actionName: startEvent.toolCallName,\n                parentMessageId: startEvent.parentMessageId,\n              } as LegacyActionExecutionStart,\n            ];\n          }\n          case EventType.TOOL_CALL_ARGS: {\n            const argsEvent = event as ToolCallArgsEvent;\n\n            // Find the tool call by ID instead of using the last one\n            const currentToolCall = currentToolCalls.find((tc) => tc.id === argsEvent.toolCallId);\n            if (!currentToolCall) {\n              console.warn(`TOOL_CALL_ARGS: No tool call found with ID '${argsEvent.toolCallId}'`);\n              return [];\n            }\n\n            currentToolCall.function.arguments += argsEvent.delta;\n            let didUpdateState = false;\n\n            if (predictState) {\n              let currentPredictState = predictState.find(\n                (s) => s.tool == currentToolCall.function.name,\n              );\n\n              if (currentPredictState) {\n                try {\n                  const currentArgs = JSON.parse(\n                    untruncateJson(currentToolCall.function.arguments),\n                  );\n                  if (\n                    currentPredictState.tool_argument &&\n                    currentPredictState.tool_argument in currentArgs\n                  ) {\n                    updateCurrentState({\n                      ...currentState,\n                      [currentPredictState.state_key]:\n                        currentArgs[currentPredictState.tool_argument],\n                    });\n                    didUpdateState = true;\n                  } else if (!currentPredictState.tool_argument) {\n                    updateCurrentState({\n                      ...currentState,\n                      [currentPredictState.state_key]: currentArgs,\n                    });\n                    didUpdateState = true;\n                  }\n                } catch (e) {}\n              }\n            }\n\n            return [\n              {\n                type: LegacyRuntimeEventTypes.enum.ActionExecutionArgs,\n                actionExecutionId: argsEvent.toolCallId,\n                args: argsEvent.delta,\n              } as LegacyActionExecutionArgs,\n              ...(didUpdateState\n                ? [\n                    {\n                      type: LegacyRuntimeEventTypes.enum.AgentStateMessage,\n                      threadId,\n                      agentName,\n                      nodeName,\n                      runId,\n                      running,\n                      role: \"assistant\",\n                      state: JSON.stringify(currentState),\n                      active,\n                    },\n                  ]\n                : []),\n            ];\n          }\n          case EventType.TOOL_CALL_END: {\n            const endEvent = event as ToolCallEndEvent;\n            return [\n              {\n                type: LegacyRuntimeEventTypes.enum.ActionExecutionEnd,\n                actionExecutionId: endEvent.toolCallId,\n              } as LegacyActionExecutionEnd,\n            ];\n          }\n          case EventType.TOOL_CALL_RESULT: {\n            const resultEvent = event as ToolCallResultEvent;\n            return [\n              {\n                type: LegacyRuntimeEventTypes.enum.ActionExecutionResult,\n                actionExecutionId: resultEvent.toolCallId,\n                result: resultEvent.content,\n                actionName: toolCallNames[resultEvent.toolCallId] || \"unknown\",\n              } as LegacyActionExecutionResult,\n            ];\n          }\n          case EventType.RAW: {\n            // The legacy protocol doesn't support raw events\n            return [];\n          }\n          case EventType.CUSTOM: {\n            const customEvent = event as CustomEvent;\n            switch (customEvent.name) {\n              case \"Exit\":\n                running = false;\n                break;\n              case \"PredictState\":\n                predictState = customEvent.value as PredictStateValue[];\n                break;\n            }\n\n            return [\n              {\n                type: LegacyRuntimeEventTypes.enum.MetaEvent,\n                name: customEvent.name,\n                value: customEvent.value,\n              } as LegacyMetaEvent,\n            ];\n          }\n          case EventType.STATE_SNAPSHOT: {\n            const stateEvent = event as StateSnapshotEvent;\n            updateCurrentState(stateEvent.snapshot);\n\n            return [\n              {\n                type: LegacyRuntimeEventTypes.enum.AgentStateMessage,\n                threadId,\n                agentName,\n                nodeName,\n                runId,\n                running,\n                role: \"assistant\",\n                state: JSON.stringify(currentState),\n                active,\n              } as LegacyAgentStateMessage,\n            ];\n          }\n          case EventType.STATE_DELTA: {\n            const deltaEvent = event as StateDeltaEvent;\n            const result = applyPatch(currentState, deltaEvent.delta, true, false);\n            if (!result) {\n              return [];\n            }\n            updateCurrentState(result.newDocument);\n\n            return [\n              {\n                type: LegacyRuntimeEventTypes.enum.AgentStateMessage,\n                threadId,\n                agentName,\n                nodeName,\n                runId,\n                running,\n                role: \"assistant\",\n                state: JSON.stringify(currentState),\n                active,\n              } as LegacyAgentStateMessage,\n            ];\n          }\n          case EventType.MESSAGES_SNAPSHOT: {\n            const messagesSnapshot = event as MessagesSnapshotEvent;\n            syncedMessages = messagesSnapshot.messages;\n            return [\n              {\n                type: LegacyRuntimeEventTypes.enum.AgentStateMessage,\n                threadId,\n                agentName,\n                nodeName,\n                runId,\n                running,\n                role: \"assistant\",\n                state: JSON.stringify({\n                  ...currentState,\n                  ...(syncedMessages ? { messages: syncedMessages } : {}),\n                }),\n                active: true,\n              } as LegacyAgentStateMessage,\n            ];\n          }\n          case EventType.RUN_STARTED: {\n            // There is nothing to do in the legacy protocol\n            return [];\n          }\n          case EventType.RUN_FINISHED: {\n            if (syncedMessages) {\n              currentState.messages = syncedMessages;\n            }\n\n            // Only do an update if state is not empty\n            if (Object.keys(currentState).length === 0) {\n              return [];\n            }\n\n            return [\n              {\n                type: LegacyRuntimeEventTypes.enum.AgentStateMessage,\n                threadId,\n                agentName,\n                nodeName,\n                runId,\n                running,\n                role: \"assistant\",\n                state: JSON.stringify({\n                  ...currentState,\n                  ...(syncedMessages\n                    ? {\n                        messages: convertMessagesToLegacyFormat(syncedMessages),\n                      }\n                    : {}),\n                }),\n                active: false,\n              } as LegacyAgentStateMessage,\n            ];\n          }\n          case EventType.RUN_ERROR: {\n            const errorEvent = event as RunErrorEvent;\n            return [\n              {\n                type: LegacyRuntimeEventTypes.enum.RunError,\n                message: errorEvent.message,\n                code: errorEvent.code,\n              } as LegacyRunError,\n            ];\n          }\n          case EventType.STEP_STARTED: {\n            const stepStarted = event as StepStartedEvent;\n            nodeName = stepStarted.stepName;\n\n            currentToolCalls = [];\n            predictState = null;\n\n            return [\n              {\n                type: LegacyRuntimeEventTypes.enum.AgentStateMessage,\n                threadId,\n                agentName,\n                nodeName,\n                runId,\n                running,\n                role: \"assistant\",\n                state: JSON.stringify(currentState),\n                active: true,\n              } as LegacyAgentStateMessage,\n            ];\n          }\n          case EventType.STEP_FINISHED: {\n            currentToolCalls = [];\n            predictState = null;\n\n            return [\n              {\n                type: LegacyRuntimeEventTypes.enum.AgentStateMessage,\n                threadId,\n                agentName,\n                nodeName,\n                runId,\n                running,\n                role: \"assistant\",\n                state: JSON.stringify(currentState),\n                active: false,\n              } as LegacyAgentStateMessage,\n            ];\n          }\n          default: {\n            return [];\n          }\n        }\n      }),\n    );\n  };\n\nexport function convertMessagesToLegacyFormat(messages: Message[]): LegacyMessage[] {\n  const result: LegacyMessage[] = [];\n\n  for (const message of messages) {\n    if (message.role === \"assistant\" || message.role === \"user\" || message.role === \"system\") {\n      const textContent = flattenMessageContentToText(message.content);\n      if (textContent) {\n        const textMessage: LegacyTextMessage = {\n          id: message.id,\n          role: message.role,\n          content: textContent,\n        };\n        result.push(textMessage);\n      }\n      if (message.role === \"assistant\" && message.toolCalls && message.toolCalls.length > 0) {\n        for (const toolCall of message.toolCalls) {\n          const actionExecutionMessage: LegacyActionExecutionMessage = {\n            id: toolCall.id,\n            name: toolCall.function.name,\n            arguments: JSON.parse(toolCall.function.arguments),\n            parentMessageId: message.id,\n          };\n          result.push(actionExecutionMessage);\n        }\n      }\n    } else if (message.role === \"tool\") {\n      let actionName = \"unknown\";\n      for (const m of messages) {\n        if (m.role === \"assistant\" && m.toolCalls?.length) {\n          for (const toolCall of m.toolCalls) {\n            if (toolCall.id === message.toolCallId) {\n              actionName = toolCall.function.name;\n              break;\n            }\n          }\n        }\n      }\n      const toolMessage: LegacyResultMessage = {\n        id: message.id,\n        result: message.content,\n        actionExecutionId: message.toolCallId,\n        actionName,\n      };\n      result.push(toolMessage);\n    }\n  }\n\n  return result;\n}\n","import { z } from \"zod\";\n\n// Protocol Events\nexport const LegacyRuntimeEventTypes = z.enum([\n  \"TextMessageStart\",\n  \"TextMessageContent\",\n  \"TextMessageEnd\",\n  \"ActionExecutionStart\",\n  \"ActionExecutionArgs\",\n  \"ActionExecutionEnd\",\n  \"ActionExecutionResult\",\n  \"AgentStateMessage\",\n  \"MetaEvent\",\n  \"RunStarted\",\n  \"RunFinished\",\n  \"RunError\",\n  \"NodeStarted\",\n  \"NodeFinished\",\n]);\n\nexport const LegacyRuntimeMetaEventName = z.enum([\n  \"LangGraphInterruptEvent\",\n  \"PredictState\",\n  \"Exit\",\n]);\n\nexport const LegacyTextMessageStart = z.object({\n  type: z.literal(LegacyRuntimeEventTypes.enum.TextMessageStart),\n  messageId: z.string(),\n  parentMessageId: z.string().optional(),\n  role: z.string().optional(),\n});\n\nexport const LegacyTextMessageContent = z.object({\n  type: z.literal(LegacyRuntimeEventTypes.enum.TextMessageContent),\n  messageId: z.string(),\n  content: z.string(),\n});\n\nexport const LegacyTextMessageEnd = z.object({\n  type: z.literal(LegacyRuntimeEventTypes.enum.TextMessageEnd),\n  messageId: z.string(),\n});\n\nexport const LegacyActionExecutionStart = z.object({\n  type: z.literal(LegacyRuntimeEventTypes.enum.ActionExecutionStart),\n  actionExecutionId: z.string(),\n  actionName: z.string(),\n  parentMessageId: z.string().optional(),\n});\n\nexport const LegacyActionExecutionArgs = z.object({\n  type: z.literal(LegacyRuntimeEventTypes.enum.ActionExecutionArgs),\n  actionExecutionId: z.string(),\n  args: z.string(),\n});\n\nexport const LegacyActionExecutionEnd = z.object({\n  type: z.literal(LegacyRuntimeEventTypes.enum.ActionExecutionEnd),\n  actionExecutionId: z.string(),\n});\n\nexport const LegacyActionExecutionResult = z.object({\n  type: z.literal(LegacyRuntimeEventTypes.enum.ActionExecutionResult),\n  actionName: z.string(),\n  actionExecutionId: z.string(),\n  result: z.string(),\n});\n\nexport const LegacyAgentStateMessage = z.object({\n  type: z.literal(LegacyRuntimeEventTypes.enum.AgentStateMessage),\n  threadId: z.string(),\n  agentName: z.string(),\n  nodeName: z.string(),\n  runId: z.string(),\n  active: z.boolean(),\n  role: z.string(),\n  state: z.string(),\n  running: z.boolean(),\n});\n\nexport const LegacyMetaEvent = z.object({\n  type: z.literal(LegacyRuntimeEventTypes.enum.MetaEvent),\n  name: LegacyRuntimeMetaEventName,\n  value: z.any(),\n});\n\n\nexport const LegacyRunError = z.object({\n  type: z.literal(LegacyRuntimeEventTypes.enum.RunError),\n  message: z.string(),\n  code: z.string().optional(),\n});\n\nexport const LegacyRuntimeProtocolEvent = z.discriminatedUnion(\"type\", [\n  LegacyTextMessageStart,\n  LegacyTextMessageContent,\n  LegacyTextMessageEnd,\n  LegacyActionExecutionStart,\n  LegacyActionExecutionArgs,\n  LegacyActionExecutionEnd,\n  LegacyActionExecutionResult,\n  LegacyAgentStateMessage,\n  LegacyMetaEvent,\n  LegacyRunError,\n]);\n\n// Protocol Event type exports\nexport type RuntimeEventTypes = z.infer<typeof LegacyRuntimeEventTypes>;\nexport type RuntimeMetaEventName = z.infer<typeof LegacyRuntimeMetaEventName>;\nexport type LegacyTextMessageStart = z.infer<typeof LegacyTextMessageStart>;\nexport type LegacyTextMessageContent = z.infer<typeof LegacyTextMessageContent>;\nexport type LegacyTextMessageEnd = z.infer<typeof LegacyTextMessageEnd>;\nexport type LegacyActionExecutionStart = z.infer<typeof LegacyActionExecutionStart>;\nexport type LegacyActionExecutionArgs = z.infer<typeof LegacyActionExecutionArgs>;\nexport type LegacyActionExecutionEnd = z.infer<typeof LegacyActionExecutionEnd>;\nexport type LegacyActionExecutionResult = z.infer<typeof LegacyActionExecutionResult>;\nexport type LegacyAgentStateMessage = z.infer<typeof LegacyAgentStateMessage>;\nexport type LegacyMetaEvent = z.infer<typeof LegacyMetaEvent>;\nexport type LegacyRuntimeProtocolEvent = z.infer<typeof LegacyRuntimeProtocolEvent>;\nexport type LegacyRunError = z.infer<typeof LegacyRunError>;\n\n// Message schemas (with kind discriminator)\nexport const LegacyTextMessageSchema = z.object({\n  id: z.string(),\n  role: z.string(),\n  content: z.string(),\n  parentMessageId: z.string().optional(),\n});\n\nexport const LegacyActionExecutionMessageSchema = z.object({\n  id: z.string(),\n  name: z.string(),\n  arguments: z.any(),\n  parentMessageId: z.string().optional(),\n});\n\nexport const LegacyResultMessageSchema = z.object({\n  id: z.string(),\n  result: z.any(),\n  actionExecutionId: z.string(),\n  actionName: z.string(),\n});\n\n// Message type exports\nexport type LegacyTextMessage = z.infer<typeof LegacyTextMessageSchema>;\nexport type LegacyActionExecutionMessage = z.infer<typeof LegacyActionExecutionMessageSchema>;\nexport type LegacyResultMessage = z.infer<typeof LegacyResultMessageSchema>;\nexport type LegacyMessage = LegacyTextMessage | LegacyActionExecutionMessage | LegacyResultMessage;\n","import { defaultApplyEvents } from \"@/apply/default\";\nimport { Message, State, RunAgentInput, BaseEvent, ToolCall, AssistantMessage } from \"@ag-ui/core\";\n\nimport { AgentConfig, RunAgentParameters } from \"./types\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { structuredClone_ } from \"@/utils\";\nimport { compareVersions } from \"compare-versions\";\nimport { catchError, map, tap } from \"rxjs/operators\";\nimport { finalize } from \"rxjs/operators\";\nimport { takeUntil } from \"rxjs/operators\";\nimport { pipe, Observable, from, of, EMPTY, Subject } from \"rxjs\";\nimport { verifyEvents } from \"@/verify\";\nimport { convertToLegacyEvents } from \"@/legacy/convert\";\nimport { LegacyRuntimeProtocolEvent } from \"@/legacy/types\";\nimport { lastValueFrom } from \"rxjs\";\nimport { transformChunks } from \"@/chunks\";\nimport { AgentStateMutation, AgentSubscriber, runSubscribersWithMutation } from \"./subscriber\";\nimport { AGUIConnectNotImplementedError } from \"@ag-ui/core\";\nimport {\n  Middleware,\n  MiddlewareFunction,\n  FunctionMiddleware,\n  BackwardCompatibility_0_0_39,\n} from \"@/middleware\";\nimport packageJson from \"../../package.json\";\n\nexport interface RunAgentResult {\n  result: any;\n  newMessages: Message[];\n}\n\nexport abstract class AbstractAgent {\n  public agentId?: string;\n  public description: string;\n  public threadId: string;\n  public messages: Message[];\n  public state: State;\n  public debug: boolean = false;\n  public subscribers: AgentSubscriber[] = [];\n  public isRunning: boolean = false;\n  private middlewares: Middleware[] = [];\n  // Emits to immediately detach from the active run (stop processing its stream)\n  private activeRunDetach$?: Subject<void>;\n  private activeRunCompletionPromise?: Promise<void>;\n\n  get maxVersion() {\n    return packageJson.version;\n  }\n\n  constructor({\n    agentId,\n    description,\n    threadId,\n    initialMessages,\n    initialState,\n    debug,\n  }: AgentConfig = {}) {\n    this.agentId = agentId;\n    this.description = description ?? \"\";\n    this.threadId = threadId ?? uuidv4();\n    this.messages = structuredClone_(initialMessages ?? []);\n    this.state = structuredClone_(initialState ?? {});\n    this.debug = debug ?? false;\n\n    if (compareVersions(this.maxVersion, \"0.0.39\") <= 0) {\n      this.middlewares.unshift(new BackwardCompatibility_0_0_39());\n    }\n  }\n\n  public subscribe(subscriber: AgentSubscriber) {\n    this.subscribers.push(subscriber);\n    return {\n      unsubscribe: () => {\n        this.subscribers = this.subscribers.filter((s) => s !== subscriber);\n      },\n    };\n  }\n\n  abstract run(input: RunAgentInput): Observable<BaseEvent>;\n\n  public use(...middlewares: (Middleware | MiddlewareFunction)[]): this {\n    const normalizedMiddlewares = middlewares.map((middleware) =>\n      typeof middleware === \"function\" ? new FunctionMiddleware(middleware) : middleware,\n    );\n    this.middlewares.push(...normalizedMiddlewares);\n    return this;\n  }\n\n  public async runAgent(\n    parameters?: RunAgentParameters,\n    subscriber?: AgentSubscriber,\n  ): Promise<RunAgentResult> {\n    try {\n      this.isRunning = true;\n      this.agentId = this.agentId ?? uuidv4();\n      const input = this.prepareRunAgentInput(parameters);\n      let result: any = undefined;\n      const currentMessageIds = new Set(this.messages.map((message) => message.id));\n\n      const subscribers: AgentSubscriber[] = [\n        {\n          onRunFinishedEvent: (params) => {\n            result = params.result;\n          },\n        },\n        ...this.subscribers,\n        subscriber ?? {},\n      ];\n\n      await this.onInitialize(input, subscribers);\n\n      // Per-run detachment signal + completion promise\n      this.activeRunDetach$ = new Subject<void>();\n      let resolveActiveRunCompletion: (() => void) | undefined;\n      this.activeRunCompletionPromise = new Promise<void>((resolve) => {\n        resolveActiveRunCompletion = resolve;\n      });\n\n      const pipeline = pipe(\n        () => {\n          // Build middleware chain using reduceRight so middlewares can intercept runs.\n          if (this.middlewares.length === 0) {\n            return this.run(input);\n          }\n\n          const chainedAgent = this.middlewares.reduceRight(\n            (nextAgent: AbstractAgent, middleware) =>\n              ({\n                run: (i: RunAgentInput) => middleware.run(i, nextAgent),\n              }) as AbstractAgent,\n            this, // Original agent is the final 'next'\n          );\n\n          return chainedAgent.run(input);\n        },\n        transformChunks(this.debug),\n        verifyEvents(this.debug),\n        // Stop processing immediately when this run is detached\n        (source$) => source$.pipe(takeUntil(this.activeRunDetach$!)),\n        (source$) => this.apply(input, source$, subscribers),\n        (source$) => this.processApplyEvents(input, source$, subscribers),\n        catchError((error) => {\n          this.isRunning = false;\n          return this.onError(input, error, subscribers);\n        }),\n        finalize(() => {\n          this.isRunning = false;\n          void this.onFinalize(input, subscribers);\n          resolveActiveRunCompletion?.();\n          resolveActiveRunCompletion = undefined;\n          this.activeRunCompletionPromise = undefined;\n          this.activeRunDetach$ = undefined;\n        }),\n      );\n\n      await lastValueFrom(pipeline(of(null)));\n      const newMessages = structuredClone_(this.messages).filter(\n        (message: Message) => !currentMessageIds.has(message.id),\n      );\n      return { result, newMessages };\n    } finally {\n      this.isRunning = false;\n    }\n  }\n\n  protected connect(input: RunAgentInput): Observable<BaseEvent> {\n    throw new AGUIConnectNotImplementedError();\n  }\n  public async connectAgent(\n    parameters?: RunAgentParameters,\n    subscriber?: AgentSubscriber,\n  ): Promise<RunAgentResult> {\n    try {\n      this.isRunning = true;\n      this.agentId = this.agentId ?? uuidv4();\n      const input = this.prepareRunAgentInput(parameters);\n      let result: any = undefined;\n      const currentMessageIds = new Set(this.messages.map((message) => message.id));\n\n      const subscribers: AgentSubscriber[] = [\n        {\n          onRunFinishedEvent: (params) => {\n            result = params.result;\n          },\n        },\n        ...this.subscribers,\n        subscriber ?? {},\n      ];\n\n      await this.onInitialize(input, subscribers);\n\n      // Per-run detachment signal + completion promise\n      this.activeRunDetach$ = new Subject<void>();\n      let resolveActiveRunCompletion: (() => void) | undefined;\n      this.activeRunCompletionPromise = new Promise<void>((resolve) => {\n        resolveActiveRunCompletion = resolve;\n      });\n\n      const pipeline = pipe(\n        () => this.connect(input),\n        transformChunks(this.debug),\n        verifyEvents(this.debug),\n        // Stop processing immediately when this run is detached\n        (source$) => source$.pipe(takeUntil(this.activeRunDetach$!)),\n        (source$) => this.apply(input, source$, subscribers),\n        (source$) => this.processApplyEvents(input, source$, subscribers),\n        catchError((error) => {\n          this.isRunning = false;\n          if (!(error instanceof AGUIConnectNotImplementedError)) {\n            return this.onError(input, error, subscribers);\n          }\n          return EMPTY;\n        }),\n        finalize(() => {\n          this.isRunning = false;\n          void this.onFinalize(input, subscribers);\n          resolveActiveRunCompletion?.();\n          resolveActiveRunCompletion = undefined;\n          this.activeRunCompletionPromise = undefined;\n          this.activeRunDetach$ = undefined;\n        }),\n      );\n\n      await lastValueFrom(pipeline(of(null))); // wait for stream completion before toggling isRunning\n      const newMessages = structuredClone_(this.messages).filter(\n        (message: Message) => !currentMessageIds.has(message.id),\n      );\n      return { result, newMessages };\n    } finally {\n      this.isRunning = false;\n    }\n  }\n\n  public abortRun() {}\n\n  public async detachActiveRun(): Promise<void> {\n    if (!this.activeRunDetach$) {\n      return;\n    }\n    const completion = this.activeRunCompletionPromise ?? Promise.resolve();\n    this.activeRunDetach$.next();\n    this.activeRunDetach$?.complete();\n    await completion;\n  }\n\n  protected apply(\n    input: RunAgentInput,\n    events$: Observable<BaseEvent>,\n    subscribers: AgentSubscriber[],\n  ): Observable<AgentStateMutation> {\n    return defaultApplyEvents(input, events$, this, subscribers);\n  }\n\n  protected processApplyEvents(\n    input: RunAgentInput,\n    events$: Observable<AgentStateMutation>,\n    subscribers: AgentSubscriber[],\n  ): Observable<AgentStateMutation> {\n    return events$.pipe(\n      tap((event) => {\n        if (event.messages) {\n          this.messages = event.messages;\n          subscribers.forEach((subscriber) => {\n            subscriber.onMessagesChanged?.({\n              messages: this.messages,\n              state: this.state,\n              agent: this,\n              input,\n            });\n          });\n        }\n        if (event.state) {\n          this.state = event.state;\n          subscribers.forEach((subscriber) => {\n            subscriber.onStateChanged?.({\n              state: this.state,\n              messages: this.messages,\n              agent: this,\n              input,\n            });\n          });\n        }\n      }),\n    );\n  }\n\n  protected prepareRunAgentInput(parameters?: RunAgentParameters): RunAgentInput {\n    const clonedMessages = structuredClone_(this.messages) as Message[];\n    const messagesWithoutActivity = clonedMessages.filter((message) => message.role !== \"activity\");\n\n    return {\n      threadId: this.threadId,\n      runId: parameters?.runId || uuidv4(),\n      tools: structuredClone_(parameters?.tools ?? []),\n      context: structuredClone_(parameters?.context ?? []),\n      forwardedProps: structuredClone_(parameters?.forwardedProps ?? {}),\n      state: structuredClone_(this.state),\n      messages: messagesWithoutActivity,\n    };\n  }\n\n  protected async onInitialize(input: RunAgentInput, subscribers: AgentSubscriber[]) {\n    const onRunInitializedMutation = await runSubscribersWithMutation(\n      subscribers,\n      this.messages,\n      this.state,\n      (subscriber, messages, state) =>\n        subscriber.onRunInitialized?.({ messages, state, agent: this, input }),\n    );\n    if (\n      onRunInitializedMutation.messages !== undefined ||\n      onRunInitializedMutation.state !== undefined\n    ) {\n      if (onRunInitializedMutation.messages) {\n        this.messages = onRunInitializedMutation.messages;\n        input.messages = onRunInitializedMutation.messages;\n        subscribers.forEach((subscriber) => {\n          subscriber.onMessagesChanged?.({\n            messages: this.messages,\n            state: this.state,\n            agent: this,\n            input,\n          });\n        });\n      }\n      if (onRunInitializedMutation.state) {\n        this.state = onRunInitializedMutation.state;\n        input.state = onRunInitializedMutation.state;\n        subscribers.forEach((subscriber) => {\n          subscriber.onStateChanged?.({\n            state: this.state,\n            messages: this.messages,\n            agent: this,\n            input,\n          });\n        });\n      }\n    }\n  }\n\n  protected onError(input: RunAgentInput, error: Error, subscribers: AgentSubscriber[]) {\n    return from(\n      runSubscribersWithMutation(\n        subscribers,\n        this.messages,\n        this.state,\n        (subscriber, messages, state) =>\n          subscriber.onRunFailed?.({ error, messages, state, agent: this, input }),\n      ),\n    ).pipe(\n      map((onRunFailedMutation) => {\n        const mutation = onRunFailedMutation as AgentStateMutation;\n        if (mutation.messages !== undefined || mutation.state !== undefined) {\n          if (mutation.messages !== undefined) {\n            this.messages = mutation.messages;\n            subscribers.forEach((subscriber) => {\n              subscriber.onMessagesChanged?.({\n                messages: this.messages,\n                state: this.state,\n                agent: this,\n                input,\n              });\n            });\n          }\n          if (mutation.state !== undefined) {\n            this.state = mutation.state;\n            subscribers.forEach((subscriber) => {\n              subscriber.onStateChanged?.({\n                state: this.state,\n                messages: this.messages,\n                agent: this,\n                input,\n              });\n            });\n          }\n        }\n\n        if (mutation.stopPropagation !== true) {\n          console.error(\"Agent execution failed:\", error);\n          throw error;\n        }\n\n        // Return an empty mutation instead of null to prevent EmptyError\n        return {} as AgentStateMutation;\n      }),\n    );\n  }\n\n  protected async onFinalize(input: RunAgentInput, subscribers: AgentSubscriber[]) {\n    const onRunFinalizedMutation = await runSubscribersWithMutation(\n      subscribers,\n      this.messages,\n      this.state,\n      (subscriber, messages, state) =>\n        subscriber.onRunFinalized?.({ messages, state, agent: this, input }),\n    );\n\n    if (\n      onRunFinalizedMutation.messages !== undefined ||\n      onRunFinalizedMutation.state !== undefined\n    ) {\n      if (onRunFinalizedMutation.messages !== undefined) {\n        this.messages = onRunFinalizedMutation.messages;\n        subscribers.forEach((subscriber) => {\n          subscriber.onMessagesChanged?.({\n            messages: this.messages,\n            state: this.state,\n            agent: this,\n            input,\n          });\n        });\n      }\n      if (onRunFinalizedMutation.state !== undefined) {\n        this.state = onRunFinalizedMutation.state;\n        subscribers.forEach((subscriber) => {\n          subscriber.onStateChanged?.({\n            state: this.state,\n            messages: this.messages,\n            agent: this,\n            input,\n          });\n        });\n      }\n    }\n  }\n\n  public clone() {\n    const cloned = Object.create(Object.getPrototypeOf(this));\n\n    cloned.agentId = this.agentId;\n    cloned.description = this.description;\n    cloned.threadId = this.threadId;\n    cloned.messages = structuredClone_(this.messages);\n    cloned.state = structuredClone_(this.state);\n    cloned.debug = this.debug;\n    cloned.isRunning = this.isRunning;\n    cloned.subscribers = [...this.subscribers];\n    cloned.middlewares = [...this.middlewares];\n\n    return cloned;\n  }\n\n  public addMessage(message: Message) {\n    // Add message to the messages array\n    this.messages.push(message);\n\n    // Notify subscribers sequentially in the background\n    (async () => {\n      // Fire onNewMessage sequentially\n      for (const subscriber of this.subscribers) {\n        await subscriber.onNewMessage?.({\n          message,\n          messages: this.messages,\n          state: this.state,\n          agent: this,\n        });\n      }\n\n      // Fire onNewToolCall if the message is from assistant and contains tool calls\n      if (message.role === \"assistant\" && message.toolCalls) {\n        for (const toolCall of message.toolCalls) {\n          for (const subscriber of this.subscribers) {\n            await subscriber.onNewToolCall?.({\n              toolCall,\n              messages: this.messages,\n              state: this.state,\n              agent: this,\n            });\n          }\n        }\n      }\n\n      // Fire onMessagesChanged sequentially\n      for (const subscriber of this.subscribers) {\n        await subscriber.onMessagesChanged?.({\n          messages: this.messages,\n          state: this.state,\n          agent: this,\n        });\n      }\n    })();\n  }\n\n  public addMessages(messages: Message[]) {\n    // Add all messages to the messages array\n    this.messages.push(...messages);\n\n    // Notify subscribers sequentially in the background\n    (async () => {\n      // Fire onNewMessage and onNewToolCall for each message sequentially\n      for (const message of messages) {\n        // Fire onNewMessage sequentially\n        for (const subscriber of this.subscribers) {\n          await subscriber.onNewMessage?.({\n            message,\n            messages: this.messages,\n            state: this.state,\n            agent: this,\n          });\n        }\n\n        // Fire onNewToolCall if the message is from assistant and contains tool calls\n        if (message.role === \"assistant\" && message.toolCalls) {\n          for (const toolCall of message.toolCalls) {\n            for (const subscriber of this.subscribers) {\n              await subscriber.onNewToolCall?.({\n                toolCall,\n                messages: this.messages,\n                state: this.state,\n                agent: this,\n              });\n            }\n          }\n        }\n      }\n\n      // Fire onMessagesChanged once at the end sequentially\n      for (const subscriber of this.subscribers) {\n        await subscriber.onMessagesChanged?.({\n          messages: this.messages,\n          state: this.state,\n          agent: this,\n        });\n      }\n    })();\n  }\n\n  public setMessages(messages: Message[]) {\n    // Replace the entire messages array\n    this.messages = structuredClone_(messages);\n\n    // Notify subscribers sequentially in the background\n    (async () => {\n      // Fire onMessagesChanged sequentially\n      for (const subscriber of this.subscribers) {\n        await subscriber.onMessagesChanged?.({\n          messages: this.messages,\n          state: this.state,\n          agent: this,\n        });\n      }\n    })();\n  }\n\n  public setState(state: State) {\n    // Replace the entire state\n    this.state = structuredClone_(state);\n\n    // Notify subscribers sequentially in the background\n    (async () => {\n      // Fire onStateChanged sequentially\n      for (const subscriber of this.subscribers) {\n        await subscriber.onStateChanged?.({\n          messages: this.messages,\n          state: this.state,\n          agent: this,\n        });\n      }\n    })();\n  }\n\n  public legacy_to_be_removed_runAgentBridged(\n    config?: RunAgentParameters,\n  ): Observable<LegacyRuntimeProtocolEvent> {\n    this.agentId = this.agentId ?? uuidv4();\n    const input = this.prepareRunAgentInput(config);\n\n    // Build middleware chain for legacy bridge\n    const runObservable = (() => {\n      if (this.middlewares.length === 0) {\n        return this.run(input);\n      }\n\n      const chainedAgent = this.middlewares.reduceRight(\n        (nextAgent: AbstractAgent, middleware) =>\n          ({\n            run: (i: RunAgentInput) => middleware.run(i, nextAgent),\n          }) as AbstractAgent,\n        this,\n      );\n\n      return chainedAgent.run(input);\n    })();\n\n    return runObservable.pipe(\n      transformChunks(this.debug),\n      verifyEvents(this.debug),\n      convertToLegacyEvents(this.threadId, input.runId, this.agentId),\n      (events$: Observable<LegacyRuntimeProtocolEvent>) => {\n        return events$.pipe(\n          map((event) => {\n            if (this.debug) {\n              console.debug(\"[LEGACY]:\", JSON.stringify(event));\n            }\n            return event;\n          }),\n        );\n      },\n    );\n  }\n}\n","import { mergeMap, Observable, finalize } from \"rxjs\";\nimport {\n  BaseEvent,\n  TextMessageChunkEvent,\n  TextMessageContentEvent,\n  TextMessageEndEvent,\n  TextMessageStartEvent,\n  ToolCallArgsEvent,\n  ToolCallChunkEvent,\n  ToolCallEndEvent,\n  ToolCallStartEvent,\n} from \"@ag-ui/core\";\nimport { EventType } from \"@ag-ui/core\";\n\ninterface TextMessageFields {\n  messageId: string;\n}\n\ninterface ToolCallFields {\n  toolCallId: string;\n  toolCallName: string;\n  parentMessageId?: string;\n}\n\nexport const transformChunks =\n  (debug: boolean) =>\n  (events$: Observable<BaseEvent>): Observable<BaseEvent> => {\n    let textMessageFields: TextMessageFields | undefined;\n    let toolCallFields: ToolCallFields | undefined;\n    let mode: \"text\" | \"tool\" | undefined;\n\n    const closeTextMessage = () => {\n      if (!textMessageFields || mode !== \"text\") {\n        throw new Error(\"No text message to close\");\n      }\n      const event = {\n        type: EventType.TEXT_MESSAGE_END,\n        messageId: textMessageFields.messageId,\n      } as TextMessageEndEvent;\n      mode = undefined;\n      textMessageFields = undefined;\n\n      if (debug) {\n        console.debug(\"[TRANSFORM]: TEXT_MESSAGE_END\", JSON.stringify(event));\n      }\n\n      return event;\n    };\n\n    const closeToolCall = () => {\n      if (!toolCallFields || mode !== \"tool\") {\n        throw new Error(\"No tool call to close\");\n      }\n      const event = {\n        type: EventType.TOOL_CALL_END,\n        toolCallId: toolCallFields.toolCallId,\n      } as ToolCallEndEvent;\n      mode = undefined;\n      toolCallFields = undefined;\n\n      if (debug) {\n        console.debug(\"[TRANSFORM]: TOOL_CALL_END\", JSON.stringify(event));\n      }\n\n      return event;\n    };\n\n    const closePendingEvent = () => {\n      if (mode === \"text\") {\n        return [closeTextMessage()];\n      }\n      if (mode === \"tool\") {\n        return [closeToolCall()];\n      }\n      return [];\n    };\n\n    return events$.pipe(\n      mergeMap((event) => {\n        switch (event.type) {\n          case EventType.TEXT_MESSAGE_START:\n          case EventType.TEXT_MESSAGE_CONTENT:\n          case EventType.TEXT_MESSAGE_END:\n          case EventType.TOOL_CALL_START:\n          case EventType.TOOL_CALL_ARGS:\n          case EventType.TOOL_CALL_END:\n          case EventType.TOOL_CALL_RESULT:\n          case EventType.STATE_SNAPSHOT:\n          case EventType.STATE_DELTA:\n          case EventType.MESSAGES_SNAPSHOT:\n          case EventType.CUSTOM:\n          case EventType.RUN_STARTED:\n          case EventType.RUN_FINISHED:\n          case EventType.RUN_ERROR:\n          case EventType.STEP_STARTED:\n          case EventType.STEP_FINISHED:\n          case EventType.THINKING_START:\n          case EventType.THINKING_END:\n          case EventType.THINKING_TEXT_MESSAGE_START:\n          case EventType.THINKING_TEXT_MESSAGE_CONTENT:\n          case EventType.THINKING_TEXT_MESSAGE_END:\n            return [...closePendingEvent(), event];\n          case EventType.RAW:\n          case EventType.ACTIVITY_SNAPSHOT:\n          case EventType.ACTIVITY_DELTA:\n            return [event];\n          case EventType.TEXT_MESSAGE_CHUNK:\n            const messageChunkEvent = event as TextMessageChunkEvent;\n            const textMessageResult = [];\n            if (\n              // we are not in a text message\n              mode !== \"text\" ||\n              // or the message id is different\n              (messageChunkEvent.messageId !== undefined &&\n                messageChunkEvent.messageId !== textMessageFields?.messageId)\n            ) {\n              // close the current message if any\n              textMessageResult.push(...closePendingEvent());\n            }\n\n            // we are not in a text message, start a new one\n            if (mode !== \"text\") {\n              if (messageChunkEvent.messageId === undefined) {\n                throw new Error(\"First TEXT_MESSAGE_CHUNK must have a messageId\");\n              }\n\n              textMessageFields = {\n                messageId: messageChunkEvent.messageId,\n              };\n              mode = \"text\";\n\n              const textMessageStartEvent = {\n                type: EventType.TEXT_MESSAGE_START,\n                messageId: messageChunkEvent.messageId,\n                role: messageChunkEvent.role || \"assistant\",\n              } as TextMessageStartEvent;\n\n              textMessageResult.push(textMessageStartEvent);\n\n              if (debug) {\n                console.debug(\n                  \"[TRANSFORM]: TEXT_MESSAGE_START\",\n                  JSON.stringify(textMessageStartEvent),\n                );\n              }\n            }\n\n            if (messageChunkEvent.delta !== undefined) {\n              const textMessageContentEvent = {\n                type: EventType.TEXT_MESSAGE_CONTENT,\n                messageId: textMessageFields!.messageId,\n                delta: messageChunkEvent.delta,\n              } as TextMessageContentEvent;\n\n              textMessageResult.push(textMessageContentEvent);\n\n              if (debug) {\n                console.debug(\n                  \"[TRANSFORM]: TEXT_MESSAGE_CONTENT\",\n                  JSON.stringify(textMessageContentEvent),\n                );\n              }\n            }\n\n            return textMessageResult;\n          case EventType.TOOL_CALL_CHUNK:\n            const toolCallChunkEvent = event as ToolCallChunkEvent;\n            const toolMessageResult = [];\n            if (\n              // we are not in a text message\n              mode !== \"tool\" ||\n              // or the tool call id is different\n              (toolCallChunkEvent.toolCallId !== undefined &&\n                toolCallChunkEvent.toolCallId !== toolCallFields?.toolCallId)\n            ) {\n              // close the current message if any\n              toolMessageResult.push(...closePendingEvent());\n            }\n\n            if (mode !== \"tool\") {\n              if (toolCallChunkEvent.toolCallId === undefined) {\n                throw new Error(\"First TOOL_CALL_CHUNK must have a toolCallId\");\n              }\n              if (toolCallChunkEvent.toolCallName === undefined) {\n                throw new Error(\"First TOOL_CALL_CHUNK must have a toolCallName\");\n              }\n              toolCallFields = {\n                toolCallId: toolCallChunkEvent.toolCallId,\n                toolCallName: toolCallChunkEvent.toolCallName,\n                parentMessageId: toolCallChunkEvent.parentMessageId,\n              };\n              mode = \"tool\";\n\n              const toolCallStartEvent = {\n                type: EventType.TOOL_CALL_START,\n                toolCallId: toolCallChunkEvent.toolCallId,\n                toolCallName: toolCallChunkEvent.toolCallName,\n                parentMessageId: toolCallChunkEvent.parentMessageId,\n              } as ToolCallStartEvent;\n\n              toolMessageResult.push(toolCallStartEvent);\n\n              if (debug) {\n                console.debug(\"[TRANSFORM]: TOOL_CALL_START\", JSON.stringify(toolCallStartEvent));\n              }\n            }\n\n            if (toolCallChunkEvent.delta !== undefined) {\n              const toolCallArgsEvent = {\n                type: EventType.TOOL_CALL_ARGS,\n                toolCallId: toolCallFields!.toolCallId,\n                delta: toolCallChunkEvent.delta,\n              } as ToolCallArgsEvent;\n\n              toolMessageResult.push(toolCallArgsEvent);\n\n              if (debug) {\n                console.debug(\"[TRANSFORM]: TOOL_CALL_ARGS\", JSON.stringify(toolCallArgsEvent));\n              }\n            }\n\n            return toolMessageResult;\n        }\n        const _exhaustiveCheck: never = event.type;\n        return [];\n      }),\n      finalize(() => {\n        // This ensures that we close any pending events when the source observable completes\n        closePendingEvent();\n      }),\n    );\n  };\n","import { AbstractAgent } from \"@/agent\";\nimport { RunAgentInput, BaseEvent, Message } from \"@ag-ui/core\";\nimport { Observable, ReplaySubject } from \"rxjs\";\nimport { concatMap } from \"rxjs/operators\";\nimport { transformChunks } from \"@/chunks\";\nimport { defaultApplyEvents } from \"@/apply\";\nimport { structuredClone_ } from \"@/utils\";\n\nexport type MiddlewareFunction = (\n  input: RunAgentInput,\n  next: AbstractAgent,\n) => Observable<BaseEvent>;\n\nexport interface EventWithState {\n  event: BaseEvent;\n  messages: Message[];\n  state: any;\n}\n\nexport abstract class Middleware {\n  abstract run(input: RunAgentInput, next: AbstractAgent): Observable<BaseEvent>;\n\n  /**\n   * Runs the next agent in the chain with automatic chunk transformation.\n   */\n  protected runNext(input: RunAgentInput, next: AbstractAgent): Observable<BaseEvent> {\n    return next.run(input).pipe(\n      transformChunks(false), // Always transform chunks to full events\n    );\n  }\n\n  /**\n   * Runs the next agent and tracks state, providing current messages and state with each event.\n   * The messages and state represent the state AFTER the event has been applied.\n   */\n  protected runNextWithState(\n    input: RunAgentInput,\n    next: AbstractAgent,\n  ): Observable<EventWithState> {\n    let currentMessages = structuredClone_(input.messages || []);\n    let currentState = structuredClone_(input.state || {});\n\n    // Use a ReplaySubject to feed events one by one\n    const eventSubject = new ReplaySubject<BaseEvent>();\n\n    // Set up defaultApplyEvents to process events\n    const mutations$ = defaultApplyEvents(input, eventSubject, next, []);\n\n    // Subscribe to track state changes\n    mutations$.subscribe((mutation) => {\n      if (mutation.messages !== undefined) {\n        currentMessages = mutation.messages;\n      }\n      if (mutation.state !== undefined) {\n        currentState = mutation.state;\n      }\n    });\n\n    return this.runNext(input, next).pipe(\n      concatMap(async (event) => {\n        // Feed the event to defaultApplyEvents and wait for it to process\n        eventSubject.next(event);\n\n        // Give defaultApplyEvents a chance to process\n        await new Promise((resolve) => setTimeout(resolve, 0));\n\n        // Return event with current state\n        return {\n          event,\n          messages: structuredClone_(currentMessages),\n          state: structuredClone_(currentState),\n        };\n      }),\n    );\n  }\n}\n\n// Wrapper class to convert a function into a Middleware instance\nexport class FunctionMiddleware extends Middleware {\n  constructor(private fn: MiddlewareFunction) {\n    super();\n  }\n\n  run(input: RunAgentInput, next: AbstractAgent): Observable<BaseEvent> {\n    return this.fn(input, next);\n  }\n}\n","import { Middleware } from \"./middleware\";\nimport { AbstractAgent } from \"@/agent\";\nimport {\n  RunAgentInput,\n  BaseEvent,\n  EventType,\n  ToolCallStartEvent,\n  ToolCallArgsEvent,\n  ToolCallEndEvent,\n  ToolCallResultEvent,\n} from \"@ag-ui/core\";\nimport { Observable } from \"rxjs\";\nimport { filter } from \"rxjs/operators\";\n\ntype FilterToolCallsConfig =\n  | { allowedToolCalls: string[]; disallowedToolCalls?: never }\n  | { disallowedToolCalls: string[]; allowedToolCalls?: never };\n\nexport class FilterToolCallsMiddleware extends Middleware {\n  private blockedToolCallIds = new Set<string>();\n  private readonly allowedTools?: Set<string>;\n  private readonly disallowedTools?: Set<string>;\n\n  constructor(config: FilterToolCallsConfig) {\n    super();\n\n    // Runtime validation (belt and suspenders approach)\n    if (config.allowedToolCalls && config.disallowedToolCalls) {\n      throw new Error(\"Cannot specify both allowedToolCalls and disallowedToolCalls\");\n    }\n\n    if (!config.allowedToolCalls && !config.disallowedToolCalls) {\n      throw new Error(\"Must specify either allowedToolCalls or disallowedToolCalls\");\n    }\n\n    if (config.allowedToolCalls) {\n      this.allowedTools = new Set(config.allowedToolCalls);\n    } else if (config.disallowedToolCalls) {\n      this.disallowedTools = new Set(config.disallowedToolCalls);\n    }\n  }\n\n  run(input: RunAgentInput, next: AbstractAgent): Observable<BaseEvent> {\n    // Use runNext which already includes transformChunks\n    return this.runNext(input, next).pipe(\n      filter((event) => {\n        // Handle TOOL_CALL_START events\n        if (event.type === EventType.TOOL_CALL_START) {\n          const toolCallStartEvent = event as ToolCallStartEvent;\n          const shouldFilter = this.shouldFilterTool(toolCallStartEvent.toolCallName);\n\n          if (shouldFilter) {\n            // Track this tool call ID as blocked\n            this.blockedToolCallIds.add(toolCallStartEvent.toolCallId);\n            return false; // Filter out this event\n          }\n\n          return true; // Allow this event\n        }\n\n        // Handle TOOL_CALL_ARGS events\n        if (event.type === EventType.TOOL_CALL_ARGS) {\n          const toolCallArgsEvent = event as ToolCallArgsEvent;\n          return !this.blockedToolCallIds.has(toolCallArgsEvent.toolCallId);\n        }\n\n        // Handle TOOL_CALL_END events\n        if (event.type === EventType.TOOL_CALL_END) {\n          const toolCallEndEvent = event as ToolCallEndEvent;\n          return !this.blockedToolCallIds.has(toolCallEndEvent.toolCallId);\n        }\n\n        // Handle TOOL_CALL_RESULT events\n        if (event.type === EventType.TOOL_CALL_RESULT) {\n          const toolCallResultEvent = event as ToolCallResultEvent;\n          const isBlocked = this.blockedToolCallIds.has(toolCallResultEvent.toolCallId);\n\n          if (isBlocked) {\n            // Clean up the blocked ID after the last event\n            this.blockedToolCallIds.delete(toolCallResultEvent.toolCallId);\n            return false;\n          }\n\n          return true;\n        }\n\n        // Allow all other events through\n        return true;\n      }),\n    );\n  }\n\n  private shouldFilterTool(toolName: string): boolean {\n    if (this.allowedTools) {\n      // If using allowed list, filter out tools NOT in the list\n      return !this.allowedTools.has(toolName);\n    } else if (this.disallowedTools) {\n      // If using disallowed list, filter out tools IN the list\n      return this.disallowedTools.has(toolName);\n    }\n\n    return false;\n  }\n}\n","import { Middleware } from \"./middleware\";\nimport { AbstractAgent } from \"@/agent\";\nimport type { RunAgentInput, BaseEvent } from \"@ag-ui/core\";\nimport type { Observable } from \"rxjs\";\n\ntype InputMessage = RunAgentInput[\"messages\"][number];\n\nfunction sanitizeMessageContent(message: InputMessage): InputMessage {\n  const rawContent = (message as { content?: unknown }).content;\n\n  if (Array.isArray(rawContent)) {\n    const concatenatedContent = rawContent\n      .filter(\n        (part): part is { type: \"text\"; text: string } =>\n          typeof part === \"object\" &&\n          part !== null &&\n          \"type\" in part &&\n          (part as { type: unknown }).type === \"text\" &&\n          typeof (part as { text?: unknown }).text === \"string\",\n      )\n      .map((part) => part.text)\n      .join(\"\");\n\n    return {\n      ...message,\n      content: concatenatedContent,\n    } as InputMessage;\n  }\n\n  if (typeof rawContent === \"string\") {\n    return message;\n  }\n\n  return {\n    ...message,\n    content: \"\",\n  } as InputMessage;\n}\n\n/**\n * Middleware placeholder that maintains compatibility with AG-UI 0.0.39 flows.\n * Currently it simply forwards all events to the next middleware/agent.\n */\nexport class BackwardCompatibility_0_0_39 extends Middleware {\n  override run(input: RunAgentInput, next: AbstractAgent): Observable<BaseEvent> {\n    const { parentRunId: _parentRunId, ...rest } = input;\n    const sanitizedInput: RunAgentInput = {\n      ...rest,\n      messages: rest.messages.map(sanitizeMessageContent),\n    } as RunAgentInput;\n\n    return this.runNext(sanitizedInput, next);\n  }\n}\n","{\n  \"name\": \"@ag-ui/client\",\n  \"author\": \"Markus Ecker <markus.ecker@gmail.com>\",\n  \"version\": \"0.0.42\",\n  \"private\": false,\n  \"publishConfig\": {\n    \"access\": \"public\"\n  },\n  \"main\": \"./dist/index.js\",\n  \"module\": \"./dist/index.mjs\",\n  \"types\": \"./dist/index.d.ts\",\n  \"sideEffects\": false,\n  \"files\": [\n    \"dist/**\",\n    \"README.md\"\n  ],\n  \"scripts\": {\n    \"build\": \"tsup\",\n    \"dev\": \"tsup --watch\",\n    \"clean\": \"rm -rf dist .turbo node_modules\",\n    \"typecheck\": \"tsc --noEmit\",\n    \"test\": \"jest\",\n    \"link:global\": \"pnpm link --global\",\n    \"unlink:global\": \"pnpm unlink --global\"\n  },\n  \"dependencies\": {\n    \"@ag-ui/core\": \"workspace:*\",\n    \"@ag-ui/encoder\": \"workspace:*\",\n    \"@ag-ui/proto\": \"workspace:*\",\n    \"@types/uuid\": \"^10.0.0\",\n    \"compare-versions\": \"^6.1.1\",\n    \"fast-json-patch\": \"^3.1.1\",\n    \"rxjs\": \"7.8.1\",\n    \"untruncate-json\": \"^0.0.1\",\n    \"uuid\": \"^11.1.0\",\n    \"zod\": \"^3.22.4\"\n  },\n  \"devDependencies\": {\n    \"@types/jest\": \"^29.5.14\",\n    \"@types/node\": \"^20.11.19\",\n    \"jest\": \"^29.7.0\",\n    \"ts-jest\": \"^29.1.2\",\n    \"tsup\": \"^8.0.2\",\n    \"typescript\": \"^5.3.3\"\n  }\n}\n","import { AbstractAgent, RunAgentResult } from \"./agent\";\nimport { runHttpRequest } from \"@/run/http-request\";\nimport { HttpAgentConfig, RunAgentParameters } from \"./types\";\nimport { RunAgentInput, BaseEvent } from \"@ag-ui/core\";\nimport { structuredClone_ } from \"@/utils\";\nimport { transformHttpEventStream } from \"@/transform/http\";\nimport { Observable } from \"rxjs\";\nimport { AgentSubscriber } from \"./subscriber\";\n\ninterface RunHttpAgentConfig extends RunAgentParameters {\n  abortController?: AbortController;\n}\n\nexport class HttpAgent extends AbstractAgent {\n  public url: string;\n  public headers: Record<string, string>;\n  public abortController: AbortController = new AbortController();\n\n  /**\n   * Returns the fetch config for the http request.\n   * Override this to customize the request.\n   *\n   * @returns The fetch config for the http request.\n   */\n  protected requestInit(input: RunAgentInput): RequestInit {\n    return {\n      method: \"POST\",\n      headers: {\n        ...this.headers,\n        \"Content-Type\": \"application/json\",\n        Accept: \"text/event-stream\",\n      },\n      body: JSON.stringify(input),\n      signal: this.abortController.signal,\n    };\n  }\n\n  public runAgent(\n    parameters?: RunHttpAgentConfig,\n    subscriber?: AgentSubscriber,\n  ): Promise<RunAgentResult> {\n    this.abortController = parameters?.abortController ?? new AbortController();\n    return super.runAgent(parameters, subscriber);\n  }\n\n  abortRun() {\n    this.abortController.abort();\n    super.abortRun();\n  }\n\n  constructor(config: HttpAgentConfig) {\n    super(config);\n    this.url = config.url;\n    this.headers = structuredClone_(config.headers ?? {});\n  }\n\n  run(input: RunAgentInput): Observable<BaseEvent> {\n    const httpEvents = runHttpRequest(this.url, this.requestInit(input));\n    return transformHttpEventStream(httpEvents);\n  }\n\n  public clone(): HttpAgent {\n    const cloned = super.clone() as HttpAgent;\n    cloned.url = this.url;\n    cloned.headers = structuredClone_(this.headers ?? {});\n\n    const newController = new AbortController();\n    const originalSignal = this.abortController.signal as AbortSignal & { reason?: unknown };\n    if (originalSignal.aborted) {\n      newController.abort(originalSignal.reason);\n    }\n    cloned.abortController = newController;\n\n    return cloned;\n  }\n}\n","import {\n  BaseEvent,\n  EventType,\n  TextMessageStartEvent,\n  TextMessageContentEvent,\n  TextMessageEndEvent,\n  ToolCallStartEvent,\n  ToolCallArgsEvent,\n  ToolCallEndEvent,\n} from \"@ag-ui/core\";\n\n/**\n * Compacts streaming events by consolidating multiple deltas into single events.\n * For text messages: multiple content deltas become one concatenated delta.\n * For tool calls: multiple args deltas become one concatenated delta.\n * Events between related streaming events are reordered to keep streaming events together.\n *\n * @param events - Array of events to compact\n * @returns Compacted array of events\n */\nexport function compactEvents(events: BaseEvent[]): BaseEvent[] {\n  const compacted: BaseEvent[] = [];\n  const pendingTextMessages = new Map<\n    string,\n    {\n      start?: TextMessageStartEvent;\n      contents: TextMessageContentEvent[];\n      end?: TextMessageEndEvent;\n      otherEvents: BaseEvent[];\n    }\n  >();\n  const pendingToolCalls = new Map<\n    string,\n    {\n      start?: ToolCallStartEvent;\n      args: ToolCallArgsEvent[];\n      end?: ToolCallEndEvent;\n      otherEvents: BaseEvent[];\n    }\n  >();\n\n  for (const event of events) {\n    // Handle text message streaming events\n    if (event.type === EventType.TEXT_MESSAGE_START) {\n      const startEvent = event as TextMessageStartEvent;\n      const messageId = startEvent.messageId;\n\n      if (!pendingTextMessages.has(messageId)) {\n        pendingTextMessages.set(messageId, {\n          contents: [],\n          otherEvents: [],\n        });\n      }\n\n      const pending = pendingTextMessages.get(messageId)!;\n      pending.start = startEvent;\n    } else if (event.type === EventType.TEXT_MESSAGE_CONTENT) {\n      const contentEvent = event as TextMessageContentEvent;\n      const messageId = contentEvent.messageId;\n\n      if (!pendingTextMessages.has(messageId)) {\n        pendingTextMessages.set(messageId, {\n          contents: [],\n          otherEvents: [],\n        });\n      }\n\n      const pending = pendingTextMessages.get(messageId)!;\n      pending.contents.push(contentEvent);\n    } else if (event.type === EventType.TEXT_MESSAGE_END) {\n      const endEvent = event as TextMessageEndEvent;\n      const messageId = endEvent.messageId;\n\n      if (!pendingTextMessages.has(messageId)) {\n        pendingTextMessages.set(messageId, {\n          contents: [],\n          otherEvents: [],\n        });\n      }\n\n      const pending = pendingTextMessages.get(messageId)!;\n      pending.end = endEvent;\n\n      // Flush this message's events\n      flushTextMessage(messageId, pending, compacted);\n      pendingTextMessages.delete(messageId);\n    } else if (event.type === EventType.TOOL_CALL_START) {\n      const startEvent = event as ToolCallStartEvent;\n      const toolCallId = startEvent.toolCallId;\n\n      if (!pendingToolCalls.has(toolCallId)) {\n        pendingToolCalls.set(toolCallId, {\n          args: [],\n          otherEvents: [],\n        });\n      }\n\n      const pending = pendingToolCalls.get(toolCallId)!;\n      pending.start = startEvent;\n    } else if (event.type === EventType.TOOL_CALL_ARGS) {\n      const argsEvent = event as ToolCallArgsEvent;\n      const toolCallId = argsEvent.toolCallId;\n\n      if (!pendingToolCalls.has(toolCallId)) {\n        pendingToolCalls.set(toolCallId, {\n          args: [],\n          otherEvents: [],\n        });\n      }\n\n      const pending = pendingToolCalls.get(toolCallId)!;\n      pending.args.push(argsEvent);\n    } else if (event.type === EventType.TOOL_CALL_END) {\n      const endEvent = event as ToolCallEndEvent;\n      const toolCallId = endEvent.toolCallId;\n\n      if (!pendingToolCalls.has(toolCallId)) {\n        pendingToolCalls.set(toolCallId, {\n          args: [],\n          otherEvents: [],\n        });\n      }\n\n      const pending = pendingToolCalls.get(toolCallId)!;\n      pending.end = endEvent;\n\n      // Flush this tool call's events\n      flushToolCall(toolCallId, pending, compacted);\n      pendingToolCalls.delete(toolCallId);\n    } else {\n      // For non-streaming events, check if we're in the middle of any streaming sequences\n      let addedToBuffer = false;\n\n      // Check text messages\n      for (const [messageId, pending] of pendingTextMessages) {\n        // If we have a start but no end yet, this event is \"in between\"\n        if (pending.start && !pending.end) {\n          pending.otherEvents.push(event);\n          addedToBuffer = true;\n          break;\n        }\n      }\n\n      // Check tool calls if not already buffered\n      if (!addedToBuffer) {\n        for (const [toolCallId, pending] of pendingToolCalls) {\n          // If we have a start but no end yet, this event is \"in between\"\n          if (pending.start && !pending.end) {\n            pending.otherEvents.push(event);\n            addedToBuffer = true;\n            break;\n          }\n        }\n      }\n\n      // If not in the middle of any streaming sequence, add directly to compacted\n      if (!addedToBuffer) {\n        compacted.push(event);\n      }\n    }\n  }\n\n  // Flush any remaining incomplete messages\n  for (const [messageId, pending] of pendingTextMessages) {\n    flushTextMessage(messageId, pending, compacted);\n  }\n\n  // Flush any remaining incomplete tool calls\n  for (const [toolCallId, pending] of pendingToolCalls) {\n    flushToolCall(toolCallId, pending, compacted);\n  }\n\n  return compacted;\n}\n\nfunction flushTextMessage(\n  messageId: string,\n  pending: {\n    start?: TextMessageStartEvent;\n    contents: TextMessageContentEvent[];\n    end?: TextMessageEndEvent;\n    otherEvents: BaseEvent[];\n  },\n  compacted: BaseEvent[],\n): void {\n  // Add start event if present\n  if (pending.start) {\n    compacted.push(pending.start);\n  }\n\n  // Compact all content events into one\n  if (pending.contents.length > 0) {\n    const concatenatedDelta = pending.contents.map((c) => c.delta).join(\"\");\n\n    const compactedContent: TextMessageContentEvent = {\n      type: EventType.TEXT_MESSAGE_CONTENT,\n      messageId: messageId,\n      delta: concatenatedDelta,\n    };\n\n    compacted.push(compactedContent);\n  }\n\n  // Add end event if present\n  if (pending.end) {\n    compacted.push(pending.end);\n  }\n\n  // Add any events that were in between\n  for (const otherEvent of pending.otherEvents) {\n    compacted.push(otherEvent);\n  }\n}\n\nfunction flushToolCall(\n  toolCallId: string,\n  pending: {\n    start?: ToolCallStartEvent;\n    args: ToolCallArgsEvent[];\n    end?: ToolCallEndEvent;\n    otherEvents: BaseEvent[];\n  },\n  compacted: BaseEvent[],\n): void {\n  // Add start event if present\n  if (pending.start) {\n    compacted.push(pending.start);\n  }\n\n  // Compact all args events into one\n  if (pending.args.length > 0) {\n    const concatenatedArgs = pending.args.map((a) => a.delta).join(\"\");\n\n    const compactedArgs: ToolCallArgsEvent = {\n      type: EventType.TOOL_CALL_ARGS,\n      toolCallId: toolCallId,\n      delta: concatenatedArgs,\n    };\n\n    compacted.push(compactedArgs);\n  }\n\n  // Add end event if present\n  if (pending.end) {\n    compacted.push(pending.end);\n  }\n\n  // Add any events that were in between\n  for (const otherEvent of pending.otherEvents) {\n    compacted.push(otherEvent);\n  }\n}\n","export * from \"./apply\";\nexport * from \"./verify\";\nexport * from \"./transform\";\nexport * from \"./run\";\nexport * from \"./legacy\";\nexport * from \"./agent\";\nexport * from \"./utils\";\nexport * from \"./compact\";\nexport * from \"@ag-ui/core\";\nexport * from \"./chunks\";\nexport * from \"./middleware\";\n\nexport { Middleware, FilterToolCallsMiddleware } from \"./middleware\";\nexport type { MiddlewareFunction } from \"./middleware\";\n"],"names":["EventType","mergeAll","defaultIfEmpty","concatMap","of","EMPTY","uuidv4","structuredClone_","obj","err","__spreadValues","randomUUID","uuidv4","applyPatch","runSubscribersWithMutation","subscribers","initialMessages","initialState","executor","messages","state","stopPropagation","subscriber","mutation","structuredClone_","error","__spreadValues","untruncateJson","defaultApplyEvents","input","events$","agent","subscribers","messages","structuredClone_","state","currentMutation","applyMutation","mutation","emitUpdates","result","of","EMPTY","concatMap","event","_a","_b","_c","_d","_e","runSubscribersWithMutation","subscriber","EventType","messageId","role","newMessage","delta","targetMessage","m","existingContent","toolCallId","toolCallName","parentMessageId","tc","targetToolCall","toolCallBuffer","partialToolCallArgs","untruncateJson","error","toolCallArgsString","toolCallArgs","content","toolMessage","snapshot","applyPatch","errorMessage","newMessages","activityEvent","existingIndex","existingMessage","existingActivityMessage","replace","activityMessage","createdMessage","__spreadProps","__spreadValues","baseContent","updatedContent","runStartedEvent","message","_exhaustiveCheck","mergeAll","defaultIfEmpty","stream","EventType","AGUIError","throwError","of","mergeMap","verifyEvents","debug","source$","activeMessages","activeToolCalls","runFinished","runError","firstEventReceived","activeSteps","activeThinkingStep","activeThinkingStepMessage","runStarted","resetRunState","event","eventType","messageId","toolCallId","stepName","unfinishedSteps","unfinishedMessages","unfinishedToolCalls","EventSchemas","Subject","ReplaySubject","Observable","from","defer","throwError","mergeMap","switchMap","runHttpRequest","url","requestInit","defer","from","switchMap","response","_a","contentType","mergeMap","text","payload","e","err","throwError","headersEvent","reader","Observable","subscriber","done","value","dataEvent","error","Subject","parseSSEStream","source$","jsonSubject","Subject","decoder","buffer","event","text","events","processSSEEvent","err","eventText","lines","dataLines","line","jsonStr","json","Subject","proto","parseProtoStream","source$","eventSubject","Subject","buffer","event","newBuffer","processBuffer","err","error","totalLength","message","errorMessage","proto","EventType","transformHttpEventStream","source$","eventSubject","Subject","bufferSubject","ReplaySubject","parserInitialized","event","parseProtoStream","err","parseSSEStream","json","parsedEvent","EventSchemas","mergeMap","applyPatch","EventType","z","LegacyRuntimeEventTypes","LegacyRuntimeMetaEventName","LegacyTextMessageStart","LegacyTextMessageContent","LegacyTextMessageEnd","LegacyActionExecutionStart","LegacyActionExecutionArgs","LegacyActionExecutionEnd","LegacyActionExecutionResult","LegacyAgentStateMessage","LegacyMetaEvent","LegacyRunError","LegacyRuntimeProtocolEvent","LegacyTextMessageSchema","LegacyActionExecutionMessageSchema","LegacyResultMessageSchema","untruncateJson","flattenMessageContentToText","content","textParts","part","text","convertToLegacyEvents","threadId","runId","agentName","events$","currentState","running","active","nodeName","syncedMessages","predictState","currentToolCalls","toolCallNames","updateCurrentState","newState","mergeMap","event","EventType","startEvent","LegacyRuntimeEventTypes","contentEvent","endEvent","argsEvent","currentToolCall","tc","didUpdateState","currentPredictState","s","currentArgs","untruncateJson","__spreadProps","__spreadValues","e","resultEvent","customEvent","result","applyPatch","convertMessagesToLegacyFormat","errorEvent","messages","_a","message","textContent","textMessage","toolCall","actionExecutionMessage","actionName","m","toolMessage","uuidv4","compareVersions","catchError","map","tap","finalize","takeUntil","pipe","from","of","EMPTY","Subject","lastValueFrom","mergeMap","finalize","EventType","transformChunks","debug","events$","textMessageFields","toolCallFields","mode","closeTextMessage","event","closeToolCall","closePendingEvent","messageChunkEvent","textMessageResult","textMessageStartEvent","textMessageContentEvent","toolCallChunkEvent","toolMessageResult","toolCallStartEvent","toolCallArgsEvent","_exhaustiveCheck","AGUIConnectNotImplementedError","ReplaySubject","concatMap","Middleware","input","next","transformChunks","currentMessages","structuredClone_","currentState","eventSubject","ReplaySubject","defaultApplyEvents","mutation","concatMap","event","resolve","FunctionMiddleware","fn","EventType","filter","FilterToolCallsMiddleware","Middleware","config","input","next","event","toolCallStartEvent","toolCallArgsEvent","toolCallEndEvent","toolCallResultEvent","toolName","sanitizeMessageContent","message","rawContent","concatenatedContent","part","__spreadProps","__spreadValues","BackwardCompatibility_0_0_39","Middleware","input","next","_a","_parentRunId","rest","__objRest","sanitizedInput","package_default","AbstractAgent","agentId","description","threadId","initialMessages","initialState","debug","uuidv4","structuredClone_","compareVersions","BackwardCompatibility_0_0_39","package_default","subscriber","s","middlewares","normalizedMiddlewares","middleware","FunctionMiddleware","parameters","_a","input","result","currentMessageIds","message","subscribers","params","Subject","resolveActiveRunCompletion","resolve","pipeline","pipe","nextAgent","i","transformChunks","verifyEvents","source$","takeUntil","catchError","error","finalize","lastValueFrom","of","newMessages","AGUIConnectNotImplementedError","EMPTY","_b","completion","events$","defaultApplyEvents","tap","event","_c","messagesWithoutActivity","onRunInitializedMutation","runSubscribersWithMutation","messages","state","from","map","onRunFailedMutation","mutation","onRunFinalizedMutation","cloned","toolCall","config","convertToLegacyEvents","HttpAgent","AbstractAgent","config","_a","structuredClone_","input","__spreadProps","__spreadValues","parameters","subscriber","httpEvents","runHttpRequest","transformHttpEventStream","cloned","newController","originalSignal","EventType","compactEvents","events","compacted","pendingTextMessages","pendingToolCalls","event","startEvent","messageId","pending","contentEvent","endEvent","flushTextMessage","toolCallId","argsEvent","flushToolCall","addedToBuffer","concatenatedDelta","c","compactedContent","otherEvent","concatenatedArgs","a","compactedArgs"],"mappings":"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"}},
    {"offset": {"line": 6930, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/mastra/src/mastra.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ag-ui/mastra/src/utils.ts"],"sourcesContent":["import type {\n  AgentConfig,\n  BaseEvent,\n  RunAgentInput,\n  RunFinishedEvent,\n  RunStartedEvent,\n  StateSnapshotEvent,\n  TextMessageChunkEvent,\n  ToolCallArgsEvent,\n  ToolCallEndEvent,\n  ToolCallResultEvent,\n  ToolCallStartEvent,\n} from \"@ag-ui/client\";\nimport { AbstractAgent, EventType } from \"@ag-ui/client\";\nimport type { StorageThreadType } from \"@mastra/core/memory\";\nimport type { Agent as LocalMastraAgent } from \"@mastra/core/agent\";\nimport { RequestContext } from \"@mastra/core/request-context\";\nimport { randomUUID } from \"@ag-ui/client\";\nimport { Observable } from \"rxjs\";\nimport type { MastraClient } from \"@mastra/client-js\";\nimport {\n  convertAGUIMessagesToMastra,\n  GetLocalAgentsOptions,\n  getLocalAgents,\n  getRemoteAgents,\n  GetRemoteAgentsOptions,\n  GetLocalAgentOptions,\n  getLocalAgent,\n  GetNetworkOptions,\n  getNetwork,\n} from \"./utils\";\n\ntype RemoteMastraAgent = ReturnType<MastraClient[\"getAgent\"]>;\n\nexport interface MastraAgentConfig extends AgentConfig {\n  agent: LocalMastraAgent | RemoteMastraAgent;\n  resourceId: string;\n  requestContext?: RequestContext;\n}\n\ninterface MastraAgentStreamOptions {\n  onTextPart?: (text: string) => void;\n  onFinishMessagePart?: () => void;\n  onToolCallPart?: (streamPart: {\n    toolCallId: string;\n    toolName: string;\n    args: any;\n  }) => void;\n  onToolResultPart?: (streamPart: { toolCallId: string; result: any }) => void;\n  onError?: (error: Error) => void;\n  onRunFinished?: () => Promise<void>;\n}\n\nexport class MastraAgent extends AbstractAgent {\n  agent: LocalMastraAgent | RemoteMastraAgent;\n  resourceId: string;\n  requestContext?: RequestContext;\n\n  constructor(private config: MastraAgentConfig) {\n    const { agent, resourceId, requestContext, ...rest } = config;\n    super(rest);\n    this.agent = agent;\n    this.resourceId = resourceId;\n    this.requestContext = requestContext ?? new RequestContext();\n  }\n\n  public clone() {\n    return new MastraAgent(this.config);\n  }\n\n  run(input: RunAgentInput): Observable<BaseEvent> {\n    let messageId = randomUUID();\n\n    return new Observable<BaseEvent>((subscriber) => {\n      const run = async () => {\n        const runStartedEvent: RunStartedEvent = {\n          type: EventType.RUN_STARTED,\n          threadId: input.threadId,\n          runId: input.runId,\n        };\n\n        subscriber.next(runStartedEvent);\n\n        // Handle local agent memory management (from Mastra implementation)\n        if (this.isLocalMastraAgent(this.agent)) {\n          const memory = await this.agent.getMemory({\n            requestContext: this.requestContext,\n          });\n\n          if (\n            memory &&\n            input.state &&\n            Object.keys(input.state || {}).length > 0\n          ) {\n            let thread: StorageThreadType | null = await memory.getThreadById({\n              threadId: input.threadId,\n            });\n\n            if (!thread) {\n              thread = {\n                id: input.threadId,\n                title: \"\",\n                metadata: {},\n                resourceId: this.resourceId ?? input.threadId,\n                createdAt: new Date(),\n                updatedAt: new Date(),\n              };\n            }\n\n            const existingMemory = JSON.parse(\n              (thread.metadata?.workingMemory as string) ?? \"{}\",\n            );\n            const { messages, ...rest } = input.state;\n            const workingMemory = JSON.stringify({\n              ...existingMemory,\n              ...rest,\n            });\n\n            // Update thread metadata with new working memory\n            await memory.saveThread({\n              thread: {\n                ...thread,\n                metadata: {\n                  ...thread.metadata,\n                  workingMemory,\n                },\n              },\n            });\n          }\n        }\n\n        try {\n          await this.streamMastraAgent(input, {\n            onTextPart: (text) => {\n              const event: TextMessageChunkEvent = {\n                type: EventType.TEXT_MESSAGE_CHUNK,\n                role: \"assistant\",\n                messageId,\n                delta: text,\n              };\n              subscriber.next(event);\n            },\n            onToolCallPart: (streamPart) => {\n              const startEvent: ToolCallStartEvent = {\n                type: EventType.TOOL_CALL_START,\n                parentMessageId: messageId,\n                toolCallId: streamPart.toolCallId,\n                toolCallName: streamPart.toolName,\n              };\n              subscriber.next(startEvent);\n\n              const argsEvent: ToolCallArgsEvent = {\n                type: EventType.TOOL_CALL_ARGS,\n                toolCallId: streamPart.toolCallId,\n                delta: JSON.stringify(streamPart.args),\n              };\n              subscriber.next(argsEvent);\n\n              const endEvent: ToolCallEndEvent = {\n                type: EventType.TOOL_CALL_END,\n                toolCallId: streamPart.toolCallId,\n              };\n              subscriber.next(endEvent);\n            },\n            onToolResultPart(streamPart) {\n              const toolCallResultEvent: ToolCallResultEvent = {\n                type: EventType.TOOL_CALL_RESULT,\n                toolCallId: streamPart.toolCallId,\n                content: JSON.stringify(streamPart.result),\n                messageId: randomUUID(),\n                role: \"tool\",\n              };\n\n              subscriber.next(toolCallResultEvent);\n            },\n            onFinishMessagePart: async () => {\n              messageId = randomUUID();\n            },\n            onError: (error) => {\n              console.error(\"error\", error);\n              // Handle error\n              subscriber.error(error);\n            },\n            onRunFinished: async () => {\n              if (this.isLocalMastraAgent(this.agent)) {\n                try {\n                  const memory = await this.agent.getMemory({\n                    requestContext: this.requestContext,\n                  });\n                  if (memory) {\n                    const workingMemory = await memory.getWorkingMemory({\n                      resourceId: this.resourceId,\n                      threadId: input.threadId,\n                      memoryConfig: {\n                        workingMemory: {\n                          enabled: true,\n                        },\n                      },\n                    });\n\n                    if (typeof workingMemory === \"string\") {\n                      const snapshot = JSON.parse(workingMemory);\n\n                      if (snapshot && !(\"$schema\" in snapshot)) {\n                        const stateSnapshotEvent: StateSnapshotEvent = {\n                          type: EventType.STATE_SNAPSHOT,\n                          snapshot,\n                        };\n\n                        subscriber.next(stateSnapshotEvent);\n                      }\n                    }\n                  }\n                } catch (error) {\n                  console.error(\"Error sending state snapshot\", error);\n                }\n              }\n\n              // Emit run finished event\n              subscriber.next({\n                type: EventType.RUN_FINISHED,\n                threadId: input.threadId,\n                runId: input.runId,\n              } as RunFinishedEvent);\n\n              // Complete the observable\n              subscriber.complete();\n            },\n          });\n        } catch (error) {\n          console.error(\"Stream error:\", error);\n          subscriber.error(error);\n        }\n      };\n\n      run();\n\n      return () => {};\n    });\n  }\n\n  isLocalMastraAgent(\n    agent: LocalMastraAgent | RemoteMastraAgent,\n  ): agent is LocalMastraAgent {\n    return \"getMemory\" in agent;\n  }\n\n  /**\n   * Streams in process or remote mastra agent.\n   * @param input - The input for the mastra agent.\n   * @param options - The options for the mastra agent.\n   * @returns The stream of the mastra agent.\n   */\n  private async streamMastraAgent(\n    { threadId, runId, messages, tools, context: inputContext }: RunAgentInput,\n    {\n      onTextPart,\n      onFinishMessagePart,\n      onToolCallPart,\n      onToolResultPart,\n      onError,\n      onRunFinished,\n    }: MastraAgentStreamOptions,\n  ): Promise<void> {\n    const clientTools = tools.reduce(\n      (acc, tool) => {\n        acc[tool.name as string] = {\n          id: tool.name,\n          description: tool.description,\n          inputSchema: tool.parameters,\n        };\n        return acc;\n      },\n      {} as Record<string, any>,\n    );\n    const resourceId = this.resourceId ?? threadId;\n\n    const convertedMessages = convertAGUIMessagesToMastra(messages);\n    this.requestContext?.set(\"ag-ui\", { context: inputContext });\n    const requestContext = this.requestContext;\n\n    if (this.isLocalMastraAgent(this.agent)) {\n      // Local agent - use the agent's stream method directly\n      try {\n        const response = await this.agent.stream(convertedMessages, {\n          memory: {\n            thread: threadId,\n            resource: resourceId,\n          },\n          runId,\n          clientTools,\n          requestContext,\n        });\n\n        // For local agents, the response should already be a stream\n        // Process it using the agent's built-in streaming mechanism\n        if (response && typeof response === \"object\") {\n          for await (const chunk of response.fullStream) {\n            switch (chunk.type) {\n              case \"text-delta\": {\n                onTextPart?.(chunk.payload.text);\n                break;\n              }\n              case \"tool-call\": {\n                onToolCallPart?.({\n                  toolCallId: chunk.payload.toolCallId,\n                  toolName: chunk.payload.toolName,\n                  args: chunk.payload.args,\n                });\n                break;\n              }\n              case \"tool-result\": {\n                onToolResultPart?.({\n                  toolCallId: chunk.payload.toolCallId,\n                  result: chunk.payload.result,\n                });\n                break;\n              }\n\n              case \"error\": {\n                onError?.(new Error(chunk.payload.error as string));\n                break;\n              }\n\n              case \"finish\": {\n                onFinishMessagePart?.();\n                break;\n              }\n            }\n          }\n\n          await onRunFinished?.();\n        } else {\n          throw new Error(\"Invalid response from local agent\");\n        }\n      } catch (error) {\n        onError?.(error as Error);\n      }\n    } else {\n      // Remote agent - use the remote agent's stream method\n      try {\n        const response = await this.agent.stream({\n          memory: {\n            thread: threadId,\n            resource: resourceId,\n          },\n          runId,\n          messages: convertedMessages,\n          clientTools,\n          requestContext,\n        });\n\n        // Remote agents should have a processDataStream method\n        if (response && typeof response.processDataStream === \"function\") {\n          await response.processDataStream({\n            onChunk: async (chunk) => {\n              switch (chunk.type) {\n                case \"text-delta\": {\n                  onTextPart?.(chunk.payload.text);\n                  break;\n                }\n                case \"tool-call\": {\n                  onToolCallPart?.({\n                    toolCallId: chunk.payload.toolCallId,\n                    toolName: chunk.payload.toolName,\n                    args: chunk.payload.args,\n                  });\n                  break;\n                }\n                case \"tool-result\": {\n                  onToolResultPart?.({\n                    toolCallId: chunk.payload.toolCallId,\n                    result: chunk.payload.result,\n                  });\n                  break;\n                }\n\n                case \"finish\": {\n                  onFinishMessagePart?.();\n                  break;\n                }\n              }\n            },\n          });\n          await onRunFinished?.();\n        } else {\n          throw new Error(\"Invalid response from remote agent\");\n        }\n      } catch (error) {\n        onError?.(error as Error);\n      }\n    }\n  }\n\n  static async getRemoteAgents(\n    options: GetRemoteAgentsOptions,\n  ): Promise<Record<string, AbstractAgent>> {\n    return getRemoteAgents(options);\n  }\n\n  static getLocalAgents(\n    options: GetLocalAgentsOptions,\n  ): Record<string, AbstractAgent> {\n    return getLocalAgents(options);\n  }\n\n  static getLocalAgent(options: GetLocalAgentOptions) {\n    return getLocalAgent(options);\n  }\n\n  static getNetwork(options: GetNetworkOptions) {\n    return getNetwork(options);\n  }\n}\n","import type { InputContent, Message } from \"@ag-ui/client\";\nimport { AbstractAgent } from \"@ag-ui/client\";\nimport { MastraClient } from \"@mastra/client-js\";\nimport type { Mastra } from \"@mastra/core\";\nimport type { CoreMessage } from \"@mastra/core/llm\";\nimport { Agent as LocalMastraAgent } from \"@mastra/core/agent\";\nimport { RequestContext } from \"@mastra/core/request-context\";\nimport { MastraAgent } from \"./mastra\";\n\nconst toMastraTextContent = (content: Message[\"content\"]): string => {\n  if (!content) {\n    return \"\";\n  }\n\n  if (typeof content === \"string\") {\n    return content;\n  }\n\n  if (!Array.isArray(content)) {\n    return \"\";\n  }\n\n  type TextInput = Extract<InputContent, { type: \"text\" }>;\n\n  const textParts = content\n    .filter((part): part is TextInput => part.type === \"text\")\n    .map((part: TextInput) => part.text.trim())\n    .filter(Boolean);\n\n  return textParts.join(\"\\n\");\n};\n\nexport function convertAGUIMessagesToMastra(messages: Message[]): CoreMessage[] {\n  const result: CoreMessage[] = [];\n\n  for (const message of messages) {\n    if (message.role === \"assistant\") {\n      const assistantContent = toMastraTextContent(message.content);\n      const parts: any[] = [];\n      if (assistantContent) {\n        parts.push({ type: \"text\", text: assistantContent });\n      }\n      for (const toolCall of message.toolCalls ?? []) {\n        parts.push({\n          type: \"tool-call\",\n          toolCallId: toolCall.id,\n          toolName: toolCall.function.name,\n          args: JSON.parse(toolCall.function.arguments),\n        });\n      }\n      result.push({\n        role: \"assistant\",\n        content: parts,\n      });\n    } else if (message.role === \"user\") {\n      const userContent = toMastraTextContent(message.content);\n      result.push({\n        role: \"user\",\n        content: userContent,\n      });\n    } else if (message.role === \"tool\") {\n      let toolName = \"unknown\";\n      for (const msg of messages) {\n        if (msg.role === \"assistant\") {\n          for (const toolCall of msg.toolCalls ?? []) {\n            if (toolCall.id === message.toolCallId) {\n              toolName = toolCall.function.name;\n              break;\n            }\n          }\n        }\n      }\n      result.push({\n        role: \"tool\",\n        content: [\n          {\n            type: \"tool-result\",\n            toolCallId: message.toolCallId,\n            toolName: toolName,\n            result: message.content,\n          },\n        ],\n      });\n    }\n  }\n\n  return result;\n}\n\nexport interface GetRemoteAgentsOptions {\n  mastraClient: MastraClient;\n  resourceId: string;\n}\n\nexport async function getRemoteAgents({\n  mastraClient,\n  resourceId,\n}: GetRemoteAgentsOptions): Promise<Record<string, AbstractAgent>> {\n  const agents = await mastraClient.listAgents();\n\n  return Object.entries(agents).reduce(\n    (acc, [agentId]) => {\n      const agent = mastraClient.getAgent(agentId);\n\n      acc[agentId] = new MastraAgent({\n        agentId,\n        agent,\n        resourceId,\n      });\n\n      return acc;\n    },\n    {} as Record<string, AbstractAgent>,\n  );\n}\n\nexport interface GetLocalAgentsOptions {\n  mastra: Mastra;\n  resourceId: string;\n  requestContext?: RequestContext;\n}\n\nexport function getLocalAgents({\n  mastra,\n  resourceId,\n  requestContext,\n}: GetLocalAgentsOptions): Record<string, AbstractAgent> {\n  const agents = mastra.listAgents() || {};\n\n  const agentAGUI = Object.entries(agents).reduce(\n    (acc, [agentId, agent]) => {\n      acc[agentId] = new MastraAgent({\n        agentId,\n        agent,\n        resourceId,\n        requestContext,\n      });\n      return acc;\n    },\n    {} as Record<string, AbstractAgent>,\n  );\n\n  return agentAGUI;\n}\n\nexport interface GetLocalAgentOptions {\n  mastra: Mastra;\n  agentId: string;\n  resourceId: string;\n  requestContext?: RequestContext;\n}\n\nexport function getLocalAgent({\n  mastra,\n  agentId,\n  resourceId,\n  requestContext,\n}: GetLocalAgentOptions) {\n  const agent = mastra.getAgent(agentId);\n  if (!agent) {\n    throw new Error(`Agent ${agentId} not found`);\n  }\n  return new MastraAgent({\n    agentId,\n    agent,\n    resourceId,\n    requestContext,\n  }) as AbstractAgent;\n}\n\nexport interface GetNetworkOptions {\n  mastra: Mastra;\n  networkId: string;\n  resourceId: string;\n  requestContext?: RequestContext;\n}\n\nexport function getNetwork({ mastra, networkId, resourceId, requestContext }: GetNetworkOptions) {\n  const network = mastra.getAgent(networkId);\n  if (!network) {\n    throw new Error(`Network ${networkId} not found`);\n  }\n  return new MastraAgent({\n    agentId: network.name!,\n    agent: network as unknown as LocalMastraAgent,\n    resourceId,\n    requestContext,\n  }) as AbstractAgent;\n}\n"],"names":["AbstractAgent","EventType","RequestContext","randomUUID","Observable","toMastraTextContent","content","part","convertAGUIMessagesToMastra","messages","_a","_b","result","message","assistantContent","parts","toolCall","userContent","toolName","msg","getRemoteAgents","mastraClient","resourceId","agents","acc","agentId","agent","MastraAgent","getLocalAgents","mastra","requestContext","getLocalAgent","getNetwork","networkId","network","MastraAgent","_MastraAgent","AbstractAgent","config","_a","agent","resourceId","requestContext","rest","__objRest","RequestContext","input","messageId","randomUUID","Observable","subscriber","_b","_c","runStartedEvent","EventType","memory","thread","existingMemory","_d","messages","workingMemory","__spreadValues","__spreadProps","text","event","streamPart","startEvent","argsEvent","endEvent","toolCallResultEvent","error","snapshot","stateSnapshotEvent","threadId","runId","tools","inputContext","onTextPart","onFinishMessagePart","onToolCallPart","onToolResultPart","onError","onRunFinished","clientTools","acc","tool","convertedMessages","convertAGUIMessagesToMastra","response","iter","__forAwait","more","temp","chunk","options","getRemoteAgents","getLocalAgents","getLocalAgent","getNetwork"],"mappings":"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"}},
    {"offset": {"line": 7352, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40lukeed/uuid/dist/index.mjs"],"sourcesContent":["var IDX=256, HEX=[], BUFFER;\nwhile (IDX--) HEX[IDX] = (IDX + 256).toString(16).substring(1);\n\nexport function v4() {\n\tvar i=0, num, out='';\n\n\tif (!BUFFER || ((IDX + 16) > 256)) {\n\t\tBUFFER = Array(i=256);\n\t\twhile (i--) BUFFER[i] = 256 * Math.random() | 0;\n\t\ti = IDX = 0;\n\t}\n\n\tfor (; i < 16; i++) {\n\t\tnum = BUFFER[IDX + i];\n\t\tif (i==6) out += HEX[num & 15 | 64];\n\t\telse if (i==8) out += HEX[num & 63 | 128];\n\t\telse out += HEX[num];\n\n\t\tif (i & 1 && i > 1 && i < 11) out += '-';\n\t}\n\n\tIDX++;\n\treturn out;\n}\n"],"names":[],"mappings":";;;;AAAA,IAAI,MAAI,KAAK,MAAI,EAAE,EAAE;AACrB,MAAO,MAAO,GAAG,CAAC,IAAI,GAAG,CAAC,MAAM,GAAG,EAAE,QAAQ,CAAC,IAAI,SAAS,CAAC;AAErD,SAAS;IACf,IAAI,IAAE,GAAG,KAAK,MAAI;IAElB,IAAI,CAAC,UAAW,AAAC,MAAM,KAAM,KAAM;QAClC,SAAS,MAAM,IAAE;QACjB,MAAO,IAAK,MAAM,CAAC,EAAE,GAAG,MAAM,KAAK,MAAM,KAAK;QAC9C,IAAI,MAAM;IACX;IAEA,MAAO,IAAI,IAAI,IAAK;QACnB,MAAM,MAAM,CAAC,MAAM,EAAE;QACrB,IAAI,KAAG,GAAG,OAAO,GAAG,CAAC,MAAM,KAAK,GAAG;aAC9B,IAAI,KAAG,GAAG,OAAO,GAAG,CAAC,MAAM,KAAK,IAAI;aACpC,OAAO,GAAG,CAAC,IAAI;QAEpB,IAAI,IAAI,KAAK,IAAI,KAAK,IAAI,IAAI,OAAO;IACtC;IAEA;IACA,OAAO;AACR","ignoreList":[0]}},
    {"offset": {"line": 7379, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/node_modules/%40ai-sdk/provider/src/errors/ai-sdk-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/node_modules/%40ai-sdk/provider/src/errors/api-call-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/node_modules/%40ai-sdk/provider/src/errors/empty-response-body-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/node_modules/%40ai-sdk/provider/src/errors/get-error-message.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/node_modules/%40ai-sdk/provider/src/errors/invalid-argument-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/node_modules/%40ai-sdk/provider/src/errors/invalid-prompt-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/node_modules/%40ai-sdk/provider/src/errors/invalid-response-data-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/node_modules/%40ai-sdk/provider/src/errors/json-parse-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/node_modules/%40ai-sdk/provider/src/errors/load-api-key-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/node_modules/%40ai-sdk/provider/src/errors/load-setting-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/node_modules/%40ai-sdk/provider/src/errors/no-content-generated-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/node_modules/%40ai-sdk/provider/src/errors/no-such-model-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/node_modules/%40ai-sdk/provider/src/errors/too-many-embedding-values-for-call-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/node_modules/%40ai-sdk/provider/src/errors/type-validation-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/node_modules/%40ai-sdk/provider/src/errors/unsupported-functionality-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/node_modules/%40ai-sdk/provider/src/json-value/is-json.ts"],"sourcesContent":["/**\n * Symbol used for identifying AI SDK Error instances.\n * Enables checking if an error is an instance of AISDKError across package versions.\n */\nconst marker = 'vercel.ai.error';\nconst symbol = Symbol.for(marker);\n\n/**\n * Custom error class for AI SDK related errors.\n * @extends Error\n */\nexport class AISDKError extends Error {\n  private readonly [symbol] = true; // used in isInstance\n\n  /**\n   * The underlying cause of the error, if any.\n   */\n  readonly cause?: unknown;\n\n  /**\n   * Creates an AI SDK Error.\n   *\n   * @param {Object} params - The parameters for creating the error.\n   * @param {string} params.name - The name of the error.\n   * @param {string} params.message - The error message.\n   * @param {unknown} [params.cause] - The underlying cause of the error.\n   */\n  constructor({\n    name,\n    message,\n    cause,\n  }: {\n    name: string;\n    message: string;\n    cause?: unknown;\n  }) {\n    super(message);\n\n    this.name = name;\n    this.cause = cause;\n  }\n\n  /**\n   * Checks if the given error is an AI SDK Error.\n   * @param {unknown} error - The error to check.\n   * @returns {boolean} True if the error is an AI SDK Error, false otherwise.\n   */\n  static isInstance(error: unknown): error is AISDKError {\n    return AISDKError.hasMarker(error, marker);\n  }\n\n  protected static hasMarker(error: unknown, marker: string): boolean {\n    const markerSymbol = Symbol.for(marker);\n    return (\n      error != null &&\n      typeof error === 'object' &&\n      markerSymbol in error &&\n      typeof error[markerSymbol] === 'boolean' &&\n      error[markerSymbol] === true\n    );\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_APICallError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\nexport class APICallError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  readonly url: string;\n  readonly requestBodyValues: unknown;\n  readonly statusCode?: number;\n\n  readonly responseHeaders?: Record<string, string>;\n  readonly responseBody?: string;\n\n  readonly isRetryable: boolean;\n  readonly data?: unknown;\n\n  constructor({\n    message,\n    url,\n    requestBodyValues,\n    statusCode,\n    responseHeaders,\n    responseBody,\n    cause,\n    isRetryable = statusCode != null &&\n      (statusCode === 408 || // request timeout\n        statusCode === 409 || // conflict\n        statusCode === 429 || // too many requests\n        statusCode >= 500), // server error\n    data,\n  }: {\n    message: string;\n    url: string;\n    requestBodyValues: unknown;\n    statusCode?: number;\n    responseHeaders?: Record<string, string>;\n    responseBody?: string;\n    cause?: unknown;\n    isRetryable?: boolean;\n    data?: unknown;\n  }) {\n    super({ name, message, cause });\n\n    this.url = url;\n    this.requestBodyValues = requestBodyValues;\n    this.statusCode = statusCode;\n    this.responseHeaders = responseHeaders;\n    this.responseBody = responseBody;\n    this.isRetryable = isRetryable;\n    this.data = data;\n  }\n\n  static isInstance(error: unknown): error is APICallError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_EmptyResponseBodyError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\nexport class EmptyResponseBodyError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  constructor({ message = 'Empty response body' }: { message?: string } = {}) {\n    super({ name, message });\n  }\n\n  static isInstance(error: unknown): error is EmptyResponseBodyError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","export function getErrorMessage(error: unknown | undefined) {\n  if (error == null) {\n    return 'unknown error';\n  }\n\n  if (typeof error === 'string') {\n    return error;\n  }\n\n  if (error instanceof Error) {\n    return error.message;\n  }\n\n  return JSON.stringify(error);\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_InvalidArgumentError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\n/**\n * A function argument is invalid.\n */\nexport class InvalidArgumentError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  readonly argument: string;\n\n  constructor({\n    message,\n    cause,\n    argument,\n  }: {\n    argument: string;\n    message: string;\n    cause?: unknown;\n  }) {\n    super({ name, message, cause });\n\n    this.argument = argument;\n  }\n\n  static isInstance(error: unknown): error is InvalidArgumentError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_InvalidPromptError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\n/**\n * A prompt is invalid. This error should be thrown by providers when they cannot\n * process a prompt.\n */\nexport class InvalidPromptError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  readonly prompt: unknown;\n\n  constructor({\n    prompt,\n    message,\n    cause,\n  }: {\n    prompt: unknown;\n    message: string;\n    cause?: unknown;\n  }) {\n    super({ name, message: `Invalid prompt: ${message}`, cause });\n\n    this.prompt = prompt;\n  }\n\n  static isInstance(error: unknown): error is InvalidPromptError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_InvalidResponseDataError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\n/**\n * Server returned a response with invalid data content.\n * This should be thrown by providers when they cannot parse the response from the API.\n */\nexport class InvalidResponseDataError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  readonly data: unknown;\n\n  constructor({\n    data,\n    message = `Invalid response data: ${JSON.stringify(data)}.`,\n  }: {\n    data: unknown;\n    message?: string;\n  }) {\n    super({ name, message });\n\n    this.data = data;\n  }\n\n  static isInstance(error: unknown): error is InvalidResponseDataError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\nimport { getErrorMessage } from './get-error-message';\n\nconst name = 'AI_JSONParseError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\n// TODO v5: rename to ParseError\nexport class JSONParseError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  readonly text: string;\n\n  constructor({ text, cause }: { text: string; cause: unknown }) {\n    super({\n      name,\n      message:\n        `JSON parsing failed: ` +\n        `Text: ${text}.\\n` +\n        `Error message: ${getErrorMessage(cause)}`,\n      cause,\n    });\n\n    this.text = text;\n  }\n\n  static isInstance(error: unknown): error is JSONParseError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_LoadAPIKeyError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\nexport class LoadAPIKeyError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  constructor({ message }: { message: string }) {\n    super({ name, message });\n  }\n\n  static isInstance(error: unknown): error is LoadAPIKeyError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_LoadSettingError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\nexport class LoadSettingError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  constructor({ message }: { message: string }) {\n    super({ name, message });\n  }\n\n  static isInstance(error: unknown): error is LoadSettingError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_NoContentGeneratedError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\n/**\nThrown when the AI provider fails to generate any content.\n */\nexport class NoContentGeneratedError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  constructor({\n    message = 'No content generated.',\n  }: { message?: string } = {}) {\n    super({ name, message });\n  }\n\n  static isInstance(error: unknown): error is NoContentGeneratedError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_NoSuchModelError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\nexport class NoSuchModelError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  readonly modelId: string;\n  readonly modelType:\n    | 'languageModel'\n    | 'textEmbeddingModel'\n    | 'imageModel'\n    | 'transcriptionModel'\n    | 'speechModel';\n\n  constructor({\n    errorName = name,\n    modelId,\n    modelType,\n    message = `No such ${modelType}: ${modelId}`,\n  }: {\n    errorName?: string;\n    modelId: string;\n    modelType:\n      | 'languageModel'\n      | 'textEmbeddingModel'\n      | 'imageModel'\n      | 'transcriptionModel'\n      | 'speechModel';\n    message?: string;\n  }) {\n    super({ name: errorName, message });\n\n    this.modelId = modelId;\n    this.modelType = modelType;\n  }\n\n  static isInstance(error: unknown): error is NoSuchModelError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_TooManyEmbeddingValuesForCallError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\nexport class TooManyEmbeddingValuesForCallError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  readonly provider: string;\n  readonly modelId: string;\n  readonly maxEmbeddingsPerCall: number;\n  readonly values: Array<unknown>;\n\n  constructor(options: {\n    provider: string;\n    modelId: string;\n    maxEmbeddingsPerCall: number;\n    values: Array<unknown>;\n  }) {\n    super({\n      name,\n      message:\n        `Too many values for a single embedding call. ` +\n        `The ${options.provider} model \"${options.modelId}\" can only embed up to ` +\n        `${options.maxEmbeddingsPerCall} values per call, but ${options.values.length} values were provided.`,\n    });\n\n    this.provider = options.provider;\n    this.modelId = options.modelId;\n    this.maxEmbeddingsPerCall = options.maxEmbeddingsPerCall;\n    this.values = options.values;\n  }\n\n  static isInstance(\n    error: unknown,\n  ): error is TooManyEmbeddingValuesForCallError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\nimport { getErrorMessage } from './get-error-message';\n\nconst name = 'AI_TypeValidationError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\nexport class TypeValidationError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  readonly value: unknown;\n\n  constructor({ value, cause }: { value: unknown; cause: unknown }) {\n    super({\n      name,\n      message:\n        `Type validation failed: ` +\n        `Value: ${JSON.stringify(value)}.\\n` +\n        `Error message: ${getErrorMessage(cause)}`,\n      cause,\n    });\n\n    this.value = value;\n  }\n\n  static isInstance(error: unknown): error is TypeValidationError {\n    return AISDKError.hasMarker(error, marker);\n  }\n\n  /**\n   * Wraps an error into a TypeValidationError.\n   * If the cause is already a TypeValidationError with the same value, it returns the cause.\n   * Otherwise, it creates a new TypeValidationError.\n   *\n   * @param {Object} params - The parameters for wrapping the error.\n   * @param {unknown} params.value - The value that failed validation.\n   * @param {unknown} params.cause - The original error or cause of the validation failure.\n   * @returns {TypeValidationError} A TypeValidationError instance.\n   */\n  static wrap({\n    value,\n    cause,\n  }: {\n    value: unknown;\n    cause: unknown;\n  }): TypeValidationError {\n    return TypeValidationError.isInstance(cause) && cause.value === value\n      ? cause\n      : new TypeValidationError({ value, cause });\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_UnsupportedFunctionalityError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\nexport class UnsupportedFunctionalityError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  readonly functionality: string;\n\n  constructor({\n    functionality,\n    message = `'${functionality}' functionality not supported.`,\n  }: {\n    functionality: string;\n    message?: string;\n  }) {\n    super({ name, message });\n    this.functionality = functionality;\n  }\n\n  static isInstance(error: unknown): error is UnsupportedFunctionalityError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { JSONArray, JSONObject, JSONValue } from './json-value';\n\nexport function isJSONValue(value: unknown): value is JSONValue {\n  if (\n    value === null ||\n    typeof value === 'string' ||\n    typeof value === 'number' ||\n    typeof value === 'boolean'\n  ) {\n    return true;\n  }\n\n  if (Array.isArray(value)) {\n    return value.every(isJSONValue);\n  }\n\n  if (typeof value === 'object') {\n    return Object.entries(value).every(\n      ([key, val]) => typeof key === 'string' && isJSONValue(val),\n    );\n  }\n\n  return false;\n}\n\nexport function isJSONArray(value: unknown): value is JSONArray {\n  return Array.isArray(value) && value.every(isJSONValue);\n}\n\nexport function isJSONObject(value: unknown): value is JSONObject {\n  return (\n    value != null &&\n    typeof value === 'object' &&\n    Object.entries(value).every(\n      ([key, val]) => typeof key === 'string' && isJSONValue(val),\n    )\n  );\n}\n"],"names":["name","marker","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a"],"mappings":"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"}},
    {"offset": {"line": 7771, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/eventsource-parser/dist/index.js","sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/eventsource-parser/src/errors.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/eventsource-parser/src/parse.ts"],"sourcesContent":["/**\n * The type of error that occurred.\n * @public\n */\nexport type ErrorType = 'invalid-retry' | 'unknown-field'\n\n/**\n * Error thrown when encountering an issue during parsing.\n *\n * @public\n */\nexport class ParseError extends Error {\n  /**\n   * The type of error that occurred.\n   */\n  type: ErrorType\n\n  /**\n   * In the case of an unknown field encountered in the stream, this will be the field name.\n   */\n  field?: string | undefined\n\n  /**\n   * In the case of an unknown field encountered in the stream, this will be the value of the field.\n   */\n  value?: string | undefined\n\n  /**\n   * The line that caused the error, if available.\n   */\n  line?: string | undefined\n\n  constructor(\n    message: string,\n    options: {type: ErrorType; field?: string; value?: string; line?: string},\n  ) {\n    super(message)\n    this.name = 'ParseError'\n    this.type = options.type\n    this.field = options.field\n    this.value = options.value\n    this.line = options.line\n  }\n}\n","/**\n * EventSource/Server-Sent Events parser\n * @see https://html.spec.whatwg.org/multipage/server-sent-events.html\n */\nimport {ParseError} from './errors.ts'\nimport type {EventSourceParser, ParserCallbacks} from './types.ts'\n\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\nfunction noop(_arg: unknown) {\n  // intentional noop\n}\n\n/**\n * Creates a new EventSource parser.\n *\n * @param callbacks - Callbacks to invoke on different parsing events:\n *   - `onEvent` when a new event is parsed\n *   - `onError` when an error occurs\n *   - `onRetry` when a new reconnection interval has been sent from the server\n *   - `onComment` when a comment is encountered in the stream\n *\n * @returns A new EventSource parser, with `parse` and `reset` methods.\n * @public\n */\nexport function createParser(callbacks: ParserCallbacks): EventSourceParser {\n  if (typeof callbacks === 'function') {\n    throw new TypeError(\n      '`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?',\n    )\n  }\n\n  const {onEvent = noop, onError = noop, onRetry = noop, onComment} = callbacks\n\n  let incompleteLine = ''\n\n  let isFirstChunk = true\n  let id: string | undefined\n  let data = ''\n  let eventType = ''\n\n  function feed(newChunk: string) {\n    // Strip any UTF8 byte order mark (BOM) at the start of the stream\n    const chunk = isFirstChunk ? newChunk.replace(/^\\xEF\\xBB\\xBF/, '') : newChunk\n\n    // If there was a previous incomplete line, append it to the new chunk,\n    // so we may process it together as a new (hopefully complete) chunk.\n    const [complete, incomplete] = splitLines(`${incompleteLine}${chunk}`)\n\n    for (const line of complete) {\n      parseLine(line)\n    }\n\n    incompleteLine = incomplete\n    isFirstChunk = false\n  }\n\n  function parseLine(line: string) {\n    // If the line is empty (a blank line), dispatch the event\n    if (line === '') {\n      dispatchEvent()\n      return\n    }\n\n    // If the line starts with a U+003A COLON character (:), ignore the line.\n    if (line.startsWith(':')) {\n      if (onComment) {\n        onComment(line.slice(line.startsWith(': ') ? 2 : 1))\n      }\n      return\n    }\n\n    // If the line contains a U+003A COLON character (:)\n    const fieldSeparatorIndex = line.indexOf(':')\n    if (fieldSeparatorIndex !== -1) {\n      // Collect the characters on the line before the first U+003A COLON character (:),\n      // and let `field` be that string.\n      const field = line.slice(0, fieldSeparatorIndex)\n\n      // Collect the characters on the line after the first U+003A COLON character (:),\n      // and let `value` be that string. If value starts with a U+0020 SPACE character,\n      // remove it from value.\n      const offset = line[fieldSeparatorIndex + 1] === ' ' ? 2 : 1\n      const value = line.slice(fieldSeparatorIndex + offset)\n\n      processField(field, value, line)\n      return\n    }\n\n    // Otherwise, the string is not empty but does not contain a U+003A COLON character (:)\n    // Process the field using the whole line as the field name, and an empty string as the field value.\n    //  This is according to spec. That means that a line that has the value `data` will result in\n    // a newline being added to the current `data` buffer, for instance.\n    processField(line, '', line)\n  }\n\n  function processField(field: string, value: string, line: string) {\n    // Field names must be compared literally, with no case folding performed.\n    switch (field) {\n      case 'event':\n        // Set the `event type` buffer to field value\n        eventType = value\n        break\n      case 'data':\n        // Append the field value to the `data` buffer, then append a single U+000A LINE FEED(LF)\n        // character to the `data` buffer.\n        data = `${data}${value}\\n`\n        break\n      case 'id':\n        // If the field value does not contain U+0000 NULL, then set the `ID` buffer to\n        // the field value. Otherwise, ignore the field.\n        id = value.includes('\\0') ? undefined : value\n        break\n      case 'retry':\n        // If the field value consists of only ASCII digits, then interpret the field value as an\n        // integer in base ten, and set the event stream's reconnection time to that integer.\n        // Otherwise, ignore the field.\n        if (/^\\d+$/.test(value)) {\n          onRetry(parseInt(value, 10))\n        } else {\n          onError(\n            new ParseError(`Invalid \\`retry\\` value: \"${value}\"`, {\n              type: 'invalid-retry',\n              value,\n              line,\n            }),\n          )\n        }\n        break\n      default:\n        // Otherwise, the field is ignored.\n        onError(\n          new ParseError(\n            `Unknown field \"${field.length > 20 ? `${field.slice(0, 20)}` : field}\"`,\n            {type: 'unknown-field', field, value, line},\n          ),\n        )\n        break\n    }\n  }\n\n  function dispatchEvent() {\n    const shouldDispatch = data.length > 0\n    if (shouldDispatch) {\n      onEvent({\n        id,\n        event: eventType || undefined,\n        // If the data buffer's last character is a U+000A LINE FEED (LF) character,\n        // then remove the last character from the data buffer.\n        data: data.endsWith('\\n') ? data.slice(0, -1) : data,\n      })\n    }\n\n    // Reset for the next event\n    id = undefined\n    data = ''\n    eventType = ''\n  }\n\n  function reset(options: {consume?: boolean} = {}) {\n    if (incompleteLine && options.consume) {\n      parseLine(incompleteLine)\n    }\n\n    isFirstChunk = true\n    id = undefined\n    data = ''\n    eventType = ''\n    incompleteLine = ''\n  }\n\n  return {feed, reset}\n}\n\n/**\n * For the given `chunk`, split it into lines according to spec, and return any remaining incomplete line.\n *\n * @param chunk - The chunk to split into lines\n * @returns A tuple containing an array of complete lines, and any remaining incomplete line\n * @internal\n */\nfunction splitLines(chunk: string): [complete: Array<string>, incomplete: string] {\n  /**\n   * According to the spec, a line is terminated by either:\n   * - U+000D CARRIAGE RETURN U+000A LINE FEED (CRLF) character pair\n   * - a single U+000A LINE FEED(LF) character not preceded by a U+000D CARRIAGE RETURN(CR) character\n   * - a single U+000D CARRIAGE RETURN(CR) character not followed by a U+000A LINE FEED(LF) character\n   */\n  const lines: Array<string> = []\n  let incompleteLine = ''\n  let searchIndex = 0\n\n  while (searchIndex < chunk.length) {\n    // Find next line terminator\n    const crIndex = chunk.indexOf('\\r', searchIndex)\n    const lfIndex = chunk.indexOf('\\n', searchIndex)\n\n    // Determine line end\n    let lineEnd = -1\n    if (crIndex !== -1 && lfIndex !== -1) {\n      // CRLF case\n      lineEnd = Math.min(crIndex, lfIndex)\n    } else if (crIndex !== -1) {\n      // CR at the end of a chunk might be part of a CRLF sequence that spans chunks,\n      // so we shouldn't treat it as a line terminator (yet)\n      if (crIndex === chunk.length - 1) {\n        lineEnd = -1\n      } else {\n        lineEnd = crIndex\n      }\n    } else if (lfIndex !== -1) {\n      lineEnd = lfIndex\n    }\n\n    // Extract line if terminator found\n    if (lineEnd === -1) {\n      // No terminator found, rest is incomplete\n      incompleteLine = chunk.slice(searchIndex)\n      break\n    } else {\n      const line = chunk.slice(searchIndex, lineEnd)\n      lines.push(line)\n\n      // Move past line terminator\n      searchIndex = lineEnd + 1\n      if (chunk[searchIndex - 1] === '\\r' && chunk[searchIndex] === '\\n') {\n        searchIndex++\n      }\n    }\n  }\n\n  return [lines, incompleteLine]\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 7883, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/eventsource-parser/dist/stream.js","sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/eventsource-parser/src/stream.ts"],"sourcesContent":["import {createParser} from './parse.ts'\nimport type {EventSourceMessage, EventSourceParser} from './types.ts'\n\n/**\n * Options for the EventSourceParserStream.\n *\n * @public\n */\nexport interface StreamOptions {\n  /**\n   * Behavior when a parsing error occurs.\n   *\n   * - A custom function can be provided to handle the error.\n   * - `'terminate'` will error the stream and stop parsing.\n   * - Any other value will ignore the error and continue parsing.\n   *\n   * @defaultValue `undefined`\n   */\n  onError?: ('terminate' | ((error: Error) => void)) | undefined\n\n  /**\n   * Callback for when a reconnection interval is sent from the server.\n   *\n   * @param retry - The number of milliseconds to wait before reconnecting.\n   */\n  onRetry?: ((retry: number) => void) | undefined\n\n  /**\n   * Callback for when a comment is encountered in the stream.\n   *\n   * @param comment - The comment encountered in the stream.\n   */\n  onComment?: ((comment: string) => void) | undefined\n}\n\n/**\n * A TransformStream that ingests a stream of strings and produces a stream of `EventSourceMessage`.\n *\n * @example Basic usage\n * ```\n * const eventStream =\n *   response.body\n *     .pipeThrough(new TextDecoderStream())\n *     .pipeThrough(new EventSourceParserStream())\n * ```\n *\n * @example Terminate stream on parsing errors\n * ```\n * const eventStream =\n *  response.body\n *   .pipeThrough(new TextDecoderStream())\n *   .pipeThrough(new EventSourceParserStream({terminateOnError: true}))\n * ```\n *\n * @public\n */\nexport class EventSourceParserStream extends TransformStream<string, EventSourceMessage> {\n  constructor({onError, onRetry, onComment}: StreamOptions = {}) {\n    let parser!: EventSourceParser\n\n    super({\n      start(controller) {\n        parser = createParser({\n          onEvent: (event) => {\n            controller.enqueue(event)\n          },\n          onError(error) {\n            if (onError === 'terminate') {\n              controller.error(error)\n            } else if (typeof onError === 'function') {\n              onError(error)\n            }\n\n            // Ignore by default\n          },\n          onRetry,\n          onComment,\n        })\n      },\n      transform(chunk) {\n        parser.feed(chunk)\n      },\n    })\n  }\n}\n\nexport {type ErrorType, ParseError} from './errors.ts'\nexport type {EventSourceMessage} from './types.ts'\n"],"names":[],"mappings":";;;;;;;AAwDO,MAAM,gCAAgC,gBAA4C;IACvF,YAAY,EAAC,OAAA,EAAS,OAAA,EAAS,SAAA,CAAA,CAAA,GAA4B,CAAA,CAAA,CAAI;QAC7D,IAAI;QAEJ,KAAA,CAAM;YACJ,OAAM,UAAA,EAAY;gBAChB,aAAS,wKAAA,EAAa;oBACpB,SAAS,CAAC,UAAU;wBAClB,WAAW,OAAA,CAAQ,KAAK;oBAC1B;oBACA,SAAQ,KAAA,EAAO;wBACT,YAAY,cACd,WAAW,KAAA,CAAM,KAAK,IACb,OAAO,WAAY,cAC5B,QAAQ,KAAK;oBAIjB;oBACA;oBACA;gBAAA,CACD;YACH;YACA,WAAU,KAAA,EAAO;gBACf,OAAO,IAAA,CAAK,KAAK;YACnB;QAAA,CACD;IACH;AACF"}},
    {"offset": {"line": 7918, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/combine-headers.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/convert-async-iterator-to-readable-stream.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/delay.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/extract-response-headers.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/generate-id.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/get-error-message.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/get-from-api.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/handle-fetch-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/is-abort-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/get-runtime-environment-user-agent.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/remove-undefined-entries.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/with-user-agent-suffix.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/version.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/inject-json-instruction.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/is-url-supported.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/load-api-key.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/load-optional-setting.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/load-setting.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/media-type-to-extension.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/parse-json.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/secure-json-parse.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/validate-types.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/validator.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/parse-json-event-stream.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/parse-provider-options.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/post-to-api.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/types/tool.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/provider-defined-tool-factory.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/resolve.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/response-handler.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-schema.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/get-relative-path.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/options.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/select-parser.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/any.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/array.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/bigint.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/boolean.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/branded.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/catch.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/date.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/default.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/effects.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/enum.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/intersection.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/literal.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/record.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/string.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/map.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/native-enum.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/never.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/null.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/union.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/nullable.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/number.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/object.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/optional.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/pipeline.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/promise.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/set.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/tuple.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/undefined.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/unknown.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parsers/readonly.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/parse-def.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/refs.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/zod-to-json-schema.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/zod-to-json-schema/index.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/schema.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/uint8-utils.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/without-trailing-slash.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/is-async-iterable.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/types/execute-tool.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-utils-v5/src/index.ts"],"sourcesContent":["export function combineHeaders(\n  ...headers: Array<Record<string, string | undefined> | undefined>\n): Record<string, string | undefined> {\n  return headers.reduce(\n    (combinedHeaders, currentHeaders) => ({\n      ...combinedHeaders,\n      ...(currentHeaders ?? {}),\n    }),\n    {},\n  ) as Record<string, string | undefined>;\n}\n","/**\n * Converts an AsyncIterator to a ReadableStream.\n *\n * @template T - The type of elements produced by the AsyncIterator.\n * @param { <T>} iterator - The AsyncIterator to convert.\n * @returns {ReadableStream<T>} - A ReadableStream that provides the same data as the AsyncIterator.\n */\nexport function convertAsyncIteratorToReadableStream<T>(\n  iterator: AsyncIterator<T>,\n): ReadableStream<T> {\n  return new ReadableStream<T>({\n    /**\n     * Called when the consumer wants to pull more data from the stream.\n     *\n     * @param {ReadableStreamDefaultController<T>} controller - The controller to enqueue data into the stream.\n     * @returns {Promise<void>}\n     */\n    async pull(controller) {\n      try {\n        const { value, done } = await iterator.next();\n        if (done) {\n          controller.close();\n        } else {\n          controller.enqueue(value);\n        }\n      } catch (error) {\n        controller.error(error);\n      }\n    },\n    /**\n     * Called when the consumer cancels the stream.\n     */\n    cancel() {},\n  });\n}\n","/**\n * Creates a Promise that resolves after a specified delay\n * @param delayInMs - The delay duration in milliseconds. If null or undefined, resolves immediately.\n * @param signal - Optional AbortSignal to cancel the delay\n * @returns A Promise that resolves after the specified delay\n * @throws {DOMException} When the signal is aborted\n */\nexport async function delay(\n  delayInMs?: number | null,\n  options?: {\n    abortSignal?: AbortSignal;\n  },\n): Promise<void> {\n  if (delayInMs == null) {\n    return Promise.resolve();\n  }\n\n  const signal = options?.abortSignal;\n\n  return new Promise<void>((resolve, reject) => {\n    if (signal?.aborted) {\n      reject(createAbortError());\n      return;\n    }\n\n    const timeoutId = setTimeout(() => {\n      cleanup();\n      resolve();\n    }, delayInMs);\n\n    const cleanup = () => {\n      clearTimeout(timeoutId);\n      signal?.removeEventListener('abort', onAbort);\n    };\n\n    const onAbort = () => {\n      cleanup();\n      reject(createAbortError());\n    };\n\n    signal?.addEventListener('abort', onAbort);\n  });\n}\n\nfunction createAbortError(): DOMException {\n  return new DOMException('Delay was aborted', 'AbortError');\n}\n","/**\nExtracts the headers from a response object and returns them as a key-value object.\n\n@param response - The response object to extract headers from.\n@returns The headers as a key-value object.\n*/\nexport function extractResponseHeaders(response: Response) {\n  return Object.fromEntries<string>([...response.headers]);\n}\n","import { InvalidArgumentError } from '@ai-sdk/provider';\n\n/**\nCreates an ID generator.\nThe total length of the ID is the sum of the prefix, separator, and random part length.\nNot cryptographically secure.\n\n@param alphabet - The alphabet to use for the ID. Default: '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz'.\n@param prefix - The prefix of the ID to generate. Optional.\n@param separator - The separator between the prefix and the random part of the ID. Default: '-'.\n@param size - The size of the random part of the ID to generate. Default: 16.\n */\nexport const createIdGenerator = ({\n  prefix,\n  size = 16,\n  alphabet = '0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz',\n  separator = '-',\n}: {\n  prefix?: string;\n  separator?: string;\n  size?: number;\n  alphabet?: string;\n} = {}): IdGenerator => {\n  const generator = () => {\n    const alphabetLength = alphabet.length;\n    const chars = new Array(size);\n    for (let i = 0; i < size; i++) {\n      chars[i] = alphabet[(Math.random() * alphabetLength) | 0];\n    }\n    return chars.join('');\n  };\n\n  if (prefix == null) {\n    return generator;\n  }\n\n  // check that the prefix is not part of the alphabet (otherwise prefix checking can fail randomly)\n  if (alphabet.includes(separator)) {\n    throw new InvalidArgumentError({\n      argument: 'separator',\n      message: `The separator \"${separator}\" must not be part of the alphabet \"${alphabet}\".`,\n    });\n  }\n\n  return () => `${prefix}${separator}${generator()}`;\n};\n\n/**\nA function that generates an ID.\n */\nexport type IdGenerator = () => string;\n\n/**\nGenerates a 16-character random string to use for IDs.\nNot cryptographically secure.\n */\nexport const generateId = createIdGenerator();\n","export function getErrorMessage(error: unknown | undefined) {\n  if (error == null) {\n    return 'unknown error';\n  }\n\n  if (typeof error === 'string') {\n    return error;\n  }\n\n  if (error instanceof Error) {\n    return error.message;\n  }\n\n  return JSON.stringify(error);\n}\n","import { APICallError } from '@ai-sdk/provider';\nimport { extractResponseHeaders } from './extract-response-headers';\nimport { FetchFunction } from './fetch-function';\nimport { handleFetchError } from './handle-fetch-error';\nimport { isAbortError } from './is-abort-error';\nimport { ResponseHandler } from './response-handler';\nimport { getRuntimeEnvironmentUserAgent } from './get-runtime-environment-user-agent';\nimport { withUserAgentSuffix } from './with-user-agent-suffix';\nimport { VERSION } from './version';\n\n// use function to allow for mocking in tests:\nconst getOriginalFetch = () => globalThis.fetch;\n\nexport const getFromApi = async <T>({\n  url,\n  headers = {},\n  successfulResponseHandler,\n  failedResponseHandler,\n  abortSignal,\n  fetch = getOriginalFetch(),\n}: {\n  url: string;\n  headers?: Record<string, string | undefined>;\n  failedResponseHandler: ResponseHandler<Error>;\n  successfulResponseHandler: ResponseHandler<T>;\n  abortSignal?: AbortSignal;\n  fetch?: FetchFunction;\n}) => {\n  try {\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: withUserAgentSuffix(\n        headers,\n        `ai-sdk/provider-utils/${VERSION}`,\n        getRuntimeEnvironmentUserAgent(),\n      ),\n      signal: abortSignal,\n    });\n\n    const responseHeaders = extractResponseHeaders(response);\n\n    if (!response.ok) {\n      let errorInformation: {\n        value: Error;\n        responseHeaders?: Record<string, string> | undefined;\n      };\n\n      try {\n        errorInformation = await failedResponseHandler({\n          response,\n          url,\n          requestBodyValues: {},\n        });\n      } catch (error) {\n        if (isAbortError(error) || APICallError.isInstance(error)) {\n          throw error;\n        }\n\n        throw new APICallError({\n          message: 'Failed to process error response',\n          cause: error,\n          statusCode: response.status,\n          url,\n          responseHeaders,\n          requestBodyValues: {},\n        });\n      }\n\n      throw errorInformation.value;\n    }\n\n    try {\n      return await successfulResponseHandler({\n        response,\n        url,\n        requestBodyValues: {},\n      });\n    } catch (error) {\n      if (error instanceof Error) {\n        if (isAbortError(error) || APICallError.isInstance(error)) {\n          throw error;\n        }\n      }\n\n      throw new APICallError({\n        message: 'Failed to process successful response',\n        cause: error,\n        statusCode: response.status,\n        url,\n        responseHeaders,\n        requestBodyValues: {},\n      });\n    }\n  } catch (error) {\n    throw handleFetchError({ error, url, requestBodyValues: {} });\n  }\n};\n","import { APICallError } from '@ai-sdk/provider';\nimport { isAbortError } from './is-abort-error';\n\nconst FETCH_FAILED_ERROR_MESSAGES = ['fetch failed', 'failed to fetch'];\n\nexport function handleFetchError({\n  error,\n  url,\n  requestBodyValues,\n}: {\n  error: unknown;\n  url: string;\n  requestBodyValues: unknown;\n}) {\n  if (isAbortError(error)) {\n    return error;\n  }\n\n  // unwrap original error when fetch failed (for easier debugging):\n  if (\n    error instanceof TypeError &&\n    FETCH_FAILED_ERROR_MESSAGES.includes(error.message.toLowerCase())\n  ) {\n    const cause = (error as any).cause;\n\n    if (cause != null) {\n      // Failed to connect to server:\n      return new APICallError({\n        message: `Cannot connect to API: ${cause.message}`,\n        cause,\n        url,\n        requestBodyValues,\n        isRetryable: true, // retry when network error\n      });\n    }\n  }\n\n  return error;\n}\n","export function isAbortError(error: unknown): error is Error {\n  return (\n    (error instanceof Error || error instanceof DOMException) &&\n    (error.name === 'AbortError' ||\n      error.name === 'ResponseAborted' || // Next.js\n      error.name === 'TimeoutError')\n  );\n}\n","export function getRuntimeEnvironmentUserAgent(\n  globalThisAny: any = globalThis as any,\n): string {\n  // Browsers\n  if (globalThisAny.window) {\n    return `runtime/browser`;\n  }\n\n  // Cloudflare Workers / Deno / Bun / Node.js >= 21.1\n  if (globalThisAny.navigator?.userAgent) {\n    return `runtime/${globalThisAny.navigator.userAgent.toLowerCase()}`;\n  }\n\n  // Nodes.js < 21.1\n  if (globalThisAny.process?.versions?.node) {\n    return `runtime/node.js/${globalThisAny.process.version.substring(0)}`;\n  }\n\n  if (globalThisAny.EdgeRuntime) {\n    return `runtime/vercel-edge`;\n  }\n\n  return 'runtime/unknown';\n}\n","/**\n * Removes entries from a record where the value is null or undefined.\n * @param record - The input object whose entries may be null or undefined.\n * @returns A new object containing only entries with non-null and non-undefined values.\n */\nexport function removeUndefinedEntries<T>(\n  record: Record<string, T | undefined>,\n): Record<string, T> {\n  return Object.fromEntries(\n    Object.entries(record).filter(([_key, value]) => value != null),\n  ) as Record<string, T>;\n}\n","import { removeUndefinedEntries } from './remove-undefined-entries';\n\n/**\n * Appends suffix parts to the `user-agent` header.\n * If a `user-agent` header already exists, the suffix parts are appended to it.\n * If no `user-agent` header exists, a new one is created with the suffix parts.\n * Automatically removes undefined entries from the headers.\n *\n * @param headers - The original headers.\n * @param userAgentSuffixParts - The parts to append to the `user-agent` header.\n * @returns The new headers with the `user-agent` header set or updated.\n */\nexport function withUserAgentSuffix(\n  headers: HeadersInit | Record<string, string | undefined> | undefined,\n  ...userAgentSuffixParts: string[]\n): Record<string, string> {\n  const cleanedHeaders = removeUndefinedEntries(\n    (headers as Record<string, string | undefined>) ?? {},\n  );\n  const normalizedHeaders = new Headers(cleanedHeaders);\n\n  const currentUserAgentHeader = normalizedHeaders.get('user-agent') || '';\n\n  normalizedHeaders.set(\n    'user-agent',\n    [currentUserAgentHeader, ...userAgentSuffixParts].filter(Boolean).join(' '),\n  );\n\n  return Object.fromEntries(normalizedHeaders);\n}\n","// Version string of this package injected at build time.\ndeclare const __PACKAGE_VERSION__: string | undefined;\nexport const VERSION: string =\n  typeof __PACKAGE_VERSION__ !== 'undefined'\n    ? __PACKAGE_VERSION__\n    : '0.0.0-test';\n","import {\n  JSONSchema7,\n  LanguageModelV2Message,\n  LanguageModelV2Prompt,\n} from '@ai-sdk/provider';\n\nconst DEFAULT_SCHEMA_PREFIX = 'JSON schema:';\nconst DEFAULT_SCHEMA_SUFFIX =\n  'You MUST answer with a JSON object that matches the JSON schema above.';\nconst DEFAULT_GENERIC_SUFFIX = 'You MUST answer with JSON.';\n\nexport function injectJsonInstruction({\n  prompt,\n  schema,\n  schemaPrefix = schema != null ? DEFAULT_SCHEMA_PREFIX : undefined,\n  schemaSuffix = schema != null\n    ? DEFAULT_SCHEMA_SUFFIX\n    : DEFAULT_GENERIC_SUFFIX,\n}: {\n  prompt?: string;\n  schema?: JSONSchema7;\n  schemaPrefix?: string;\n  schemaSuffix?: string;\n}): string {\n  return [\n    prompt != null && prompt.length > 0 ? prompt : undefined,\n    prompt != null && prompt.length > 0 ? '' : undefined, // add a newline if prompt is not null\n    schemaPrefix,\n    schema != null ? JSON.stringify(schema) : undefined,\n    schemaSuffix,\n  ]\n    .filter(line => line != null)\n    .join('\\n');\n}\n\nexport function injectJsonInstructionIntoMessages({\n  messages,\n  schema,\n  schemaPrefix,\n  schemaSuffix,\n}: {\n  messages: LanguageModelV2Prompt;\n  schema?: JSONSchema7;\n  schemaPrefix?: string;\n  schemaSuffix?: string;\n}): LanguageModelV2Prompt {\n  const systemMessage: LanguageModelV2Message =\n    messages[0]?.role === 'system'\n      ? { ...messages[0] }\n      : { role: 'system', content: '' };\n\n  systemMessage.content = injectJsonInstruction({\n    prompt: systemMessage.content,\n    schema,\n    schemaPrefix,\n    schemaSuffix,\n  });\n\n  return [\n    systemMessage,\n    ...(messages[0]?.role === 'system' ? messages.slice(1) : messages),\n  ];\n}\n","/**\n * Checks if the given URL is supported natively by the model.\n *\n * @param mediaType - The media type of the URL. Case-sensitive.\n * @param url - The URL to check.\n * @param supportedUrls - A record where keys are case-sensitive media types (or '*')\n *                        and values are arrays of RegExp patterns for URLs.\n *\n * @returns `true` if the URL matches a pattern under the specific media type\n *          or the wildcard '*', `false` otherwise.\n */\nexport function isUrlSupported({\n  mediaType,\n  url,\n  supportedUrls,\n}: {\n  mediaType: string;\n  url: string;\n  supportedUrls: Record<string, RegExp[]>;\n}): boolean {\n  // standardize media type and url to lower case\n  url = url.toLowerCase();\n  mediaType = mediaType.toLowerCase();\n\n  return (\n    Object.entries(supportedUrls)\n      // standardize supported url map into lowercase prefixes:\n      .map(([key, value]) => {\n        const mediaType = key.toLowerCase();\n        return mediaType === '*' || mediaType === '*/*'\n          ? { mediaTypePrefix: '', regexes: value }\n          : { mediaTypePrefix: mediaType.replace(/\\*/, ''), regexes: value };\n      })\n      // gather all regexp pattern from matched media type prefixes:\n      .filter(({ mediaTypePrefix }) => mediaType.startsWith(mediaTypePrefix))\n      .flatMap(({ regexes }) => regexes)\n      // check if any pattern matches the url:\n      .some(pattern => pattern.test(url))\n  );\n}\n","import { LoadAPIKeyError } from '@ai-sdk/provider';\n\nexport function loadApiKey({\n  apiKey,\n  environmentVariableName,\n  apiKeyParameterName = 'apiKey',\n  description,\n}: {\n  apiKey: string | undefined;\n  environmentVariableName: string;\n  apiKeyParameterName?: string;\n  description: string;\n}): string {\n  if (typeof apiKey === 'string') {\n    return apiKey;\n  }\n\n  if (apiKey != null) {\n    throw new LoadAPIKeyError({\n      message: `${description} API key must be a string.`,\n    });\n  }\n\n  if (typeof process === 'undefined') {\n    throw new LoadAPIKeyError({\n      message: `${description} API key is missing. Pass it using the '${apiKeyParameterName}' parameter. Environment variables is not supported in this environment.`,\n    });\n  }\n\n  apiKey = process.env[environmentVariableName];\n\n  if (apiKey == null) {\n    throw new LoadAPIKeyError({\n      message: `${description} API key is missing. Pass it using the '${apiKeyParameterName}' parameter or the ${environmentVariableName} environment variable.`,\n    });\n  }\n\n  if (typeof apiKey !== 'string') {\n    throw new LoadAPIKeyError({\n      message: `${description} API key must be a string. The value of the ${environmentVariableName} environment variable is not a string.`,\n    });\n  }\n\n  return apiKey;\n}\n","/**\n * Loads an optional `string` setting from the environment or a parameter.\n *\n * @param settingValue - The setting value.\n * @param environmentVariableName - The environment variable name.\n * @returns The setting value.\n */\nexport function loadOptionalSetting({\n  settingValue,\n  environmentVariableName,\n}: {\n  settingValue: string | undefined;\n  environmentVariableName: string;\n}): string | undefined {\n  if (typeof settingValue === 'string') {\n    return settingValue;\n  }\n\n  if (settingValue != null || typeof process === 'undefined') {\n    return undefined;\n  }\n\n  settingValue = process.env[environmentVariableName];\n\n  if (settingValue == null || typeof settingValue !== 'string') {\n    return undefined;\n  }\n\n  return settingValue;\n}\n","import { LoadSettingError } from '@ai-sdk/provider';\n\n/**\n * Loads a `string` setting from the environment or a parameter.\n *\n * @param settingValue - The setting value.\n * @param environmentVariableName - The environment variable name.\n * @param settingName - The setting name.\n * @param description - The description of the setting.\n * @returns The setting value.\n */\nexport function loadSetting({\n  settingValue,\n  environmentVariableName,\n  settingName,\n  description,\n}: {\n  settingValue: string | undefined;\n  environmentVariableName: string;\n  settingName: string;\n  description: string;\n}): string {\n  if (typeof settingValue === 'string') {\n    return settingValue;\n  }\n\n  if (settingValue != null) {\n    throw new LoadSettingError({\n      message: `${description} setting must be a string.`,\n    });\n  }\n\n  if (typeof process === 'undefined') {\n    throw new LoadSettingError({\n      message:\n        `${description} setting is missing. ` +\n        `Pass it using the '${settingName}' parameter. ` +\n        `Environment variables is not supported in this environment.`,\n    });\n  }\n\n  settingValue = process.env[environmentVariableName];\n\n  if (settingValue == null) {\n    throw new LoadSettingError({\n      message:\n        `${description} setting is missing. ` +\n        `Pass it using the '${settingName}' parameter ` +\n        `or the ${environmentVariableName} environment variable.`,\n    });\n  }\n\n  if (typeof settingValue !== 'string') {\n    throw new LoadSettingError({\n      message:\n        `${description} setting must be a string. ` +\n        `The value of the ${environmentVariableName} environment variable is not a string.`,\n    });\n  }\n\n  return settingValue;\n}\n","/**\n * Maps a media type to its corresponding file extension.\n * It was originally introduced to set a filename for audio file uploads\n * in https://github.com/vercel/ai/pull/8159.\n *\n * @param mediaType The media type to map.\n * @returns The corresponding file extension\n * @see https://developer.mozilla.org/en-US/docs/Web/HTTP/Guides/MIME_types/Common_types\n */\nexport function mediaTypeToExtension(mediaType: string) {\n  const [_type, subtype = ''] = mediaType.toLowerCase().split('/');\n\n  return (\n    {\n      mpeg: 'mp3',\n      'x-wav': 'wav',\n      opus: 'ogg',\n      mp4: 'm4a',\n      'x-m4a': 'm4a',\n    }[subtype] ?? subtype\n  );\n}\n","import {\n  JSONParseError,\n  JSONValue,\n  TypeValidationError,\n} from '@ai-sdk/provider';\nimport { secureJsonParse } from './secure-json-parse';\nimport { safeValidateTypes, validateTypes } from './validate-types';\nimport { FlexibleValidator, Validator } from './validator';\n\n/**\n * Parses a JSON string into an unknown object.\n *\n * @param text - The JSON string to parse.\n * @returns {JSONValue} - The parsed JSON object.\n */\nexport async function parseJSON(options: {\n  text: string;\n  schema?: undefined;\n}): Promise<JSONValue>;\n/**\n * Parses a JSON string into a strongly-typed object using the provided schema.\n *\n * @template T - The type of the object to parse the JSON into.\n * @param {string} text - The JSON string to parse.\n * @param {Validator<T>} schema - The schema to use for parsing the JSON.\n * @returns {Promise<T>} - The parsed object.\n */\nexport async function parseJSON<T>(options: {\n  text: string;\n  schema: FlexibleValidator<T>;\n}): Promise<T>;\nexport async function parseJSON<T>({\n  text,\n  schema,\n}: {\n  text: string;\n  schema?: FlexibleValidator<T>;\n}): Promise<T> {\n  try {\n    const value = secureJsonParse(text);\n\n    if (schema == null) {\n      return value;\n    }\n\n    return validateTypes<T>({ value, schema });\n  } catch (error) {\n    if (\n      JSONParseError.isInstance(error) ||\n      TypeValidationError.isInstance(error)\n    ) {\n      throw error;\n    }\n\n    throw new JSONParseError({ text, cause: error });\n  }\n}\n\nexport type ParseResult<T> =\n  | { success: true; value: T; rawValue: unknown }\n  | {\n      success: false;\n      error: JSONParseError | TypeValidationError;\n      rawValue: unknown;\n    };\n\n/**\n * Safely parses a JSON string and returns the result as an object of type `unknown`.\n *\n * @param text - The JSON string to parse.\n * @returns {Promise<object>} Either an object with `success: true` and the parsed data, or an object with `success: false` and the error that occurred.\n */\nexport async function safeParseJSON(options: {\n  text: string;\n  schema?: undefined;\n}): Promise<ParseResult<JSONValue>>;\n/**\n * Safely parses a JSON string into a strongly-typed object, using a provided schema to validate the object.\n *\n * @template T - The type of the object to parse the JSON into.\n * @param {string} text - The JSON string to parse.\n * @param {Validator<T>} schema - The schema to use for parsing the JSON.\n * @returns An object with either a `success` flag and the parsed and typed data, or a `success` flag and an error object.\n */\nexport async function safeParseJSON<T>(options: {\n  text: string;\n  schema: FlexibleValidator<T>;\n}): Promise<ParseResult<T>>;\nexport async function safeParseJSON<T>({\n  text,\n  schema,\n}: {\n  text: string;\n  schema?: FlexibleValidator<T>;\n}): Promise<ParseResult<T>> {\n  try {\n    const value = secureJsonParse(text);\n\n    if (schema == null) {\n      return { success: true, value: value as T, rawValue: value };\n    }\n\n    return await safeValidateTypes<T>({ value, schema });\n  } catch (error) {\n    return {\n      success: false,\n      error: JSONParseError.isInstance(error)\n        ? error\n        : new JSONParseError({ text, cause: error }),\n      rawValue: undefined,\n    };\n  }\n}\n\nexport function isParsableJson(input: string): boolean {\n  try {\n    secureJsonParse(input);\n    return true;\n  } catch {\n    return false;\n  }\n}\n","// Licensed under BSD-3-Clause (this file only)\n// Code adapted from https://github.com/fastify/secure-json-parse/blob/783fcb1b5434709466759847cec974381939673a/index.js\n//\n// Copyright (c) Vercel, Inc. (https://vercel.com)\n// Copyright (c) 2019 The Fastify Team\n// Copyright (c) 2019, Sideway Inc, and project contributors\n// All rights reserved.\n//\n// The complete list of contributors can be found at:\n// - https://github.com/hapijs/bourne/graphs/contributors\n// - https://github.com/fastify/secure-json-parse/graphs/contributors\n// - https://github.com/vercel/ai/commits/main/packages/provider-utils/src/secure-parse-json.ts\n//\n// Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:\n//\n// 1. Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.\n//\n// 2. Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.\n//\n// 3. Neither the name of the copyright holder nor the names of its contributors may be used to endorse or promote products derived from this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\nconst suspectProtoRx = /\"__proto__\"\\s*:/;\nconst suspectConstructorRx = /\"constructor\"\\s*:/;\n\nfunction _parse(text: string) {\n  // Parse normally\n  const obj = JSON.parse(text);\n\n  // Ignore null and non-objects\n  if (obj === null || typeof obj !== 'object') {\n    return obj;\n  }\n\n  if (\n    suspectProtoRx.test(text) === false &&\n    suspectConstructorRx.test(text) === false\n  ) {\n    return obj;\n  }\n\n  // Scan result for proto keys\n  return filter(obj);\n}\n\nfunction filter(obj: any) {\n  let next = [obj];\n\n  while (next.length) {\n    const nodes = next;\n    next = [];\n\n    for (const node of nodes) {\n      if (Object.prototype.hasOwnProperty.call(node, '__proto__')) {\n        throw new SyntaxError('Object contains forbidden prototype property');\n      }\n\n      if (\n        Object.prototype.hasOwnProperty.call(node, 'constructor') &&\n        Object.prototype.hasOwnProperty.call(node.constructor, 'prototype')\n      ) {\n        throw new SyntaxError('Object contains forbidden prototype property');\n      }\n\n      for (const key in node) {\n        const value = node[key];\n        if (value && typeof value === 'object') {\n          next.push(value);\n        }\n      }\n    }\n  }\n  return obj;\n}\n\nexport function secureJsonParse(text: string) {\n  // Performance optimization, see https://github.com/fastify/secure-json-parse/pull/90\n  const { stackTraceLimit } = Error;\n  Error.stackTraceLimit = 0;\n  try {\n    return _parse(text);\n  } finally {\n    Error.stackTraceLimit = stackTraceLimit;\n  }\n}\n","import { TypeValidationError } from '@ai-sdk/provider';\nimport { FlexibleValidator, asValidator } from './validator';\n\n/**\n * Validates the types of an unknown object using a schema and\n * return a strongly-typed object.\n *\n * @template T - The type of the object to validate.\n * @param {string} options.value - The object to validate.\n * @param {Validator<T>} options.schema - The schema to use for validating the JSON.\n * @returns {Promise<T>} - The typed object.\n */\nexport async function validateTypes<OBJECT>({\n  value,\n  schema,\n}: {\n  value: unknown;\n  schema: FlexibleValidator<OBJECT>;\n}): Promise<OBJECT> {\n  const result = await safeValidateTypes({ value, schema });\n\n  if (!result.success) {\n    throw TypeValidationError.wrap({ value, cause: result.error });\n  }\n\n  return result.value;\n}\n\n/**\n * Safely validates the types of an unknown object using a schema and\n * return a strongly-typed object.\n *\n * @template T - The type of the object to validate.\n * @param {string} options.value - The JSON object to validate.\n * @param {Validator<T>} options.schema - The schema to use for validating the JSON.\n * @returns An object with either a `success` flag and the parsed and typed data, or a `success` flag and an error object.\n */\nexport async function safeValidateTypes<OBJECT>({\n  value,\n  schema,\n}: {\n  value: unknown;\n  schema: FlexibleValidator<OBJECT>;\n}): Promise<\n  | {\n      success: true;\n      value: OBJECT;\n      rawValue: unknown;\n    }\n  | {\n      success: false;\n      error: TypeValidationError;\n      rawValue: unknown;\n    }\n> {\n  const validator = asValidator(schema);\n\n  try {\n    if (validator.validate == null) {\n      return { success: true, value: value as OBJECT, rawValue: value };\n    }\n\n    const result = await validator.validate(value);\n\n    if (result.success) {\n      return { success: true, value: result.value, rawValue: value };\n    }\n\n    return {\n      success: false,\n      error: TypeValidationError.wrap({ value, cause: result.error }),\n      rawValue: value,\n    };\n  } catch (error) {\n    return {\n      success: false,\n      error: TypeValidationError.wrap({ value, cause: error }),\n      rawValue: value,\n    };\n  }\n}\n","import { TypeValidationError } from '@ai-sdk/provider';\nimport { StandardSchemaV1 } from '@standard-schema/spec';\n\n/**\n * Used to mark validator functions so we can support both Zod and custom schemas.\n */\nexport const validatorSymbol = Symbol.for('vercel.ai.validator');\n\nexport type ValidationResult<OBJECT> =\n  | { success: true; value: OBJECT }\n  | { success: false; error: Error };\n\nexport type Validator<OBJECT = unknown> = {\n  /**\n   * Used to mark validator functions so we can support both Zod and custom schemas.\n   */\n  [validatorSymbol]: true;\n\n  /**\n   * Optional. Validates that the structure of a value matches this schema,\n   * and returns a typed version of the value if it does.\n   */\n  readonly validate?: (\n    value: unknown,\n  ) => ValidationResult<OBJECT> | PromiseLike<ValidationResult<OBJECT>>;\n};\n\n/**\n * Create a validator.\n *\n * @param validate A validation function for the schema.\n */\nexport function validator<OBJECT>(\n  validate?:\n    | undefined\n    | ((\n        value: unknown,\n      ) => ValidationResult<OBJECT> | PromiseLike<ValidationResult<OBJECT>>),\n): Validator<OBJECT> {\n  return { [validatorSymbol]: true, validate };\n}\n\nexport function isValidator(value: unknown): value is Validator {\n  return (\n    typeof value === 'object' &&\n    value !== null &&\n    validatorSymbol in value &&\n    value[validatorSymbol] === true &&\n    'validate' in value\n  );\n}\n\n/**\n * Creates a validator with deferred creation.\n * This is important to reduce the startup time of the library\n * and to avoid initializing unused validators.\n *\n * @param createValidator A function that creates a validator.\n * @returns A function that returns a validator.\n */\nexport function lazyValidator<OBJECT>(\n  createValidator: () => Validator<OBJECT>,\n): LazyValidator<OBJECT> {\n  // cache the validator to avoid initializing it multiple times\n  let validator: Validator<OBJECT> | undefined;\n  return () => {\n    if (validator == null) {\n      validator = createValidator();\n    }\n    return validator;\n  };\n}\n\nexport type LazyValidator<OBJECT> = () => Validator<OBJECT>;\n\nexport type FlexibleValidator<OBJECT> =\n  | Validator<OBJECT>\n  | LazyValidator<OBJECT>\n  | StandardSchemaV1<unknown, OBJECT>;\n\nexport type InferValidator<SCHEMA> =\n  SCHEMA extends StandardSchemaV1<unknown, infer T>\n    ? T\n    : SCHEMA extends LazyValidator<infer T>\n      ? T\n      : SCHEMA extends Validator<infer T>\n        ? T\n        : never;\n\nexport function asValidator<OBJECT>(\n  value: FlexibleValidator<OBJECT>,\n): Validator<OBJECT> {\n  return isValidator(value)\n    ? value\n    : typeof value === 'function'\n      ? value()\n      : standardSchemaValidator(value);\n}\n\nexport function standardSchemaValidator<OBJECT>(\n  standardSchema: StandardSchemaV1<unknown, OBJECT>,\n): Validator<OBJECT> {\n  return validator(async value => {\n    const result = await standardSchema['~standard'].validate(value);\n\n    return result.issues == null\n      ? { success: true, value: result.value }\n      : {\n          success: false,\n          error: new TypeValidationError({\n            value,\n            cause: result.issues,\n          }),\n        };\n  });\n}\n","import {\n  EventSourceMessage,\n  EventSourceParserStream,\n} from 'eventsource-parser/stream';\nimport { ParseResult, safeParseJSON } from './parse-json';\nimport { FlexibleValidator } from './validator';\n\n/**\n * Parses a JSON event stream into a stream of parsed JSON objects.\n */\nexport function parseJsonEventStream<T>({\n  stream,\n  schema,\n}: {\n  stream: ReadableStream<Uint8Array>;\n  schema: FlexibleValidator<T>;\n}): ReadableStream<ParseResult<T>> {\n  return stream\n    .pipeThrough(new TextDecoderStream())\n    .pipeThrough(new EventSourceParserStream())\n    .pipeThrough(\n      new TransformStream<EventSourceMessage, ParseResult<T>>({\n        async transform({ data }, controller) {\n          // ignore the 'DONE' event that e.g. OpenAI sends:\n          if (data === '[DONE]') {\n            return;\n          }\n\n          controller.enqueue(await safeParseJSON({ text: data, schema }));\n        },\n      }),\n    );\n}\n","import { InvalidArgumentError } from '@ai-sdk/provider';\nimport { safeValidateTypes } from './validate-types';\nimport { FlexibleValidator } from './validator';\n\nexport async function parseProviderOptions<OPTIONS>({\n  provider,\n  providerOptions,\n  schema,\n}: {\n  provider: string;\n  providerOptions: Record<string, unknown> | undefined;\n  schema: FlexibleValidator<OPTIONS>;\n}): Promise<OPTIONS | undefined> {\n  if (providerOptions?.[provider] == null) {\n    return undefined;\n  }\n\n  const parsedProviderOptions = await safeValidateTypes<OPTIONS | undefined>({\n    value: providerOptions[provider],\n    schema,\n  });\n\n  if (!parsedProviderOptions.success) {\n    throw new InvalidArgumentError({\n      argument: 'providerOptions',\n      message: `invalid ${provider} provider options`,\n      cause: parsedProviderOptions.error,\n    });\n  }\n\n  return parsedProviderOptions.value;\n}\n","import { APICallError } from '@ai-sdk/provider';\nimport { extractResponseHeaders } from './extract-response-headers';\nimport { FetchFunction } from './fetch-function';\nimport { handleFetchError } from './handle-fetch-error';\nimport { isAbortError } from './is-abort-error';\nimport { ResponseHandler } from './response-handler';\nimport { getRuntimeEnvironmentUserAgent } from './get-runtime-environment-user-agent';\nimport { withUserAgentSuffix } from './with-user-agent-suffix';\nimport { VERSION } from './version';\n\n// use function to allow for mocking in tests:\nconst getOriginalFetch = () => globalThis.fetch;\n\nexport const postJsonToApi = async <T>({\n  url,\n  headers,\n  body,\n  failedResponseHandler,\n  successfulResponseHandler,\n  abortSignal,\n  fetch,\n}: {\n  url: string;\n  headers?: Record<string, string | undefined>;\n  body: unknown;\n  failedResponseHandler: ResponseHandler<APICallError>;\n  successfulResponseHandler: ResponseHandler<T>;\n  abortSignal?: AbortSignal;\n  fetch?: FetchFunction;\n}) =>\n  postToApi({\n    url,\n    headers: {\n      'Content-Type': 'application/json',\n      ...headers,\n    },\n    body: {\n      content: JSON.stringify(body),\n      values: body,\n    },\n    failedResponseHandler,\n    successfulResponseHandler,\n    abortSignal,\n    fetch,\n  });\n\nexport const postFormDataToApi = async <T>({\n  url,\n  headers,\n  formData,\n  failedResponseHandler,\n  successfulResponseHandler,\n  abortSignal,\n  fetch,\n}: {\n  url: string;\n  headers?: Record<string, string | undefined>;\n  formData: FormData;\n  failedResponseHandler: ResponseHandler<APICallError>;\n  successfulResponseHandler: ResponseHandler<T>;\n  abortSignal?: AbortSignal;\n  fetch?: FetchFunction;\n}) =>\n  postToApi({\n    url,\n    headers,\n    body: {\n      content: formData,\n      values: Object.fromEntries((formData as any).entries()),\n    },\n    failedResponseHandler,\n    successfulResponseHandler,\n    abortSignal,\n    fetch,\n  });\n\nexport const postToApi = async <T>({\n  url,\n  headers = {},\n  body,\n  successfulResponseHandler,\n  failedResponseHandler,\n  abortSignal,\n  fetch = getOriginalFetch(),\n}: {\n  url: string;\n  headers?: Record<string, string | undefined>;\n  body: {\n    content: string | FormData | Uint8Array;\n    values: unknown;\n  };\n  failedResponseHandler: ResponseHandler<Error>;\n  successfulResponseHandler: ResponseHandler<T>;\n  abortSignal?: AbortSignal;\n  fetch?: FetchFunction;\n}) => {\n  try {\n    const response = await fetch(url, {\n      method: 'POST',\n      headers: withUserAgentSuffix(\n        headers,\n        `ai-sdk/provider-utils/${VERSION}`,\n        getRuntimeEnvironmentUserAgent(),\n      ),\n      body: body.content,\n      signal: abortSignal,\n    });\n\n    const responseHeaders = extractResponseHeaders(response);\n\n    if (!response.ok) {\n      let errorInformation: {\n        value: Error;\n        responseHeaders?: Record<string, string> | undefined;\n      };\n\n      try {\n        errorInformation = await failedResponseHandler({\n          response,\n          url,\n          requestBodyValues: body.values,\n        });\n      } catch (error) {\n        if (isAbortError(error) || APICallError.isInstance(error)) {\n          throw error;\n        }\n\n        throw new APICallError({\n          message: 'Failed to process error response',\n          cause: error,\n          statusCode: response.status,\n          url,\n          responseHeaders,\n          requestBodyValues: body.values,\n        });\n      }\n\n      throw errorInformation.value;\n    }\n\n    try {\n      return await successfulResponseHandler({\n        response,\n        url,\n        requestBodyValues: body.values,\n      });\n    } catch (error) {\n      if (error instanceof Error) {\n        if (isAbortError(error) || APICallError.isInstance(error)) {\n          throw error;\n        }\n      }\n\n      throw new APICallError({\n        message: 'Failed to process successful response',\n        cause: error,\n        statusCode: response.status,\n        url,\n        responseHeaders,\n        requestBodyValues: body.values,\n      });\n    }\n  } catch (error) {\n    throw handleFetchError({ error, url, requestBodyValues: body.values });\n  }\n};\n","import { JSONValue, LanguageModelV2ToolResultPart } from '@ai-sdk/provider';\nimport { FlexibleSchema } from '../schema';\nimport { ModelMessage } from './model-message';\nimport { ProviderOptions } from './provider-options';\n\n/**\n * Additional options that are sent into each tool call.\n */\n// TODO AI SDK 6: rename to ToolExecutionOptions\nexport interface ToolCallOptions {\n  /**\n   * The ID of the tool call. You can use it e.g. when sending tool-call related information with stream data.\n   */\n  toolCallId: string;\n\n  /**\n   * Messages that were sent to the language model to initiate the response that contained the tool call.\n   * The messages **do not** include the system prompt nor the assistant response that contained the tool call.\n   */\n  messages: ModelMessage[];\n\n  /**\n   * An optional abort signal that indicates that the overall operation should be aborted.\n   */\n  abortSignal?: AbortSignal;\n\n  /**\n   * Additional context.\n   *\n   * Experimental (can break in patch releases).\n   */\n  experimental_context?: unknown;\n}\n\nexport type ToolExecuteFunction<INPUT, OUTPUT> = (\n  input: INPUT,\n  options: ToolCallOptions,\n) => AsyncIterable<OUTPUT> | PromiseLike<OUTPUT> | OUTPUT;\n\n// 0 extends 1 & N checks for any\n// [N] extends [never] checks for never\ntype NeverOptional<N, T> = 0 extends 1 & N\n  ? Partial<T>\n  : [N] extends [never]\n    ? Partial<Record<keyof T, undefined>>\n    : T;\n\ntype ToolOutputProperties<INPUT, OUTPUT> = NeverOptional<\n  OUTPUT,\n  | {\n      /**\nAn async function that is called with the arguments from the tool call and produces a result.\nIf not provided, the tool will not be executed automatically.\n\n@args is the input of the tool call.\n@options.abortSignal is a signal that can be used to abort the tool call.\n    */\n      execute: ToolExecuteFunction<INPUT, OUTPUT>;\n\n      outputSchema?: FlexibleSchema<OUTPUT>;\n    }\n  | {\n      outputSchema: FlexibleSchema<OUTPUT>;\n\n      execute?: never;\n    }\n>;\n\n/**\nA tool contains the description and the schema of the input that the tool expects.\nThis enables the language model to generate the input.\n\nThe tool can also contain an optional execute function for the actual execution function of the tool.\n */\nexport type Tool<\n  INPUT extends JSONValue | unknown | never = any,\n  OUTPUT extends JSONValue | unknown | never = any,\n> = {\n  /**\nAn optional description of what the tool does.\nWill be used by the language model to decide whether to use the tool.\nNot used for provider-defined tools.\n   */\n  description?: string;\n\n  /**\nAdditional provider-specific metadata. They are passed through\nto the provider from the AI SDK and enable provider-specific\nfunctionality that can be fully encapsulated in the provider.\n   */\n  providerOptions?: ProviderOptions;\n\n  /**\nThe schema of the input that the tool expects. The language model will use this to generate the input.\nIt is also used to validate the output of the language model.\nUse descriptions to make the input understandable for the language model.\n   */\n  inputSchema: FlexibleSchema<INPUT>;\n\n  /**\n   * Optional function that is called when the argument streaming starts.\n   * Only called when the tool is used in a streaming context.\n   */\n  onInputStart?: (options: ToolCallOptions) => void | PromiseLike<void>;\n\n  /**\n   * Optional function that is called when an argument streaming delta is available.\n   * Only called when the tool is used in a streaming context.\n   */\n  onInputDelta?: (\n    options: { inputTextDelta: string } & ToolCallOptions,\n  ) => void | PromiseLike<void>;\n\n  /**\n   * Optional function that is called when a tool call can be started,\n   * even if the execute function is not provided.\n   */\n  onInputAvailable?: (\n    options: {\n      input: [INPUT] extends [never] ? undefined : INPUT;\n    } & ToolCallOptions,\n  ) => void | PromiseLike<void>;\n} & ToolOutputProperties<INPUT, OUTPUT> & {\n    /**\nOptional conversion function that maps the tool result to an output that can be used by the language model.\n\nIf not provided, the tool result will be sent as a JSON object.\n  */\n    toModelOutput?: (\n      output: 0 extends 1 & OUTPUT\n        ? any\n        : [OUTPUT] extends [never]\n          ? any\n          : NoInfer<OUTPUT>,\n    ) => LanguageModelV2ToolResultPart['output'];\n  } & (\n    | {\n        /**\nTool with user-defined input and output schemas.\n     */\n        type?: undefined | 'function';\n      }\n    | {\n        /**\nTool that is defined at runtime (e.g. an MCP tool).\nThe types of input and output are not known at development time.\n       */\n        type: 'dynamic';\n      }\n    | {\n        /**\nTool with provider-defined input and output schemas.\n     */\n        type: 'provider-defined';\n\n        /**\nThe ID of the tool. Should follow the format `<provider-name>.<unique-tool-name>`.\n   */\n        id: `${string}.${string}`;\n\n        /**\nThe name of the tool that the user must use in the tool set.\n */\n        name: string;\n\n        /**\nThe arguments for configuring the tool. Must match the expected arguments defined by the provider for this tool.\n     */\n        args: Record<string, unknown>;\n      }\n  );\n\n/**\n * Infer the input type of a tool.\n */\nexport type InferToolInput<TOOL extends Tool> =\n  TOOL extends Tool<infer INPUT, any> ? INPUT : never;\n\n/**\n * Infer the output type of a tool.\n */\nexport type InferToolOutput<TOOL extends Tool> =\n  TOOL extends Tool<any, infer OUTPUT> ? OUTPUT : never;\n\n/**\nHelper function for inferring the execute args of a tool.\n */\n// Note: overload order is important for auto-completion\nexport function tool<INPUT, OUTPUT>(\n  tool: Tool<INPUT, OUTPUT>,\n): Tool<INPUT, OUTPUT>;\nexport function tool<INPUT>(tool: Tool<INPUT, never>): Tool<INPUT, never>;\nexport function tool<OUTPUT>(tool: Tool<never, OUTPUT>): Tool<never, OUTPUT>;\nexport function tool(tool: Tool<never, never>): Tool<never, never>;\nexport function tool(tool: any): any {\n  return tool;\n}\n\n/**\nHelper function for defining a dynamic tool.\n */\nexport function dynamicTool(tool: {\n  description?: string;\n  providerOptions?: ProviderOptions;\n  inputSchema: FlexibleSchema<unknown>;\n  execute: ToolExecuteFunction<unknown, unknown>;\n  toModelOutput?: (output: unknown) => LanguageModelV2ToolResultPart['output'];\n}): Tool<unknown, unknown> & {\n  type: 'dynamic';\n} {\n  return { ...tool, type: 'dynamic' };\n}\n","import { tool, Tool, ToolExecuteFunction } from './types/tool';\nimport { FlexibleSchema } from './schema';\n\nexport type ProviderDefinedToolFactory<INPUT, ARGS extends object> = <OUTPUT>(\n  options: ARGS & {\n    execute?: ToolExecuteFunction<INPUT, OUTPUT>;\n    toModelOutput?: Tool<INPUT, OUTPUT>['toModelOutput'];\n    onInputStart?: Tool<INPUT, OUTPUT>['onInputStart'];\n    onInputDelta?: Tool<INPUT, OUTPUT>['onInputDelta'];\n    onInputAvailable?: Tool<INPUT, OUTPUT>['onInputAvailable'];\n  },\n) => Tool<INPUT, OUTPUT>;\n\nexport function createProviderDefinedToolFactory<INPUT, ARGS extends object>({\n  id,\n  name,\n  inputSchema,\n}: {\n  id: `${string}.${string}`;\n  name: string;\n  inputSchema: FlexibleSchema<INPUT>;\n}): ProviderDefinedToolFactory<INPUT, ARGS> {\n  return <OUTPUT>({\n    execute,\n    outputSchema,\n    toModelOutput,\n    onInputStart,\n    onInputDelta,\n    onInputAvailable,\n    ...args\n  }: ARGS & {\n    execute?: ToolExecuteFunction<INPUT, OUTPUT>;\n    outputSchema?: FlexibleSchema<OUTPUT>;\n    toModelOutput?: Tool<INPUT, OUTPUT>['toModelOutput'];\n    onInputStart?: Tool<INPUT, OUTPUT>['onInputStart'];\n    onInputDelta?: Tool<INPUT, OUTPUT>['onInputDelta'];\n    onInputAvailable?: Tool<INPUT, OUTPUT>['onInputAvailable'];\n  }): Tool<INPUT, OUTPUT> =>\n    tool({\n      type: 'provider-defined',\n      id,\n      name,\n      args,\n      inputSchema,\n      outputSchema,\n      execute,\n      toModelOutput,\n      onInputStart,\n      onInputDelta,\n      onInputAvailable,\n    });\n}\n\nexport type ProviderDefinedToolFactoryWithOutputSchema<\n  INPUT,\n  OUTPUT,\n  ARGS extends object,\n> = (\n  options: ARGS & {\n    execute?: ToolExecuteFunction<INPUT, OUTPUT>;\n    toModelOutput?: Tool<INPUT, OUTPUT>['toModelOutput'];\n    onInputStart?: Tool<INPUT, OUTPUT>['onInputStart'];\n    onInputDelta?: Tool<INPUT, OUTPUT>['onInputDelta'];\n    onInputAvailable?: Tool<INPUT, OUTPUT>['onInputAvailable'];\n  },\n) => Tool<INPUT, OUTPUT>;\n\nexport function createProviderDefinedToolFactoryWithOutputSchema<\n  INPUT,\n  OUTPUT,\n  ARGS extends object,\n>({\n  id,\n  name,\n  inputSchema,\n  outputSchema,\n}: {\n  id: `${string}.${string}`;\n  name: string;\n  inputSchema: FlexibleSchema<INPUT>;\n  outputSchema: FlexibleSchema<OUTPUT>;\n}): ProviderDefinedToolFactoryWithOutputSchema<INPUT, OUTPUT, ARGS> {\n  return ({\n    execute,\n    toModelOutput,\n    onInputStart,\n    onInputDelta,\n    onInputAvailable,\n    ...args\n  }: ARGS & {\n    execute?: ToolExecuteFunction<INPUT, OUTPUT>;\n    toModelOutput?: Tool<INPUT, OUTPUT>['toModelOutput'];\n    onInputStart?: Tool<INPUT, OUTPUT>['onInputStart'];\n    onInputDelta?: Tool<INPUT, OUTPUT>['onInputDelta'];\n    onInputAvailable?: Tool<INPUT, OUTPUT>['onInputAvailable'];\n  }): Tool<INPUT, OUTPUT> =>\n    tool({\n      type: 'provider-defined',\n      id,\n      name,\n      args,\n      inputSchema,\n      outputSchema,\n      execute,\n      toModelOutput,\n      onInputStart,\n      onInputDelta,\n      onInputAvailable,\n    });\n}\n","export type Resolvable<T> =\n  | T // Raw value\n  | Promise<T> // Promise of value\n  | (() => T) // Function returning value\n  | (() => Promise<T>); // Function returning promise of value\n\n/**\n * Resolves a value that could be a raw value, a Promise, a function returning a value,\n * or a function returning a Promise.\n */\nexport async function resolve<T>(value: Resolvable<T>): Promise<T> {\n  // If it's a function, call it to get the value/promise\n  if (typeof value === 'function') {\n    value = (value as Function)();\n  }\n\n  // Otherwise just resolve whatever we got (value or promise)\n  return Promise.resolve(value as T);\n}\n","import { APICallError, EmptyResponseBodyError } from '@ai-sdk/provider';\nimport { ZodType } from 'zod/v4';\nimport { extractResponseHeaders } from './extract-response-headers';\nimport { parseJSON, ParseResult, safeParseJSON } from './parse-json';\nimport { parseJsonEventStream } from './parse-json-event-stream';\nimport { FlexibleValidator } from './validator';\n\nexport type ResponseHandler<RETURN_TYPE> = (options: {\n  url: string;\n  requestBodyValues: unknown;\n  response: Response;\n}) => PromiseLike<{\n  value: RETURN_TYPE;\n  rawValue?: unknown;\n  responseHeaders?: Record<string, string>;\n}>;\n\nexport const createJsonErrorResponseHandler =\n  <T>({\n    errorSchema,\n    errorToMessage,\n    isRetryable,\n  }: {\n    errorSchema: FlexibleValidator<T>;\n    errorToMessage: (error: T) => string;\n    isRetryable?: (response: Response, error?: T) => boolean;\n  }): ResponseHandler<APICallError> =>\n  async ({ response, url, requestBodyValues }) => {\n    const responseBody = await response.text();\n    const responseHeaders = extractResponseHeaders(response);\n\n    // Some providers return an empty response body for some errors:\n    if (responseBody.trim() === '') {\n      return {\n        responseHeaders,\n        value: new APICallError({\n          message: response.statusText,\n          url,\n          requestBodyValues,\n          statusCode: response.status,\n          responseHeaders,\n          responseBody,\n          isRetryable: isRetryable?.(response),\n        }),\n      };\n    }\n\n    // resilient parsing in case the response is not JSON or does not match the schema:\n    try {\n      const parsedError = await parseJSON({\n        text: responseBody,\n        schema: errorSchema,\n      });\n\n      return {\n        responseHeaders,\n        value: new APICallError({\n          message: errorToMessage(parsedError),\n          url,\n          requestBodyValues,\n          statusCode: response.status,\n          responseHeaders,\n          responseBody,\n          data: parsedError,\n          isRetryable: isRetryable?.(response, parsedError),\n        }),\n      };\n    } catch (parseError) {\n      return {\n        responseHeaders,\n        value: new APICallError({\n          message: response.statusText,\n          url,\n          requestBodyValues,\n          statusCode: response.status,\n          responseHeaders,\n          responseBody,\n          isRetryable: isRetryable?.(response),\n        }),\n      };\n    }\n  };\n\nexport const createEventSourceResponseHandler =\n  <T>(\n    chunkSchema: FlexibleValidator<T>,\n  ): ResponseHandler<ReadableStream<ParseResult<T>>> =>\n  async ({ response }: { response: Response }) => {\n    const responseHeaders = extractResponseHeaders(response);\n\n    if (response.body == null) {\n      throw new EmptyResponseBodyError({});\n    }\n\n    return {\n      responseHeaders,\n      value: parseJsonEventStream({\n        stream: response.body,\n        schema: chunkSchema,\n      }),\n    };\n  };\n\nexport const createJsonStreamResponseHandler =\n  <T>(\n    chunkSchema: ZodType<T>,\n  ): ResponseHandler<ReadableStream<ParseResult<T>>> =>\n  async ({ response }: { response: Response }) => {\n    const responseHeaders = extractResponseHeaders(response);\n\n    if (response.body == null) {\n      throw new EmptyResponseBodyError({});\n    }\n\n    let buffer = '';\n\n    return {\n      responseHeaders,\n      value: response.body.pipeThrough(new TextDecoderStream()).pipeThrough(\n        new TransformStream<string, ParseResult<T>>({\n          async transform(chunkText, controller) {\n            if (chunkText.endsWith('\\n')) {\n              controller.enqueue(\n                await safeParseJSON({\n                  text: buffer + chunkText,\n                  schema: chunkSchema,\n                }),\n              );\n              buffer = '';\n            } else {\n              buffer += chunkText;\n            }\n          },\n        }),\n      ),\n    };\n  };\n\nexport const createJsonResponseHandler =\n  <T>(responseSchema: FlexibleValidator<T>): ResponseHandler<T> =>\n  async ({ response, url, requestBodyValues }) => {\n    const responseBody = await response.text();\n\n    const parsedResult = await safeParseJSON({\n      text: responseBody,\n      schema: responseSchema,\n    });\n\n    const responseHeaders = extractResponseHeaders(response);\n\n    if (!parsedResult.success) {\n      throw new APICallError({\n        message: 'Invalid JSON response',\n        cause: parsedResult.error,\n        statusCode: response.status,\n        responseHeaders,\n        responseBody,\n        url,\n        requestBodyValues,\n      });\n    }\n\n    return {\n      responseHeaders,\n      value: parsedResult.value,\n      rawValue: parsedResult.rawValue,\n    };\n  };\n\nexport const createBinaryResponseHandler =\n  (): ResponseHandler<Uint8Array> =>\n  async ({ response, url, requestBodyValues }) => {\n    const responseHeaders = extractResponseHeaders(response);\n\n    if (!response.body) {\n      throw new APICallError({\n        message: 'Response body is empty',\n        url,\n        requestBodyValues,\n        statusCode: response.status,\n        responseHeaders,\n        responseBody: undefined,\n      });\n    }\n\n    try {\n      const buffer = await response.arrayBuffer();\n      return {\n        responseHeaders,\n        value: new Uint8Array(buffer),\n      };\n    } catch (error) {\n      throw new APICallError({\n        message: 'Failed to read response as array buffer',\n        url,\n        requestBodyValues,\n        statusCode: response.status,\n        responseHeaders,\n        responseBody: undefined,\n        cause: error,\n      });\n    }\n  };\n\nexport const createStatusCodeErrorResponseHandler =\n  (): ResponseHandler<APICallError> =>\n  async ({ response, url, requestBodyValues }) => {\n    const responseHeaders = extractResponseHeaders(response);\n    const responseBody = await response.text();\n\n    return {\n      responseHeaders,\n      value: new APICallError({\n        message: response.statusText,\n        url,\n        requestBodyValues: requestBodyValues as Record<string, unknown>,\n        statusCode: response.status,\n        responseHeaders,\n        responseBody,\n      }),\n    };\n  };\n","import { JSONSchema7 } from '@ai-sdk/provider';\nimport * as z3 from 'zod/v3';\nimport * as z4 from 'zod/v4';\nimport zodToJsonSchema from './zod-to-json-schema';\nimport { jsonSchema, Schema } from './schema';\n\nexport function zod3Schema<OBJECT>(\n  zodSchema: z3.Schema<OBJECT, z3.ZodTypeDef, any>,\n  options?: {\n    /**\n     * Enables support for references in the schema.\n     * This is required for recursive schemas, e.g. with `z.lazy`.\n     * However, not all language models and providers support such references.\n     * Defaults to `false`.\n     */\n    useReferences?: boolean;\n  },\n): Schema<OBJECT> {\n  // default to no references (to support openapi conversion for google)\n  const useReferences = options?.useReferences ?? false;\n\n  return jsonSchema(\n    // defer json schema creation to avoid unnecessary computation when only validation is needed\n    () =>\n      zodToJsonSchema(zodSchema, {\n        $refStrategy: useReferences ? 'root' : 'none',\n      }) as JSONSchema7,\n    {\n      validate: async value => {\n        const result = await zodSchema.safeParseAsync(value);\n        return result.success\n          ? { success: true, value: result.data }\n          : { success: false, error: result.error };\n      },\n    },\n  );\n}\n\nexport function zod4Schema<OBJECT>(\n  zodSchema: z4.core.$ZodType<OBJECT, any>,\n  options?: {\n    /**\n     * Enables support for references in the schema.\n     * This is required for recursive schemas, e.g. with `z.lazy`.\n     * However, not all language models and providers support such references.\n     * Defaults to `false`.\n     */\n    useReferences?: boolean;\n  },\n): Schema<OBJECT> {\n  // default to no references (to support openapi conversion for google)\n  const useReferences = options?.useReferences ?? false;\n\n  return jsonSchema(\n    // defer json schema creation to avoid unnecessary computation when only validation is needed\n    () =>\n      z4.toJSONSchema(zodSchema, {\n        target: 'draft-7',\n        io: 'output',\n        reused: useReferences ? 'ref' : 'inline',\n      }) as JSONSchema7,\n    {\n      validate: async value => {\n        const result = await z4.safeParseAsync(zodSchema, value);\n        return result.success\n          ? { success: true, value: result.data }\n          : { success: false, error: result.error };\n      },\n    },\n  );\n}\n\nexport function isZod4Schema(\n  zodSchema: z4.core.$ZodType<any, any> | z3.Schema<any, z3.ZodTypeDef, any>,\n): zodSchema is z4.core.$ZodType<any, any> {\n  // https://zod.dev/library-authors?id=how-to-support-zod-3-and-zod-4-simultaneously\n  return '_zod' in zodSchema;\n}\n\nexport function zodSchema<OBJECT>(\n  zodSchema:\n    | z4.core.$ZodType<OBJECT, any>\n    | z3.Schema<OBJECT, z3.ZodTypeDef, any>,\n  options?: {\n    /**\n     * Enables support for references in the schema.\n     * This is required for recursive schemas, e.g. with `z.lazy`.\n     * However, not all language models and providers support such references.\n     * Defaults to `false`.\n     */\n    useReferences?: boolean;\n  },\n): Schema<OBJECT> {\n  if (isZod4Schema(zodSchema)) {\n    return zod4Schema(zodSchema, options);\n  } else {\n    return zod3Schema(zodSchema, options);\n  }\n}\n","export const getRelativePath = (pathA: string[], pathB: string[]) => {\n  let i = 0;\n  for (; i < pathA.length && i < pathB.length; i++) {\n    if (pathA[i] !== pathB[i]) break;\n  }\n  return [(pathA.length - i).toString(), ...pathB.slice(i)].join('/');\n};\n","import { ZodSchema, ZodTypeDef } from 'zod/v3';\nimport { Refs, Seen } from './refs';\nimport { JsonSchema7Type } from './parse-types';\n\nexport type DateStrategy =\n  | 'format:date-time'\n  | 'format:date'\n  | 'string'\n  | 'integer';\n\nexport const ignoreOverride = Symbol(\n  'Let zodToJsonSchema decide on which parser to use',\n);\n\nexport type OverrideCallback = (\n  def: ZodTypeDef,\n  refs: Refs,\n  seen: Seen | undefined,\n  forceResolution?: boolean,\n) => JsonSchema7Type | undefined | typeof ignoreOverride;\n\nexport type PostProcessCallback = (\n  jsonSchema: JsonSchema7Type | undefined,\n  def: ZodTypeDef,\n  refs: Refs,\n) => JsonSchema7Type | undefined;\n\nexport const jsonDescription: PostProcessCallback = (jsonSchema, def) => {\n  if (def.description) {\n    try {\n      return {\n        ...jsonSchema,\n        ...JSON.parse(def.description),\n      };\n    } catch {}\n  }\n\n  return jsonSchema;\n};\n\nexport type Options = {\n  name: string | undefined;\n  $refStrategy: 'root' | 'relative' | 'none' | 'seen';\n  basePath: string[];\n  effectStrategy: 'input' | 'any';\n  pipeStrategy: 'input' | 'output' | 'all';\n  dateStrategy: DateStrategy | DateStrategy[];\n  mapStrategy: 'entries' | 'record';\n  removeAdditionalStrategy: 'passthrough' | 'strict';\n  allowedAdditionalProperties: true | undefined;\n  rejectedAdditionalProperties: false | undefined;\n  strictUnions: boolean;\n  definitionPath: string;\n  definitions: Record<string, ZodSchema>;\n  errorMessages: boolean;\n  patternStrategy: 'escape' | 'preserve';\n  applyRegexFlags: boolean;\n  emailStrategy: 'format:email' | 'format:idn-email' | 'pattern:zod';\n  base64Strategy: 'format:binary' | 'contentEncoding:base64' | 'pattern:zod';\n  nameStrategy: 'ref' | 'title';\n  override?: OverrideCallback;\n  postProcess?: PostProcessCallback;\n};\n\nexport const defaultOptions: Options = {\n  name: undefined,\n  $refStrategy: 'root',\n  basePath: ['#'],\n  effectStrategy: 'input',\n  pipeStrategy: 'all',\n  dateStrategy: 'format:date-time',\n  mapStrategy: 'entries',\n  removeAdditionalStrategy: 'passthrough',\n  allowedAdditionalProperties: true,\n  rejectedAdditionalProperties: false,\n  definitionPath: 'definitions',\n  strictUnions: false,\n  definitions: {},\n  errorMessages: false,\n  patternStrategy: 'escape',\n  applyRegexFlags: false,\n  emailStrategy: 'format:email',\n  base64Strategy: 'contentEncoding:base64',\n  nameStrategy: 'ref',\n};\n\nexport const getDefaultOptions = (\n  options: Partial<Options> | string | undefined,\n) =>\n  (typeof options === 'string'\n    ? {\n        ...defaultOptions,\n        name: options,\n      }\n    : {\n        ...defaultOptions,\n        ...options,\n      }) as Options;\n","import { ZodFirstPartyTypeKind } from 'zod/v3';\nimport { parseAnyDef } from './parsers/any';\nimport { parseArrayDef } from './parsers/array';\nimport { parseBigintDef } from './parsers/bigint';\nimport { parseBooleanDef } from './parsers/boolean';\nimport { parseBrandedDef } from './parsers/branded';\nimport { parseCatchDef } from './parsers/catch';\nimport { parseDateDef } from './parsers/date';\nimport { parseDefaultDef } from './parsers/default';\nimport { parseEffectsDef } from './parsers/effects';\nimport { parseEnumDef } from './parsers/enum';\nimport { parseIntersectionDef } from './parsers/intersection';\nimport { parseLiteralDef } from './parsers/literal';\nimport { parseMapDef } from './parsers/map';\nimport { parseNativeEnumDef } from './parsers/native-enum';\nimport { parseNeverDef } from './parsers/never';\nimport { parseNullDef } from './parsers/null';\nimport { parseNullableDef } from './parsers/nullable';\nimport { parseNumberDef } from './parsers/number';\nimport { parseObjectDef } from './parsers/object';\nimport { parseOptionalDef } from './parsers/optional';\nimport { parsePipelineDef } from './parsers/pipeline';\nimport { parsePromiseDef } from './parsers/promise';\nimport { parseRecordDef } from './parsers/record';\nimport { parseSetDef } from './parsers/set';\nimport { parseStringDef } from './parsers/string';\nimport { parseTupleDef } from './parsers/tuple';\nimport { parseUndefinedDef } from './parsers/undefined';\nimport { parseUnionDef } from './parsers/union';\nimport { parseUnknownDef } from './parsers/unknown';\nimport { Refs } from './refs';\nimport { parseReadonlyDef } from './parsers/readonly';\nimport { JsonSchema7Type } from './parse-types';\n\nexport type InnerDefGetter = () => any;\n\nexport const selectParser = (\n  def: any,\n  typeName: ZodFirstPartyTypeKind,\n  refs: Refs,\n): JsonSchema7Type | undefined | InnerDefGetter => {\n  switch (typeName) {\n    case ZodFirstPartyTypeKind.ZodString:\n      return parseStringDef(def, refs);\n    case ZodFirstPartyTypeKind.ZodNumber:\n      return parseNumberDef(def);\n    case ZodFirstPartyTypeKind.ZodObject:\n      return parseObjectDef(def, refs);\n    case ZodFirstPartyTypeKind.ZodBigInt:\n      return parseBigintDef(def);\n    case ZodFirstPartyTypeKind.ZodBoolean:\n      return parseBooleanDef();\n    case ZodFirstPartyTypeKind.ZodDate:\n      return parseDateDef(def, refs);\n    case ZodFirstPartyTypeKind.ZodUndefined:\n      return parseUndefinedDef();\n    case ZodFirstPartyTypeKind.ZodNull:\n      return parseNullDef();\n    case ZodFirstPartyTypeKind.ZodArray:\n      return parseArrayDef(def, refs);\n    case ZodFirstPartyTypeKind.ZodUnion:\n    case ZodFirstPartyTypeKind.ZodDiscriminatedUnion:\n      return parseUnionDef(def, refs);\n    case ZodFirstPartyTypeKind.ZodIntersection:\n      return parseIntersectionDef(def, refs);\n    case ZodFirstPartyTypeKind.ZodTuple:\n      return parseTupleDef(def, refs);\n    case ZodFirstPartyTypeKind.ZodRecord:\n      return parseRecordDef(def, refs);\n    case ZodFirstPartyTypeKind.ZodLiteral:\n      return parseLiteralDef(def);\n    case ZodFirstPartyTypeKind.ZodEnum:\n      return parseEnumDef(def);\n    case ZodFirstPartyTypeKind.ZodNativeEnum:\n      return parseNativeEnumDef(def);\n    case ZodFirstPartyTypeKind.ZodNullable:\n      return parseNullableDef(def, refs);\n    case ZodFirstPartyTypeKind.ZodOptional:\n      return parseOptionalDef(def, refs);\n    case ZodFirstPartyTypeKind.ZodMap:\n      return parseMapDef(def, refs);\n    case ZodFirstPartyTypeKind.ZodSet:\n      return parseSetDef(def, refs);\n    case ZodFirstPartyTypeKind.ZodLazy:\n      return () => (def as any).getter()._def;\n    case ZodFirstPartyTypeKind.ZodPromise:\n      return parsePromiseDef(def, refs);\n    case ZodFirstPartyTypeKind.ZodNaN:\n    case ZodFirstPartyTypeKind.ZodNever:\n      return parseNeverDef();\n    case ZodFirstPartyTypeKind.ZodEffects:\n      return parseEffectsDef(def, refs);\n    case ZodFirstPartyTypeKind.ZodAny:\n      return parseAnyDef();\n    case ZodFirstPartyTypeKind.ZodUnknown:\n      return parseUnknownDef();\n    case ZodFirstPartyTypeKind.ZodDefault:\n      return parseDefaultDef(def, refs);\n    case ZodFirstPartyTypeKind.ZodBranded:\n      return parseBrandedDef(def, refs);\n    case ZodFirstPartyTypeKind.ZodReadonly:\n      return parseReadonlyDef(def, refs);\n    case ZodFirstPartyTypeKind.ZodCatch:\n      return parseCatchDef(def, refs);\n    case ZodFirstPartyTypeKind.ZodPipeline:\n      return parsePipelineDef(def, refs);\n    case ZodFirstPartyTypeKind.ZodFunction:\n    case ZodFirstPartyTypeKind.ZodVoid:\n    case ZodFirstPartyTypeKind.ZodSymbol:\n      return undefined;\n    default:\n      /* c8 ignore next */\n      return ((_: never) => undefined)(typeName);\n  }\n};\n","export type JsonSchema7AnyType = { $ref?: string };\n\nexport function parseAnyDef(): JsonSchema7AnyType {\n  return {};\n}\n","import { ZodArrayDef, ZodFirstPartyTypeKind } from 'zod/v3';\nimport { parseDef } from '../parse-def';\nimport { JsonSchema7Type } from '../parse-types';\nimport { Refs } from '../refs';\n\nexport type JsonSchema7ArrayType = {\n  type: 'array';\n  items?: JsonSchema7Type;\n  minItems?: number;\n  maxItems?: number;\n};\n\nexport function parseArrayDef(def: ZodArrayDef, refs: Refs) {\n  const res: JsonSchema7ArrayType = {\n    type: 'array',\n  };\n  if (\n    def.type?._def &&\n    def.type?._def?.typeName !== ZodFirstPartyTypeKind.ZodAny\n  ) {\n    res.items = parseDef(def.type._def, {\n      ...refs,\n      currentPath: [...refs.currentPath, 'items'],\n    });\n  }\n\n  if (def.minLength) {\n    res.minItems = def.minLength.value;\n  }\n  if (def.maxLength) {\n    res.maxItems = def.maxLength.value;\n  }\n  if (def.exactLength) {\n    res.minItems = def.exactLength.value;\n    res.maxItems = def.exactLength.value;\n  }\n  return res;\n}\n","import { ZodBigIntDef } from 'zod/v3';\n\nexport type JsonSchema7BigintType = {\n  type: 'integer';\n  format: 'int64';\n  minimum?: BigInt;\n  exclusiveMinimum?: BigInt;\n  maximum?: BigInt;\n  exclusiveMaximum?: BigInt;\n  multipleOf?: BigInt;\n};\n\nexport function parseBigintDef(def: ZodBigIntDef): JsonSchema7BigintType {\n  const res: JsonSchema7BigintType = {\n    type: 'integer',\n    format: 'int64',\n  };\n\n  if (!def.checks) return res;\n\n  for (const check of def.checks) {\n    switch (check.kind) {\n      case 'min':\n        if (check.inclusive) {\n          res.minimum = check.value;\n        } else {\n          res.exclusiveMinimum = check.value;\n        }\n        break;\n      case 'max':\n        if (check.inclusive) {\n          res.maximum = check.value;\n        } else {\n          res.exclusiveMaximum = check.value;\n        }\n\n        break;\n      case 'multipleOf':\n        res.multipleOf = check.value;\n        break;\n    }\n  }\n  return res;\n}\n","export type JsonSchema7BooleanType = {\n  type: 'boolean';\n};\n\nexport function parseBooleanDef(): JsonSchema7BooleanType {\n  return { type: 'boolean' };\n}\n","import { ZodBrandedDef } from 'zod/v3';\nimport { parseDef } from '../parse-def';\nimport { Refs } from '../refs';\n\nexport function parseBrandedDef(_def: ZodBrandedDef<any>, refs: Refs) {\n  return parseDef(_def.type._def, refs);\n}\n","import { ZodCatchDef } from 'zod/v3';\nimport { parseDef } from '../parse-def';\nimport { Refs } from '../refs';\n\nexport const parseCatchDef = (def: ZodCatchDef<any>, refs: Refs) => {\n  return parseDef(def.innerType._def, refs);\n};\n","import { ZodDateDef } from 'zod/v3';\nimport { Refs } from '../refs';\nimport { DateStrategy } from '../options';\n\nexport type JsonSchema7DateType =\n  | {\n      type: 'integer' | 'string';\n      format: 'unix-time' | 'date-time' | 'date';\n      minimum?: number;\n      maximum?: number;\n    }\n  | {\n      anyOf: JsonSchema7DateType[];\n    };\n\nexport function parseDateDef(\n  def: ZodDateDef,\n  refs: Refs,\n  overrideDateStrategy?: DateStrategy,\n): JsonSchema7DateType {\n  const strategy = overrideDateStrategy ?? refs.dateStrategy;\n\n  if (Array.isArray(strategy)) {\n    return {\n      anyOf: strategy.map((item, i) => parseDateDef(def, refs, item)),\n    };\n  }\n\n  switch (strategy) {\n    case 'string':\n    case 'format:date-time':\n      return {\n        type: 'string',\n        format: 'date-time',\n      };\n    case 'format:date':\n      return {\n        type: 'string',\n        format: 'date',\n      };\n    case 'integer':\n      return integerDateParser(def);\n  }\n}\n\nconst integerDateParser = (def: ZodDateDef) => {\n  const res: JsonSchema7DateType = {\n    type: 'integer',\n    format: 'unix-time',\n  };\n\n  for (const check of def.checks) {\n    switch (check.kind) {\n      case 'min':\n        res.minimum = check.value;\n        break;\n      case 'max':\n        res.maximum = check.value;\n        break;\n    }\n  }\n\n  return res;\n};\n","import { ZodDefaultDef } from 'zod/v3';\nimport { parseDef } from '../parse-def';\nimport { JsonSchema7Type } from '../parse-types';\nimport { Refs } from '../refs';\n\nexport function parseDefaultDef(\n  _def: ZodDefaultDef,\n  refs: Refs,\n): JsonSchema7Type & { default: any } {\n  return {\n    ...parseDef(_def.innerType._def, refs),\n    default: _def.defaultValue(),\n  };\n}\n","import { ZodEffectsDef } from 'zod/v3';\nimport { parseDef } from '../parse-def';\nimport { JsonSchema7Type } from '../parse-types';\nimport { Refs } from '../refs';\nimport { parseAnyDef } from './any';\n\nexport function parseEffectsDef(\n  _def: ZodEffectsDef,\n  refs: Refs,\n): JsonSchema7Type | undefined {\n  return refs.effectStrategy === 'input'\n    ? parseDef(_def.schema._def, refs)\n    : parseAnyDef();\n}\n","import { ZodEnumDef } from 'zod/v3';\n\nexport type JsonSchema7EnumType = {\n  type: 'string';\n  enum: string[];\n};\n\nexport function parseEnumDef(def: ZodEnumDef): JsonSchema7EnumType {\n  return {\n    type: 'string',\n    enum: Array.from(def.values),\n  };\n}\n","import { ZodIntersectionDef } from 'zod/v3';\nimport { parseDef } from '../parse-def';\nimport { JsonSchema7Type } from '../parse-types';\nimport { Refs } from '../refs';\nimport { JsonSchema7StringType } from './string';\n\nexport type JsonSchema7AllOfType = {\n  allOf: JsonSchema7Type[];\n  unevaluatedProperties?: boolean;\n};\n\nconst isJsonSchema7AllOfType = (\n  type: JsonSchema7Type | JsonSchema7StringType,\n): type is JsonSchema7AllOfType => {\n  if ('type' in type && type.type === 'string') return false;\n  return 'allOf' in type;\n};\n\nexport function parseIntersectionDef(\n  def: ZodIntersectionDef,\n  refs: Refs,\n): JsonSchema7AllOfType | JsonSchema7Type | undefined {\n  const allOf = [\n    parseDef(def.left._def, {\n      ...refs,\n      currentPath: [...refs.currentPath, 'allOf', '0'],\n    }),\n    parseDef(def.right._def, {\n      ...refs,\n      currentPath: [...refs.currentPath, 'allOf', '1'],\n    }),\n  ].filter((x): x is JsonSchema7Type => !!x);\n\n  const mergedAllOf: JsonSchema7Type[] = [];\n  // If either of the schemas is an allOf, merge them into a single allOf\n  allOf.forEach(schema => {\n    if (isJsonSchema7AllOfType(schema)) {\n      mergedAllOf.push(...schema.allOf);\n    } else {\n      let nestedSchema: JsonSchema7Type = schema;\n      if (\n        'additionalProperties' in schema &&\n        schema.additionalProperties === false\n      ) {\n        const { additionalProperties, ...rest } = schema;\n        nestedSchema = rest;\n      }\n      mergedAllOf.push(nestedSchema);\n    }\n  });\n  return mergedAllOf.length ? { allOf: mergedAllOf } : undefined;\n}\n","import { ZodLiteralDef } from 'zod/v3';\n\nexport type JsonSchema7LiteralType =\n  | {\n      type: 'string' | 'number' | 'integer' | 'boolean';\n      const: string | number | boolean;\n    }\n  | {\n      type: 'object' | 'array';\n    };\n\nexport function parseLiteralDef(def: ZodLiteralDef): JsonSchema7LiteralType {\n  const parsedType = typeof def.value;\n  if (\n    parsedType !== 'bigint' &&\n    parsedType !== 'number' &&\n    parsedType !== 'boolean' &&\n    parsedType !== 'string'\n  ) {\n    return {\n      type: Array.isArray(def.value) ? 'array' : 'object',\n    };\n  }\n\n  return {\n    type: parsedType === 'bigint' ? 'integer' : parsedType,\n    const: def.value,\n  };\n}\n","import {\n  ZodFirstPartyTypeKind,\n  ZodMapDef,\n  ZodRecordDef,\n  ZodTypeAny,\n} from 'zod/v3';\nimport { parseDef } from '../parse-def';\nimport { JsonSchema7Type } from '../parse-types';\nimport { Refs } from '../refs';\nimport { parseBrandedDef } from './branded';\nimport { JsonSchema7EnumType } from './enum';\nimport { JsonSchema7StringType, parseStringDef } from './string';\n\ntype JsonSchema7RecordPropertyNamesType =\n  | Omit<JsonSchema7StringType, 'type'>\n  | Omit<JsonSchema7EnumType, 'type'>;\n\nexport type JsonSchema7RecordType = {\n  type: 'object';\n  additionalProperties?: JsonSchema7Type | true;\n  propertyNames?: JsonSchema7RecordPropertyNamesType;\n};\n\nexport function parseRecordDef(\n  def: ZodRecordDef<ZodTypeAny, ZodTypeAny> | ZodMapDef,\n  refs: Refs,\n): JsonSchema7RecordType {\n  const schema: JsonSchema7RecordType = {\n    type: 'object',\n    additionalProperties:\n      parseDef(def.valueType._def, {\n        ...refs,\n        currentPath: [...refs.currentPath, 'additionalProperties'],\n      }) ?? refs.allowedAdditionalProperties,\n  };\n\n  if (\n    def.keyType?._def.typeName === ZodFirstPartyTypeKind.ZodString &&\n    def.keyType._def.checks?.length\n  ) {\n    const { type, ...keyType } = parseStringDef(def.keyType._def, refs);\n\n    return {\n      ...schema,\n      propertyNames: keyType,\n    };\n  } else if (def.keyType?._def.typeName === ZodFirstPartyTypeKind.ZodEnum) {\n    return {\n      ...schema,\n      propertyNames: {\n        enum: def.keyType._def.values,\n      },\n    };\n  } else if (\n    def.keyType?._def.typeName === ZodFirstPartyTypeKind.ZodBranded &&\n    def.keyType._def.type._def.typeName === ZodFirstPartyTypeKind.ZodString &&\n    def.keyType._def.type._def.checks?.length\n  ) {\n    const { type, ...keyType } = parseBrandedDef(\n      def.keyType._def,\n      refs,\n    ) as JsonSchema7StringType;\n\n    return {\n      ...schema,\n      propertyNames: keyType,\n    };\n  }\n\n  return schema;\n}\n","import { ZodStringDef } from 'zod/v3';\nimport { Refs } from '../refs';\n\nlet emojiRegex: RegExp | undefined = undefined;\n\n/**\n * Generated from the regular expressions found here as of 2024-05-22:\n * https://github.com/colinhacks/zod/blob/master/src/types.ts.\n *\n * Expressions with /i flag have been changed accordingly.\n */\nexport const zodPatterns = {\n  /**\n   * `c` was changed to `[cC]` to replicate /i flag\n   */\n  cuid: /^[cC][^\\s-]{8,}$/,\n  cuid2: /^[0-9a-z]+$/,\n  ulid: /^[0-9A-HJKMNP-TV-Z]{26}$/,\n  /**\n   * `a-z` was added to replicate /i flag\n   */\n  email:\n    /^(?!\\.)(?!.*\\.\\.)([a-zA-Z0-9_'+\\-\\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\\-]*\\.)+[a-zA-Z]{2,}$/,\n  /**\n   * Constructed a valid Unicode RegExp\n   *\n   * Lazily instantiate since this type of regex isn't supported\n   * in all envs (e.g. React Native).\n   *\n   * See:\n   * https://github.com/colinhacks/zod/issues/2433\n   * Fix in Zod:\n   * https://github.com/colinhacks/zod/commit/9340fd51e48576a75adc919bff65dbc4a5d4c99b\n   */\n  emoji: () => {\n    if (emojiRegex === undefined) {\n      emojiRegex = RegExp(\n        '^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$',\n        'u',\n      );\n    }\n    return emojiRegex;\n  },\n  /**\n   * Unused\n   */\n  uuid: /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/,\n  /**\n   * Unused\n   */\n  ipv4: /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,\n  ipv4Cidr:\n    /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/,\n  /**\n   * Unused\n   */\n  ipv6: /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,\n  ipv6Cidr:\n    /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,\n  base64: /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,\n  base64url:\n    /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,\n  nanoid: /^[a-zA-Z0-9_-]{21}$/,\n  jwt: /^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/,\n} as const;\n\nexport type JsonSchema7StringType = {\n  type: 'string';\n  minLength?: number;\n  maxLength?: number;\n  format?:\n    | 'email'\n    | 'idn-email'\n    | 'uri'\n    | 'uuid'\n    | 'date-time'\n    | 'ipv4'\n    | 'ipv6'\n    | 'date'\n    | 'time'\n    | 'duration';\n  pattern?: string;\n  allOf?: {\n    pattern: string;\n  }[];\n  anyOf?: {\n    format: string;\n  }[];\n  contentEncoding?: string;\n};\n\nexport function parseStringDef(\n  def: ZodStringDef,\n  refs: Refs,\n): JsonSchema7StringType {\n  const res: JsonSchema7StringType = {\n    type: 'string',\n  };\n\n  if (def.checks) {\n    for (const check of def.checks) {\n      switch (check.kind) {\n        case 'min':\n          res.minLength =\n            typeof res.minLength === 'number'\n              ? Math.max(res.minLength, check.value)\n              : check.value;\n          break;\n        case 'max':\n          res.maxLength =\n            typeof res.maxLength === 'number'\n              ? Math.min(res.maxLength, check.value)\n              : check.value;\n\n          break;\n        case 'email':\n          switch (refs.emailStrategy) {\n            case 'format:email':\n              addFormat(res, 'email', check.message, refs);\n              break;\n            case 'format:idn-email':\n              addFormat(res, 'idn-email', check.message, refs);\n              break;\n            case 'pattern:zod':\n              addPattern(res, zodPatterns.email, check.message, refs);\n              break;\n          }\n\n          break;\n        case 'url':\n          addFormat(res, 'uri', check.message, refs);\n          break;\n        case 'uuid':\n          addFormat(res, 'uuid', check.message, refs);\n          break;\n        case 'regex':\n          addPattern(res, check.regex, check.message, refs);\n          break;\n        case 'cuid':\n          addPattern(res, zodPatterns.cuid, check.message, refs);\n          break;\n        case 'cuid2':\n          addPattern(res, zodPatterns.cuid2, check.message, refs);\n          break;\n        case 'startsWith':\n          addPattern(\n            res,\n            RegExp(`^${escapeLiteralCheckValue(check.value, refs)}`),\n            check.message,\n            refs,\n          );\n          break;\n        case 'endsWith':\n          addPattern(\n            res,\n            RegExp(`${escapeLiteralCheckValue(check.value, refs)}$`),\n            check.message,\n            refs,\n          );\n          break;\n        case 'datetime':\n          addFormat(res, 'date-time', check.message, refs);\n          break;\n        case 'date':\n          addFormat(res, 'date', check.message, refs);\n          break;\n        case 'time':\n          addFormat(res, 'time', check.message, refs);\n          break;\n        case 'duration':\n          addFormat(res, 'duration', check.message, refs);\n          break;\n        case 'length':\n          res.minLength =\n            typeof res.minLength === 'number'\n              ? Math.max(res.minLength, check.value)\n              : check.value;\n          res.maxLength =\n            typeof res.maxLength === 'number'\n              ? Math.min(res.maxLength, check.value)\n              : check.value;\n          break;\n        case 'includes': {\n          addPattern(\n            res,\n            RegExp(escapeLiteralCheckValue(check.value, refs)),\n            check.message,\n            refs,\n          );\n          break;\n        }\n        case 'ip': {\n          if (check.version !== 'v6') {\n            addFormat(res, 'ipv4', check.message, refs);\n          }\n          if (check.version !== 'v4') {\n            addFormat(res, 'ipv6', check.message, refs);\n          }\n          break;\n        }\n        case 'base64url':\n          addPattern(res, zodPatterns.base64url, check.message, refs);\n          break;\n        case 'jwt':\n          addPattern(res, zodPatterns.jwt, check.message, refs);\n          break;\n        case 'cidr': {\n          if (check.version !== 'v6') {\n            addPattern(res, zodPatterns.ipv4Cidr, check.message, refs);\n          }\n          if (check.version !== 'v4') {\n            addPattern(res, zodPatterns.ipv6Cidr, check.message, refs);\n          }\n          break;\n        }\n        case 'emoji':\n          addPattern(res, zodPatterns.emoji(), check.message, refs);\n          break;\n        case 'ulid': {\n          addPattern(res, zodPatterns.ulid, check.message, refs);\n          break;\n        }\n        case 'base64': {\n          switch (refs.base64Strategy) {\n            case 'format:binary': {\n              addFormat(res, 'binary' as any, check.message, refs);\n              break;\n            }\n\n            case 'contentEncoding:base64': {\n              res.contentEncoding = 'base64';\n              break;\n            }\n\n            case 'pattern:zod': {\n              addPattern(res, zodPatterns.base64, check.message, refs);\n              break;\n            }\n          }\n          break;\n        }\n        case 'nanoid': {\n          addPattern(res, zodPatterns.nanoid, check.message, refs);\n        }\n        case 'toLowerCase':\n        case 'toUpperCase':\n        case 'trim':\n          break;\n        default:\n          /* c8 ignore next */\n          ((_: never) => {})(check);\n      }\n    }\n  }\n\n  return res;\n}\n\nfunction escapeLiteralCheckValue(literal: string, refs: Refs): string {\n  return refs.patternStrategy === 'escape'\n    ? escapeNonAlphaNumeric(literal)\n    : literal;\n}\n\nconst ALPHA_NUMERIC = new Set(\n  'ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789',\n);\n\nfunction escapeNonAlphaNumeric(source: string) {\n  let result = '';\n\n  for (let i = 0; i < source.length; i++) {\n    if (!ALPHA_NUMERIC.has(source[i])) {\n      result += '\\\\';\n    }\n\n    result += source[i];\n  }\n\n  return result;\n}\n\n// Adds a \"format\" keyword to the schema. If a format exists, both formats will be joined in an allOf-node, along with subsequent ones.\nfunction addFormat(\n  schema: JsonSchema7StringType,\n  value: Required<JsonSchema7StringType>['format'],\n  message: string | undefined,\n  refs: Refs,\n) {\n  if (schema.format || schema.anyOf?.some(x => x.format)) {\n    if (!schema.anyOf) {\n      schema.anyOf = [];\n    }\n\n    if (schema.format) {\n      schema.anyOf!.push({\n        format: schema.format,\n      });\n      delete schema.format;\n    }\n\n    schema.anyOf!.push({\n      format: value,\n      ...(message &&\n        refs.errorMessages && { errorMessage: { format: message } }),\n    });\n  } else {\n    schema.format = value;\n  }\n}\n\n// Adds a \"pattern\" keyword to the schema. If a pattern exists, both patterns will be joined in an allOf-node, along with subsequent ones.\nfunction addPattern(\n  schema: JsonSchema7StringType,\n  regex: RegExp,\n  message: string | undefined,\n  refs: Refs,\n) {\n  if (schema.pattern || schema.allOf?.some(x => x.pattern)) {\n    if (!schema.allOf) {\n      schema.allOf = [];\n    }\n\n    if (schema.pattern) {\n      schema.allOf!.push({\n        pattern: schema.pattern,\n      });\n      delete schema.pattern;\n    }\n\n    schema.allOf!.push({\n      pattern: stringifyRegExpWithFlags(regex, refs),\n      ...(message &&\n        refs.errorMessages && { errorMessage: { pattern: message } }),\n    });\n  } else {\n    schema.pattern = stringifyRegExpWithFlags(regex, refs);\n  }\n}\n\n// Mutate z.string.regex() in a best attempt to accommodate for regex flags when applyRegexFlags is true\nfunction stringifyRegExpWithFlags(regex: RegExp, refs: Refs): string {\n  if (!refs.applyRegexFlags || !regex.flags) {\n    return regex.source;\n  }\n\n  // Currently handled flags\n  const flags = {\n    i: regex.flags.includes('i'), // Case-insensitive\n    m: regex.flags.includes('m'), // `^` and `$` matches adjacent to newline characters\n    s: regex.flags.includes('s'), // `.` matches newlines\n  };\n\n  // The general principle here is to step through each character, one at a time, applying mutations as flags require. We keep track when the current character is escaped, and when it's inside a group /like [this]/ or (also) a range like /[a-z]/. The following is fairly brittle imperative code; edit at your peril!\n  const source = flags.i ? regex.source.toLowerCase() : regex.source;\n  let pattern = '';\n  let isEscaped = false;\n  let inCharGroup = false;\n  let inCharRange = false;\n\n  for (let i = 0; i < source.length; i++) {\n    if (isEscaped) {\n      pattern += source[i];\n      isEscaped = false;\n      continue;\n    }\n\n    if (flags.i) {\n      if (inCharGroup) {\n        if (source[i].match(/[a-z]/)) {\n          if (inCharRange) {\n            pattern += source[i];\n            pattern += `${source[i - 2]}-${source[i]}`.toUpperCase();\n            inCharRange = false;\n          } else if (source[i + 1] === '-' && source[i + 2]?.match(/[a-z]/)) {\n            pattern += source[i];\n            inCharRange = true;\n          } else {\n            pattern += `${source[i]}${source[i].toUpperCase()}`;\n          }\n          continue;\n        }\n      } else if (source[i].match(/[a-z]/)) {\n        pattern += `[${source[i]}${source[i].toUpperCase()}]`;\n        continue;\n      }\n    }\n\n    if (flags.m) {\n      if (source[i] === '^') {\n        pattern += `(^|(?<=[\\r\\n]))`;\n        continue;\n      } else if (source[i] === '$') {\n        pattern += `($|(?=[\\r\\n]))`;\n        continue;\n      }\n    }\n\n    if (flags.s && source[i] === '.') {\n      pattern += inCharGroup ? `${source[i]}\\r\\n` : `[${source[i]}\\r\\n]`;\n      continue;\n    }\n\n    pattern += source[i];\n    if (source[i] === '\\\\') {\n      isEscaped = true;\n    } else if (inCharGroup && source[i] === ']') {\n      inCharGroup = false;\n    } else if (!inCharGroup && source[i] === '[') {\n      inCharGroup = true;\n    }\n  }\n\n  try {\n    new RegExp(pattern);\n  } catch {\n    console.warn(\n      `Could not convert regex pattern at ${refs.currentPath.join(\n        '/',\n      )} to a flag-independent form! Falling back to the flag-ignorant source`,\n    );\n    return regex.source;\n  }\n\n  return pattern;\n}\n","import { ZodMapDef } from 'zod/v3';\nimport { parseDef } from '../parse-def';\nimport { JsonSchema7Type } from '../parse-types';\nimport { Refs } from '../refs';\nimport { parseAnyDef } from './any';\nimport { JsonSchema7RecordType, parseRecordDef } from './record';\n\nexport type JsonSchema7MapType = {\n  type: 'array';\n  maxItems: 125;\n  items: {\n    type: 'array';\n    items: [JsonSchema7Type, JsonSchema7Type];\n    minItems: 2;\n    maxItems: 2;\n  };\n};\n\nexport function parseMapDef(\n  def: ZodMapDef,\n  refs: Refs,\n): JsonSchema7MapType | JsonSchema7RecordType {\n  if (refs.mapStrategy === 'record') {\n    return parseRecordDef(def, refs);\n  }\n\n  const keys =\n    parseDef(def.keyType._def, {\n      ...refs,\n      currentPath: [...refs.currentPath, 'items', 'items', '0'],\n    }) || parseAnyDef();\n  const values =\n    parseDef(def.valueType._def, {\n      ...refs,\n      currentPath: [...refs.currentPath, 'items', 'items', '1'],\n    }) || parseAnyDef();\n  return {\n    type: 'array',\n    maxItems: 125,\n    items: {\n      type: 'array',\n      items: [keys, values],\n      minItems: 2,\n      maxItems: 2,\n    },\n  };\n}\n","import { ZodNativeEnumDef } from 'zod/v3';\n\nexport type JsonSchema7NativeEnumType = {\n  type: 'string' | 'number' | ['string', 'number'];\n  enum: (string | number)[];\n};\n\nexport function parseNativeEnumDef(\n  def: ZodNativeEnumDef,\n): JsonSchema7NativeEnumType {\n  const object = def.values;\n  const actualKeys = Object.keys(def.values).filter((key: string) => {\n    return typeof object[object[key]] !== 'number';\n  });\n\n  const actualValues = actualKeys.map((key: string) => object[key]);\n\n  const parsedTypes = Array.from(\n    new Set(actualValues.map((values: string | number) => typeof values)),\n  );\n\n  return {\n    type:\n      parsedTypes.length === 1\n        ? parsedTypes[0] === 'string'\n          ? 'string'\n          : 'number'\n        : ['string', 'number'],\n    enum: actualValues,\n  };\n}\n","import { JsonSchema7AnyType, parseAnyDef } from './any';\n\nexport type JsonSchema7NeverType = {\n  not: JsonSchema7AnyType;\n};\n\nexport function parseNeverDef(): JsonSchema7NeverType | undefined {\n  return { not: parseAnyDef() };\n}\n","export type JsonSchema7NullType = {\n  type: 'null';\n};\n\nexport function parseNullDef(): JsonSchema7NullType {\n  return {\n    type: 'null',\n  };\n}\n","import {\n  ZodDiscriminatedUnionDef,\n  ZodLiteralDef,\n  ZodTypeAny,\n  ZodUnionDef,\n} from 'zod/v3';\nimport { parseDef } from '../parse-def';\nimport { JsonSchema7Type } from '../parse-types';\nimport { Refs } from '../refs';\n\nexport const primitiveMappings = {\n  ZodString: 'string',\n  ZodNumber: 'number',\n  ZodBigInt: 'integer',\n  ZodBoolean: 'boolean',\n  ZodNull: 'null',\n} as const;\ntype ZodPrimitive = keyof typeof primitiveMappings;\ntype JsonSchema7Primitive =\n  (typeof primitiveMappings)[keyof typeof primitiveMappings];\n\nexport type JsonSchema7UnionType =\n  | JsonSchema7PrimitiveUnionType\n  | JsonSchema7AnyOfType;\n\ntype JsonSchema7PrimitiveUnionType =\n  | {\n      type: JsonSchema7Primitive | JsonSchema7Primitive[];\n    }\n  | {\n      type: JsonSchema7Primitive | JsonSchema7Primitive[];\n      enum: (string | number | bigint | boolean | null)[];\n    };\n\ntype JsonSchema7AnyOfType = {\n  anyOf: JsonSchema7Type[];\n};\n\nexport function parseUnionDef(\n  def: ZodUnionDef | ZodDiscriminatedUnionDef<any, any>,\n  refs: Refs,\n): JsonSchema7PrimitiveUnionType | JsonSchema7AnyOfType | undefined {\n  const options: readonly ZodTypeAny[] =\n    def.options instanceof Map ? Array.from(def.options.values()) : def.options;\n\n  // This blocks tries to look ahead a bit to produce nicer looking schemas with type array instead of anyOf.\n  if (\n    options.every(\n      x =>\n        x._def.typeName in primitiveMappings &&\n        (!x._def.checks || !x._def.checks.length),\n    )\n  ) {\n    // all types in union are primitive and lack checks, so might as well squash into {type: [...]}\n\n    const types = options.reduce((types: JsonSchema7Primitive[], x) => {\n      const type = primitiveMappings[x._def.typeName as ZodPrimitive]; //Can be safely casted due to row 43\n      return type && !types.includes(type) ? [...types, type] : types;\n    }, []);\n\n    return {\n      type: types.length > 1 ? types : types[0],\n    };\n  } else if (\n    options.every(x => x._def.typeName === 'ZodLiteral' && !x.description)\n  ) {\n    // all options literals\n\n    const types = options.reduce(\n      (acc: JsonSchema7Primitive[], x: { _def: ZodLiteralDef }) => {\n        const type = typeof x._def.value;\n        switch (type) {\n          case 'string':\n          case 'number':\n          case 'boolean':\n            return [...acc, type];\n          case 'bigint':\n            return [...acc, 'integer' as const];\n          case 'object':\n            if (x._def.value === null) return [...acc, 'null' as const];\n          case 'symbol':\n          case 'undefined':\n          case 'function':\n          default:\n            return acc;\n        }\n      },\n      [],\n    );\n\n    if (types.length === options.length) {\n      // all the literals are primitive, as far as null can be considered primitive\n\n      const uniqueTypes = types.filter((x, i, a) => a.indexOf(x) === i);\n      return {\n        type: uniqueTypes.length > 1 ? uniqueTypes : uniqueTypes[0],\n        enum: options.reduce(\n          (acc, x) => {\n            return acc.includes(x._def.value) ? acc : [...acc, x._def.value];\n          },\n          [] as (string | number | bigint | boolean | null)[],\n        ),\n      };\n    }\n  } else if (options.every(x => x._def.typeName === 'ZodEnum')) {\n    return {\n      type: 'string',\n      enum: options.reduce(\n        (acc: string[], x) => [\n          ...acc,\n          ...x._def.values.filter((x: string) => !acc.includes(x)),\n        ],\n        [],\n      ),\n    };\n  }\n\n  return asAnyOf(def, refs);\n}\n\nconst asAnyOf = (\n  def: ZodUnionDef | ZodDiscriminatedUnionDef<any, any>,\n  refs: Refs,\n): JsonSchema7PrimitiveUnionType | JsonSchema7AnyOfType | undefined => {\n  const anyOf = (\n    (def.options instanceof Map\n      ? Array.from(def.options.values())\n      : def.options) as any[]\n  )\n    .map((x, i) =>\n      parseDef(x._def, {\n        ...refs,\n        currentPath: [...refs.currentPath, 'anyOf', `${i}`],\n      }),\n    )\n    .filter(\n      (x): x is JsonSchema7Type =>\n        !!x &&\n        (!refs.strictUnions ||\n          (typeof x === 'object' && Object.keys(x).length > 0)),\n    );\n\n  return anyOf.length ? { anyOf } : undefined;\n};\n","import { ZodNullableDef } from 'zod/v3';\nimport { parseDef } from '../parse-def';\nimport { JsonSchema7Type } from '../parse-types';\nimport { Refs } from '../refs';\nimport { JsonSchema7NullType } from './null';\nimport { primitiveMappings } from './union';\n\nexport type JsonSchema7NullableType =\n  | {\n      anyOf: [JsonSchema7Type, JsonSchema7NullType];\n    }\n  | {\n      type: [string, 'null'];\n    };\n\nexport function parseNullableDef(\n  def: ZodNullableDef,\n  refs: Refs,\n): JsonSchema7NullableType | undefined {\n  if (\n    ['ZodString', 'ZodNumber', 'ZodBigInt', 'ZodBoolean', 'ZodNull'].includes(\n      def.innerType._def.typeName,\n    ) &&\n    (!def.innerType._def.checks || !def.innerType._def.checks.length)\n  ) {\n    return {\n      type: [\n        primitiveMappings[\n          def.innerType._def.typeName as keyof typeof primitiveMappings\n        ],\n        'null',\n      ],\n    };\n  }\n\n  const base = parseDef(def.innerType._def, {\n    ...refs,\n    currentPath: [...refs.currentPath, 'anyOf', '0'],\n  });\n\n  return base && { anyOf: [base, { type: 'null' }] };\n}\n","import { ZodNumberDef } from 'zod/v3';\n\nexport type JsonSchema7NumberType = {\n  type: 'number' | 'integer';\n  minimum?: number;\n  exclusiveMinimum?: number;\n  maximum?: number;\n  exclusiveMaximum?: number;\n  multipleOf?: number;\n};\n\nexport function parseNumberDef(def: ZodNumberDef): JsonSchema7NumberType {\n  const res: JsonSchema7NumberType = {\n    type: 'number',\n  };\n\n  if (!def.checks) return res;\n\n  for (const check of def.checks) {\n    switch (check.kind) {\n      case 'int':\n        res.type = 'integer';\n        break;\n      case 'min':\n        if (check.inclusive) {\n          res.minimum = check.value;\n        } else {\n          res.exclusiveMinimum = check.value;\n        }\n        break;\n      case 'max':\n        if (check.inclusive) {\n          res.maximum = check.value;\n        } else {\n          res.exclusiveMaximum = check.value;\n        }\n        break;\n      case 'multipleOf':\n        res.multipleOf = check.value;\n        break;\n    }\n  }\n  return res;\n}\n","import { ZodObjectDef, ZodTypeAny } from 'zod/v3';\nimport { parseDef } from '../parse-def';\nimport { JsonSchema7Type } from '../parse-types';\nimport { Refs } from '../refs';\n\nexport type JsonSchema7ObjectType = {\n  type: 'object';\n  properties: Record<string, JsonSchema7Type>;\n  additionalProperties?: boolean | JsonSchema7Type;\n  required?: string[];\n};\n\nexport function parseObjectDef(def: ZodObjectDef, refs: Refs) {\n  const result: JsonSchema7ObjectType = {\n    type: 'object',\n    properties: {},\n  };\n\n  const required: string[] = [];\n\n  const shape = def.shape();\n\n  for (const propName in shape) {\n    let propDef = shape[propName];\n\n    if (propDef === undefined || propDef._def === undefined) {\n      continue;\n    }\n\n    const propOptional = safeIsOptional(propDef);\n\n    const parsedDef = parseDef(propDef._def, {\n      ...refs,\n      currentPath: [...refs.currentPath, 'properties', propName],\n      propertyPath: [...refs.currentPath, 'properties', propName],\n    });\n\n    if (parsedDef === undefined) {\n      continue;\n    }\n\n    result.properties[propName] = parsedDef;\n\n    if (!propOptional) {\n      required.push(propName);\n    }\n  }\n\n  if (required.length) {\n    result.required = required;\n  }\n\n  const additionalProperties = decideAdditionalProperties(def, refs);\n\n  if (additionalProperties !== undefined) {\n    result.additionalProperties = additionalProperties;\n  }\n\n  return result;\n}\n\nfunction decideAdditionalProperties(def: ZodObjectDef, refs: Refs) {\n  if (def.catchall._def.typeName !== 'ZodNever') {\n    return parseDef(def.catchall._def, {\n      ...refs,\n      currentPath: [...refs.currentPath, 'additionalProperties'],\n    });\n  }\n\n  switch (def.unknownKeys) {\n    case 'passthrough':\n      return refs.allowedAdditionalProperties;\n    case 'strict':\n      return refs.rejectedAdditionalProperties;\n    case 'strip':\n      return refs.removeAdditionalStrategy === 'strict'\n        ? refs.allowedAdditionalProperties\n        : refs.rejectedAdditionalProperties;\n  }\n}\n\nfunction safeIsOptional(schema: ZodTypeAny): boolean {\n  try {\n    return schema.isOptional();\n  } catch {\n    return true;\n  }\n}\n","import { ZodOptionalDef } from 'zod/v3';\nimport { parseDef } from '../parse-def';\nimport { JsonSchema7Type } from '../parse-types';\nimport { Refs } from '../refs';\nimport { parseAnyDef } from './any';\n\nexport const parseOptionalDef = (\n  def: ZodOptionalDef,\n  refs: Refs,\n): JsonSchema7Type | undefined => {\n  if (refs.currentPath.toString() === refs.propertyPath?.toString()) {\n    return parseDef(def.innerType._def, refs);\n  }\n\n  const innerSchema = parseDef(def.innerType._def, {\n    ...refs,\n    currentPath: [...refs.currentPath, 'anyOf', '1'],\n  });\n\n  return innerSchema\n    ? { anyOf: [{ not: parseAnyDef() }, innerSchema] }\n    : parseAnyDef();\n};\n","import { ZodPipelineDef } from 'zod/v3';\nimport { parseDef } from '../parse-def';\nimport { JsonSchema7Type } from '../parse-types';\nimport { Refs } from '../refs';\nimport { JsonSchema7AllOfType } from './intersection';\n\nexport const parsePipelineDef = (\n  def: ZodPipelineDef<any, any>,\n  refs: Refs,\n): JsonSchema7AllOfType | JsonSchema7Type | undefined => {\n  if (refs.pipeStrategy === 'input') {\n    return parseDef(def.in._def, refs);\n  } else if (refs.pipeStrategy === 'output') {\n    return parseDef(def.out._def, refs);\n  }\n\n  const a = parseDef(def.in._def, {\n    ...refs,\n    currentPath: [...refs.currentPath, 'allOf', '0'],\n  });\n  const b = parseDef(def.out._def, {\n    ...refs,\n    currentPath: [...refs.currentPath, 'allOf', a ? '1' : '0'],\n  });\n\n  return {\n    allOf: [a, b].filter((x): x is JsonSchema7Type => x !== undefined),\n  };\n};\n","import { ZodPromiseDef } from 'zod/v3';\nimport { parseDef } from '../parse-def';\nimport { JsonSchema7Type } from '../parse-types';\nimport { Refs } from '../refs';\n\nexport function parsePromiseDef(\n  def: ZodPromiseDef,\n  refs: Refs,\n): JsonSchema7Type | undefined {\n  return parseDef(def.type._def, refs);\n}\n","import { ZodSetDef } from 'zod/v3';\nimport { parseDef } from '../parse-def';\nimport { JsonSchema7Type } from '../parse-types';\nimport { Refs } from '../refs';\n\nexport type JsonSchema7SetType = {\n  type: 'array';\n  uniqueItems: true;\n  items?: JsonSchema7Type;\n  minItems?: number;\n  maxItems?: number;\n};\n\nexport function parseSetDef(def: ZodSetDef, refs: Refs): JsonSchema7SetType {\n  const items = parseDef(def.valueType._def, {\n    ...refs,\n    currentPath: [...refs.currentPath, 'items'],\n  });\n\n  const schema: JsonSchema7SetType = {\n    type: 'array',\n    uniqueItems: true,\n    items,\n  };\n\n  if (def.minSize) {\n    schema.minItems = def.minSize.value;\n  }\n\n  if (def.maxSize) {\n    schema.maxItems = def.maxSize.value;\n  }\n\n  return schema;\n}\n","import { ZodTupleDef, ZodTupleItems, ZodTypeAny } from 'zod/v3';\nimport { parseDef } from '../parse-def';\nimport { JsonSchema7Type } from '../parse-types';\nimport { Refs } from '../refs';\n\nexport type JsonSchema7TupleType = {\n  type: 'array';\n  minItems: number;\n  items: JsonSchema7Type[];\n} & (\n  | {\n      maxItems: number;\n    }\n  | {\n      additionalItems?: JsonSchema7Type;\n    }\n);\n\nexport function parseTupleDef(\n  def: ZodTupleDef<ZodTupleItems | [], ZodTypeAny | null>,\n  refs: Refs,\n): JsonSchema7TupleType {\n  if (def.rest) {\n    return {\n      type: 'array',\n      minItems: def.items.length,\n      items: def.items\n        .map((x, i) =>\n          parseDef(x._def, {\n            ...refs,\n            currentPath: [...refs.currentPath, 'items', `${i}`],\n          }),\n        )\n        .reduce(\n          (acc: JsonSchema7Type[], x) => (x === undefined ? acc : [...acc, x]),\n          [],\n        ),\n      additionalItems: parseDef(def.rest._def, {\n        ...refs,\n        currentPath: [...refs.currentPath, 'additionalItems'],\n      }),\n    };\n  } else {\n    return {\n      type: 'array',\n      minItems: def.items.length,\n      maxItems: def.items.length,\n      items: def.items\n        .map((x, i) =>\n          parseDef(x._def, {\n            ...refs,\n            currentPath: [...refs.currentPath, 'items', `${i}`],\n          }),\n        )\n        .reduce(\n          (acc: JsonSchema7Type[], x) => (x === undefined ? acc : [...acc, x]),\n          [],\n        ),\n    };\n  }\n}\n","import { JsonSchema7AnyType, parseAnyDef } from './any';\n\nexport type JsonSchema7UndefinedType = {\n  not: JsonSchema7AnyType;\n};\n\nexport function parseUndefinedDef(): JsonSchema7UndefinedType {\n  return {\n    not: parseAnyDef(),\n  };\n}\n","import { JsonSchema7AnyType, parseAnyDef } from './any';\n\nexport type JsonSchema7UnknownType = JsonSchema7AnyType;\n\nexport function parseUnknownDef(): JsonSchema7UnknownType {\n  return parseAnyDef();\n}\n","import { ZodReadonlyDef } from 'zod/v3';\nimport { parseDef } from '../parse-def';\nimport { Refs } from '../refs';\n\nexport const parseReadonlyDef = (def: ZodReadonlyDef<any>, refs: Refs) => {\n  return parseDef(def.innerType._def, refs);\n};\n","import { ZodTypeDef } from 'zod/v3';\nimport { Refs, Seen } from './refs';\nimport { ignoreOverride } from './options';\nimport { JsonSchema7Type } from './parse-types';\nimport { selectParser } from './select-parser';\nimport { getRelativePath } from './get-relative-path';\nimport { parseAnyDef } from './parsers/any';\n\nexport function parseDef(\n  def: ZodTypeDef,\n  refs: Refs,\n  forceResolution = false, // Forces a new schema to be instantiated even though its def has been seen. Used for improving refs in definitions. See https://github.com/StefanTerdell/zod-to-json-schema/pull/61.\n): JsonSchema7Type | undefined {\n  const seenItem = refs.seen.get(def);\n\n  if (refs.override) {\n    const overrideResult = refs.override?.(\n      def,\n      refs,\n      seenItem,\n      forceResolution,\n    );\n\n    if (overrideResult !== ignoreOverride) {\n      return overrideResult;\n    }\n  }\n\n  if (seenItem && !forceResolution) {\n    const seenSchema = get$ref(seenItem, refs);\n\n    if (seenSchema !== undefined) {\n      return seenSchema;\n    }\n  }\n\n  const newItem: Seen = { def, path: refs.currentPath, jsonSchema: undefined };\n\n  refs.seen.set(def, newItem);\n\n  const jsonSchemaOrGetter = selectParser(def, (def as any).typeName, refs);\n\n  // If the return was a function, then the inner definition needs to be extracted before a call to parseDef (recursive)\n  const jsonSchema =\n    typeof jsonSchemaOrGetter === 'function'\n      ? parseDef(jsonSchemaOrGetter(), refs)\n      : jsonSchemaOrGetter;\n\n  if (jsonSchema) {\n    addMeta(def, refs, jsonSchema);\n  }\n\n  if (refs.postProcess) {\n    const postProcessResult = refs.postProcess(jsonSchema, def, refs);\n\n    newItem.jsonSchema = jsonSchema;\n\n    return postProcessResult;\n  }\n\n  newItem.jsonSchema = jsonSchema;\n\n  return jsonSchema;\n}\n\nconst get$ref = (\n  item: Seen,\n  refs: Refs,\n):\n  | {\n      $ref: string;\n    }\n  | {}\n  | undefined => {\n  switch (refs.$refStrategy) {\n    case 'root':\n      return { $ref: item.path.join('/') };\n    case 'relative':\n      return { $ref: getRelativePath(refs.currentPath, item.path) };\n    case 'none':\n    case 'seen': {\n      if (\n        item.path.length < refs.currentPath.length &&\n        item.path.every((value, index) => refs.currentPath[index] === value)\n      ) {\n        console.warn(\n          `Recursive reference detected at ${refs.currentPath.join(\n            '/',\n          )}! Defaulting to any`,\n        );\n\n        return parseAnyDef();\n      }\n\n      return refs.$refStrategy === 'seen' ? parseAnyDef() : undefined;\n    }\n  }\n};\n\nconst addMeta = (\n  def: ZodTypeDef,\n  refs: Refs,\n  jsonSchema: JsonSchema7Type,\n): JsonSchema7Type => {\n  if (def.description) {\n    jsonSchema.description = def.description;\n  }\n  return jsonSchema;\n};\n","import { ZodTypeDef } from 'zod/v3';\nimport { getDefaultOptions, Options } from './options';\nimport { JsonSchema7Type } from './parse-types';\n\nexport type Refs = {\n  seen: Map<ZodTypeDef, Seen>;\n  currentPath: string[];\n  propertyPath: string[] | undefined;\n} & Options;\n\nexport type Seen = {\n  def: ZodTypeDef;\n  path: string[];\n  jsonSchema: JsonSchema7Type | undefined;\n};\n\nexport const getRefs = (options?: string | Partial<Options>): Refs => {\n  const _options = getDefaultOptions(options);\n  const currentPath =\n    _options.name !== undefined\n      ? [..._options.basePath, _options.definitionPath, _options.name]\n      : _options.basePath;\n  return {\n    ..._options,\n    currentPath: currentPath,\n    propertyPath: undefined,\n    seen: new Map(\n      Object.entries(_options.definitions).map(([name, def]) => [\n        def._def,\n        {\n          def: def._def,\n          path: [..._options.basePath, _options.definitionPath, name],\n          // Resolution of references will be forced even though seen, so it's ok that the schema is undefined here for now.\n          jsonSchema: undefined,\n        },\n      ]),\n    ),\n  };\n};\n","import { ZodSchema } from 'zod/v3';\nimport { Options } from './options';\nimport { parseDef } from './parse-def';\nimport { JsonSchema7Type } from './parse-types';\nimport { getRefs } from './refs';\nimport { parseAnyDef } from './parsers/any';\n\nconst zodToJsonSchema = (\n  schema: ZodSchema<any>,\n  options?: Partial<Options> | string,\n): JsonSchema7Type & {\n  $schema?: string;\n  definitions?: {\n    [key: string]: JsonSchema7Type;\n  };\n} => {\n  const refs = getRefs(options);\n\n  let definitions =\n    typeof options === 'object' && options.definitions\n      ? Object.entries(options.definitions).reduce(\n          (acc: { [key: string]: JsonSchema7Type }, [name, schema]) => ({\n            ...acc,\n            [name]:\n              parseDef(\n                schema._def,\n                {\n                  ...refs,\n                  currentPath: [...refs.basePath, refs.definitionPath, name],\n                },\n                true,\n              ) ?? parseAnyDef(),\n          }),\n          {},\n        )\n      : undefined;\n\n  const name =\n    typeof options === 'string'\n      ? options\n      : options?.nameStrategy === 'title'\n        ? undefined\n        : options?.name;\n\n  const main =\n    parseDef(\n      schema._def,\n      name === undefined\n        ? refs\n        : {\n            ...refs,\n            currentPath: [...refs.basePath, refs.definitionPath, name],\n          },\n      false,\n    ) ?? (parseAnyDef() as JsonSchema7Type);\n\n  const title =\n    typeof options === 'object' &&\n    options.name !== undefined &&\n    options.nameStrategy === 'title'\n      ? options.name\n      : undefined;\n\n  if (title !== undefined) {\n    main.title = title;\n  }\n\n  const combined: ReturnType<typeof zodToJsonSchema> =\n    name === undefined\n      ? definitions\n        ? {\n            ...main,\n            [refs.definitionPath]: definitions,\n          }\n        : main\n      : {\n          $ref: [\n            ...(refs.$refStrategy === 'relative' ? [] : refs.basePath),\n            refs.definitionPath,\n            name,\n          ].join('/'),\n          [refs.definitionPath]: {\n            ...definitions,\n            [name]: main,\n          },\n        };\n\n  combined.$schema = 'http://json-schema.org/draft-07/schema#';\n\n  return combined;\n};\n\nexport { zodToJsonSchema };\n","export * from './get-relative-path';\nexport * from './options';\nexport * from './parse-def';\nexport * from './parse-types';\nexport * from './parsers/any';\nexport * from './parsers/array';\nexport * from './parsers/bigint';\nexport * from './parsers/boolean';\nexport * from './parsers/branded';\nexport * from './parsers/catch';\nexport * from './parsers/date';\nexport * from './parsers/default';\nexport * from './parsers/effects';\nexport * from './parsers/enum';\nexport * from './parsers/intersection';\nexport * from './parsers/literal';\nexport * from './parsers/map';\nexport * from './parsers/native-enum';\nexport * from './parsers/never';\nexport * from './parsers/null';\nexport * from './parsers/nullable';\nexport * from './parsers/number';\nexport * from './parsers/object';\nexport * from './parsers/optional';\nexport * from './parsers/pipeline';\nexport * from './parsers/promise';\nexport * from './parsers/readonly';\nexport * from './parsers/record';\nexport * from './parsers/set';\nexport * from './parsers/string';\nexport * from './parsers/tuple';\nexport * from './parsers/undefined';\nexport * from './parsers/union';\nexport * from './parsers/unknown';\nexport * from './refs';\nexport * from './select-parser';\nexport * from './zod-to-json-schema';\nimport { zodToJsonSchema } from './zod-to-json-schema';\nexport default zodToJsonSchema;\n","import { JSONSchema7 } from '@ai-sdk/provider';\nimport * as z3 from 'zod/v3';\nimport * as z4 from 'zod/v4';\nimport { Validator, validatorSymbol, type ValidationResult } from './validator';\nimport { zodSchema } from './zod-schema';\n\n/**\n * Used to mark schemas so we can support both Zod and custom schemas.\n */\nconst schemaSymbol = Symbol.for('vercel.ai.schema');\n\nexport type Schema<OBJECT = unknown> = Validator<OBJECT> & {\n  /**\n   * Used to mark schemas so we can support both Zod and custom schemas.\n   */\n  [schemaSymbol]: true;\n\n  /**\n   * Schema type for inference.\n   */\n  _type: OBJECT;\n\n  /**\n   * The JSON Schema for the schema. It is passed to the providers.\n   */\n  readonly jsonSchema: JSONSchema7;\n};\n\n/**\n * Creates a schema with deferred creation.\n * This is important to reduce the startup time of the library\n * and to avoid initializing unused validators.\n *\n * @param createValidator A function that creates a schema.\n * @returns A function that returns a schema.\n */\nexport function lazySchema<SCHEMA>(\n  createSchema: () => Schema<SCHEMA>,\n): LazySchema<SCHEMA> {\n  // cache the validator to avoid initializing it multiple times\n  let schema: Schema<SCHEMA> | undefined;\n  return () => {\n    if (schema == null) {\n      schema = createSchema();\n    }\n    return schema;\n  };\n}\n\nexport type LazySchema<SCHEMA> = () => Schema<SCHEMA>;\n\n// Note: Zod types here exactly match the types in zod-schema.ts\n// to prevent type errors when using zod schemas with flexible schemas.\nexport type FlexibleSchema<SCHEMA> =\n  | z4.core.$ZodType<SCHEMA, any>\n  | z3.Schema<SCHEMA, z3.ZodTypeDef, any>\n  | Schema<SCHEMA>\n  | LazySchema<SCHEMA>;\n\nexport type InferSchema<SCHEMA> = SCHEMA extends z3.Schema\n  ? z3.infer<SCHEMA>\n  : SCHEMA extends z4.core.$ZodType\n    ? z4.infer<SCHEMA>\n    : SCHEMA extends LazySchema<infer T>\n      ? T\n      : SCHEMA extends Schema<infer T>\n        ? T\n        : never;\n\n/**\n * Create a schema using a JSON Schema.\n *\n * @param jsonSchema The JSON Schema for the schema.\n * @param options.validate Optional. A validation function for the schema.\n */\nexport function jsonSchema<OBJECT = unknown>(\n  jsonSchema: JSONSchema7 | (() => JSONSchema7),\n  {\n    validate,\n  }: {\n    validate?: (\n      value: unknown,\n    ) => ValidationResult<OBJECT> | PromiseLike<ValidationResult<OBJECT>>;\n  } = {},\n): Schema<OBJECT> {\n  return {\n    [schemaSymbol]: true,\n    _type: undefined as OBJECT, // should never be used directly\n    [validatorSymbol]: true,\n    get jsonSchema() {\n      if (typeof jsonSchema === 'function') {\n        jsonSchema = jsonSchema(); // cache the function results\n      }\n      return jsonSchema;\n    },\n    validate,\n  };\n}\n\nfunction isSchema(value: unknown): value is Schema {\n  return (\n    typeof value === 'object' &&\n    value !== null &&\n    schemaSymbol in value &&\n    value[schemaSymbol] === true &&\n    'jsonSchema' in value &&\n    'validate' in value\n  );\n}\n\nexport function asSchema<OBJECT>(\n  schema: FlexibleSchema<OBJECT> | undefined,\n): Schema<OBJECT> {\n  return schema == null\n    ? jsonSchema({\n        properties: {},\n        additionalProperties: false,\n      })\n    : isSchema(schema)\n      ? schema\n      : typeof schema === 'function'\n        ? schema()\n        : zodSchema(schema);\n}\n","// btoa and atob need to be invoked as a function call, not as a method call.\n// Otherwise CloudFlare will throw a\n// \"TypeError: Illegal invocation: function called with incorrect this reference\"\nconst { btoa, atob } = globalThis;\n\nexport function convertBase64ToUint8Array(base64String: string) {\n  const base64Url = base64String.replace(/-/g, '+').replace(/_/g, '/');\n  const latin1string = atob(base64Url);\n  return Uint8Array.from(latin1string, byte => byte.codePointAt(0)!);\n}\n\nexport function convertUint8ArrayToBase64(array: Uint8Array): string {\n  let latin1string = '';\n\n  // Note: regular for loop to support older JavaScript versions that\n  // do not support for..of on Uint8Array\n  for (let i = 0; i < array.length; i++) {\n    latin1string += String.fromCodePoint(array[i]);\n  }\n\n  return btoa(latin1string);\n}\n\nexport function convertToBase64(value: string | Uint8Array): string {\n  return value instanceof Uint8Array ? convertUint8ArrayToBase64(value) : value;\n}\n","export function withoutTrailingSlash(url: string | undefined) {\n  return url?.replace(/\\/$/, '');\n}\n","export function isAsyncIterable<T = any>(obj: any): obj is AsyncIterable<T> {\n  return obj != null && typeof obj[Symbol.asyncIterator] === 'function';\n}\n","import { Tool, ToolCallOptions, ToolExecuteFunction } from './tool';\nimport { isAsyncIterable } from '../is-async-iterable';\n\nexport async function* executeTool<INPUT, OUTPUT>({\n  execute,\n  input,\n  options,\n}: {\n  execute: ToolExecuteFunction<INPUT, OUTPUT>;\n  input: INPUT;\n  options: ToolCallOptions;\n}): AsyncGenerator<\n  { type: 'preliminary'; output: OUTPUT } | { type: 'final'; output: OUTPUT }\n> {\n  const result = execute(input, options);\n\n  if (isAsyncIterable(result)) {\n    let lastOutput: OUTPUT | undefined;\n    for await (const output of result) {\n      lastOutput = output;\n      yield { type: 'preliminary', output };\n    }\n    yield { type: 'final', output: lastOutput! };\n  } else {\n    yield { type: 'final', output: await result };\n  }\n}\n","export * from './combine-headers';\nexport { convertAsyncIteratorToReadableStream } from './convert-async-iterator-to-readable-stream';\nexport * from './delay';\nexport * from './extract-response-headers';\nexport * from './fetch-function';\nexport { createIdGenerator, generateId, type IdGenerator } from './generate-id';\nexport * from './get-error-message';\nexport * from './get-from-api';\nexport { getRuntimeEnvironmentUserAgent } from './get-runtime-environment-user-agent';\nexport { injectJsonInstructionIntoMessages } from './inject-json-instruction';\nexport * from './is-abort-error';\nexport { isUrlSupported } from './is-url-supported';\nexport * from './load-api-key';\nexport { loadOptionalSetting } from './load-optional-setting';\nexport { loadSetting } from './load-setting';\nexport { mediaTypeToExtension } from './media-type-to-extension';\nexport * from './parse-json';\nexport { parseJsonEventStream } from './parse-json-event-stream';\nexport { parseProviderOptions } from './parse-provider-options';\nexport * from './post-to-api';\nexport {\n  createProviderDefinedToolFactory,\n  createProviderDefinedToolFactoryWithOutputSchema,\n  type ProviderDefinedToolFactory,\n  type ProviderDefinedToolFactoryWithOutputSchema,\n} from './provider-defined-tool-factory';\nexport * from './remove-undefined-entries';\nexport * from './resolve';\nexport * from './response-handler';\nexport {\n  asSchema,\n  jsonSchema,\n  lazySchema,\n  type FlexibleSchema,\n  type InferSchema,\n  type LazySchema,\n  type Schema,\n} from './schema';\nexport * from './uint8-utils';\nexport * from './validate-types';\nexport {\n  asValidator,\n  isValidator,\n  lazyValidator,\n  standardSchemaValidator,\n  validator,\n  type FlexibleValidator,\n  type InferValidator,\n  type LazyValidator,\n  type ValidationResult,\n  type Validator,\n} from './validator';\nexport { VERSION } from './version';\nexport { withUserAgentSuffix } from './with-user-agent-suffix';\nexport * from './without-trailing-slash';\nexport { zodSchema } from './zod-schema';\n\n// folder re-exports\nexport * from './types';\n\n// external re-exports\nexport * from '@standard-schema/spec';\nexport {\n  EventSourceParserStream,\n  type EventSourceMessage,\n} from 'eventsource-parser/stream';\n"],"names":["resolve","APICallError","APICallError","mediaType","TypeValidationError","TypeValidationError","validator","TypeValidationError","validator","TypeValidationError","InvalidArgumentError","InvalidArgumentError","APICallError","getOriginalFetch","APICallError","tool","APICallError","APICallError","ZodFirstPartyTypeKind","ZodFirstPartyTypeKind","ZodFirstPartyTypeKind","types","x","ZodFirstPartyTypeKind","jsonSchema","name","schema","_a","zodSchema","jsonSchema","EventSourceParserStream"],"mappings":"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"}},
    {"offset": {"line": 10278, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40isaacs/ttlcache/index.js"],"sourcesContent":["// A simple TTL cache with max capacity option, ms resolution,\n// autopurge, and reasonably optimized performance\n// Relies on the fact that integer Object keys are kept sorted,\n// and managed very efficiently by V8.\n\n/* istanbul ignore next */\nconst perf =\n  typeof performance === 'object' &&\n  performance &&\n  typeof performance.now === 'function'\n    ? performance\n    : Date\n\nconst now = () => perf.now()\nconst isPosInt = n => n && n === Math.floor(n) && n > 0 && isFinite(n)\nconst isPosIntOrInf = n => n === Infinity || isPosInt(n)\n\nclass TTLCache {\n  constructor({\n    max = Infinity,\n    ttl,\n    updateAgeOnGet = false,\n    checkAgeOnGet = false,\n    noUpdateTTL = false,\n    dispose,\n    noDisposeOnSet = false,\n  } = {}) {\n    // {[expirationTime]: [keys]}\n    this.expirations = Object.create(null)\n    // {key=>val}\n    this.data = new Map()\n    // {key=>expiration}\n    this.expirationMap = new Map()\n    if (ttl !== undefined && !isPosIntOrInf(ttl)) {\n      throw new TypeError(\n        'ttl must be positive integer or Infinity if set'\n      )\n    }\n    if (!isPosIntOrInf(max)) {\n      throw new TypeError('max must be positive integer or Infinity')\n    }\n    this.ttl = ttl\n    this.max = max\n    this.updateAgeOnGet = !!updateAgeOnGet\n    this.checkAgeOnGet = !!checkAgeOnGet\n    this.noUpdateTTL = !!noUpdateTTL\n    this.noDisposeOnSet = !!noDisposeOnSet\n    if (dispose !== undefined) {\n      if (typeof dispose !== 'function') {\n        throw new TypeError('dispose must be function if set')\n      }\n      this.dispose = dispose\n    }\n\n    this.timer = undefined\n    this.timerExpiration = undefined\n  }\n\n  setTimer(expiration, ttl) {\n    if (this.timerExpiration < expiration) {\n      return\n    }\n\n    if (this.timer) {\n      clearTimeout(this.timer)\n    }\n\n    const t = setTimeout(() => {\n      this.timer = undefined\n      this.timerExpiration = undefined\n      this.purgeStale()\n      for (const exp in this.expirations) {\n        this.setTimer(exp, exp - now())\n        break\n      }\n    }, ttl)\n\n    /* istanbul ignore else - affordance for non-node envs */\n    if (t.unref) t.unref()\n\n    this.timerExpiration = expiration\n    this.timer = t\n  }\n\n  // hang onto the timer so we can clearTimeout if all items\n  // are deleted.  Deno doesn't have Timer.unref(), so it\n  // hangs otherwise.\n  cancelTimer() {\n    if (this.timer) {\n      clearTimeout(this.timer)\n      this.timerExpiration = undefined\n      this.timer = undefined\n    }\n  }\n\n  /* istanbul ignore next */\n  cancelTimers() {\n    process.emitWarning(\n      'TTLCache.cancelTimers has been renamed to ' +\n        'TTLCache.cancelTimer (no \"s\"), and will be removed in the next ' +\n        'major version update'\n    )\n    return this.cancelTimer()\n  }\n\n  clear() {\n    const entries =\n      this.dispose !== TTLCache.prototype.dispose ? [...this] : []\n    this.data.clear()\n    this.expirationMap.clear()\n    // no need for any purging now\n    this.cancelTimer()\n    this.expirations = Object.create(null)\n    for (const [key, val] of entries) {\n      this.dispose(val, key, 'delete')\n    }\n  }\n\n  setTTL(key, ttl = this.ttl) {\n    const current = this.expirationMap.get(key)\n    if (current !== undefined) {\n      // remove from the expirations list, so it isn't purged\n      const exp = this.expirations[current]\n      if (!exp || exp.length <= 1) {\n        delete this.expirations[current]\n      } else {\n        this.expirations[current] = exp.filter(k => k !== key)\n      }\n    }\n\n    if (ttl !== Infinity) {\n      const expiration = Math.floor(now() + ttl)\n      this.expirationMap.set(key, expiration)\n      if (!this.expirations[expiration]) {\n        this.expirations[expiration] = []\n        this.setTimer(expiration, ttl)\n      }\n      this.expirations[expiration].push(key)\n    } else {\n      this.expirationMap.set(key, Infinity)\n    }\n  }\n\n  set(\n    key,\n    val,\n    {\n      ttl = this.ttl,\n      noUpdateTTL = this.noUpdateTTL,\n      noDisposeOnSet = this.noDisposeOnSet,\n    } = {}\n  ) {\n    if (!isPosIntOrInf(ttl)) {\n      throw new TypeError('ttl must be positive integer or Infinity')\n    }\n    if (this.expirationMap.has(key)) {\n      if (!noUpdateTTL) {\n        this.setTTL(key, ttl)\n      }\n      // has old value\n      const oldValue = this.data.get(key)\n      if (oldValue !== val) {\n        this.data.set(key, val)\n        if (!noDisposeOnSet) {\n          this.dispose(oldValue, key, 'set')\n        }\n      }\n    } else {\n      this.setTTL(key, ttl)\n      this.data.set(key, val)\n    }\n\n    while (this.size > this.max) {\n      this.purgeToCapacity()\n    }\n\n    return this\n  }\n\n  has(key) {\n    return this.data.has(key)\n  }\n\n  getRemainingTTL(key) {\n    const expiration = this.expirationMap.get(key)\n    return expiration === Infinity\n      ? expiration\n      : expiration !== undefined\n      ? Math.max(0, Math.ceil(expiration - now()))\n      : 0\n  }\n\n  get(\n    key,\n    {\n      updateAgeOnGet = this.updateAgeOnGet,\n      ttl = this.ttl,\n      checkAgeOnGet = this.checkAgeOnGet,\n    } = {}\n  ) {\n    const val = this.data.get(key)\n    if (checkAgeOnGet && this.getRemainingTTL(key) === 0) {\n      this.delete(key)\n      return undefined\n    }\n    if (updateAgeOnGet) {\n      this.setTTL(key, ttl)\n    }\n    return val\n  }\n\n  dispose(_, __) {}\n\n  delete(key) {\n    const current = this.expirationMap.get(key)\n    if (current !== undefined) {\n      const value = this.data.get(key)\n      this.data.delete(key)\n      this.expirationMap.delete(key)\n      const exp = this.expirations[current]\n      if (exp) {\n        if (exp.length <= 1) {\n          delete this.expirations[current]\n        } else {\n          this.expirations[current] = exp.filter(k => k !== key)\n        }\n      }\n      this.dispose(value, key, 'delete')\n      if (this.size === 0) {\n        this.cancelTimer()\n      }\n      return true\n    }\n    return false\n  }\n\n  purgeToCapacity() {\n    for (const exp in this.expirations) {\n      const keys = this.expirations[exp]\n      if (this.size - keys.length >= this.max) {\n        delete this.expirations[exp]\n        const entries = []\n        for (const key of keys) {\n          entries.push([key, this.data.get(key)])\n          this.data.delete(key)\n          this.expirationMap.delete(key)\n        }\n        for (const [key, val] of entries) {\n          this.dispose(val, key, 'evict')\n        }\n      } else {\n        const s = this.size - this.max\n        const entries = []\n        for (const key of keys.splice(0, s)) {\n          entries.push([key, this.data.get(key)])\n          this.data.delete(key)\n          this.expirationMap.delete(key)\n        }\n        for (const [key, val] of entries) {\n          this.dispose(val, key, 'evict')\n        }\n        return\n      }\n    }\n  }\n\n  get size() {\n    return this.data.size\n  }\n\n  purgeStale() {\n    const n = Math.ceil(now())\n    for (const exp in this.expirations) {\n      if (exp === 'Infinity' || exp > n) {\n        return\n      }\n\n      /* istanbul ignore next\n       * mysterious need for a guard here?\n       * https://github.com/isaacs/ttlcache/issues/26 */\n      const keys = [...(this.expirations[exp] || [])]\n      const entries = []\n      delete this.expirations[exp]\n      for (const key of keys) {\n        entries.push([key, this.data.get(key)])\n        this.data.delete(key)\n        this.expirationMap.delete(key)\n      }\n      for (const [key, val] of entries) {\n        this.dispose(val, key, 'stale')\n      }\n    }\n    if (this.size === 0) {\n      this.cancelTimer()\n    }\n  }\n\n  *entries() {\n    for (const exp in this.expirations) {\n      for (const key of this.expirations[exp]) {\n        yield [key, this.data.get(key)]\n      }\n    }\n  }\n  *keys() {\n    for (const exp in this.expirations) {\n      for (const key of this.expirations[exp]) {\n        yield key\n      }\n    }\n  }\n  *values() {\n    for (const exp in this.expirations) {\n      for (const key of this.expirations[exp]) {\n        yield this.data.get(key)\n      }\n    }\n  }\n  [Symbol.iterator]() {\n    return this.entries()\n  }\n}\n\nmodule.exports = TTLCache\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 10551, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 10557, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/parsers/parseAnyOf.js"],"sourcesContent":["import { parseSchema } from \"./parseSchema.js\";\nexport const parseAnyOf = (schema, refs) => {\n    return schema.anyOf.length\n        ? schema.anyOf.length === 1\n            ? parseSchema(schema.anyOf[0], {\n                ...refs,\n                path: [...refs.path, \"anyOf\", 0],\n            })\n            : `z.union([${schema.anyOf\n                .map((schema, i) => parseSchema(schema, { ...refs, path: [...refs.path, \"anyOf\", i] }))\n                .join(\", \")}])`\n        : `z.any()`;\n};\n"],"names":[],"mappings":";;;;AAAA;;AACO,MAAM,aAAa,CAAC,QAAQ;IAC/B,OAAO,OAAO,KAAK,CAAC,MAAM,GACpB,OAAO,KAAK,CAAC,MAAM,KAAK,IACpB,IAAA,qMAAW,EAAC,OAAO,KAAK,CAAC,EAAE,EAAE;QAC3B,GAAG,IAAI;QACP,MAAM;eAAI,KAAK,IAAI;YAAE;YAAS;SAAE;IACpC,KACE,CAAC,SAAS,EAAE,OAAO,KAAK,CACrB,GAAG,CAAC,CAAC,QAAQ,IAAM,IAAA,qMAAW,EAAC,QAAQ;YAAE,GAAG,IAAI;YAAE,MAAM;mBAAI,KAAK,IAAI;gBAAE;gBAAS;aAAE;QAAC,IACnF,IAAI,CAAC,MAAM,EAAE,CAAC,GACrB,CAAC,OAAO,CAAC;AACnB","ignoreList":[0]}},
    {"offset": {"line": 10584, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/parsers/parseBoolean.js"],"sourcesContent":["export const parseBoolean = (_schema) => {\n    return \"z.boolean()\";\n};\n"],"names":[],"mappings":";;;;AAAO,MAAM,eAAe,CAAC;IACzB,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 10595, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/parsers/parseDefault.js"],"sourcesContent":["export const parseDefault = (_schema) => {\n    return \"z.any()\";\n};\n"],"names":[],"mappings":";;;;AAAO,MAAM,eAAe,CAAC;IACzB,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 10606, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/parsers/parseMultipleType.js"],"sourcesContent":["import { parseSchema } from \"./parseSchema.js\";\nexport const parseMultipleType = (schema, refs) => {\n    return `z.union([${schema.type\n        .map((type) => parseSchema({ ...schema, type }, { ...refs, withoutDefaults: true }))\n        .join(\", \")}])`;\n};\n"],"names":[],"mappings":";;;;AAAA;;AACO,MAAM,oBAAoB,CAAC,QAAQ;IACtC,OAAO,CAAC,SAAS,EAAE,OAAO,IAAI,CACzB,GAAG,CAAC,CAAC,OAAS,IAAA,qMAAW,EAAC;YAAE,GAAG,MAAM;YAAE;QAAK,GAAG;YAAE,GAAG,IAAI;YAAE,iBAAiB;QAAK,IAChF,IAAI,CAAC,MAAM,EAAE,CAAC;AACvB","ignoreList":[0]}},
    {"offset": {"line": 10625, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/parsers/parseNot.js"],"sourcesContent":["import { parseSchema } from \"./parseSchema.js\";\nexport const parseNot = (schema, refs) => {\n    return `z.any().refine((value) => !${parseSchema(schema.not, {\n        ...refs,\n        path: [...refs.path, \"not\"],\n    })}.safeParse(value).success, \"Invalid input: Should NOT be valid against schema\")`;\n};\n"],"names":[],"mappings":";;;;AAAA;;AACO,MAAM,WAAW,CAAC,QAAQ;IAC7B,OAAO,CAAC,2BAA2B,EAAE,IAAA,qMAAW,EAAC,OAAO,GAAG,EAAE;QACzD,GAAG,IAAI;QACP,MAAM;eAAI,KAAK,IAAI;YAAE;SAAM;IAC/B,GAAG,+EAA+E,CAAC;AACvF","ignoreList":[0]}},
    {"offset": {"line": 10644, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/parsers/parseNull.js"],"sourcesContent":["export const parseNull = (_schema) => {\n    return \"z.null()\";\n};\n"],"names":[],"mappings":";;;;AAAO,MAAM,YAAY,CAAC;IACtB,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 10655, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/utils/half.js"],"sourcesContent":["export const half = (arr) => {\n    return [arr.slice(0, arr.length / 2), arr.slice(arr.length / 2)];\n};\n"],"names":[],"mappings":";;;;AAAO,MAAM,OAAO,CAAC;IACjB,OAAO;QAAC,IAAI,KAAK,CAAC,GAAG,IAAI,MAAM,GAAG;QAAI,IAAI,KAAK,CAAC,IAAI,MAAM,GAAG;KAAG;AACpE","ignoreList":[0]}},
    {"offset": {"line": 10669, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/parsers/parseAllOf.js"],"sourcesContent":["import { parseSchema } from \"./parseSchema.js\";\nimport { half } from \"../utils/half.js\";\nconst originalIndex = Symbol(\"Original index\");\nconst ensureOriginalIndex = (arr) => {\n    let newArr = [];\n    for (let i = 0; i < arr.length; i++) {\n        const item = arr[i];\n        if (typeof item === \"boolean\") {\n            newArr.push(item ? { [originalIndex]: i } : { [originalIndex]: i, not: {} });\n        }\n        else if (originalIndex in item) {\n            return arr;\n        }\n        else {\n            newArr.push({ ...item, [originalIndex]: i });\n        }\n    }\n    return newArr;\n};\nexport function parseAllOf(schema, refs) {\n    if (schema.allOf.length === 0) {\n        return \"z.never()\";\n    }\n    else if (schema.allOf.length === 1) {\n        const item = schema.allOf[0];\n        return parseSchema(item, {\n            ...refs,\n            path: [...refs.path, \"allOf\", item[originalIndex]],\n        });\n    }\n    else {\n        const [left, right] = half(ensureOriginalIndex(schema.allOf));\n        return `z.intersection(${parseAllOf({ allOf: left }, refs)}, ${parseAllOf({\n            allOf: right,\n        }, refs)})`;\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AACA,MAAM,gBAAgB,OAAO;AAC7B,MAAM,sBAAsB,CAAC;IACzB,IAAI,SAAS,EAAE;IACf,IAAK,IAAI,IAAI,GAAG,IAAI,IAAI,MAAM,EAAE,IAAK;QACjC,MAAM,OAAO,GAAG,CAAC,EAAE;QACnB,IAAI,OAAO,SAAS,WAAW;YAC3B,OAAO,IAAI,CAAC,OAAO;gBAAE,CAAC,cAAc,EAAE;YAAE,IAAI;gBAAE,CAAC,cAAc,EAAE;gBAAG,KAAK,CAAC;YAAE;QAC9E,OACK,IAAI,iBAAiB,MAAM;YAC5B,OAAO;QACX,OACK;YACD,OAAO,IAAI,CAAC;gBAAE,GAAG,IAAI;gBAAE,CAAC,cAAc,EAAE;YAAE;QAC9C;IACJ;IACA,OAAO;AACX;AACO,SAAS,WAAW,MAAM,EAAE,IAAI;IACnC,IAAI,OAAO,KAAK,CAAC,MAAM,KAAK,GAAG;QAC3B,OAAO;IACX,OACK,IAAI,OAAO,KAAK,CAAC,MAAM,KAAK,GAAG;QAChC,MAAM,OAAO,OAAO,KAAK,CAAC,EAAE;QAC5B,OAAO,IAAA,qMAAW,EAAC,MAAM;YACrB,GAAG,IAAI;YACP,MAAM;mBAAI,KAAK,IAAI;gBAAE;gBAAS,IAAI,CAAC,cAAc;aAAC;QACtD;IACJ,OACK;QACD,MAAM,CAAC,MAAM,MAAM,GAAG,IAAA,qLAAI,EAAC,oBAAoB,OAAO,KAAK;QAC3D,OAAO,CAAC,eAAe,EAAE,WAAW;YAAE,OAAO;QAAK,GAAG,MAAM,EAAE,EAAE,WAAW;YACtE,OAAO;QACX,GAAG,MAAM,CAAC,CAAC;IACf;AACJ","ignoreList":[0]}},
    {"offset": {"line": 10726, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/utils/withMessage.js"],"sourcesContent":["export function withMessage(schema, key, get) {\n    const value = schema[key];\n    let r = \"\";\n    if (value !== undefined) {\n        const got = get({ value, json: JSON.stringify(value) });\n        if (got) {\n            const opener = got[0];\n            const prefix = got.length === 3 ? got[1] : \"\";\n            const closer = got.length === 3 ? got[2] : got[1];\n            r += opener;\n            if (schema.errorMessage?.[key] !== undefined) {\n                r += prefix + JSON.stringify(schema.errorMessage[key]);\n            }\n            r;\n            r += closer;\n        }\n    }\n    return r;\n}\n"],"names":[],"mappings":";;;;AAAO,SAAS,YAAY,MAAM,EAAE,GAAG,EAAE,GAAG;IACxC,MAAM,QAAQ,MAAM,CAAC,IAAI;IACzB,IAAI,IAAI;IACR,IAAI,UAAU,WAAW;QACrB,MAAM,MAAM,IAAI;YAAE;YAAO,MAAM,KAAK,SAAS,CAAC;QAAO;QACrD,IAAI,KAAK;YACL,MAAM,SAAS,GAAG,CAAC,EAAE;YACrB,MAAM,SAAS,IAAI,MAAM,KAAK,IAAI,GAAG,CAAC,EAAE,GAAG;YAC3C,MAAM,SAAS,IAAI,MAAM,KAAK,IAAI,GAAG,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE;YACjD,KAAK;YACL,IAAI,OAAO,YAAY,EAAE,CAAC,IAAI,KAAK,WAAW;gBAC1C,KAAK,SAAS,KAAK,SAAS,CAAC,OAAO,YAAY,CAAC,IAAI;YACzD;YACA;YACA,KAAK;QACT;IACJ;IACA,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 10756, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/parsers/parseArray.js"],"sourcesContent":["import { withMessage } from \"../utils/withMessage.js\";\nimport { parseSchema } from \"./parseSchema.js\";\nexport const parseArray = (schema, refs) => {\n    if (Array.isArray(schema.items)) {\n        return `z.tuple([${schema.items.map((v, i) => parseSchema(v, { ...refs, path: [...refs.path, \"items\", i] }))}])`;\n    }\n    let r = !schema.items\n        ? \"z.array(z.any())\"\n        : `z.array(${parseSchema(schema.items, {\n            ...refs,\n            path: [...refs.path, \"items\"],\n        })})`;\n    r += withMessage(schema, \"minItems\", ({ json }) => [\n        `.min(${json}`,\n        \", \",\n        \")\",\n    ]);\n    r += withMessage(schema, \"maxItems\", ({ json }) => [\n        `.max(${json}`,\n        \", \",\n        \")\",\n    ]);\n    if (schema.uniqueItems === true) {\n        r += withMessage(schema, \"uniqueItems\", () => [\n            \".unique(\",\n            \"\",\n            \")\",\n        ]);\n    }\n    return r;\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AACO,MAAM,aAAa,CAAC,QAAQ;IAC/B,IAAI,MAAM,OAAO,CAAC,OAAO,KAAK,GAAG;QAC7B,OAAO,CAAC,SAAS,EAAE,OAAO,KAAK,CAAC,GAAG,CAAC,CAAC,GAAG,IAAM,IAAA,qMAAW,EAAC,GAAG;gBAAE,GAAG,IAAI;gBAAE,MAAM;uBAAI,KAAK,IAAI;oBAAE;oBAAS;iBAAE;YAAC,IAAI,EAAE,CAAC;IACpH;IACA,IAAI,IAAI,CAAC,OAAO,KAAK,GACf,qBACA,CAAC,QAAQ,EAAE,IAAA,qMAAW,EAAC,OAAO,KAAK,EAAE;QACnC,GAAG,IAAI;QACP,MAAM;eAAI,KAAK,IAAI;YAAE;SAAQ;IACjC,GAAG,CAAC,CAAC;IACT,KAAK,IAAA,mMAAW,EAAC,QAAQ,YAAY,CAAC,EAAE,IAAI,EAAE,GAAK;YAC/C,CAAC,KAAK,EAAE,MAAM;YACd;YACA;SACH;IACD,KAAK,IAAA,mMAAW,EAAC,QAAQ,YAAY,CAAC,EAAE,IAAI,EAAE,GAAK;YAC/C,CAAC,KAAK,EAAE,MAAM;YACd;YACA;SACH;IACD,IAAI,OAAO,WAAW,KAAK,MAAM;QAC7B,KAAK,IAAA,mMAAW,EAAC,QAAQ,eAAe,IAAM;gBAC1C;gBACA;gBACA;aACH;IACL;IACA,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 10805, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/parsers/parseConst.js"],"sourcesContent":["export const parseConst = (schema) => {\n    return `z.literal(${JSON.stringify(schema.const)})`;\n};\n"],"names":[],"mappings":";;;;AAAO,MAAM,aAAa,CAAC;IACvB,OAAO,CAAC,UAAU,EAAE,KAAK,SAAS,CAAC,OAAO,KAAK,EAAE,CAAC,CAAC;AACvD","ignoreList":[0]}},
    {"offset": {"line": 10816, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/parsers/parseEnum.js"],"sourcesContent":["export const parseEnum = (schema) => {\n    if (schema.enum.length === 0) {\n        return \"z.never()\";\n    }\n    else if (schema.enum.length === 1) {\n        // union does not work when there is only one element\n        return `z.literal(${JSON.stringify(schema.enum[0])})`;\n    }\n    else if (schema.enum.every((x) => typeof x === \"string\")) {\n        return `z.enum([${schema.enum.map((x) => JSON.stringify(x))}])`;\n    }\n    else {\n        return `z.union([${schema.enum\n            .map((x) => `z.literal(${JSON.stringify(x)})`)\n            .join(\", \")}])`;\n    }\n};\n"],"names":[],"mappings":";;;;AAAO,MAAM,YAAY,CAAC;IACtB,IAAI,OAAO,IAAI,CAAC,MAAM,KAAK,GAAG;QAC1B,OAAO;IACX,OACK,IAAI,OAAO,IAAI,CAAC,MAAM,KAAK,GAAG;QAC/B,qDAAqD;QACrD,OAAO,CAAC,UAAU,EAAE,KAAK,SAAS,CAAC,OAAO,IAAI,CAAC,EAAE,EAAE,CAAC,CAAC;IACzD,OACK,IAAI,OAAO,IAAI,CAAC,KAAK,CAAC,CAAC,IAAM,OAAO,MAAM,WAAW;QACtD,OAAO,CAAC,QAAQ,EAAE,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC,IAAM,KAAK,SAAS,CAAC,IAAI,EAAE,CAAC;IACnE,OACK;QACD,OAAO,CAAC,SAAS,EAAE,OAAO,IAAI,CACzB,GAAG,CAAC,CAAC,IAAM,CAAC,UAAU,EAAE,KAAK,SAAS,CAAC,GAAG,CAAC,CAAC,EAC5C,IAAI,CAAC,MAAM,EAAE,CAAC;IACvB;AACJ","ignoreList":[0]}},
    {"offset": {"line": 10836, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/parsers/parseIfThenElse.js"],"sourcesContent":["import { parseSchema } from \"./parseSchema.js\";\nexport const parseIfThenElse = (schema, refs) => {\n    const $if = parseSchema(schema.if, { ...refs, path: [...refs.path, \"if\"] });\n    const $then = parseSchema(schema.then, {\n        ...refs,\n        path: [...refs.path, \"then\"],\n    });\n    const $else = parseSchema(schema.else, {\n        ...refs,\n        path: [...refs.path, \"else\"],\n    });\n    return `z.union([${$then}, ${$else}]).superRefine((value,ctx) => {\n  const result = ${$if}.safeParse(value).success\n    ? ${$then}.safeParse(value)\n    : ${$else}.safeParse(value);\n  if (!result.success) {\n    result.error.errors.forEach((error) => ctx.addIssue(error))\n  }\n})`;\n};\n"],"names":[],"mappings":";;;;AAAA;;AACO,MAAM,kBAAkB,CAAC,QAAQ;IACpC,MAAM,MAAM,IAAA,qMAAW,EAAC,OAAO,EAAE,EAAE;QAAE,GAAG,IAAI;QAAE,MAAM;eAAI,KAAK,IAAI;YAAE;SAAK;IAAC;IACzE,MAAM,QAAQ,IAAA,qMAAW,EAAC,OAAO,IAAI,EAAE;QACnC,GAAG,IAAI;QACP,MAAM;eAAI,KAAK,IAAI;YAAE;SAAO;IAChC;IACA,MAAM,QAAQ,IAAA,qMAAW,EAAC,OAAO,IAAI,EAAE;QACnC,GAAG,IAAI;QACP,MAAM;eAAI,KAAK,IAAI;YAAE;SAAO;IAChC;IACA,OAAO,CAAC,SAAS,EAAE,MAAM,EAAE,EAAE,MAAM;iBACtB,EAAE,IAAI;MACjB,EAAE,MAAM;MACR,EAAE,MAAM;;;;EAIZ,CAAC;AACH","ignoreList":[0]}},
    {"offset": {"line": 10877, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/parsers/parseNumber.js"],"sourcesContent":["import { withMessage } from \"../utils/withMessage.js\";\nexport const parseNumber = (schema) => {\n    let r = \"z.number()\";\n    if (schema.type === \"integer\") {\n        r += withMessage(schema, \"type\", () => [\".int(\", \")\"]);\n    }\n    else {\n        r += withMessage(schema, \"format\", ({ value }) => {\n            if (value === \"int64\") {\n                return [\".int(\", \")\"];\n            }\n        });\n    }\n    r += withMessage(schema, \"multipleOf\", ({ value, json }) => {\n        if (value === 1) {\n            if (r.startsWith(\"z.number().int(\")) {\n                return;\n            }\n            return [\".int(\", \")\"];\n        }\n        return [`.multipleOf(${json}`, \", \", \")\"];\n    });\n    if (typeof schema.minimum === \"number\") {\n        if (schema.exclusiveMinimum === true) {\n            r += withMessage(schema, \"minimum\", ({ json }) => [\n                `.gt(${json}`,\n                \", \",\n                \")\",\n            ]);\n        }\n        else {\n            r += withMessage(schema, \"minimum\", ({ json }) => [\n                `.gte(${json}`,\n                \", \",\n                \")\",\n            ]);\n        }\n    }\n    else if (typeof schema.exclusiveMinimum === \"number\") {\n        r += withMessage(schema, \"exclusiveMinimum\", ({ json }) => [\n            `.gt(${json}`,\n            \", \",\n            \")\",\n        ]);\n    }\n    if (typeof schema.maximum === \"number\") {\n        if (schema.exclusiveMaximum === true) {\n            r += withMessage(schema, \"maximum\", ({ json }) => [\n                `.lt(${json}`,\n                \", \",\n                \")\",\n            ]);\n        }\n        else {\n            r += withMessage(schema, \"maximum\", ({ json }) => [\n                `.lte(${json}`,\n                \", \",\n                \")\",\n            ]);\n        }\n    }\n    else if (typeof schema.exclusiveMaximum === \"number\") {\n        r += withMessage(schema, \"exclusiveMaximum\", ({ json }) => [\n            `.lt(${json}`,\n            \", \",\n            \")\",\n        ]);\n    }\n    return r;\n};\n"],"names":[],"mappings":";;;;AAAA;;AACO,MAAM,cAAc,CAAC;IACxB,IAAI,IAAI;IACR,IAAI,OAAO,IAAI,KAAK,WAAW;QAC3B,KAAK,IAAA,mMAAW,EAAC,QAAQ,QAAQ,IAAM;gBAAC;gBAAS;aAAI;IACzD,OACK;QACD,KAAK,IAAA,mMAAW,EAAC,QAAQ,UAAU,CAAC,EAAE,KAAK,EAAE;YACzC,IAAI,UAAU,SAAS;gBACnB,OAAO;oBAAC;oBAAS;iBAAI;YACzB;QACJ;IACJ;IACA,KAAK,IAAA,mMAAW,EAAC,QAAQ,cAAc,CAAC,EAAE,KAAK,EAAE,IAAI,EAAE;QACnD,IAAI,UAAU,GAAG;YACb,IAAI,EAAE,UAAU,CAAC,oBAAoB;gBACjC;YACJ;YACA,OAAO;gBAAC;gBAAS;aAAI;QACzB;QACA,OAAO;YAAC,CAAC,YAAY,EAAE,MAAM;YAAE;YAAM;SAAI;IAC7C;IACA,IAAI,OAAO,OAAO,OAAO,KAAK,UAAU;QACpC,IAAI,OAAO,gBAAgB,KAAK,MAAM;YAClC,KAAK,IAAA,mMAAW,EAAC,QAAQ,WAAW,CAAC,EAAE,IAAI,EAAE,GAAK;oBAC9C,CAAC,IAAI,EAAE,MAAM;oBACb;oBACA;iBACH;QACL,OACK;YACD,KAAK,IAAA,mMAAW,EAAC,QAAQ,WAAW,CAAC,EAAE,IAAI,EAAE,GAAK;oBAC9C,CAAC,KAAK,EAAE,MAAM;oBACd;oBACA;iBACH;QACL;IACJ,OACK,IAAI,OAAO,OAAO,gBAAgB,KAAK,UAAU;QAClD,KAAK,IAAA,mMAAW,EAAC,QAAQ,oBAAoB,CAAC,EAAE,IAAI,EAAE,GAAK;gBACvD,CAAC,IAAI,EAAE,MAAM;gBACb;gBACA;aACH;IACL;IACA,IAAI,OAAO,OAAO,OAAO,KAAK,UAAU;QACpC,IAAI,OAAO,gBAAgB,KAAK,MAAM;YAClC,KAAK,IAAA,mMAAW,EAAC,QAAQ,WAAW,CAAC,EAAE,IAAI,EAAE,GAAK;oBAC9C,CAAC,IAAI,EAAE,MAAM;oBACb;oBACA;iBACH;QACL,OACK;YACD,KAAK,IAAA,mMAAW,EAAC,QAAQ,WAAW,CAAC,EAAE,IAAI,EAAE,GAAK;oBAC9C,CAAC,KAAK,EAAE,MAAM;oBACd;oBACA;iBACH;QACL;IACJ,OACK,IAAI,OAAO,OAAO,gBAAgB,KAAK,UAAU;QAClD,KAAK,IAAA,mMAAW,EAAC,QAAQ,oBAAoB,CAAC,EAAE,IAAI,EAAE,GAAK;gBACvD,CAAC,IAAI,EAAE,MAAM;gBACb;gBACA;aACH;IACL;IACA,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 10964, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/parsers/parseOneOf.js"],"sourcesContent":["import { parseSchema } from \"./parseSchema.js\";\nexport const parseOneOf = (schema, refs) => {\n    return schema.oneOf.length\n        ? schema.oneOf.length === 1\n            ? parseSchema(schema.oneOf[0], {\n                ...refs,\n                path: [...refs.path, \"oneOf\", 0],\n            })\n            : `z.any().superRefine((x, ctx) => {\n    const schemas = [${schema.oneOf\n                .map((schema, i) => parseSchema(schema, {\n                ...refs,\n                path: [...refs.path, \"oneOf\", i],\n            }))\n                .join(\", \")}];\n    const errors = schemas.reduce<z.ZodError[]>(\n      (errors, schema) =>\n        ((result) =>\n          result.error ? [...errors, result.error] : errors)(\n          schema.safeParse(x),\n        ),\n      [],\n    );\n    if (schemas.length - errors.length !== 1) {\n      ctx.addIssue({\n        path: ctx.path,\n        code: \"invalid_union\",\n        unionErrors: errors,\n        message: \"Invalid input: Should pass single schema\",\n      });\n    }\n  })`\n        : \"z.any()\";\n};\n"],"names":[],"mappings":";;;;AAAA;;AACO,MAAM,aAAa,CAAC,QAAQ;IAC/B,OAAO,OAAO,KAAK,CAAC,MAAM,GACpB,OAAO,KAAK,CAAC,MAAM,KAAK,IACpB,IAAA,qMAAW,EAAC,OAAO,KAAK,CAAC,EAAE,EAAE;QAC3B,GAAG,IAAI;QACP,MAAM;eAAI,KAAK,IAAI;YAAE;YAAS;SAAE;IACpC,KACE,CAAC;qBACM,EAAE,OAAO,KAAK,CAClB,GAAG,CAAC,CAAC,QAAQ,IAAM,IAAA,qMAAW,EAAC,QAAQ;YACxC,GAAG,IAAI;YACP,MAAM;mBAAI,KAAK,IAAI;gBAAE;gBAAS;aAAE;QACpC,IACK,IAAI,CAAC,MAAM;;;;;;;;;;;;;;;;;IAiBxB,CAAC,GACK;AACV","ignoreList":[0]}},
    {"offset": {"line": 11009, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/utils/jsdocs.js"],"sourcesContent":["export const expandJsdocs = (jsdocs) => {\n    const lines = jsdocs.split(\"\\n\");\n    const result = lines.length === 1\n        ? lines[0]\n        : `\\n${lines.map(x => `* ${x}`)\n            .join(\"\\n\")}\\n`;\n    return `/**${result}*/\\n`;\n};\nexport const addJsdocs = (schema, parsed) => {\n    const description = schema.description;\n    if (!description) {\n        return parsed;\n    }\n    return `\\n${expandJsdocs(description)}${parsed}`;\n};\n"],"names":[],"mappings":";;;;;;AAAO,MAAM,eAAe,CAAC;IACzB,MAAM,QAAQ,OAAO,KAAK,CAAC;IAC3B,MAAM,SAAS,MAAM,MAAM,KAAK,IAC1B,KAAK,CAAC,EAAE,GACR,CAAC,EAAE,EAAE,MAAM,GAAG,CAAC,CAAA,IAAK,CAAC,EAAE,EAAE,GAAG,EACzB,IAAI,CAAC,MAAM,EAAE,CAAC;IACvB,OAAO,CAAC,GAAG,EAAE,OAAO,IAAI,CAAC;AAC7B;AACO,MAAM,YAAY,CAAC,QAAQ;IAC9B,MAAM,cAAc,OAAO,WAAW;IACtC,IAAI,CAAC,aAAa;QACd,OAAO;IACX;IACA,OAAO,CAAC,EAAE,EAAE,aAAa,eAAe,QAAQ;AACpD","ignoreList":[0]}},
    {"offset": {"line": 11031, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/parsers/parseObject.js"],"sourcesContent":["import { parseAnyOf } from \"./parseAnyOf.js\";\nimport { parseOneOf } from \"./parseOneOf.js\";\nimport { its, parseSchema } from \"./parseSchema.js\";\nimport { parseAllOf } from \"./parseAllOf.js\";\nimport { addJsdocs } from \"../utils/jsdocs.js\";\nexport function parseObject(objectSchema, refs) {\n    let properties = undefined;\n    if (objectSchema.properties) {\n        if (!Object.keys(objectSchema.properties).length) {\n            properties = \"z.object({})\";\n        }\n        else {\n            properties = \"z.object({ \";\n            properties += Object.keys(objectSchema.properties)\n                .map((key) => {\n                const propSchema = objectSchema.properties[key];\n                let result = `${JSON.stringify(key)}: ${parseSchema(propSchema, {\n                    ...refs,\n                    path: [...refs.path, \"properties\", key],\n                })}`;\n                if (refs.withJsdocs && typeof propSchema === \"object\") {\n                    result = addJsdocs(propSchema, result);\n                }\n                const hasDefault = typeof propSchema === \"object\" && propSchema.default !== undefined;\n                const required = Array.isArray(objectSchema.required)\n                    ? objectSchema.required.includes(key)\n                    : typeof propSchema === \"object\" && propSchema.required === true;\n                const optional = !hasDefault && !required;\n                return optional ? `${result}.optional()` : result;\n            })\n                .join(\", \");\n            properties += \" })\";\n        }\n    }\n    const additionalProperties = objectSchema.additionalProperties !== undefined\n        ? parseSchema(objectSchema.additionalProperties, {\n            ...refs,\n            path: [...refs.path, \"additionalProperties\"],\n        })\n        : undefined;\n    let patternProperties = undefined;\n    if (objectSchema.patternProperties) {\n        const parsedPatternProperties = Object.fromEntries(Object.entries(objectSchema.patternProperties).map(([key, value]) => {\n            return [\n                key,\n                parseSchema(value, {\n                    ...refs,\n                    path: [...refs.path, \"patternProperties\", key],\n                }),\n            ];\n        }, {}));\n        patternProperties = \"\";\n        if (properties) {\n            if (additionalProperties) {\n                patternProperties += `.catchall(z.union([${[\n                    ...Object.values(parsedPatternProperties),\n                    additionalProperties,\n                ].join(\", \")}]))`;\n            }\n            else if (Object.keys(parsedPatternProperties).length > 1) {\n                patternProperties += `.catchall(z.union([${Object.values(parsedPatternProperties).join(\", \")}]))`;\n            }\n            else {\n                patternProperties += `.catchall(${Object.values(parsedPatternProperties)})`;\n            }\n        }\n        else {\n            if (additionalProperties) {\n                patternProperties += `z.record(z.union([${[\n                    ...Object.values(parsedPatternProperties),\n                    additionalProperties,\n                ].join(\", \")}]))`;\n            }\n            else if (Object.keys(parsedPatternProperties).length > 1) {\n                patternProperties += `z.record(z.union([${Object.values(parsedPatternProperties).join(\", \")}]))`;\n            }\n            else {\n                patternProperties += `z.record(${Object.values(parsedPatternProperties)})`;\n            }\n        }\n        patternProperties += \".superRefine((value, ctx) => {\\n\";\n        patternProperties += \"for (const key in value) {\\n\";\n        if (additionalProperties) {\n            if (objectSchema.properties) {\n                patternProperties += `let evaluated = [${Object.keys(objectSchema.properties)\n                    .map((key) => JSON.stringify(key))\n                    .join(\", \")}].includes(key)\\n`;\n            }\n            else {\n                patternProperties += `let evaluated = false\\n`;\n            }\n        }\n        for (const key in objectSchema.patternProperties) {\n            patternProperties +=\n                \"if (key.match(new RegExp(\" + JSON.stringify(key) + \"))) {\\n\";\n            if (additionalProperties) {\n                patternProperties += \"evaluated = true\\n\";\n            }\n            patternProperties +=\n                \"const result = \" +\n                    parsedPatternProperties[key] +\n                    \".safeParse(value[key])\\n\";\n            patternProperties += \"if (!result.success) {\\n\";\n            patternProperties += `ctx.addIssue({\n          path: [...ctx.path, key],\n          code: 'custom',\n          message: \\`Invalid input: Key matching regex /\\${key}/ must match schema\\`,\n          params: {\n            issues: result.error.issues\n          }\n        })\\n`;\n            patternProperties += \"}\\n\";\n            patternProperties += \"}\\n\";\n        }\n        if (additionalProperties) {\n            patternProperties += \"if (!evaluated) {\\n\";\n            patternProperties +=\n                \"const result = \" + additionalProperties + \".safeParse(value[key])\\n\";\n            patternProperties += \"if (!result.success) {\\n\";\n            patternProperties += `ctx.addIssue({\n          path: [...ctx.path, key],\n          code: 'custom',\n          message: \\`Invalid input: must match catchall schema\\`,\n          params: {\n            issues: result.error.issues\n          }\n        })\\n`;\n            patternProperties += \"}\\n\";\n            patternProperties += \"}\\n\";\n        }\n        patternProperties += \"}\\n\";\n        patternProperties += \"})\";\n    }\n    let output = properties\n        ? patternProperties\n            ? properties + patternProperties\n            : additionalProperties\n                ? additionalProperties === \"z.never()\"\n                    ? properties + \".strict()\"\n                    : properties + `.catchall(${additionalProperties})`\n                : properties\n        : patternProperties\n            ? patternProperties\n            : additionalProperties\n                ? `z.record(${additionalProperties})`\n                : \"z.record(z.any())\";\n    if (its.an.anyOf(objectSchema)) {\n        output += `.and(${parseAnyOf({\n            ...objectSchema,\n            anyOf: objectSchema.anyOf.map((x) => typeof x === \"object\" &&\n                !x.type &&\n                (x.properties || x.additionalProperties || x.patternProperties)\n                ? { ...x, type: \"object\" }\n                : x),\n        }, refs)})`;\n    }\n    if (its.a.oneOf(objectSchema)) {\n        output += `.and(${parseOneOf({\n            ...objectSchema,\n            oneOf: objectSchema.oneOf.map((x) => typeof x === \"object\" &&\n                !x.type &&\n                (x.properties || x.additionalProperties || x.patternProperties)\n                ? { ...x, type: \"object\" }\n                : x),\n        }, refs)})`;\n    }\n    if (its.an.allOf(objectSchema)) {\n        output += `.and(${parseAllOf({\n            ...objectSchema,\n            allOf: objectSchema.allOf.map((x) => typeof x === \"object\" &&\n                !x.type &&\n                (x.properties || x.additionalProperties || x.patternProperties)\n                ? { ...x, type: \"object\" }\n                : x),\n        }, refs)})`;\n    }\n    return output;\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 11198, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/parsers/parseString.js"],"sourcesContent":["import { withMessage } from \"../utils/withMessage.js\";\nimport { parseSchema } from \"./parseSchema.js\";\nexport const parseString = (schema) => {\n    let r = \"z.string()\";\n    r += withMessage(schema, \"format\", ({ value }) => {\n        switch (value) {\n            case \"email\":\n                return [\".email(\", \")\"];\n            case \"ip\":\n                return [\".ip(\", \")\"];\n            case \"ipv4\":\n                return ['.ip({ version: \"v4\"', \", message: \", \" })\"];\n            case \"ipv6\":\n                return ['.ip({ version: \"v6\"', \", message: \", \" })\"];\n            case \"uri\":\n                return [\".url(\", \")\"];\n            case \"uuid\":\n                return [\".uuid(\", \")\"];\n            case \"date-time\":\n                return [\".datetime({ offset: true\", \", message: \", \" })\"];\n            case \"time\":\n                return [\".time(\", \")\"];\n            case \"date\":\n                return [\".date(\", \")\"];\n            case \"binary\":\n                return [\".base64(\", \")\"];\n            case \"duration\":\n                return [\".duration(\", \")\"];\n        }\n    });\n    r += withMessage(schema, \"pattern\", ({ json }) => [\n        `.regex(new RegExp(${json})`,\n        \", \",\n        \")\",\n    ]);\n    r += withMessage(schema, \"minLength\", ({ json }) => [\n        `.min(${json}`,\n        \", \",\n        \")\",\n    ]);\n    r += withMessage(schema, \"maxLength\", ({ json }) => [\n        `.max(${json}`,\n        \", \",\n        \")\",\n    ]);\n    r += withMessage(schema, \"contentEncoding\", ({ value }) => {\n        if (value === \"base64\") {\n            return [\".base64(\", \")\"];\n        }\n    });\n    const contentMediaType = withMessage(schema, \"contentMediaType\", ({ value }) => {\n        if (value === \"application/json\") {\n            return [\n                \".transform((str, ctx) => { try { return JSON.parse(str); } catch (err) { ctx.addIssue({ code: \\\"custom\\\", message: \\\"Invalid JSON\\\" }); }}\",\n                \", \",\n                \")\"\n            ];\n        }\n    });\n    if (contentMediaType != \"\") {\n        r += contentMediaType;\n        r += withMessage(schema, \"contentSchema\", ({ value }) => {\n            if (value && value instanceof Object) {\n                return [\n                    `.pipe(${parseSchema(value)}`,\n                    \", \",\n                    \")\"\n                ];\n            }\n        });\n    }\n    return r;\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AACO,MAAM,cAAc,CAAC;IACxB,IAAI,IAAI;IACR,KAAK,IAAA,mMAAW,EAAC,QAAQ,UAAU,CAAC,EAAE,KAAK,EAAE;QACzC,OAAQ;YACJ,KAAK;gBACD,OAAO;oBAAC;oBAAW;iBAAI;YAC3B,KAAK;gBACD,OAAO;oBAAC;oBAAQ;iBAAI;YACxB,KAAK;gBACD,OAAO;oBAAC;oBAAuB;oBAAe;iBAAM;YACxD,KAAK;gBACD,OAAO;oBAAC;oBAAuB;oBAAe;iBAAM;YACxD,KAAK;gBACD,OAAO;oBAAC;oBAAS;iBAAI;YACzB,KAAK;gBACD,OAAO;oBAAC;oBAAU;iBAAI;YAC1B,KAAK;gBACD,OAAO;oBAAC;oBAA4B;oBAAe;iBAAM;YAC7D,KAAK;gBACD,OAAO;oBAAC;oBAAU;iBAAI;YAC1B,KAAK;gBACD,OAAO;oBAAC;oBAAU;iBAAI;YAC1B,KAAK;gBACD,OAAO;oBAAC;oBAAY;iBAAI;YAC5B,KAAK;gBACD,OAAO;oBAAC;oBAAc;iBAAI;QAClC;IACJ;IACA,KAAK,IAAA,mMAAW,EAAC,QAAQ,WAAW,CAAC,EAAE,IAAI,EAAE,GAAK;YAC9C,CAAC,kBAAkB,EAAE,KAAK,CAAC,CAAC;YAC5B;YACA;SACH;IACD,KAAK,IAAA,mMAAW,EAAC,QAAQ,aAAa,CAAC,EAAE,IAAI,EAAE,GAAK;YAChD,CAAC,KAAK,EAAE,MAAM;YACd;YACA;SACH;IACD,KAAK,IAAA,mMAAW,EAAC,QAAQ,aAAa,CAAC,EAAE,IAAI,EAAE,GAAK;YAChD,CAAC,KAAK,EAAE,MAAM;YACd;YACA;SACH;IACD,KAAK,IAAA,mMAAW,EAAC,QAAQ,mBAAmB,CAAC,EAAE,KAAK,EAAE;QAClD,IAAI,UAAU,UAAU;YACpB,OAAO;gBAAC;gBAAY;aAAI;QAC5B;IACJ;IACA,MAAM,mBAAmB,IAAA,mMAAW,EAAC,QAAQ,oBAAoB,CAAC,EAAE,KAAK,EAAE;QACvE,IAAI,UAAU,oBAAoB;YAC9B,OAAO;gBACH;gBACA;gBACA;aACH;QACL;IACJ;IACA,IAAI,oBAAoB,IAAI;QACxB,KAAK;QACL,KAAK,IAAA,mMAAW,EAAC,QAAQ,iBAAiB,CAAC,EAAE,KAAK,EAAE;YAChD,IAAI,SAAS,iBAAiB,QAAQ;gBAClC,OAAO;oBACH,CAAC,MAAM,EAAE,IAAA,qMAAW,EAAC,QAAQ;oBAC7B;oBACA;iBACH;YACL;QACJ;IACJ;IACA,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 11320, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/parsers/parseSimpleDiscriminatedOneOf.js"],"sourcesContent":["import { parseSchema } from \"./parseSchema.js\";\nexport const parseSimpleDiscriminatedOneOf = (schema, refs) => {\n    return schema.oneOf.length\n        ? schema.oneOf.length === 1\n            ? parseSchema(schema.oneOf[0], {\n                ...refs,\n                path: [...refs.path, \"oneOf\", 0],\n            })\n            : `z.discriminatedUnion(\"${schema.discriminator.propertyName}\", [${schema.oneOf\n                .map((schema, i) => parseSchema(schema, {\n                ...refs,\n                path: [...refs.path, \"oneOf\", i],\n            }))\n                .join(\", \")}])`\n        : \"z.any()\";\n};\n"],"names":[],"mappings":";;;;AAAA;;AACO,MAAM,gCAAgC,CAAC,QAAQ;IAClD,OAAO,OAAO,KAAK,CAAC,MAAM,GACpB,OAAO,KAAK,CAAC,MAAM,KAAK,IACpB,IAAA,qMAAW,EAAC,OAAO,KAAK,CAAC,EAAE,EAAE;QAC3B,GAAG,IAAI;QACP,MAAM;eAAI,KAAK,IAAI;YAAE;YAAS;SAAE;IACpC,KACE,CAAC,sBAAsB,EAAE,OAAO,aAAa,CAAC,YAAY,CAAC,IAAI,EAAE,OAAO,KAAK,CAC1E,GAAG,CAAC,CAAC,QAAQ,IAAM,IAAA,qMAAW,EAAC,QAAQ;YACxC,GAAG,IAAI;YACP,MAAM;mBAAI,KAAK,IAAI;gBAAE;gBAAS;aAAE;QACpC,IACK,IAAI,CAAC,MAAM,EAAE,CAAC,GACrB;AACV","ignoreList":[0]}},
    {"offset": {"line": 11347, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/utils/omit.js"],"sourcesContent":["export const omit = (obj, ...keys) => Object.keys(obj).reduce((acc, key) => {\n    if (!keys.includes(key)) {\n        acc[key] = obj[key];\n    }\n    return acc;\n}, {});\n"],"names":[],"mappings":";;;;AAAO,MAAM,OAAO,CAAC,KAAK,GAAG,OAAS,OAAO,IAAI,CAAC,KAAK,MAAM,CAAC,CAAC,KAAK;QAChE,IAAI,CAAC,KAAK,QAAQ,CAAC,MAAM;YACrB,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI;QACvB;QACA,OAAO;IACX,GAAG,CAAC","ignoreList":[0]}},
    {"offset": {"line": 11361, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/parsers/parseNullable.js"],"sourcesContent":["import { omit } from \"../utils/omit.js\";\nimport { parseSchema } from \"./parseSchema.js\";\n/**\n * For compatibility with open api 3.0 nullable\n */\nexport const parseNullable = (schema, refs) => {\n    return `${parseSchema(omit(schema, \"nullable\"), refs, true)}.nullable()`;\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAIO,MAAM,gBAAgB,CAAC,QAAQ;IAClC,OAAO,GAAG,IAAA,qMAAW,EAAC,IAAA,qLAAI,EAAC,QAAQ,aAAa,MAAM,MAAM,WAAW,CAAC;AAC5E","ignoreList":[0]}},
    {"offset": {"line": 11376, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/parsers/parseSchema.js"],"sourcesContent":["import { parseAnyOf } from \"./parseAnyOf.js\";\nimport { parseBoolean } from \"./parseBoolean.js\";\nimport { parseDefault } from \"./parseDefault.js\";\nimport { parseMultipleType } from \"./parseMultipleType.js\";\nimport { parseNot } from \"./parseNot.js\";\nimport { parseNull } from \"./parseNull.js\";\nimport { parseAllOf } from \"./parseAllOf.js\";\nimport { parseArray } from \"./parseArray.js\";\nimport { parseConst } from \"./parseConst.js\";\nimport { parseEnum } from \"./parseEnum.js\";\nimport { parseIfThenElse } from \"./parseIfThenElse.js\";\nimport { parseNumber } from \"./parseNumber.js\";\nimport { parseObject } from \"./parseObject.js\";\nimport { parseString } from \"./parseString.js\";\nimport { parseOneOf } from \"./parseOneOf.js\";\nimport { parseSimpleDiscriminatedOneOf } from \"./parseSimpleDiscriminatedOneOf.js\";\nimport { parseNullable } from \"./parseNullable.js\";\nexport const parseSchema = (schema, refs = { seen: new Map(), path: [] }, blockMeta) => {\n    if (typeof schema !== \"object\")\n        return schema ? \"z.any()\" : \"z.never()\";\n    if (refs.parserOverride) {\n        const custom = refs.parserOverride(schema, refs);\n        if (typeof custom === \"string\") {\n            return custom;\n        }\n    }\n    let seen = refs.seen.get(schema);\n    if (seen) {\n        if (seen.r !== undefined) {\n            return seen.r;\n        }\n        if (refs.depth === undefined || seen.n >= refs.depth) {\n            return \"z.any()\";\n        }\n        seen.n += 1;\n    }\n    else {\n        seen = { r: undefined, n: 0 };\n        refs.seen.set(schema, seen);\n    }\n    let parsed = selectParser(schema, refs);\n    if (!blockMeta) {\n        if (!refs.withoutDescribes) {\n            parsed = addDescribes(schema, parsed);\n        }\n        if (!refs.withoutDefaults) {\n            parsed = addDefaults(schema, parsed);\n        }\n        parsed = addAnnotations(schema, parsed);\n    }\n    seen.r = parsed;\n    return parsed;\n};\nconst addDescribes = (schema, parsed) => {\n    if (schema.description) {\n        parsed += `.describe(${JSON.stringify(schema.description)})`;\n    }\n    return parsed;\n};\nconst addDefaults = (schema, parsed) => {\n    if (schema.default !== undefined) {\n        parsed += `.default(${JSON.stringify(schema.default)})`;\n    }\n    return parsed;\n};\nconst addAnnotations = (schema, parsed) => {\n    if (schema.readOnly) {\n        parsed += \".readonly()\";\n    }\n    return parsed;\n};\nconst selectParser = (schema, refs) => {\n    if (its.a.nullable(schema)) {\n        return parseNullable(schema, refs);\n    }\n    else if (its.an.object(schema)) {\n        return parseObject(schema, refs);\n    }\n    else if (its.an.array(schema)) {\n        return parseArray(schema, refs);\n    }\n    else if (its.an.anyOf(schema)) {\n        return parseAnyOf(schema, refs);\n    }\n    else if (its.an.allOf(schema)) {\n        return parseAllOf(schema, refs);\n    }\n    else if (its.a.simpleDiscriminatedOneOf(schema)) {\n        return parseSimpleDiscriminatedOneOf(schema, refs);\n    }\n    else if (its.a.oneOf(schema)) {\n        return parseOneOf(schema, refs);\n    }\n    else if (its.a.not(schema)) {\n        return parseNot(schema, refs);\n    }\n    else if (its.an.enum(schema)) {\n        return parseEnum(schema); //<-- needs to come before primitives\n    }\n    else if (its.a.const(schema)) {\n        return parseConst(schema);\n    }\n    else if (its.a.multipleType(schema)) {\n        return parseMultipleType(schema, refs);\n    }\n    else if (its.a.primitive(schema, \"string\")) {\n        return parseString(schema);\n    }\n    else if (its.a.primitive(schema, \"number\") ||\n        its.a.primitive(schema, \"integer\")) {\n        return parseNumber(schema);\n    }\n    else if (its.a.primitive(schema, \"boolean\")) {\n        return parseBoolean(schema);\n    }\n    else if (its.a.primitive(schema, \"null\")) {\n        return parseNull(schema);\n    }\n    else if (its.a.conditional(schema)) {\n        return parseIfThenElse(schema, refs);\n    }\n    else {\n        return parseDefault(schema);\n    }\n};\nexport const its = {\n    an: {\n        object: (x) => x.type === \"object\",\n        array: (x) => x.type === \"array\",\n        anyOf: (x) => x.anyOf !== undefined,\n        allOf: (x) => x.allOf !== undefined,\n        enum: (x) => x.enum !== undefined,\n    },\n    a: {\n        nullable: (x) => x.nullable === true,\n        multipleType: (x) => Array.isArray(x.type),\n        not: (x) => x.not !== undefined,\n        const: (x) => x.const !== undefined,\n        primitive: (x, p) => x.type === p,\n        conditional: (x) => Boolean(\"if\" in x && x.if && \"then\" in x && \"else\" in x && x.then && x.else),\n        simpleDiscriminatedOneOf: (x) => {\n            if (!x.oneOf ||\n                !Array.isArray(x.oneOf) ||\n                x.oneOf.length === 0 ||\n                !x.discriminator ||\n                typeof x.discriminator !== \"object\" ||\n                !(\"propertyName\" in x.discriminator) ||\n                typeof x.discriminator.propertyName !== \"string\") {\n                return false;\n            }\n            const discriminatorProp = x.discriminator.propertyName;\n            return x.oneOf.every((schema) => {\n                if (!schema ||\n                    typeof schema !== \"object\" ||\n                    schema.type !== \"object\" ||\n                    !schema.properties ||\n                    typeof schema.properties !== \"object\" ||\n                    !(discriminatorProp in schema.properties)) {\n                    return false;\n                }\n                const property = schema.properties[discriminatorProp];\n                return (property &&\n                    typeof property === \"object\" &&\n                    property.type === \"string\" &&\n                    // Ensure discriminator has a constant value (const or single-value enum)\n                    (property.const !== undefined ||\n                        (property.enum && Array.isArray(property.enum) && property.enum.length === 1)) &&\n                    // Ensure discriminator property is required\n                    Array.isArray(schema.required) &&\n                    schema.required.includes(discriminatorProp));\n            });\n        },\n        oneOf: (x) => x.oneOf !== undefined,\n    },\n};\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 11548, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/jsonSchemaToZod.js"],"sourcesContent":["import { parseSchema } from \"./parsers/parseSchema.js\";\nimport { expandJsdocs } from \"./utils/jsdocs.js\";\nexport const jsonSchemaToZod = (schema, { module, name, type, noImport, ...rest } = {}) => {\n    if (type && (!name || module !== \"esm\")) {\n        throw new Error(\"Option `type` requires `name` to be set and `module` to be `esm`\");\n    }\n    let result = parseSchema(schema, {\n        module,\n        name,\n        path: [],\n        seen: new Map(),\n        ...rest,\n    });\n    const jsdocs = rest.withJsdocs && typeof schema !== \"boolean\" && schema.description\n        ? expandJsdocs(schema.description)\n        : \"\";\n    if (module === \"cjs\") {\n        result = `${jsdocs}module.exports = ${name ? `{ ${JSON.stringify(name)}: ${result} }` : result}\n`;\n        if (!noImport) {\n            result = `${jsdocs}const { z } = require(\"zod\")\n\n${result}`;\n        }\n    }\n    else if (module === \"esm\") {\n        result = `${jsdocs}export ${name ? `const ${name} =` : `default`} ${result}\n`;\n        if (!noImport) {\n            result = `import { z } from \"zod\"\n\n${result}`;\n        }\n    }\n    else if (name) {\n        result = `${jsdocs}const ${name} = ${result}`;\n    }\n    if (type && name) {\n        let typeName = typeof type === \"string\"\n            ? type\n            : `${name[0].toUpperCase()}${name.substring(1)}`;\n        result += `export type ${typeName} = z.infer<typeof ${name}>\n`;\n    }\n    return result;\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AACO,MAAM,kBAAkB,CAAC,QAAQ,EAAE,MAAM,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,GAAG,MAAM,GAAG,CAAC,CAAC;IAClF,IAAI,QAAQ,CAAC,CAAC,QAAQ,WAAW,KAAK,GAAG;QACrC,MAAM,IAAI,MAAM;IACpB;IACA,IAAI,SAAS,IAAA,qMAAW,EAAC,QAAQ;QAC7B;QACA;QACA,MAAM,EAAE;QACR,MAAM,IAAI;QACV,GAAG,IAAI;IACX;IACA,MAAM,SAAS,KAAK,UAAU,IAAI,OAAO,WAAW,aAAa,OAAO,WAAW,GAC7E,IAAA,+LAAY,EAAC,OAAO,WAAW,IAC/B;IACN,IAAI,WAAW,OAAO;QAClB,SAAS,GAAG,OAAO,iBAAiB,EAAE,OAAO,CAAC,EAAE,EAAE,KAAK,SAAS,CAAC,MAAM,EAAE,EAAE,OAAO,EAAE,CAAC,GAAG,OAAO;AACvG,CAAC;QACO,IAAI,CAAC,UAAU;YACX,SAAS,GAAG,OAAO;;AAE/B,EAAE,QAAQ;QACF;IACJ,OACK,IAAI,WAAW,OAAO;QACvB,SAAS,GAAG,OAAO,OAAO,EAAE,OAAO,CAAC,MAAM,EAAE,KAAK,EAAE,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,OAAO;AACnF,CAAC;QACO,IAAI,CAAC,UAAU;YACX,SAAS,CAAC;;AAEtB,EAAE,QAAQ;QACF;IACJ,OACK,IAAI,MAAM;QACX,SAAS,GAAG,OAAO,MAAM,EAAE,KAAK,GAAG,EAAE,QAAQ;IACjD;IACA,IAAI,QAAQ,MAAM;QACd,IAAI,WAAW,OAAO,SAAS,WACzB,OACA,GAAG,IAAI,CAAC,EAAE,CAAC,WAAW,KAAK,KAAK,SAAS,CAAC,IAAI;QACpD,UAAU,CAAC,YAAY,EAAE,SAAS,kBAAkB,EAAE,KAAK;AACnE,CAAC;IACG;IACA,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 11598, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/json-schema-to-zod/dist/esm/index.js"],"sourcesContent":["export * from \"./Types.js\";\nexport * from \"./jsonSchemaToZod.js\";\nexport * from \"./parsers/parseAllOf.js\";\nexport * from \"./parsers/parseAnyOf.js\";\nexport * from \"./parsers/parseArray.js\";\nexport * from \"./parsers/parseBoolean.js\";\nexport * from \"./parsers/parseConst.js\";\nexport * from \"./parsers/parseDefault.js\";\nexport * from \"./parsers/parseEnum.js\";\nexport * from \"./parsers/parseIfThenElse.js\";\nexport * from \"./parsers/parseMultipleType.js\";\nexport * from \"./parsers/parseNot.js\";\nexport * from \"./parsers/parseNull.js\";\nexport * from \"./parsers/parseNullable.js\";\nexport * from \"./parsers/parseNumber.js\";\nexport * from \"./parsers/parseObject.js\";\nexport * from \"./parsers/parseOneOf.js\";\nexport * from \"./parsers/parseSchema.js\";\nexport * from \"./parsers/parseSimpleDiscriminatedOneOf.js\";\nexport * from \"./parsers/parseString.js\";\nexport * from \"./utils/half.js\";\nexport * from \"./utils/jsdocs.js\";\nexport * from \"./utils/omit.js\";\nexport * from \"./utils/withMessage.js\";\nimport { jsonSchemaToZod } from \"./jsonSchemaToZod.js\";\nexport default jsonSchemaToZod;\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;uCAEe,kMAAe","ignoreList":[0]}},
    {"offset": {"line": 11656, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/Options.js"],"sourcesContent":["export const ignoreOverride = Symbol(\"Let zodToJsonSchema decide on which parser to use\");\nexport const jsonDescription = (jsonSchema, def) => {\n    if (def.description) {\n        try {\n            return {\n                ...jsonSchema,\n                ...JSON.parse(def.description),\n            };\n        }\n        catch { }\n    }\n    return jsonSchema;\n};\nexport const defaultOptions = {\n    name: undefined,\n    $refStrategy: \"root\",\n    basePath: [\"#\"],\n    effectStrategy: \"input\",\n    pipeStrategy: \"all\",\n    dateStrategy: \"format:date-time\",\n    mapStrategy: \"entries\",\n    removeAdditionalStrategy: \"passthrough\",\n    allowedAdditionalProperties: true,\n    rejectedAdditionalProperties: false,\n    definitionPath: \"definitions\",\n    target: \"jsonSchema7\",\n    strictUnions: false,\n    definitions: {},\n    errorMessages: false,\n    markdownDescription: false,\n    patternStrategy: \"escape\",\n    applyRegexFlags: false,\n    emailStrategy: \"format:email\",\n    base64Strategy: \"contentEncoding:base64\",\n    nameStrategy: \"ref\",\n    openAiAnyTypeName: \"OpenAiAnyType\"\n};\nexport const getDefaultOptions = (options) => (typeof options === \"string\"\n    ? {\n        ...defaultOptions,\n        name: options,\n    }\n    : {\n        ...defaultOptions,\n        ...options,\n    });\n"],"names":[],"mappings":";;;;;;;;;;AAAO,MAAM,iBAAiB,OAAO;AAC9B,MAAM,kBAAkB,CAAC,YAAY;IACxC,IAAI,IAAI,WAAW,EAAE;QACjB,IAAI;YACA,OAAO;gBACH,GAAG,UAAU;gBACb,GAAG,KAAK,KAAK,CAAC,IAAI,WAAW,CAAC;YAClC;QACJ,EACA,OAAM,CAAE;IACZ;IACA,OAAO;AACX;AACO,MAAM,iBAAiB;IAC1B,MAAM;IACN,cAAc;IACd,UAAU;QAAC;KAAI;IACf,gBAAgB;IAChB,cAAc;IACd,cAAc;IACd,aAAa;IACb,0BAA0B;IAC1B,6BAA6B;IAC7B,8BAA8B;IAC9B,gBAAgB;IAChB,QAAQ;IACR,cAAc;IACd,aAAa,CAAC;IACd,eAAe;IACf,qBAAqB;IACrB,iBAAiB;IACjB,iBAAiB;IACjB,eAAe;IACf,gBAAgB;IAChB,cAAc;IACd,mBAAmB;AACvB;AACO,MAAM,oBAAoB,CAAC,UAAa,OAAO,YAAY,WAC5D;QACE,GAAG,cAAc;QACjB,MAAM;IACV,IACE;QACE,GAAG,cAAc;QACjB,GAAG,OAAO;IACd","ignoreList":[0]}},
    {"offset": {"line": 11715, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/Refs.js"],"sourcesContent":["import { getDefaultOptions } from \"./Options.js\";\nexport const getRefs = (options) => {\n    const _options = getDefaultOptions(options);\n    const currentPath = _options.name !== undefined\n        ? [..._options.basePath, _options.definitionPath, _options.name]\n        : _options.basePath;\n    return {\n        ..._options,\n        flags: { hasReferencedOpenAiAnyType: false },\n        currentPath: currentPath,\n        propertyPath: undefined,\n        seen: new Map(Object.entries(_options.definitions).map(([name, def]) => [\n            def._def,\n            {\n                def: def._def,\n                path: [..._options.basePath, _options.definitionPath, name],\n                // Resolution of references will be forced even though seen, so it's ok that the schema is undefined here for now.\n                jsonSchema: undefined,\n            },\n        ])),\n    };\n};\n"],"names":[],"mappings":";;;;AAAA;;AACO,MAAM,UAAU,CAAC;IACpB,MAAM,WAAW,IAAA,4LAAiB,EAAC;IACnC,MAAM,cAAc,SAAS,IAAI,KAAK,YAChC;WAAI,SAAS,QAAQ;QAAE,SAAS,cAAc;QAAE,SAAS,IAAI;KAAC,GAC9D,SAAS,QAAQ;IACvB,OAAO;QACH,GAAG,QAAQ;QACX,OAAO;YAAE,4BAA4B;QAAM;QAC3C,aAAa;QACb,cAAc;QACd,MAAM,IAAI,IAAI,OAAO,OAAO,CAAC,SAAS,WAAW,EAAE,GAAG,CAAC,CAAC,CAAC,MAAM,IAAI,GAAK;gBACpE,IAAI,IAAI;gBACR;oBACI,KAAK,IAAI,IAAI;oBACb,MAAM;2BAAI,SAAS,QAAQ;wBAAE,SAAS,cAAc;wBAAE;qBAAK;oBAC3D,kHAAkH;oBAClH,YAAY;gBAChB;aACH;IACL;AACJ","ignoreList":[0]}},
    {"offset": {"line": 11754, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/errorMessages.js"],"sourcesContent":["export function addErrorMessage(res, key, errorMessage, refs) {\n    if (!refs?.errorMessages)\n        return;\n    if (errorMessage) {\n        res.errorMessage = {\n            ...res.errorMessage,\n            [key]: errorMessage,\n        };\n    }\n}\nexport function setResponseValueAndErrors(res, key, value, errorMessage, refs) {\n    res[key] = value;\n    addErrorMessage(res, key, errorMessage, refs);\n}\n"],"names":[],"mappings":";;;;;;AAAO,SAAS,gBAAgB,GAAG,EAAE,GAAG,EAAE,YAAY,EAAE,IAAI;IACxD,IAAI,CAAC,MAAM,eACP;IACJ,IAAI,cAAc;QACd,IAAI,YAAY,GAAG;YACf,GAAG,IAAI,YAAY;YACnB,CAAC,IAAI,EAAE;QACX;IACJ;AACJ;AACO,SAAS,0BAA0B,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE,YAAY,EAAE,IAAI;IACzE,GAAG,CAAC,IAAI,GAAG;IACX,gBAAgB,KAAK,KAAK,cAAc;AAC5C","ignoreList":[0]}},
    {"offset": {"line": 11777, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/getRelativePath.js"],"sourcesContent":["export const getRelativePath = (pathA, pathB) => {\n    let i = 0;\n    for (; i < pathA.length && i < pathB.length; i++) {\n        if (pathA[i] !== pathB[i])\n            break;\n    }\n    return [(pathA.length - i).toString(), ...pathB.slice(i)].join(\"/\");\n};\n"],"names":[],"mappings":";;;;AAAO,MAAM,kBAAkB,CAAC,OAAO;IACnC,IAAI,IAAI;IACR,MAAO,IAAI,MAAM,MAAM,IAAI,IAAI,MAAM,MAAM,EAAE,IAAK;QAC9C,IAAI,KAAK,CAAC,EAAE,KAAK,KAAK,CAAC,EAAE,EACrB;IACR;IACA,OAAO;QAAC,CAAC,MAAM,MAAM,GAAG,CAAC,EAAE,QAAQ;WAAO,MAAM,KAAK,CAAC;KAAG,CAAC,IAAI,CAAC;AACnE","ignoreList":[0]}},
    {"offset": {"line": 11795, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/any.js"],"sourcesContent":["import { getRelativePath } from \"../getRelativePath.js\";\nexport function parseAnyDef(refs) {\n    if (refs.target !== \"openAi\") {\n        return {};\n    }\n    const anyDefinitionPath = [\n        ...refs.basePath,\n        refs.definitionPath,\n        refs.openAiAnyTypeName,\n    ];\n    refs.flags.hasReferencedOpenAiAnyType = true;\n    return {\n        $ref: refs.$refStrategy === \"relative\"\n            ? getRelativePath(anyDefinitionPath, refs.currentPath)\n            : anyDefinitionPath.join(\"/\"),\n    };\n}\n"],"names":[],"mappings":";;;;AAAA;;AACO,SAAS,YAAY,IAAI;IAC5B,IAAI,KAAK,MAAM,KAAK,UAAU;QAC1B,OAAO,CAAC;IACZ;IACA,MAAM,oBAAoB;WACnB,KAAK,QAAQ;QAChB,KAAK,cAAc;QACnB,KAAK,iBAAiB;KACzB;IACD,KAAK,KAAK,CAAC,0BAA0B,GAAG;IACxC,OAAO;QACH,MAAM,KAAK,YAAY,KAAK,aACtB,IAAA,kMAAe,EAAC,mBAAmB,KAAK,WAAW,IACnD,kBAAkB,IAAI,CAAC;IACjC;AACJ","ignoreList":[0]}},
    {"offset": {"line": 11819, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/array.js"],"sourcesContent":["import { ZodFirstPartyTypeKind } from \"zod/v3\";\nimport { setResponseValueAndErrors } from \"../errorMessages.js\";\nimport { parseDef } from \"../parseDef.js\";\nexport function parseArrayDef(def, refs) {\n    const res = {\n        type: \"array\",\n    };\n    if (def.type?._def &&\n        def.type?._def?.typeName !== ZodFirstPartyTypeKind.ZodAny) {\n        res.items = parseDef(def.type._def, {\n            ...refs,\n            currentPath: [...refs.currentPath, \"items\"],\n        });\n    }\n    if (def.minLength) {\n        setResponseValueAndErrors(res, \"minItems\", def.minLength.value, def.minLength.message, refs);\n    }\n    if (def.maxLength) {\n        setResponseValueAndErrors(res, \"maxItems\", def.maxLength.value, def.maxLength.message, refs);\n    }\n    if (def.exactLength) {\n        setResponseValueAndErrors(res, \"minItems\", def.exactLength.value, def.exactLength.message, refs);\n        setResponseValueAndErrors(res, \"maxItems\", def.exactLength.value, def.exactLength.message, refs);\n    }\n    return res;\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AACO,SAAS,cAAc,GAAG,EAAE,IAAI;IACnC,MAAM,MAAM;QACR,MAAM;IACV;IACA,IAAI,IAAI,IAAI,EAAE,QACV,IAAI,IAAI,EAAE,MAAM,aAAa,6JAAqB,CAAC,MAAM,EAAE;QAC3D,IAAI,KAAK,GAAG,IAAA,oLAAQ,EAAC,IAAI,IAAI,CAAC,IAAI,EAAE;YAChC,GAAG,IAAI;YACP,aAAa;mBAAI,KAAK,WAAW;gBAAE;aAAQ;QAC/C;IACJ;IACA,IAAI,IAAI,SAAS,EAAE;QACf,IAAA,0MAAyB,EAAC,KAAK,YAAY,IAAI,SAAS,CAAC,KAAK,EAAE,IAAI,SAAS,CAAC,OAAO,EAAE;IAC3F;IACA,IAAI,IAAI,SAAS,EAAE;QACf,IAAA,0MAAyB,EAAC,KAAK,YAAY,IAAI,SAAS,CAAC,KAAK,EAAE,IAAI,SAAS,CAAC,OAAO,EAAE;IAC3F;IACA,IAAI,IAAI,WAAW,EAAE;QACjB,IAAA,0MAAyB,EAAC,KAAK,YAAY,IAAI,WAAW,CAAC,KAAK,EAAE,IAAI,WAAW,CAAC,OAAO,EAAE;QAC3F,IAAA,0MAAyB,EAAC,KAAK,YAAY,IAAI,WAAW,CAAC,KAAK,EAAE,IAAI,WAAW,CAAC,OAAO,EAAE;IAC/F;IACA,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 11858, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/bigint.js"],"sourcesContent":["import { setResponseValueAndErrors } from \"../errorMessages.js\";\nexport function parseBigintDef(def, refs) {\n    const res = {\n        type: \"integer\",\n        format: \"int64\",\n    };\n    if (!def.checks)\n        return res;\n    for (const check of def.checks) {\n        switch (check.kind) {\n            case \"min\":\n                if (refs.target === \"jsonSchema7\") {\n                    if (check.inclusive) {\n                        setResponseValueAndErrors(res, \"minimum\", check.value, check.message, refs);\n                    }\n                    else {\n                        setResponseValueAndErrors(res, \"exclusiveMinimum\", check.value, check.message, refs);\n                    }\n                }\n                else {\n                    if (!check.inclusive) {\n                        res.exclusiveMinimum = true;\n                    }\n                    setResponseValueAndErrors(res, \"minimum\", check.value, check.message, refs);\n                }\n                break;\n            case \"max\":\n                if (refs.target === \"jsonSchema7\") {\n                    if (check.inclusive) {\n                        setResponseValueAndErrors(res, \"maximum\", check.value, check.message, refs);\n                    }\n                    else {\n                        setResponseValueAndErrors(res, \"exclusiveMaximum\", check.value, check.message, refs);\n                    }\n                }\n                else {\n                    if (!check.inclusive) {\n                        res.exclusiveMaximum = true;\n                    }\n                    setResponseValueAndErrors(res, \"maximum\", check.value, check.message, refs);\n                }\n                break;\n            case \"multipleOf\":\n                setResponseValueAndErrors(res, \"multipleOf\", check.value, check.message, refs);\n                break;\n        }\n    }\n    return res;\n}\n"],"names":[],"mappings":";;;;AAAA;;AACO,SAAS,eAAe,GAAG,EAAE,IAAI;IACpC,MAAM,MAAM;QACR,MAAM;QACN,QAAQ;IACZ;IACA,IAAI,CAAC,IAAI,MAAM,EACX,OAAO;IACX,KAAK,MAAM,SAAS,IAAI,MAAM,CAAE;QAC5B,OAAQ,MAAM,IAAI;YACd,KAAK;gBACD,IAAI,KAAK,MAAM,KAAK,eAAe;oBAC/B,IAAI,MAAM,SAAS,EAAE;wBACjB,IAAA,0MAAyB,EAAC,KAAK,WAAW,MAAM,KAAK,EAAE,MAAM,OAAO,EAAE;oBAC1E,OACK;wBACD,IAAA,0MAAyB,EAAC,KAAK,oBAAoB,MAAM,KAAK,EAAE,MAAM,OAAO,EAAE;oBACnF;gBACJ,OACK;oBACD,IAAI,CAAC,MAAM,SAAS,EAAE;wBAClB,IAAI,gBAAgB,GAAG;oBAC3B;oBACA,IAAA,0MAAyB,EAAC,KAAK,WAAW,MAAM,KAAK,EAAE,MAAM,OAAO,EAAE;gBAC1E;gBACA;YACJ,KAAK;gBACD,IAAI,KAAK,MAAM,KAAK,eAAe;oBAC/B,IAAI,MAAM,SAAS,EAAE;wBACjB,IAAA,0MAAyB,EAAC,KAAK,WAAW,MAAM,KAAK,EAAE,MAAM,OAAO,EAAE;oBAC1E,OACK;wBACD,IAAA,0MAAyB,EAAC,KAAK,oBAAoB,MAAM,KAAK,EAAE,MAAM,OAAO,EAAE;oBACnF;gBACJ,OACK;oBACD,IAAI,CAAC,MAAM,SAAS,EAAE;wBAClB,IAAI,gBAAgB,GAAG;oBAC3B;oBACA,IAAA,0MAAyB,EAAC,KAAK,WAAW,MAAM,KAAK,EAAE,MAAM,OAAO,EAAE;gBAC1E;gBACA;YACJ,KAAK;gBACD,IAAA,0MAAyB,EAAC,KAAK,cAAc,MAAM,KAAK,EAAE,MAAM,OAAO,EAAE;gBACzE;QACR;IACJ;IACA,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 11911, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/boolean.js"],"sourcesContent":["export function parseBooleanDef() {\n    return {\n        type: \"boolean\",\n    };\n}\n"],"names":[],"mappings":";;;;AAAO,SAAS;IACZ,OAAO;QACH,MAAM;IACV;AACJ","ignoreList":[0]}},
    {"offset": {"line": 11924, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/branded.js"],"sourcesContent":["import { parseDef } from \"../parseDef.js\";\nexport function parseBrandedDef(_def, refs) {\n    return parseDef(_def.type._def, refs);\n}\n"],"names":[],"mappings":";;;;AAAA;;AACO,SAAS,gBAAgB,IAAI,EAAE,IAAI;IACtC,OAAO,IAAA,oLAAQ,EAAC,KAAK,IAAI,CAAC,IAAI,EAAE;AACpC","ignoreList":[0]}},
    {"offset": {"line": 11937, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/catch.js"],"sourcesContent":["import { parseDef } from \"../parseDef.js\";\nexport const parseCatchDef = (def, refs) => {\n    return parseDef(def.innerType._def, refs);\n};\n"],"names":[],"mappings":";;;;AAAA;;AACO,MAAM,gBAAgB,CAAC,KAAK;IAC/B,OAAO,IAAA,oLAAQ,EAAC,IAAI,SAAS,CAAC,IAAI,EAAE;AACxC","ignoreList":[0]}},
    {"offset": {"line": 11950, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/date.js"],"sourcesContent":["import { setResponseValueAndErrors } from \"../errorMessages.js\";\nexport function parseDateDef(def, refs, overrideDateStrategy) {\n    const strategy = overrideDateStrategy ?? refs.dateStrategy;\n    if (Array.isArray(strategy)) {\n        return {\n            anyOf: strategy.map((item, i) => parseDateDef(def, refs, item)),\n        };\n    }\n    switch (strategy) {\n        case \"string\":\n        case \"format:date-time\":\n            return {\n                type: \"string\",\n                format: \"date-time\",\n            };\n        case \"format:date\":\n            return {\n                type: \"string\",\n                format: \"date\",\n            };\n        case \"integer\":\n            return integerDateParser(def, refs);\n    }\n}\nconst integerDateParser = (def, refs) => {\n    const res = {\n        type: \"integer\",\n        format: \"unix-time\",\n    };\n    if (refs.target === \"openApi3\") {\n        return res;\n    }\n    for (const check of def.checks) {\n        switch (check.kind) {\n            case \"min\":\n                setResponseValueAndErrors(res, \"minimum\", check.value, // This is in milliseconds\n                check.message, refs);\n                break;\n            case \"max\":\n                setResponseValueAndErrors(res, \"maximum\", check.value, // This is in milliseconds\n                check.message, refs);\n                break;\n        }\n    }\n    return res;\n};\n"],"names":[],"mappings":";;;;AAAA;;AACO,SAAS,aAAa,GAAG,EAAE,IAAI,EAAE,oBAAoB;IACxD,MAAM,WAAW,wBAAwB,KAAK,YAAY;IAC1D,IAAI,MAAM,OAAO,CAAC,WAAW;QACzB,OAAO;YACH,OAAO,SAAS,GAAG,CAAC,CAAC,MAAM,IAAM,aAAa,KAAK,MAAM;QAC7D;IACJ;IACA,OAAQ;QACJ,KAAK;QACL,KAAK;YACD,OAAO;gBACH,MAAM;gBACN,QAAQ;YACZ;QACJ,KAAK;YACD,OAAO;gBACH,MAAM;gBACN,QAAQ;YACZ;QACJ,KAAK;YACD,OAAO,kBAAkB,KAAK;IACtC;AACJ;AACA,MAAM,oBAAoB,CAAC,KAAK;IAC5B,MAAM,MAAM;QACR,MAAM;QACN,QAAQ;IACZ;IACA,IAAI,KAAK,MAAM,KAAK,YAAY;QAC5B,OAAO;IACX;IACA,KAAK,MAAM,SAAS,IAAI,MAAM,CAAE;QAC5B,OAAQ,MAAM,IAAI;YACd,KAAK;gBACD,IAAA,0MAAyB,EAAC,KAAK,WAAW,MAAM,KAAK,EACrD,MAAM,OAAO,EAAE;gBACf;YACJ,KAAK;gBACD,IAAA,0MAAyB,EAAC,KAAK,WAAW,MAAM,KAAK,EACrD,MAAM,OAAO,EAAE;gBACf;QACR;IACJ;IACA,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 12003, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/default.js"],"sourcesContent":["import { parseDef } from \"../parseDef.js\";\nexport function parseDefaultDef(_def, refs) {\n    return {\n        ...parseDef(_def.innerType._def, refs),\n        default: _def.defaultValue(),\n    };\n}\n"],"names":[],"mappings":";;;;AAAA;;AACO,SAAS,gBAAgB,IAAI,EAAE,IAAI;IACtC,OAAO;QACH,GAAG,IAAA,oLAAQ,EAAC,KAAK,SAAS,CAAC,IAAI,EAAE,KAAK;QACtC,SAAS,KAAK,YAAY;IAC9B;AACJ","ignoreList":[0]}},
    {"offset": {"line": 12019, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/effects.js"],"sourcesContent":["import { parseDef } from \"../parseDef.js\";\nimport { parseAnyDef } from \"./any.js\";\nexport function parseEffectsDef(_def, refs) {\n    return refs.effectStrategy === \"input\"\n        ? parseDef(_def.schema._def, refs)\n        : parseAnyDef(refs);\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AACO,SAAS,gBAAgB,IAAI,EAAE,IAAI;IACtC,OAAO,KAAK,cAAc,KAAK,UACzB,IAAA,oLAAQ,EAAC,KAAK,MAAM,CAAC,IAAI,EAAE,QAC3B,IAAA,6LAAW,EAAC;AACtB","ignoreList":[0]}},
    {"offset": {"line": 12034, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/enum.js"],"sourcesContent":["export function parseEnumDef(def) {\n    return {\n        type: \"string\",\n        enum: Array.from(def.values),\n    };\n}\n"],"names":[],"mappings":";;;;AAAO,SAAS,aAAa,GAAG;IAC5B,OAAO;QACH,MAAM;QACN,MAAM,MAAM,IAAI,CAAC,IAAI,MAAM;IAC/B;AACJ","ignoreList":[0]}},
    {"offset": {"line": 12048, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/intersection.js"],"sourcesContent":["import { parseDef } from \"../parseDef.js\";\nconst isJsonSchema7AllOfType = (type) => {\n    if (\"type\" in type && type.type === \"string\")\n        return false;\n    return \"allOf\" in type;\n};\nexport function parseIntersectionDef(def, refs) {\n    const allOf = [\n        parseDef(def.left._def, {\n            ...refs,\n            currentPath: [...refs.currentPath, \"allOf\", \"0\"],\n        }),\n        parseDef(def.right._def, {\n            ...refs,\n            currentPath: [...refs.currentPath, \"allOf\", \"1\"],\n        }),\n    ].filter((x) => !!x);\n    let unevaluatedProperties = refs.target === \"jsonSchema2019-09\"\n        ? { unevaluatedProperties: false }\n        : undefined;\n    const mergedAllOf = [];\n    // If either of the schemas is an allOf, merge them into a single allOf\n    allOf.forEach((schema) => {\n        if (isJsonSchema7AllOfType(schema)) {\n            mergedAllOf.push(...schema.allOf);\n            if (schema.unevaluatedProperties === undefined) {\n                // If one of the schemas has no unevaluatedProperties set,\n                // the merged schema should also have no unevaluatedProperties set\n                unevaluatedProperties = undefined;\n            }\n        }\n        else {\n            let nestedSchema = schema;\n            if (\"additionalProperties\" in schema &&\n                schema.additionalProperties === false) {\n                const { additionalProperties, ...rest } = schema;\n                nestedSchema = rest;\n            }\n            else {\n                // As soon as one of the schemas has additionalProperties set not to false, we allow unevaluatedProperties\n                unevaluatedProperties = undefined;\n            }\n            mergedAllOf.push(nestedSchema);\n        }\n    });\n    return mergedAllOf.length\n        ? {\n            allOf: mergedAllOf,\n            ...unevaluatedProperties,\n        }\n        : undefined;\n}\n"],"names":[],"mappings":";;;;AAAA;;AACA,MAAM,yBAAyB,CAAC;IAC5B,IAAI,UAAU,QAAQ,KAAK,IAAI,KAAK,UAChC,OAAO;IACX,OAAO,WAAW;AACtB;AACO,SAAS,qBAAqB,GAAG,EAAE,IAAI;IAC1C,MAAM,QAAQ;QACV,IAAA,oLAAQ,EAAC,IAAI,IAAI,CAAC,IAAI,EAAE;YACpB,GAAG,IAAI;YACP,aAAa;mBAAI,KAAK,WAAW;gBAAE;gBAAS;aAAI;QACpD;QACA,IAAA,oLAAQ,EAAC,IAAI,KAAK,CAAC,IAAI,EAAE;YACrB,GAAG,IAAI;YACP,aAAa;mBAAI,KAAK,WAAW;gBAAE;gBAAS;aAAI;QACpD;KACH,CAAC,MAAM,CAAC,CAAC,IAAM,CAAC,CAAC;IAClB,IAAI,wBAAwB,KAAK,MAAM,KAAK,sBACtC;QAAE,uBAAuB;IAAM,IAC/B;IACN,MAAM,cAAc,EAAE;IACtB,uEAAuE;IACvE,MAAM,OAAO,CAAC,CAAC;QACX,IAAI,uBAAuB,SAAS;YAChC,YAAY,IAAI,IAAI,OAAO,KAAK;YAChC,IAAI,OAAO,qBAAqB,KAAK,WAAW;gBAC5C,0DAA0D;gBAC1D,kEAAkE;gBAClE,wBAAwB;YAC5B;QACJ,OACK;YACD,IAAI,eAAe;YACnB,IAAI,0BAA0B,UAC1B,OAAO,oBAAoB,KAAK,OAAO;gBACvC,MAAM,EAAE,oBAAoB,EAAE,GAAG,MAAM,GAAG;gBAC1C,eAAe;YACnB,OACK;gBACD,0GAA0G;gBAC1G,wBAAwB;YAC5B;YACA,YAAY,IAAI,CAAC;QACrB;IACJ;IACA,OAAO,YAAY,MAAM,GACnB;QACE,OAAO;QACP,GAAG,qBAAqB;IAC5B,IACE;AACV","ignoreList":[0]}},
    {"offset": {"line": 12111, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/literal.js"],"sourcesContent":["export function parseLiteralDef(def, refs) {\n    const parsedType = typeof def.value;\n    if (parsedType !== \"bigint\" &&\n        parsedType !== \"number\" &&\n        parsedType !== \"boolean\" &&\n        parsedType !== \"string\") {\n        return {\n            type: Array.isArray(def.value) ? \"array\" : \"object\",\n        };\n    }\n    if (refs.target === \"openApi3\") {\n        return {\n            type: parsedType === \"bigint\" ? \"integer\" : parsedType,\n            enum: [def.value],\n        };\n    }\n    return {\n        type: parsedType === \"bigint\" ? \"integer\" : parsedType,\n        const: def.value,\n    };\n}\n"],"names":[],"mappings":";;;;AAAO,SAAS,gBAAgB,GAAG,EAAE,IAAI;IACrC,MAAM,aAAa,OAAO,IAAI,KAAK;IACnC,IAAI,eAAe,YACf,eAAe,YACf,eAAe,aACf,eAAe,UAAU;QACzB,OAAO;YACH,MAAM,MAAM,OAAO,CAAC,IAAI,KAAK,IAAI,UAAU;QAC/C;IACJ;IACA,IAAI,KAAK,MAAM,KAAK,YAAY;QAC5B,OAAO;YACH,MAAM,eAAe,WAAW,YAAY;YAC5C,MAAM;gBAAC,IAAI,KAAK;aAAC;QACrB;IACJ;IACA,OAAO;QACH,MAAM,eAAe,WAAW,YAAY;QAC5C,OAAO,IAAI,KAAK;IACpB;AACJ","ignoreList":[0]}},
    {"offset": {"line": 12139, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/string.js"],"sourcesContent":["import { setResponseValueAndErrors } from \"../errorMessages.js\";\nlet emojiRegex = undefined;\n/**\n * Generated from the regular expressions found here as of 2024-05-22:\n * https://github.com/colinhacks/zod/blob/master/src/types.ts.\n *\n * Expressions with /i flag have been changed accordingly.\n */\nexport const zodPatterns = {\n    /**\n     * `c` was changed to `[cC]` to replicate /i flag\n     */\n    cuid: /^[cC][^\\s-]{8,}$/,\n    cuid2: /^[0-9a-z]+$/,\n    ulid: /^[0-9A-HJKMNP-TV-Z]{26}$/,\n    /**\n     * `a-z` was added to replicate /i flag\n     */\n    email: /^(?!\\.)(?!.*\\.\\.)([a-zA-Z0-9_'+\\-\\.]*)[a-zA-Z0-9_+-]@([a-zA-Z0-9][a-zA-Z0-9\\-]*\\.)+[a-zA-Z]{2,}$/,\n    /**\n     * Constructed a valid Unicode RegExp\n     *\n     * Lazily instantiate since this type of regex isn't supported\n     * in all envs (e.g. React Native).\n     *\n     * See:\n     * https://github.com/colinhacks/zod/issues/2433\n     * Fix in Zod:\n     * https://github.com/colinhacks/zod/commit/9340fd51e48576a75adc919bff65dbc4a5d4c99b\n     */\n    emoji: () => {\n        if (emojiRegex === undefined) {\n            emojiRegex = RegExp(\"^(\\\\p{Extended_Pictographic}|\\\\p{Emoji_Component})+$\", \"u\");\n        }\n        return emojiRegex;\n    },\n    /**\n     * Unused\n     */\n    uuid: /^[0-9a-fA-F]{8}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{4}\\b-[0-9a-fA-F]{12}$/,\n    /**\n     * Unused\n     */\n    ipv4: /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,\n    ipv4Cidr: /^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\\/(3[0-2]|[12]?[0-9])$/,\n    /**\n     * Unused\n     */\n    ipv6: /^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,\n    ipv6Cidr: /^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,\n    base64: /^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,\n    base64url: /^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,\n    nanoid: /^[a-zA-Z0-9_-]{21}$/,\n    jwt: /^[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]+\\.[A-Za-z0-9-_]*$/,\n};\nexport function parseStringDef(def, refs) {\n    const res = {\n        type: \"string\",\n    };\n    if (def.checks) {\n        for (const check of def.checks) {\n            switch (check.kind) {\n                case \"min\":\n                    setResponseValueAndErrors(res, \"minLength\", typeof res.minLength === \"number\"\n                        ? Math.max(res.minLength, check.value)\n                        : check.value, check.message, refs);\n                    break;\n                case \"max\":\n                    setResponseValueAndErrors(res, \"maxLength\", typeof res.maxLength === \"number\"\n                        ? Math.min(res.maxLength, check.value)\n                        : check.value, check.message, refs);\n                    break;\n                case \"email\":\n                    switch (refs.emailStrategy) {\n                        case \"format:email\":\n                            addFormat(res, \"email\", check.message, refs);\n                            break;\n                        case \"format:idn-email\":\n                            addFormat(res, \"idn-email\", check.message, refs);\n                            break;\n                        case \"pattern:zod\":\n                            addPattern(res, zodPatterns.email, check.message, refs);\n                            break;\n                    }\n                    break;\n                case \"url\":\n                    addFormat(res, \"uri\", check.message, refs);\n                    break;\n                case \"uuid\":\n                    addFormat(res, \"uuid\", check.message, refs);\n                    break;\n                case \"regex\":\n                    addPattern(res, check.regex, check.message, refs);\n                    break;\n                case \"cuid\":\n                    addPattern(res, zodPatterns.cuid, check.message, refs);\n                    break;\n                case \"cuid2\":\n                    addPattern(res, zodPatterns.cuid2, check.message, refs);\n                    break;\n                case \"startsWith\":\n                    addPattern(res, RegExp(`^${escapeLiteralCheckValue(check.value, refs)}`), check.message, refs);\n                    break;\n                case \"endsWith\":\n                    addPattern(res, RegExp(`${escapeLiteralCheckValue(check.value, refs)}$`), check.message, refs);\n                    break;\n                case \"datetime\":\n                    addFormat(res, \"date-time\", check.message, refs);\n                    break;\n                case \"date\":\n                    addFormat(res, \"date\", check.message, refs);\n                    break;\n                case \"time\":\n                    addFormat(res, \"time\", check.message, refs);\n                    break;\n                case \"duration\":\n                    addFormat(res, \"duration\", check.message, refs);\n                    break;\n                case \"length\":\n                    setResponseValueAndErrors(res, \"minLength\", typeof res.minLength === \"number\"\n                        ? Math.max(res.minLength, check.value)\n                        : check.value, check.message, refs);\n                    setResponseValueAndErrors(res, \"maxLength\", typeof res.maxLength === \"number\"\n                        ? Math.min(res.maxLength, check.value)\n                        : check.value, check.message, refs);\n                    break;\n                case \"includes\": {\n                    addPattern(res, RegExp(escapeLiteralCheckValue(check.value, refs)), check.message, refs);\n                    break;\n                }\n                case \"ip\": {\n                    if (check.version !== \"v6\") {\n                        addFormat(res, \"ipv4\", check.message, refs);\n                    }\n                    if (check.version !== \"v4\") {\n                        addFormat(res, \"ipv6\", check.message, refs);\n                    }\n                    break;\n                }\n                case \"base64url\":\n                    addPattern(res, zodPatterns.base64url, check.message, refs);\n                    break;\n                case \"jwt\":\n                    addPattern(res, zodPatterns.jwt, check.message, refs);\n                    break;\n                case \"cidr\": {\n                    if (check.version !== \"v6\") {\n                        addPattern(res, zodPatterns.ipv4Cidr, check.message, refs);\n                    }\n                    if (check.version !== \"v4\") {\n                        addPattern(res, zodPatterns.ipv6Cidr, check.message, refs);\n                    }\n                    break;\n                }\n                case \"emoji\":\n                    addPattern(res, zodPatterns.emoji(), check.message, refs);\n                    break;\n                case \"ulid\": {\n                    addPattern(res, zodPatterns.ulid, check.message, refs);\n                    break;\n                }\n                case \"base64\": {\n                    switch (refs.base64Strategy) {\n                        case \"format:binary\": {\n                            addFormat(res, \"binary\", check.message, refs);\n                            break;\n                        }\n                        case \"contentEncoding:base64\": {\n                            setResponseValueAndErrors(res, \"contentEncoding\", \"base64\", check.message, refs);\n                            break;\n                        }\n                        case \"pattern:zod\": {\n                            addPattern(res, zodPatterns.base64, check.message, refs);\n                            break;\n                        }\n                    }\n                    break;\n                }\n                case \"nanoid\": {\n                    addPattern(res, zodPatterns.nanoid, check.message, refs);\n                }\n                case \"toLowerCase\":\n                case \"toUpperCase\":\n                case \"trim\":\n                    break;\n                default:\n                    ((_) => { })(check);\n            }\n        }\n    }\n    return res;\n}\nfunction escapeLiteralCheckValue(literal, refs) {\n    return refs.patternStrategy === \"escape\"\n        ? escapeNonAlphaNumeric(literal)\n        : literal;\n}\nconst ALPHA_NUMERIC = new Set(\"ABCDEFGHIJKLMNOPQRSTUVXYZabcdefghijklmnopqrstuvxyz0123456789\");\nfunction escapeNonAlphaNumeric(source) {\n    let result = \"\";\n    for (let i = 0; i < source.length; i++) {\n        if (!ALPHA_NUMERIC.has(source[i])) {\n            result += \"\\\\\";\n        }\n        result += source[i];\n    }\n    return result;\n}\n// Adds a \"format\" keyword to the schema. If a format exists, both formats will be joined in an allOf-node, along with subsequent ones.\nfunction addFormat(schema, value, message, refs) {\n    if (schema.format || schema.anyOf?.some((x) => x.format)) {\n        if (!schema.anyOf) {\n            schema.anyOf = [];\n        }\n        if (schema.format) {\n            schema.anyOf.push({\n                format: schema.format,\n                ...(schema.errorMessage &&\n                    refs.errorMessages && {\n                    errorMessage: { format: schema.errorMessage.format },\n                }),\n            });\n            delete schema.format;\n            if (schema.errorMessage) {\n                delete schema.errorMessage.format;\n                if (Object.keys(schema.errorMessage).length === 0) {\n                    delete schema.errorMessage;\n                }\n            }\n        }\n        schema.anyOf.push({\n            format: value,\n            ...(message &&\n                refs.errorMessages && { errorMessage: { format: message } }),\n        });\n    }\n    else {\n        setResponseValueAndErrors(schema, \"format\", value, message, refs);\n    }\n}\n// Adds a \"pattern\" keyword to the schema. If a pattern exists, both patterns will be joined in an allOf-node, along with subsequent ones.\nfunction addPattern(schema, regex, message, refs) {\n    if (schema.pattern || schema.allOf?.some((x) => x.pattern)) {\n        if (!schema.allOf) {\n            schema.allOf = [];\n        }\n        if (schema.pattern) {\n            schema.allOf.push({\n                pattern: schema.pattern,\n                ...(schema.errorMessage &&\n                    refs.errorMessages && {\n                    errorMessage: { pattern: schema.errorMessage.pattern },\n                }),\n            });\n            delete schema.pattern;\n            if (schema.errorMessage) {\n                delete schema.errorMessage.pattern;\n                if (Object.keys(schema.errorMessage).length === 0) {\n                    delete schema.errorMessage;\n                }\n            }\n        }\n        schema.allOf.push({\n            pattern: stringifyRegExpWithFlags(regex, refs),\n            ...(message &&\n                refs.errorMessages && { errorMessage: { pattern: message } }),\n        });\n    }\n    else {\n        setResponseValueAndErrors(schema, \"pattern\", stringifyRegExpWithFlags(regex, refs), message, refs);\n    }\n}\n// Mutate z.string.regex() in a best attempt to accommodate for regex flags when applyRegexFlags is true\nfunction stringifyRegExpWithFlags(regex, refs) {\n    if (!refs.applyRegexFlags || !regex.flags) {\n        return regex.source;\n    }\n    // Currently handled flags\n    const flags = {\n        i: regex.flags.includes(\"i\"),\n        m: regex.flags.includes(\"m\"),\n        s: regex.flags.includes(\"s\"), // `.` matches newlines\n    };\n    // The general principle here is to step through each character, one at a time, applying mutations as flags require. We keep track when the current character is escaped, and when it's inside a group /like [this]/ or (also) a range like /[a-z]/. The following is fairly brittle imperative code; edit at your peril!\n    const source = flags.i ? regex.source.toLowerCase() : regex.source;\n    let pattern = \"\";\n    let isEscaped = false;\n    let inCharGroup = false;\n    let inCharRange = false;\n    for (let i = 0; i < source.length; i++) {\n        if (isEscaped) {\n            pattern += source[i];\n            isEscaped = false;\n            continue;\n        }\n        if (flags.i) {\n            if (inCharGroup) {\n                if (source[i].match(/[a-z]/)) {\n                    if (inCharRange) {\n                        pattern += source[i];\n                        pattern += `${source[i - 2]}-${source[i]}`.toUpperCase();\n                        inCharRange = false;\n                    }\n                    else if (source[i + 1] === \"-\" && source[i + 2]?.match(/[a-z]/)) {\n                        pattern += source[i];\n                        inCharRange = true;\n                    }\n                    else {\n                        pattern += `${source[i]}${source[i].toUpperCase()}`;\n                    }\n                    continue;\n                }\n            }\n            else if (source[i].match(/[a-z]/)) {\n                pattern += `[${source[i]}${source[i].toUpperCase()}]`;\n                continue;\n            }\n        }\n        if (flags.m) {\n            if (source[i] === \"^\") {\n                pattern += `(^|(?<=[\\r\\n]))`;\n                continue;\n            }\n            else if (source[i] === \"$\") {\n                pattern += `($|(?=[\\r\\n]))`;\n                continue;\n            }\n        }\n        if (flags.s && source[i] === \".\") {\n            pattern += inCharGroup ? `${source[i]}\\r\\n` : `[${source[i]}\\r\\n]`;\n            continue;\n        }\n        pattern += source[i];\n        if (source[i] === \"\\\\\") {\n            isEscaped = true;\n        }\n        else if (inCharGroup && source[i] === \"]\") {\n            inCharGroup = false;\n        }\n        else if (!inCharGroup && source[i] === \"[\") {\n            inCharGroup = true;\n        }\n    }\n    try {\n        new RegExp(pattern);\n    }\n    catch {\n        console.warn(`Could not convert regex pattern at ${refs.currentPath.join(\"/\")} to a flag-independent form! Falling back to the flag-ignorant source`);\n        return regex.source;\n    }\n    return pattern;\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 12488, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/record.js"],"sourcesContent":["import { ZodFirstPartyTypeKind, } from \"zod/v3\";\nimport { parseDef } from \"../parseDef.js\";\nimport { parseStringDef } from \"./string.js\";\nimport { parseBrandedDef } from \"./branded.js\";\nimport { parseAnyDef } from \"./any.js\";\nexport function parseRecordDef(def, refs) {\n    if (refs.target === \"openAi\") {\n        console.warn(\"Warning: OpenAI may not support records in schemas! Try an array of key-value pairs instead.\");\n    }\n    if (refs.target === \"openApi3\" &&\n        def.keyType?._def.typeName === ZodFirstPartyTypeKind.ZodEnum) {\n        return {\n            type: \"object\",\n            required: def.keyType._def.values,\n            properties: def.keyType._def.values.reduce((acc, key) => ({\n                ...acc,\n                [key]: parseDef(def.valueType._def, {\n                    ...refs,\n                    currentPath: [...refs.currentPath, \"properties\", key],\n                }) ?? parseAnyDef(refs),\n            }), {}),\n            additionalProperties: refs.rejectedAdditionalProperties,\n        };\n    }\n    const schema = {\n        type: \"object\",\n        additionalProperties: parseDef(def.valueType._def, {\n            ...refs,\n            currentPath: [...refs.currentPath, \"additionalProperties\"],\n        }) ?? refs.allowedAdditionalProperties,\n    };\n    if (refs.target === \"openApi3\") {\n        return schema;\n    }\n    if (def.keyType?._def.typeName === ZodFirstPartyTypeKind.ZodString &&\n        def.keyType._def.checks?.length) {\n        const { type, ...keyType } = parseStringDef(def.keyType._def, refs);\n        return {\n            ...schema,\n            propertyNames: keyType,\n        };\n    }\n    else if (def.keyType?._def.typeName === ZodFirstPartyTypeKind.ZodEnum) {\n        return {\n            ...schema,\n            propertyNames: {\n                enum: def.keyType._def.values,\n            },\n        };\n    }\n    else if (def.keyType?._def.typeName === ZodFirstPartyTypeKind.ZodBranded &&\n        def.keyType._def.type._def.typeName === ZodFirstPartyTypeKind.ZodString &&\n        def.keyType._def.type._def.checks?.length) {\n        const { type, ...keyType } = parseBrandedDef(def.keyType._def, refs);\n        return {\n            ...schema,\n            propertyNames: keyType,\n        };\n    }\n    return schema;\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;;;;;;AACO,SAAS,eAAe,GAAG,EAAE,IAAI;IACpC,IAAI,KAAK,MAAM,KAAK,UAAU;QAC1B,QAAQ,IAAI,CAAC;IACjB;IACA,IAAI,KAAK,MAAM,KAAK,cAChB,IAAI,OAAO,EAAE,KAAK,aAAa,6JAAqB,CAAC,OAAO,EAAE;QAC9D,OAAO;YACH,MAAM;YACN,UAAU,IAAI,OAAO,CAAC,IAAI,CAAC,MAAM;YACjC,YAAY,IAAI,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,KAAK,MAAQ,CAAC;oBACtD,GAAG,GAAG;oBACN,CAAC,IAAI,EAAE,IAAA,oLAAQ,EAAC,IAAI,SAAS,CAAC,IAAI,EAAE;wBAChC,GAAG,IAAI;wBACP,aAAa;+BAAI,KAAK,WAAW;4BAAE;4BAAc;yBAAI;oBACzD,MAAM,IAAA,6LAAW,EAAC;gBACtB,CAAC,GAAG,CAAC;YACL,sBAAsB,KAAK,4BAA4B;QAC3D;IACJ;IACA,MAAM,SAAS;QACX,MAAM;QACN,sBAAsB,IAAA,oLAAQ,EAAC,IAAI,SAAS,CAAC,IAAI,EAAE;YAC/C,GAAG,IAAI;YACP,aAAa;mBAAI,KAAK,WAAW;gBAAE;aAAuB;QAC9D,MAAM,KAAK,2BAA2B;IAC1C;IACA,IAAI,KAAK,MAAM,KAAK,YAAY;QAC5B,OAAO;IACX;IACA,IAAI,IAAI,OAAO,EAAE,KAAK,aAAa,6JAAqB,CAAC,SAAS,IAC9D,IAAI,OAAO,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ;QACjC,MAAM,EAAE,IAAI,EAAE,GAAG,SAAS,GAAG,IAAA,mMAAc,EAAC,IAAI,OAAO,CAAC,IAAI,EAAE;QAC9D,OAAO;YACH,GAAG,MAAM;YACT,eAAe;QACnB;IACJ,OACK,IAAI,IAAI,OAAO,EAAE,KAAK,aAAa,6JAAqB,CAAC,OAAO,EAAE;QACnE,OAAO;YACH,GAAG,MAAM;YACT,eAAe;gBACX,MAAM,IAAI,OAAO,CAAC,IAAI,CAAC,MAAM;YACjC;QACJ;IACJ,OACK,IAAI,IAAI,OAAO,EAAE,KAAK,aAAa,6JAAqB,CAAC,UAAU,IACpE,IAAI,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,QAAQ,KAAK,6JAAqB,CAAC,SAAS,IACvE,IAAI,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,QAAQ;QAC3C,MAAM,EAAE,IAAI,EAAE,GAAG,SAAS,GAAG,IAAA,qMAAe,EAAC,IAAI,OAAO,CAAC,IAAI,EAAE;QAC/D,OAAO;YACH,GAAG,MAAM;YACT,eAAe;QACnB;IACJ;IACA,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 12563, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/map.js"],"sourcesContent":["import { parseDef } from \"../parseDef.js\";\nimport { parseRecordDef } from \"./record.js\";\nimport { parseAnyDef } from \"./any.js\";\nexport function parseMapDef(def, refs) {\n    if (refs.mapStrategy === \"record\") {\n        return parseRecordDef(def, refs);\n    }\n    const keys = parseDef(def.keyType._def, {\n        ...refs,\n        currentPath: [...refs.currentPath, \"items\", \"items\", \"0\"],\n    }) || parseAnyDef(refs);\n    const values = parseDef(def.valueType._def, {\n        ...refs,\n        currentPath: [...refs.currentPath, \"items\", \"items\", \"1\"],\n    }) || parseAnyDef(refs);\n    return {\n        type: \"array\",\n        maxItems: 125,\n        items: {\n            type: \"array\",\n            items: [keys, values],\n            minItems: 2,\n            maxItems: 2,\n        },\n    };\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AACO,SAAS,YAAY,GAAG,EAAE,IAAI;IACjC,IAAI,KAAK,WAAW,KAAK,UAAU;QAC/B,OAAO,IAAA,mMAAc,EAAC,KAAK;IAC/B;IACA,MAAM,OAAO,IAAA,oLAAQ,EAAC,IAAI,OAAO,CAAC,IAAI,EAAE;QACpC,GAAG,IAAI;QACP,aAAa;eAAI,KAAK,WAAW;YAAE;YAAS;YAAS;SAAI;IAC7D,MAAM,IAAA,6LAAW,EAAC;IAClB,MAAM,SAAS,IAAA,oLAAQ,EAAC,IAAI,SAAS,CAAC,IAAI,EAAE;QACxC,GAAG,IAAI;QACP,aAAa;eAAI,KAAK,WAAW;YAAE;YAAS;YAAS;SAAI;IAC7D,MAAM,IAAA,6LAAW,EAAC;IAClB,OAAO;QACH,MAAM;QACN,UAAU;QACV,OAAO;YACH,MAAM;YACN,OAAO;gBAAC;gBAAM;aAAO;YACrB,UAAU;YACV,UAAU;QACd;IACJ;AACJ","ignoreList":[0]}},
    {"offset": {"line": 12613, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/nativeEnum.js"],"sourcesContent":["export function parseNativeEnumDef(def) {\n    const object = def.values;\n    const actualKeys = Object.keys(def.values).filter((key) => {\n        return typeof object[object[key]] !== \"number\";\n    });\n    const actualValues = actualKeys.map((key) => object[key]);\n    const parsedTypes = Array.from(new Set(actualValues.map((values) => typeof values)));\n    return {\n        type: parsedTypes.length === 1\n            ? parsedTypes[0] === \"string\"\n                ? \"string\"\n                : \"number\"\n            : [\"string\", \"number\"],\n        enum: actualValues,\n    };\n}\n"],"names":[],"mappings":";;;;AAAO,SAAS,mBAAmB,GAAG;IAClC,MAAM,SAAS,IAAI,MAAM;IACzB,MAAM,aAAa,OAAO,IAAI,CAAC,IAAI,MAAM,EAAE,MAAM,CAAC,CAAC;QAC/C,OAAO,OAAO,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK;IAC1C;IACA,MAAM,eAAe,WAAW,GAAG,CAAC,CAAC,MAAQ,MAAM,CAAC,IAAI;IACxD,MAAM,cAAc,MAAM,IAAI,CAAC,IAAI,IAAI,aAAa,GAAG,CAAC,CAAC,SAAW,OAAO;IAC3E,OAAO;QACH,MAAM,YAAY,MAAM,KAAK,IACvB,WAAW,CAAC,EAAE,KAAK,WACf,WACA,WACJ;YAAC;YAAU;SAAS;QAC1B,MAAM;IACV;AACJ","ignoreList":[0]}},
    {"offset": {"line": 12636, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/never.js"],"sourcesContent":["import { parseAnyDef } from \"./any.js\";\nexport function parseNeverDef(refs) {\n    return refs.target === \"openAi\"\n        ? undefined\n        : {\n            not: parseAnyDef({\n                ...refs,\n                currentPath: [...refs.currentPath, \"not\"],\n            }),\n        };\n}\n"],"names":[],"mappings":";;;;AAAA;;AACO,SAAS,cAAc,IAAI;IAC9B,OAAO,KAAK,MAAM,KAAK,WACjB,YACA;QACE,KAAK,IAAA,6LAAW,EAAC;YACb,GAAG,IAAI;YACP,aAAa;mBAAI,KAAK,WAAW;gBAAE;aAAM;QAC7C;IACJ;AACR","ignoreList":[0]}},
    {"offset": {"line": 12657, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/null.js"],"sourcesContent":["export function parseNullDef(refs) {\n    return refs.target === \"openApi3\"\n        ? {\n            enum: [\"null\"],\n            nullable: true,\n        }\n        : {\n            type: \"null\",\n        };\n}\n"],"names":[],"mappings":";;;;AAAO,SAAS,aAAa,IAAI;IAC7B,OAAO,KAAK,MAAM,KAAK,aACjB;QACE,MAAM;YAAC;SAAO;QACd,UAAU;IACd,IACE;QACE,MAAM;IACV;AACR","ignoreList":[0]}},
    {"offset": {"line": 12675, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/union.js"],"sourcesContent":["import { parseDef } from \"../parseDef.js\";\nexport const primitiveMappings = {\n    ZodString: \"string\",\n    ZodNumber: \"number\",\n    ZodBigInt: \"integer\",\n    ZodBoolean: \"boolean\",\n    ZodNull: \"null\",\n};\nexport function parseUnionDef(def, refs) {\n    if (refs.target === \"openApi3\")\n        return asAnyOf(def, refs);\n    const options = def.options instanceof Map ? Array.from(def.options.values()) : def.options;\n    // This blocks tries to look ahead a bit to produce nicer looking schemas with type array instead of anyOf.\n    if (options.every((x) => x._def.typeName in primitiveMappings &&\n        (!x._def.checks || !x._def.checks.length))) {\n        // all types in union are primitive and lack checks, so might as well squash into {type: [...]}\n        const types = options.reduce((types, x) => {\n            const type = primitiveMappings[x._def.typeName]; //Can be safely casted due to row 43\n            return type && !types.includes(type) ? [...types, type] : types;\n        }, []);\n        return {\n            type: types.length > 1 ? types : types[0],\n        };\n    }\n    else if (options.every((x) => x._def.typeName === \"ZodLiteral\" && !x.description)) {\n        // all options literals\n        const types = options.reduce((acc, x) => {\n            const type = typeof x._def.value;\n            switch (type) {\n                case \"string\":\n                case \"number\":\n                case \"boolean\":\n                    return [...acc, type];\n                case \"bigint\":\n                    return [...acc, \"integer\"];\n                case \"object\":\n                    if (x._def.value === null)\n                        return [...acc, \"null\"];\n                case \"symbol\":\n                case \"undefined\":\n                case \"function\":\n                default:\n                    return acc;\n            }\n        }, []);\n        if (types.length === options.length) {\n            // all the literals are primitive, as far as null can be considered primitive\n            const uniqueTypes = types.filter((x, i, a) => a.indexOf(x) === i);\n            return {\n                type: uniqueTypes.length > 1 ? uniqueTypes : uniqueTypes[0],\n                enum: options.reduce((acc, x) => {\n                    return acc.includes(x._def.value) ? acc : [...acc, x._def.value];\n                }, []),\n            };\n        }\n    }\n    else if (options.every((x) => x._def.typeName === \"ZodEnum\")) {\n        return {\n            type: \"string\",\n            enum: options.reduce((acc, x) => [\n                ...acc,\n                ...x._def.values.filter((x) => !acc.includes(x)),\n            ], []),\n        };\n    }\n    return asAnyOf(def, refs);\n}\nconst asAnyOf = (def, refs) => {\n    const anyOf = (def.options instanceof Map\n        ? Array.from(def.options.values())\n        : def.options)\n        .map((x, i) => parseDef(x._def, {\n        ...refs,\n        currentPath: [...refs.currentPath, \"anyOf\", `${i}`],\n    }))\n        .filter((x) => !!x &&\n        (!refs.strictUnions ||\n            (typeof x === \"object\" && Object.keys(x).length > 0)));\n    return anyOf.length ? { anyOf } : undefined;\n};\n"],"names":[],"mappings":";;;;;;AAAA;;AACO,MAAM,oBAAoB;IAC7B,WAAW;IACX,WAAW;IACX,WAAW;IACX,YAAY;IACZ,SAAS;AACb;AACO,SAAS,cAAc,GAAG,EAAE,IAAI;IACnC,IAAI,KAAK,MAAM,KAAK,YAChB,OAAO,QAAQ,KAAK;IACxB,MAAM,UAAU,IAAI,OAAO,YAAY,MAAM,MAAM,IAAI,CAAC,IAAI,OAAO,CAAC,MAAM,MAAM,IAAI,OAAO;IAC3F,2GAA2G;IAC3G,IAAI,QAAQ,KAAK,CAAC,CAAC,IAAM,EAAE,IAAI,CAAC,QAAQ,IAAI,qBACxC,CAAC,CAAC,EAAE,IAAI,CAAC,MAAM,IAAI,CAAC,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,IAAI;QAC5C,+FAA+F;QAC/F,MAAM,QAAQ,QAAQ,MAAM,CAAC,CAAC,OAAO;YACjC,MAAM,OAAO,iBAAiB,CAAC,EAAE,IAAI,CAAC,QAAQ,CAAC,EAAE,oCAAoC;YACrF,OAAO,QAAQ,CAAC,MAAM,QAAQ,CAAC,QAAQ;mBAAI;gBAAO;aAAK,GAAG;QAC9D,GAAG,EAAE;QACL,OAAO;YACH,MAAM,MAAM,MAAM,GAAG,IAAI,QAAQ,KAAK,CAAC,EAAE;QAC7C;IACJ,OACK,IAAI,QAAQ,KAAK,CAAC,CAAC,IAAM,EAAE,IAAI,CAAC,QAAQ,KAAK,gBAAgB,CAAC,EAAE,WAAW,GAAG;QAC/E,uBAAuB;QACvB,MAAM,QAAQ,QAAQ,MAAM,CAAC,CAAC,KAAK;YAC/B,MAAM,OAAO,OAAO,EAAE,IAAI,CAAC,KAAK;YAChC,OAAQ;gBACJ,KAAK;gBACL,KAAK;gBACL,KAAK;oBACD,OAAO;2BAAI;wBAAK;qBAAK;gBACzB,KAAK;oBACD,OAAO;2BAAI;wBAAK;qBAAU;gBAC9B,KAAK;oBACD,IAAI,EAAE,IAAI,CAAC,KAAK,KAAK,MACjB,OAAO;2BAAI;wBAAK;qBAAO;gBAC/B,KAAK;gBACL,KAAK;gBACL,KAAK;gBACL;oBACI,OAAO;YACf;QACJ,GAAG,EAAE;QACL,IAAI,MAAM,MAAM,KAAK,QAAQ,MAAM,EAAE;YACjC,6EAA6E;YAC7E,MAAM,cAAc,MAAM,MAAM,CAAC,CAAC,GAAG,GAAG,IAAM,EAAE,OAAO,CAAC,OAAO;YAC/D,OAAO;gBACH,MAAM,YAAY,MAAM,GAAG,IAAI,cAAc,WAAW,CAAC,EAAE;gBAC3D,MAAM,QAAQ,MAAM,CAAC,CAAC,KAAK;oBACvB,OAAO,IAAI,QAAQ,CAAC,EAAE,IAAI,CAAC,KAAK,IAAI,MAAM;2BAAI;wBAAK,EAAE,IAAI,CAAC,KAAK;qBAAC;gBACpE,GAAG,EAAE;YACT;QACJ;IACJ,OACK,IAAI,QAAQ,KAAK,CAAC,CAAC,IAAM,EAAE,IAAI,CAAC,QAAQ,KAAK,YAAY;QAC1D,OAAO;YACH,MAAM;YACN,MAAM,QAAQ,MAAM,CAAC,CAAC,KAAK,IAAM;uBAC1B;uBACA,EAAE,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC,IAAM,CAAC,IAAI,QAAQ,CAAC;iBAChD,EAAE,EAAE;QACT;IACJ;IACA,OAAO,QAAQ,KAAK;AACxB;AACA,MAAM,UAAU,CAAC,KAAK;IAClB,MAAM,QAAQ,CAAC,IAAI,OAAO,YAAY,MAChC,MAAM,IAAI,CAAC,IAAI,OAAO,CAAC,MAAM,MAC7B,IAAI,OAAO,EACZ,GAAG,CAAC,CAAC,GAAG,IAAM,IAAA,oLAAQ,EAAC,EAAE,IAAI,EAAE;YAChC,GAAG,IAAI;YACP,aAAa;mBAAI,KAAK,WAAW;gBAAE;gBAAS,GAAG,GAAG;aAAC;QACvD,IACK,MAAM,CAAC,CAAC,IAAM,CAAC,CAAC,KACjB,CAAC,CAAC,KAAK,YAAY,IACd,OAAO,MAAM,YAAY,OAAO,IAAI,CAAC,GAAG,MAAM,GAAG,CAAE;IAC5D,OAAO,MAAM,MAAM,GAAG;QAAE;IAAM,IAAI;AACtC","ignoreList":[0]}},
    {"offset": {"line": 12776, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/nullable.js"],"sourcesContent":["import { parseDef } from \"../parseDef.js\";\nimport { primitiveMappings } from \"./union.js\";\nexport function parseNullableDef(def, refs) {\n    if ([\"ZodString\", \"ZodNumber\", \"ZodBigInt\", \"ZodBoolean\", \"ZodNull\"].includes(def.innerType._def.typeName) &&\n        (!def.innerType._def.checks || !def.innerType._def.checks.length)) {\n        if (refs.target === \"openApi3\") {\n            return {\n                type: primitiveMappings[def.innerType._def.typeName],\n                nullable: true,\n            };\n        }\n        return {\n            type: [\n                primitiveMappings[def.innerType._def.typeName],\n                \"null\",\n            ],\n        };\n    }\n    if (refs.target === \"openApi3\") {\n        const base = parseDef(def.innerType._def, {\n            ...refs,\n            currentPath: [...refs.currentPath],\n        });\n        if (base && \"$ref\" in base)\n            return { allOf: [base], nullable: true };\n        return base && { ...base, nullable: true };\n    }\n    const base = parseDef(def.innerType._def, {\n        ...refs,\n        currentPath: [...refs.currentPath, \"anyOf\", \"0\"],\n    });\n    return base && { anyOf: [base, { type: \"null\" }] };\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AACO,SAAS,iBAAiB,GAAG,EAAE,IAAI;IACtC,IAAI;QAAC;QAAa;QAAa;QAAa;QAAc;KAAU,CAAC,QAAQ,CAAC,IAAI,SAAS,CAAC,IAAI,CAAC,QAAQ,KACrG,CAAC,CAAC,IAAI,SAAS,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,IAAI,SAAS,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG;QACnE,IAAI,KAAK,MAAM,KAAK,YAAY;YAC5B,OAAO;gBACH,MAAM,qMAAiB,CAAC,IAAI,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC;gBACpD,UAAU;YACd;QACJ;QACA,OAAO;YACH,MAAM;gBACF,qMAAiB,CAAC,IAAI,SAAS,CAAC,IAAI,CAAC,QAAQ,CAAC;gBAC9C;aACH;QACL;IACJ;IACA,IAAI,KAAK,MAAM,KAAK,YAAY;QAC5B,MAAM,OAAO,IAAA,oLAAQ,EAAC,IAAI,SAAS,CAAC,IAAI,EAAE;YACtC,GAAG,IAAI;YACP,aAAa;mBAAI,KAAK,WAAW;aAAC;QACtC;QACA,IAAI,QAAQ,UAAU,MAClB,OAAO;YAAE,OAAO;gBAAC;aAAK;YAAE,UAAU;QAAK;QAC3C,OAAO,QAAQ;YAAE,GAAG,IAAI;YAAE,UAAU;QAAK;IAC7C;IACA,MAAM,OAAO,IAAA,oLAAQ,EAAC,IAAI,SAAS,CAAC,IAAI,EAAE;QACtC,GAAG,IAAI;QACP,aAAa;eAAI,KAAK,WAAW;YAAE;YAAS;SAAI;IACpD;IACA,OAAO,QAAQ;QAAE,OAAO;YAAC;YAAM;gBAAE,MAAM;YAAO;SAAE;IAAC;AACrD","ignoreList":[0]}},
    {"offset": {"line": 12844, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/number.js"],"sourcesContent":["import { addErrorMessage, setResponseValueAndErrors, } from \"../errorMessages.js\";\nexport function parseNumberDef(def, refs) {\n    const res = {\n        type: \"number\",\n    };\n    if (!def.checks)\n        return res;\n    for (const check of def.checks) {\n        switch (check.kind) {\n            case \"int\":\n                res.type = \"integer\";\n                addErrorMessage(res, \"type\", check.message, refs);\n                break;\n            case \"min\":\n                if (refs.target === \"jsonSchema7\") {\n                    if (check.inclusive) {\n                        setResponseValueAndErrors(res, \"minimum\", check.value, check.message, refs);\n                    }\n                    else {\n                        setResponseValueAndErrors(res, \"exclusiveMinimum\", check.value, check.message, refs);\n                    }\n                }\n                else {\n                    if (!check.inclusive) {\n                        res.exclusiveMinimum = true;\n                    }\n                    setResponseValueAndErrors(res, \"minimum\", check.value, check.message, refs);\n                }\n                break;\n            case \"max\":\n                if (refs.target === \"jsonSchema7\") {\n                    if (check.inclusive) {\n                        setResponseValueAndErrors(res, \"maximum\", check.value, check.message, refs);\n                    }\n                    else {\n                        setResponseValueAndErrors(res, \"exclusiveMaximum\", check.value, check.message, refs);\n                    }\n                }\n                else {\n                    if (!check.inclusive) {\n                        res.exclusiveMaximum = true;\n                    }\n                    setResponseValueAndErrors(res, \"maximum\", check.value, check.message, refs);\n                }\n                break;\n            case \"multipleOf\":\n                setResponseValueAndErrors(res, \"multipleOf\", check.value, check.message, refs);\n                break;\n        }\n    }\n    return res;\n}\n"],"names":[],"mappings":";;;;AAAA;;AACO,SAAS,eAAe,GAAG,EAAE,IAAI;IACpC,MAAM,MAAM;QACR,MAAM;IACV;IACA,IAAI,CAAC,IAAI,MAAM,EACX,OAAO;IACX,KAAK,MAAM,SAAS,IAAI,MAAM,CAAE;QAC5B,OAAQ,MAAM,IAAI;YACd,KAAK;gBACD,IAAI,IAAI,GAAG;gBACX,IAAA,gMAAe,EAAC,KAAK,QAAQ,MAAM,OAAO,EAAE;gBAC5C;YACJ,KAAK;gBACD,IAAI,KAAK,MAAM,KAAK,eAAe;oBAC/B,IAAI,MAAM,SAAS,EAAE;wBACjB,IAAA,0MAAyB,EAAC,KAAK,WAAW,MAAM,KAAK,EAAE,MAAM,OAAO,EAAE;oBAC1E,OACK;wBACD,IAAA,0MAAyB,EAAC,KAAK,oBAAoB,MAAM,KAAK,EAAE,MAAM,OAAO,EAAE;oBACnF;gBACJ,OACK;oBACD,IAAI,CAAC,MAAM,SAAS,EAAE;wBAClB,IAAI,gBAAgB,GAAG;oBAC3B;oBACA,IAAA,0MAAyB,EAAC,KAAK,WAAW,MAAM,KAAK,EAAE,MAAM,OAAO,EAAE;gBAC1E;gBACA;YACJ,KAAK;gBACD,IAAI,KAAK,MAAM,KAAK,eAAe;oBAC/B,IAAI,MAAM,SAAS,EAAE;wBACjB,IAAA,0MAAyB,EAAC,KAAK,WAAW,MAAM,KAAK,EAAE,MAAM,OAAO,EAAE;oBAC1E,OACK;wBACD,IAAA,0MAAyB,EAAC,KAAK,oBAAoB,MAAM,KAAK,EAAE,MAAM,OAAO,EAAE;oBACnF;gBACJ,OACK;oBACD,IAAI,CAAC,MAAM,SAAS,EAAE;wBAClB,IAAI,gBAAgB,GAAG;oBAC3B;oBACA,IAAA,0MAAyB,EAAC,KAAK,WAAW,MAAM,KAAK,EAAE,MAAM,OAAO,EAAE;gBAC1E;gBACA;YACJ,KAAK;gBACD,IAAA,0MAAyB,EAAC,KAAK,cAAc,MAAM,KAAK,EAAE,MAAM,OAAO,EAAE;gBACzE;QACR;IACJ;IACA,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 12900, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/object.js"],"sourcesContent":["import { parseDef } from \"../parseDef.js\";\nexport function parseObjectDef(def, refs) {\n    const forceOptionalIntoNullable = refs.target === \"openAi\";\n    const result = {\n        type: \"object\",\n        properties: {},\n    };\n    const required = [];\n    const shape = def.shape();\n    for (const propName in shape) {\n        let propDef = shape[propName];\n        if (propDef === undefined || propDef._def === undefined) {\n            continue;\n        }\n        let propOptional = safeIsOptional(propDef);\n        if (propOptional && forceOptionalIntoNullable) {\n            if (propDef._def.typeName === \"ZodOptional\") {\n                propDef = propDef._def.innerType;\n            }\n            if (!propDef.isNullable()) {\n                propDef = propDef.nullable();\n            }\n            propOptional = false;\n        }\n        const parsedDef = parseDef(propDef._def, {\n            ...refs,\n            currentPath: [...refs.currentPath, \"properties\", propName],\n            propertyPath: [...refs.currentPath, \"properties\", propName],\n        });\n        if (parsedDef === undefined) {\n            continue;\n        }\n        result.properties[propName] = parsedDef;\n        if (!propOptional) {\n            required.push(propName);\n        }\n    }\n    if (required.length) {\n        result.required = required;\n    }\n    const additionalProperties = decideAdditionalProperties(def, refs);\n    if (additionalProperties !== undefined) {\n        result.additionalProperties = additionalProperties;\n    }\n    return result;\n}\nfunction decideAdditionalProperties(def, refs) {\n    if (def.catchall._def.typeName !== \"ZodNever\") {\n        return parseDef(def.catchall._def, {\n            ...refs,\n            currentPath: [...refs.currentPath, \"additionalProperties\"],\n        });\n    }\n    switch (def.unknownKeys) {\n        case \"passthrough\":\n            return refs.allowedAdditionalProperties;\n        case \"strict\":\n            return refs.rejectedAdditionalProperties;\n        case \"strip\":\n            return refs.removeAdditionalStrategy === \"strict\"\n                ? refs.allowedAdditionalProperties\n                : refs.rejectedAdditionalProperties;\n    }\n}\nfunction safeIsOptional(schema) {\n    try {\n        return schema.isOptional();\n    }\n    catch {\n        return true;\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;;AACO,SAAS,eAAe,GAAG,EAAE,IAAI;IACpC,MAAM,4BAA4B,KAAK,MAAM,KAAK;IAClD,MAAM,SAAS;QACX,MAAM;QACN,YAAY,CAAC;IACjB;IACA,MAAM,WAAW,EAAE;IACnB,MAAM,QAAQ,IAAI,KAAK;IACvB,IAAK,MAAM,YAAY,MAAO;QAC1B,IAAI,UAAU,KAAK,CAAC,SAAS;QAC7B,IAAI,YAAY,aAAa,QAAQ,IAAI,KAAK,WAAW;YACrD;QACJ;QACA,IAAI,eAAe,eAAe;QAClC,IAAI,gBAAgB,2BAA2B;YAC3C,IAAI,QAAQ,IAAI,CAAC,QAAQ,KAAK,eAAe;gBACzC,UAAU,QAAQ,IAAI,CAAC,SAAS;YACpC;YACA,IAAI,CAAC,QAAQ,UAAU,IAAI;gBACvB,UAAU,QAAQ,QAAQ;YAC9B;YACA,eAAe;QACnB;QACA,MAAM,YAAY,IAAA,oLAAQ,EAAC,QAAQ,IAAI,EAAE;YACrC,GAAG,IAAI;YACP,aAAa;mBAAI,KAAK,WAAW;gBAAE;gBAAc;aAAS;YAC1D,cAAc;mBAAI,KAAK,WAAW;gBAAE;gBAAc;aAAS;QAC/D;QACA,IAAI,cAAc,WAAW;YACzB;QACJ;QACA,OAAO,UAAU,CAAC,SAAS,GAAG;QAC9B,IAAI,CAAC,cAAc;YACf,SAAS,IAAI,CAAC;QAClB;IACJ;IACA,IAAI,SAAS,MAAM,EAAE;QACjB,OAAO,QAAQ,GAAG;IACtB;IACA,MAAM,uBAAuB,2BAA2B,KAAK;IAC7D,IAAI,yBAAyB,WAAW;QACpC,OAAO,oBAAoB,GAAG;IAClC;IACA,OAAO;AACX;AACA,SAAS,2BAA2B,GAAG,EAAE,IAAI;IACzC,IAAI,IAAI,QAAQ,CAAC,IAAI,CAAC,QAAQ,KAAK,YAAY;QAC3C,OAAO,IAAA,oLAAQ,EAAC,IAAI,QAAQ,CAAC,IAAI,EAAE;YAC/B,GAAG,IAAI;YACP,aAAa;mBAAI,KAAK,WAAW;gBAAE;aAAuB;QAC9D;IACJ;IACA,OAAQ,IAAI,WAAW;QACnB,KAAK;YACD,OAAO,KAAK,2BAA2B;QAC3C,KAAK;YACD,OAAO,KAAK,4BAA4B;QAC5C,KAAK;YACD,OAAO,KAAK,wBAAwB,KAAK,WACnC,KAAK,2BAA2B,GAChC,KAAK,4BAA4B;IAC/C;AACJ;AACA,SAAS,eAAe,MAAM;IAC1B,IAAI;QACA,OAAO,OAAO,UAAU;IAC5B,EACA,OAAM;QACF,OAAO;IACX;AACJ","ignoreList":[0]}},
    {"offset": {"line": 12989, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/optional.js"],"sourcesContent":["import { parseDef } from \"../parseDef.js\";\nimport { parseAnyDef } from \"./any.js\";\nexport const parseOptionalDef = (def, refs) => {\n    if (refs.currentPath.toString() === refs.propertyPath?.toString()) {\n        return parseDef(def.innerType._def, refs);\n    }\n    const innerSchema = parseDef(def.innerType._def, {\n        ...refs,\n        currentPath: [...refs.currentPath, \"anyOf\", \"1\"],\n    });\n    return innerSchema\n        ? {\n            anyOf: [\n                {\n                    not: parseAnyDef(refs),\n                },\n                innerSchema,\n            ],\n        }\n        : parseAnyDef(refs);\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AACO,MAAM,mBAAmB,CAAC,KAAK;IAClC,IAAI,KAAK,WAAW,CAAC,QAAQ,OAAO,KAAK,YAAY,EAAE,YAAY;QAC/D,OAAO,IAAA,oLAAQ,EAAC,IAAI,SAAS,CAAC,IAAI,EAAE;IACxC;IACA,MAAM,cAAc,IAAA,oLAAQ,EAAC,IAAI,SAAS,CAAC,IAAI,EAAE;QAC7C,GAAG,IAAI;QACP,aAAa;eAAI,KAAK,WAAW;YAAE;YAAS;SAAI;IACpD;IACA,OAAO,cACD;QACE,OAAO;YACH;gBACI,KAAK,IAAA,6LAAW,EAAC;YACrB;YACA;SACH;IACL,IACE,IAAA,6LAAW,EAAC;AACtB","ignoreList":[0]}},
    {"offset": {"line": 13022, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/pipeline.js"],"sourcesContent":["import { parseDef } from \"../parseDef.js\";\nexport const parsePipelineDef = (def, refs) => {\n    if (refs.pipeStrategy === \"input\") {\n        return parseDef(def.in._def, refs);\n    }\n    else if (refs.pipeStrategy === \"output\") {\n        return parseDef(def.out._def, refs);\n    }\n    const a = parseDef(def.in._def, {\n        ...refs,\n        currentPath: [...refs.currentPath, \"allOf\", \"0\"],\n    });\n    const b = parseDef(def.out._def, {\n        ...refs,\n        currentPath: [...refs.currentPath, \"allOf\", a ? \"1\" : \"0\"],\n    });\n    return {\n        allOf: [a, b].filter((x) => x !== undefined),\n    };\n};\n"],"names":[],"mappings":";;;;AAAA;;AACO,MAAM,mBAAmB,CAAC,KAAK;IAClC,IAAI,KAAK,YAAY,KAAK,SAAS;QAC/B,OAAO,IAAA,oLAAQ,EAAC,IAAI,EAAE,CAAC,IAAI,EAAE;IACjC,OACK,IAAI,KAAK,YAAY,KAAK,UAAU;QACrC,OAAO,IAAA,oLAAQ,EAAC,IAAI,GAAG,CAAC,IAAI,EAAE;IAClC;IACA,MAAM,IAAI,IAAA,oLAAQ,EAAC,IAAI,EAAE,CAAC,IAAI,EAAE;QAC5B,GAAG,IAAI;QACP,aAAa;eAAI,KAAK,WAAW;YAAE;YAAS;SAAI;IACpD;IACA,MAAM,IAAI,IAAA,oLAAQ,EAAC,IAAI,GAAG,CAAC,IAAI,EAAE;QAC7B,GAAG,IAAI;QACP,aAAa;eAAI,KAAK,WAAW;YAAE;YAAS,IAAI,MAAM;SAAI;IAC9D;IACA,OAAO;QACH,OAAO;YAAC;YAAG;SAAE,CAAC,MAAM,CAAC,CAAC,IAAM,MAAM;IACtC;AACJ","ignoreList":[0]}},
    {"offset": {"line": 13061, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/promise.js"],"sourcesContent":["import { parseDef } from \"../parseDef.js\";\nexport function parsePromiseDef(def, refs) {\n    return parseDef(def.type._def, refs);\n}\n"],"names":[],"mappings":";;;;AAAA;;AACO,SAAS,gBAAgB,GAAG,EAAE,IAAI;IACrC,OAAO,IAAA,oLAAQ,EAAC,IAAI,IAAI,CAAC,IAAI,EAAE;AACnC","ignoreList":[0]}},
    {"offset": {"line": 13074, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/set.js"],"sourcesContent":["import { setResponseValueAndErrors } from \"../errorMessages.js\";\nimport { parseDef } from \"../parseDef.js\";\nexport function parseSetDef(def, refs) {\n    const items = parseDef(def.valueType._def, {\n        ...refs,\n        currentPath: [...refs.currentPath, \"items\"],\n    });\n    const schema = {\n        type: \"array\",\n        uniqueItems: true,\n        items,\n    };\n    if (def.minSize) {\n        setResponseValueAndErrors(schema, \"minItems\", def.minSize.value, def.minSize.message, refs);\n    }\n    if (def.maxSize) {\n        setResponseValueAndErrors(schema, \"maxItems\", def.maxSize.value, def.maxSize.message, refs);\n    }\n    return schema;\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AACO,SAAS,YAAY,GAAG,EAAE,IAAI;IACjC,MAAM,QAAQ,IAAA,oLAAQ,EAAC,IAAI,SAAS,CAAC,IAAI,EAAE;QACvC,GAAG,IAAI;QACP,aAAa;eAAI,KAAK,WAAW;YAAE;SAAQ;IAC/C;IACA,MAAM,SAAS;QACX,MAAM;QACN,aAAa;QACb;IACJ;IACA,IAAI,IAAI,OAAO,EAAE;QACb,IAAA,0MAAyB,EAAC,QAAQ,YAAY,IAAI,OAAO,CAAC,KAAK,EAAE,IAAI,OAAO,CAAC,OAAO,EAAE;IAC1F;IACA,IAAI,IAAI,OAAO,EAAE;QACb,IAAA,0MAAyB,EAAC,QAAQ,YAAY,IAAI,OAAO,CAAC,KAAK,EAAE,IAAI,OAAO,CAAC,OAAO,EAAE;IAC1F;IACA,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 13107, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/tuple.js"],"sourcesContent":["import { parseDef } from \"../parseDef.js\";\nexport function parseTupleDef(def, refs) {\n    if (def.rest) {\n        return {\n            type: \"array\",\n            minItems: def.items.length,\n            items: def.items\n                .map((x, i) => parseDef(x._def, {\n                ...refs,\n                currentPath: [...refs.currentPath, \"items\", `${i}`],\n            }))\n                .reduce((acc, x) => (x === undefined ? acc : [...acc, x]), []),\n            additionalItems: parseDef(def.rest._def, {\n                ...refs,\n                currentPath: [...refs.currentPath, \"additionalItems\"],\n            }),\n        };\n    }\n    else {\n        return {\n            type: \"array\",\n            minItems: def.items.length,\n            maxItems: def.items.length,\n            items: def.items\n                .map((x, i) => parseDef(x._def, {\n                ...refs,\n                currentPath: [...refs.currentPath, \"items\", `${i}`],\n            }))\n                .reduce((acc, x) => (x === undefined ? acc : [...acc, x]), []),\n        };\n    }\n}\n"],"names":[],"mappings":";;;;AAAA;;AACO,SAAS,cAAc,GAAG,EAAE,IAAI;IACnC,IAAI,IAAI,IAAI,EAAE;QACV,OAAO;YACH,MAAM;YACN,UAAU,IAAI,KAAK,CAAC,MAAM;YAC1B,OAAO,IAAI,KAAK,CACX,GAAG,CAAC,CAAC,GAAG,IAAM,IAAA,oLAAQ,EAAC,EAAE,IAAI,EAAE;oBAChC,GAAG,IAAI;oBACP,aAAa;2BAAI,KAAK,WAAW;wBAAE;wBAAS,GAAG,GAAG;qBAAC;gBACvD,IACK,MAAM,CAAC,CAAC,KAAK,IAAO,MAAM,YAAY,MAAM;uBAAI;oBAAK;iBAAE,EAAG,EAAE;YACjE,iBAAiB,IAAA,oLAAQ,EAAC,IAAI,IAAI,CAAC,IAAI,EAAE;gBACrC,GAAG,IAAI;gBACP,aAAa;uBAAI,KAAK,WAAW;oBAAE;iBAAkB;YACzD;QACJ;IACJ,OACK;QACD,OAAO;YACH,MAAM;YACN,UAAU,IAAI,KAAK,CAAC,MAAM;YAC1B,UAAU,IAAI,KAAK,CAAC,MAAM;YAC1B,OAAO,IAAI,KAAK,CACX,GAAG,CAAC,CAAC,GAAG,IAAM,IAAA,oLAAQ,EAAC,EAAE,IAAI,EAAE;oBAChC,GAAG,IAAI;oBACP,aAAa;2BAAI,KAAK,WAAW;wBAAE;wBAAS,GAAG,GAAG;qBAAC;gBACvD,IACK,MAAM,CAAC,CAAC,KAAK,IAAO,MAAM,YAAY,MAAM;uBAAI;oBAAK;iBAAE,EAAG,EAAE;QACrE;IACJ;AACJ","ignoreList":[0]}},
    {"offset": {"line": 13160, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/undefined.js"],"sourcesContent":["import { parseAnyDef } from \"./any.js\";\nexport function parseUndefinedDef(refs) {\n    return {\n        not: parseAnyDef(refs),\n    };\n}\n"],"names":[],"mappings":";;;;AAAA;;AACO,SAAS,kBAAkB,IAAI;IAClC,OAAO;QACH,KAAK,IAAA,6LAAW,EAAC;IACrB;AACJ","ignoreList":[0]}},
    {"offset": {"line": 13175, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/unknown.js"],"sourcesContent":["import { parseAnyDef } from \"./any.js\";\nexport function parseUnknownDef(refs) {\n    return parseAnyDef(refs);\n}\n"],"names":[],"mappings":";;;;AAAA;;AACO,SAAS,gBAAgB,IAAI;IAChC,OAAO,IAAA,6LAAW,EAAC;AACvB","ignoreList":[0]}},
    {"offset": {"line": 13188, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parsers/readonly.js"],"sourcesContent":["import { parseDef } from \"../parseDef.js\";\nexport const parseReadonlyDef = (def, refs) => {\n    return parseDef(def.innerType._def, refs);\n};\n"],"names":[],"mappings":";;;;AAAA;;AACO,MAAM,mBAAmB,CAAC,KAAK;IAClC,OAAO,IAAA,oLAAQ,EAAC,IAAI,SAAS,CAAC,IAAI,EAAE;AACxC","ignoreList":[0]}},
    {"offset": {"line": 13201, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/selectParser.js"],"sourcesContent":["import { ZodFirstPartyTypeKind } from \"zod/v3\";\nimport { parseAnyDef } from \"./parsers/any.js\";\nimport { parseArrayDef } from \"./parsers/array.js\";\nimport { parseBigintDef } from \"./parsers/bigint.js\";\nimport { parseBooleanDef } from \"./parsers/boolean.js\";\nimport { parseBrandedDef } from \"./parsers/branded.js\";\nimport { parseCatchDef } from \"./parsers/catch.js\";\nimport { parseDateDef } from \"./parsers/date.js\";\nimport { parseDefaultDef } from \"./parsers/default.js\";\nimport { parseEffectsDef } from \"./parsers/effects.js\";\nimport { parseEnumDef } from \"./parsers/enum.js\";\nimport { parseIntersectionDef } from \"./parsers/intersection.js\";\nimport { parseLiteralDef } from \"./parsers/literal.js\";\nimport { parseMapDef } from \"./parsers/map.js\";\nimport { parseNativeEnumDef } from \"./parsers/nativeEnum.js\";\nimport { parseNeverDef } from \"./parsers/never.js\";\nimport { parseNullDef } from \"./parsers/null.js\";\nimport { parseNullableDef } from \"./parsers/nullable.js\";\nimport { parseNumberDef } from \"./parsers/number.js\";\nimport { parseObjectDef } from \"./parsers/object.js\";\nimport { parseOptionalDef } from \"./parsers/optional.js\";\nimport { parsePipelineDef } from \"./parsers/pipeline.js\";\nimport { parsePromiseDef } from \"./parsers/promise.js\";\nimport { parseRecordDef } from \"./parsers/record.js\";\nimport { parseSetDef } from \"./parsers/set.js\";\nimport { parseStringDef } from \"./parsers/string.js\";\nimport { parseTupleDef } from \"./parsers/tuple.js\";\nimport { parseUndefinedDef } from \"./parsers/undefined.js\";\nimport { parseUnionDef } from \"./parsers/union.js\";\nimport { parseUnknownDef } from \"./parsers/unknown.js\";\nimport { parseReadonlyDef } from \"./parsers/readonly.js\";\nexport const selectParser = (def, typeName, refs) => {\n    switch (typeName) {\n        case ZodFirstPartyTypeKind.ZodString:\n            return parseStringDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodNumber:\n            return parseNumberDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodObject:\n            return parseObjectDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodBigInt:\n            return parseBigintDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodBoolean:\n            return parseBooleanDef();\n        case ZodFirstPartyTypeKind.ZodDate:\n            return parseDateDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodUndefined:\n            return parseUndefinedDef(refs);\n        case ZodFirstPartyTypeKind.ZodNull:\n            return parseNullDef(refs);\n        case ZodFirstPartyTypeKind.ZodArray:\n            return parseArrayDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodUnion:\n        case ZodFirstPartyTypeKind.ZodDiscriminatedUnion:\n            return parseUnionDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodIntersection:\n            return parseIntersectionDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodTuple:\n            return parseTupleDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodRecord:\n            return parseRecordDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodLiteral:\n            return parseLiteralDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodEnum:\n            return parseEnumDef(def);\n        case ZodFirstPartyTypeKind.ZodNativeEnum:\n            return parseNativeEnumDef(def);\n        case ZodFirstPartyTypeKind.ZodNullable:\n            return parseNullableDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodOptional:\n            return parseOptionalDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodMap:\n            return parseMapDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodSet:\n            return parseSetDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodLazy:\n            return () => def.getter()._def;\n        case ZodFirstPartyTypeKind.ZodPromise:\n            return parsePromiseDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodNaN:\n        case ZodFirstPartyTypeKind.ZodNever:\n            return parseNeverDef(refs);\n        case ZodFirstPartyTypeKind.ZodEffects:\n            return parseEffectsDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodAny:\n            return parseAnyDef(refs);\n        case ZodFirstPartyTypeKind.ZodUnknown:\n            return parseUnknownDef(refs);\n        case ZodFirstPartyTypeKind.ZodDefault:\n            return parseDefaultDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodBranded:\n            return parseBrandedDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodReadonly:\n            return parseReadonlyDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodCatch:\n            return parseCatchDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodPipeline:\n            return parsePipelineDef(def, refs);\n        case ZodFirstPartyTypeKind.ZodFunction:\n        case ZodFirstPartyTypeKind.ZodVoid:\n        case ZodFirstPartyTypeKind.ZodSymbol:\n            return undefined;\n        default:\n            return ((_) => undefined)(typeName);\n    }\n};\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 13345, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/parseDef.js"],"sourcesContent":["import { ignoreOverride } from \"./Options.js\";\nimport { selectParser } from \"./selectParser.js\";\nimport { getRelativePath } from \"./getRelativePath.js\";\nimport { parseAnyDef } from \"./parsers/any.js\";\nexport function parseDef(def, refs, forceResolution = false) {\n    const seenItem = refs.seen.get(def);\n    if (refs.override) {\n        const overrideResult = refs.override?.(def, refs, seenItem, forceResolution);\n        if (overrideResult !== ignoreOverride) {\n            return overrideResult;\n        }\n    }\n    if (seenItem && !forceResolution) {\n        const seenSchema = get$ref(seenItem, refs);\n        if (seenSchema !== undefined) {\n            return seenSchema;\n        }\n    }\n    const newItem = { def, path: refs.currentPath, jsonSchema: undefined };\n    refs.seen.set(def, newItem);\n    const jsonSchemaOrGetter = selectParser(def, def.typeName, refs);\n    // If the return was a function, then the inner definition needs to be extracted before a call to parseDef (recursive)\n    const jsonSchema = typeof jsonSchemaOrGetter === \"function\"\n        ? parseDef(jsonSchemaOrGetter(), refs)\n        : jsonSchemaOrGetter;\n    if (jsonSchema) {\n        addMeta(def, refs, jsonSchema);\n    }\n    if (refs.postProcess) {\n        const postProcessResult = refs.postProcess(jsonSchema, def, refs);\n        newItem.jsonSchema = jsonSchema;\n        return postProcessResult;\n    }\n    newItem.jsonSchema = jsonSchema;\n    return jsonSchema;\n}\nconst get$ref = (item, refs) => {\n    switch (refs.$refStrategy) {\n        case \"root\":\n            return { $ref: item.path.join(\"/\") };\n        case \"relative\":\n            return { $ref: getRelativePath(refs.currentPath, item.path) };\n        case \"none\":\n        case \"seen\": {\n            if (item.path.length < refs.currentPath.length &&\n                item.path.every((value, index) => refs.currentPath[index] === value)) {\n                console.warn(`Recursive reference detected at ${refs.currentPath.join(\"/\")}! Defaulting to any`);\n                return parseAnyDef(refs);\n            }\n            return refs.$refStrategy === \"seen\" ? parseAnyDef(refs) : undefined;\n        }\n    }\n};\nconst addMeta = (def, refs, jsonSchema) => {\n    if (def.description) {\n        jsonSchema.description = def.description;\n        if (refs.markdownDescription) {\n            jsonSchema.markdownDescription = def.description;\n        }\n    }\n    return jsonSchema;\n};\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;;;;;AACO,SAAS,SAAS,GAAG,EAAE,IAAI,EAAE,kBAAkB,KAAK;IACvD,MAAM,WAAW,KAAK,IAAI,CAAC,GAAG,CAAC;IAC/B,IAAI,KAAK,QAAQ,EAAE;QACf,MAAM,iBAAiB,KAAK,QAAQ,GAAG,KAAK,MAAM,UAAU;QAC5D,IAAI,mBAAmB,yLAAc,EAAE;YACnC,OAAO;QACX;IACJ;IACA,IAAI,YAAY,CAAC,iBAAiB;QAC9B,MAAM,aAAa,QAAQ,UAAU;QACrC,IAAI,eAAe,WAAW;YAC1B,OAAO;QACX;IACJ;IACA,MAAM,UAAU;QAAE;QAAK,MAAM,KAAK,WAAW;QAAE,YAAY;IAAU;IACrE,KAAK,IAAI,CAAC,GAAG,CAAC,KAAK;IACnB,MAAM,qBAAqB,IAAA,4LAAY,EAAC,KAAK,IAAI,QAAQ,EAAE;IAC3D,sHAAsH;IACtH,MAAM,aAAa,OAAO,uBAAuB,aAC3C,SAAS,sBAAsB,QAC/B;IACN,IAAI,YAAY;QACZ,QAAQ,KAAK,MAAM;IACvB;IACA,IAAI,KAAK,WAAW,EAAE;QAClB,MAAM,oBAAoB,KAAK,WAAW,CAAC,YAAY,KAAK;QAC5D,QAAQ,UAAU,GAAG;QACrB,OAAO;IACX;IACA,QAAQ,UAAU,GAAG;IACrB,OAAO;AACX;AACA,MAAM,UAAU,CAAC,MAAM;IACnB,OAAQ,KAAK,YAAY;QACrB,KAAK;YACD,OAAO;gBAAE,MAAM,KAAK,IAAI,CAAC,IAAI,CAAC;YAAK;QACvC,KAAK;YACD,OAAO;gBAAE,MAAM,IAAA,kMAAe,EAAC,KAAK,WAAW,EAAE,KAAK,IAAI;YAAE;QAChE,KAAK;QACL,KAAK;YAAQ;gBACT,IAAI,KAAK,IAAI,CAAC,MAAM,GAAG,KAAK,WAAW,CAAC,MAAM,IAC1C,KAAK,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO,QAAU,KAAK,WAAW,CAAC,MAAM,KAAK,QAAQ;oBACtE,QAAQ,IAAI,CAAC,CAAC,gCAAgC,EAAE,KAAK,WAAW,CAAC,IAAI,CAAC,KAAK,mBAAmB,CAAC;oBAC/F,OAAO,IAAA,6LAAW,EAAC;gBACvB;gBACA,OAAO,KAAK,YAAY,KAAK,SAAS,IAAA,6LAAW,EAAC,QAAQ;YAC9D;IACJ;AACJ;AACA,MAAM,UAAU,CAAC,KAAK,MAAM;IACxB,IAAI,IAAI,WAAW,EAAE;QACjB,WAAW,WAAW,GAAG,IAAI,WAAW;QACxC,IAAI,KAAK,mBAAmB,EAAE;YAC1B,WAAW,mBAAmB,GAAG,IAAI,WAAW;QACpD;IACJ;IACA,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 13425, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 13431, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/zodToJsonSchema.js"],"sourcesContent":["import { parseDef } from \"./parseDef.js\";\nimport { getRefs } from \"./Refs.js\";\nimport { parseAnyDef } from \"./parsers/any.js\";\nconst zodToJsonSchema = (schema, options) => {\n    const refs = getRefs(options);\n    let definitions = typeof options === \"object\" && options.definitions\n        ? Object.entries(options.definitions).reduce((acc, [name, schema]) => ({\n            ...acc,\n            [name]: parseDef(schema._def, {\n                ...refs,\n                currentPath: [...refs.basePath, refs.definitionPath, name],\n            }, true) ?? parseAnyDef(refs),\n        }), {})\n        : undefined;\n    const name = typeof options === \"string\"\n        ? options\n        : options?.nameStrategy === \"title\"\n            ? undefined\n            : options?.name;\n    const main = parseDef(schema._def, name === undefined\n        ? refs\n        : {\n            ...refs,\n            currentPath: [...refs.basePath, refs.definitionPath, name],\n        }, false) ?? parseAnyDef(refs);\n    const title = typeof options === \"object\" &&\n        options.name !== undefined &&\n        options.nameStrategy === \"title\"\n        ? options.name\n        : undefined;\n    if (title !== undefined) {\n        main.title = title;\n    }\n    if (refs.flags.hasReferencedOpenAiAnyType) {\n        if (!definitions) {\n            definitions = {};\n        }\n        if (!definitions[refs.openAiAnyTypeName]) {\n            definitions[refs.openAiAnyTypeName] = {\n                // Skipping \"object\" as no properties can be defined and additionalProperties must be \"false\"\n                type: [\"string\", \"number\", \"integer\", \"boolean\", \"array\", \"null\"],\n                items: {\n                    $ref: refs.$refStrategy === \"relative\"\n                        ? \"1\"\n                        : [\n                            ...refs.basePath,\n                            refs.definitionPath,\n                            refs.openAiAnyTypeName,\n                        ].join(\"/\"),\n                },\n            };\n        }\n    }\n    const combined = name === undefined\n        ? definitions\n            ? {\n                ...main,\n                [refs.definitionPath]: definitions,\n            }\n            : main\n        : {\n            $ref: [\n                ...(refs.$refStrategy === \"relative\" ? [] : refs.basePath),\n                refs.definitionPath,\n                name,\n            ].join(\"/\"),\n            [refs.definitionPath]: {\n                ...definitions,\n                [name]: main,\n            },\n        };\n    if (refs.target === \"jsonSchema7\") {\n        combined.$schema = \"http://json-schema.org/draft-07/schema#\";\n    }\n    else if (refs.target === \"jsonSchema2019-09\" || refs.target === \"openAi\") {\n        combined.$schema = \"https://json-schema.org/draft/2019-09/schema#\";\n    }\n    if (refs.target === \"openAi\" &&\n        (\"anyOf\" in combined ||\n            \"oneOf\" in combined ||\n            \"allOf\" in combined ||\n            (\"type\" in combined && Array.isArray(combined.type)))) {\n        console.warn(\"Warning: OpenAI may not support schemas with unions as roots! Try wrapping it in an object property.\");\n    }\n    return combined;\n};\nexport { zodToJsonSchema };\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AACA,MAAM,kBAAkB,CAAC,QAAQ;IAC7B,MAAM,OAAO,IAAA,+KAAO,EAAC;IACrB,IAAI,cAAc,OAAO,YAAY,YAAY,QAAQ,WAAW,GAC9D,OAAO,OAAO,CAAC,QAAQ,WAAW,EAAE,MAAM,CAAC,CAAC,KAAK,CAAC,MAAM,OAAO,GAAK,CAAC;YACnE,GAAG,GAAG;YACN,CAAC,KAAK,EAAE,IAAA,oLAAQ,EAAC,OAAO,IAAI,EAAE;gBAC1B,GAAG,IAAI;gBACP,aAAa;uBAAI,KAAK,QAAQ;oBAAE,KAAK,cAAc;oBAAE;iBAAK;YAC9D,GAAG,SAAS,IAAA,6LAAW,EAAC;QAC5B,CAAC,GAAG,CAAC,KACH;IACN,MAAM,OAAO,OAAO,YAAY,WAC1B,UACA,SAAS,iBAAiB,UACtB,YACA,SAAS;IACnB,MAAM,OAAO,IAAA,oLAAQ,EAAC,OAAO,IAAI,EAAE,SAAS,YACtC,OACA;QACE,GAAG,IAAI;QACP,aAAa;eAAI,KAAK,QAAQ;YAAE,KAAK,cAAc;YAAE;SAAK;IAC9D,GAAG,UAAU,IAAA,6LAAW,EAAC;IAC7B,MAAM,QAAQ,OAAO,YAAY,YAC7B,QAAQ,IAAI,KAAK,aACjB,QAAQ,YAAY,KAAK,UACvB,QAAQ,IAAI,GACZ;IACN,IAAI,UAAU,WAAW;QACrB,KAAK,KAAK,GAAG;IACjB;IACA,IAAI,KAAK,KAAK,CAAC,0BAA0B,EAAE;QACvC,IAAI,CAAC,aAAa;YACd,cAAc,CAAC;QACnB;QACA,IAAI,CAAC,WAAW,CAAC,KAAK,iBAAiB,CAAC,EAAE;YACtC,WAAW,CAAC,KAAK,iBAAiB,CAAC,GAAG;gBAClC,6FAA6F;gBAC7F,MAAM;oBAAC;oBAAU;oBAAU;oBAAW;oBAAW;oBAAS;iBAAO;gBACjE,OAAO;oBACH,MAAM,KAAK,YAAY,KAAK,aACtB,MACA;2BACK,KAAK,QAAQ;wBAChB,KAAK,cAAc;wBACnB,KAAK,iBAAiB;qBACzB,CAAC,IAAI,CAAC;gBACf;YACJ;QACJ;IACJ;IACA,MAAM,WAAW,SAAS,YACpB,cACI;QACE,GAAG,IAAI;QACP,CAAC,KAAK,cAAc,CAAC,EAAE;IAC3B,IACE,OACJ;QACE,MAAM;eACE,KAAK,YAAY,KAAK,aAAa,EAAE,GAAG,KAAK,QAAQ;YACzD,KAAK,cAAc;YACnB;SACH,CAAC,IAAI,CAAC;QACP,CAAC,KAAK,cAAc,CAAC,EAAE;YACnB,GAAG,WAAW;YACd,CAAC,KAAK,EAAE;QACZ;IACJ;IACJ,IAAI,KAAK,MAAM,KAAK,eAAe;QAC/B,SAAS,OAAO,GAAG;IACvB,OACK,IAAI,KAAK,MAAM,KAAK,uBAAuB,KAAK,MAAM,KAAK,UAAU;QACtE,SAAS,OAAO,GAAG;IACvB;IACA,IAAI,KAAK,MAAM,KAAK,YAChB,CAAC,WAAW,YACR,WAAW,YACX,WAAW,YACV,UAAU,YAAY,MAAM,OAAO,CAAC,SAAS,IAAI,CAAE,GAAG;QAC3D,QAAQ,IAAI,CAAC;IACjB;IACA,OAAO;AACX","ignoreList":[0]}},
    {"offset": {"line": 13521, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-to-json-schema/dist/esm/index.js"],"sourcesContent":["export * from \"./Options.js\";\nexport * from \"./Refs.js\";\nexport * from \"./errorMessages.js\";\nexport * from \"./getRelativePath.js\";\nexport * from \"./parseDef.js\";\nexport * from \"./parseTypes.js\";\nexport * from \"./parsers/any.js\";\nexport * from \"./parsers/array.js\";\nexport * from \"./parsers/bigint.js\";\nexport * from \"./parsers/boolean.js\";\nexport * from \"./parsers/branded.js\";\nexport * from \"./parsers/catch.js\";\nexport * from \"./parsers/date.js\";\nexport * from \"./parsers/default.js\";\nexport * from \"./parsers/effects.js\";\nexport * from \"./parsers/enum.js\";\nexport * from \"./parsers/intersection.js\";\nexport * from \"./parsers/literal.js\";\nexport * from \"./parsers/map.js\";\nexport * from \"./parsers/nativeEnum.js\";\nexport * from \"./parsers/never.js\";\nexport * from \"./parsers/null.js\";\nexport * from \"./parsers/nullable.js\";\nexport * from \"./parsers/number.js\";\nexport * from \"./parsers/object.js\";\nexport * from \"./parsers/optional.js\";\nexport * from \"./parsers/pipeline.js\";\nexport * from \"./parsers/promise.js\";\nexport * from \"./parsers/readonly.js\";\nexport * from \"./parsers/record.js\";\nexport * from \"./parsers/set.js\";\nexport * from \"./parsers/string.js\";\nexport * from \"./parsers/tuple.js\";\nexport * from \"./parsers/undefined.js\";\nexport * from \"./parsers/union.js\";\nexport * from \"./parsers/unknown.js\";\nexport * from \"./selectParser.js\";\nexport * from \"./zodToJsonSchema.js\";\nimport { zodToJsonSchema } from \"./zodToJsonSchema.js\";\nexport default zodToJsonSchema;\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uCAEe,kMAAe","ignoreList":[0]}},
    {"offset": {"line": 13607, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-from-json-schema/dist/index.mjs"],"sourcesContent":["// src/core/converter.ts\nimport { z as z14 } from \"zod/v4\";\n\n// src/handlers/primitive/type.ts\nimport { z } from \"zod/v4\";\nvar TypeHandler = class {\n  apply(types, schema) {\n    if (!schema.type) return;\n    const allowedTypes = Array.isArray(schema.type) ? schema.type : [schema.type];\n    const typeSet = new Set(allowedTypes);\n    if (!typeSet.has(\"string\")) {\n      types.string = false;\n    }\n    if (!typeSet.has(\"number\") && !typeSet.has(\"integer\")) {\n      types.number = false;\n    }\n    if (!typeSet.has(\"boolean\")) {\n      types.boolean = false;\n    }\n    if (!typeSet.has(\"null\")) {\n      types.null = false;\n    }\n    if (!typeSet.has(\"array\")) {\n      types.array = false;\n    }\n    if (!typeSet.has(\"object\")) {\n      types.object = false;\n    }\n    if (typeSet.has(\"integer\") && types.number !== false) {\n      const currentNumber = types.number || z.number();\n      if (currentNumber instanceof z.ZodNumber) {\n        types.number = currentNumber.int();\n      }\n    }\n  }\n};\n\n// src/handlers/primitive/const.ts\nimport { z as z2 } from \"zod/v4\";\nvar ConstHandler = class {\n  apply(types, schema) {\n    if (schema.const === void 0) return;\n    const constValue = schema.const;\n    types.string = false;\n    types.number = false;\n    types.boolean = false;\n    types.null = false;\n    types.array = false;\n    types.object = false;\n    if (typeof constValue === \"string\") {\n      types.string = z2.literal(constValue);\n    } else if (typeof constValue === \"number\") {\n      types.number = z2.literal(constValue);\n    } else if (typeof constValue === \"boolean\") {\n      types.boolean = z2.literal(constValue);\n    } else if (constValue === null) {\n      types.null = z2.null();\n    } else if (Array.isArray(constValue)) {\n      types.array = void 0;\n    } else if (typeof constValue === \"object\") {\n      types.object = void 0;\n    }\n  }\n};\n\n// src/handlers/primitive/enum.ts\nimport { z as z3 } from \"zod/v4\";\nvar EnumHandler = class {\n  apply(types, schema) {\n    if (!schema.enum) return;\n    if (schema.enum.length === 0) {\n      if (!schema.type) {\n        types.string = false;\n        types.number = false;\n        types.boolean = false;\n        types.null = false;\n        types.array = false;\n        types.object = false;\n      }\n      return;\n    }\n    const valuesByType = {\n      string: schema.enum.filter((v) => typeof v === \"string\"),\n      number: schema.enum.filter((v) => typeof v === \"number\"),\n      boolean: schema.enum.filter((v) => typeof v === \"boolean\"),\n      null: schema.enum.filter((v) => v === null),\n      array: schema.enum.filter((v) => Array.isArray(v)),\n      object: schema.enum.filter((v) => typeof v === \"object\" && v !== null && !Array.isArray(v))\n    };\n    types.string = this.createTypeSchema(valuesByType.string, \"string\");\n    types.number = this.createTypeSchema(valuesByType.number, \"number\");\n    types.boolean = this.createTypeSchema(valuesByType.boolean, \"boolean\");\n    types.null = valuesByType.null.length > 0 ? z3.null() : false;\n    types.array = valuesByType.array.length > 0 ? void 0 : false;\n    types.object = valuesByType.object.length > 0 ? void 0 : false;\n  }\n  createTypeSchema(values, type) {\n    if (values.length === 0) return false;\n    if (values.length === 1) {\n      return z3.literal(values[0]);\n    }\n    if (type === \"string\") {\n      return z3.enum(values);\n    }\n    if (type === \"number\") {\n      const [first, second, ...rest] = values;\n      return z3.union([z3.literal(first), z3.literal(second), ...rest.map((v) => z3.literal(v))]);\n    }\n    if (type === \"boolean\") {\n      return z3.union([z3.literal(true), z3.literal(false)]);\n    }\n    return false;\n  }\n};\n\n// src/handlers/primitive/file.ts\nimport { z as z4 } from \"zod/v4\";\nvar FileHandler = class {\n  apply(types, schema) {\n    const stringSchema = schema;\n    if (stringSchema.type === \"string\" && stringSchema.format === \"binary\" && stringSchema.contentEncoding === \"binary\") {\n      let fileSchema = z4.file();\n      if (stringSchema.minLength !== void 0) {\n        fileSchema = fileSchema.min(stringSchema.minLength);\n      }\n      if (stringSchema.maxLength !== void 0) {\n        fileSchema = fileSchema.max(stringSchema.maxLength);\n      }\n      if (stringSchema.contentMediaType !== void 0) {\n        fileSchema = fileSchema.mime(stringSchema.contentMediaType);\n      }\n      types.file = fileSchema;\n      types.string = false;\n    }\n  }\n};\n\n// src/handlers/primitive/string.ts\nimport { z as z5 } from \"zod/v4\";\nvar ImplicitStringHandler = class {\n  apply(types, schema) {\n    const stringSchema = schema;\n    if (schema.type === void 0 && (stringSchema.minLength !== void 0 || stringSchema.maxLength !== void 0 || stringSchema.pattern !== void 0)) {\n      if (types.string === void 0) {\n        types.string = z5.string();\n      }\n    }\n  }\n};\nvar MinLengthHandler = class {\n  apply(types, schema) {\n    const stringSchema = schema;\n    if (stringSchema.minLength === void 0) return;\n    if (types.string !== false) {\n      const currentString = types.string || z5.string();\n      if (currentString instanceof z5.ZodString) {\n        types.string = currentString.refine(\n          (value) => {\n            const graphemeLength = Array.from(value).length;\n            return graphemeLength >= stringSchema.minLength;\n          },\n          { message: `String must be at least ${stringSchema.minLength} characters long` }\n        );\n      }\n    }\n  }\n};\nvar MaxLengthHandler = class {\n  apply(types, schema) {\n    const stringSchema = schema;\n    if (stringSchema.maxLength === void 0) return;\n    if (types.string !== false) {\n      const currentString = types.string || z5.string();\n      if (currentString instanceof z5.ZodString) {\n        types.string = currentString.refine(\n          (value) => {\n            const graphemeLength = Array.from(value).length;\n            return graphemeLength <= stringSchema.maxLength;\n          },\n          { message: `String must be at most ${stringSchema.maxLength} characters long` }\n        );\n      }\n    }\n  }\n};\nvar PatternHandler = class {\n  apply(types, schema) {\n    const stringSchema = schema;\n    if (!stringSchema.pattern) return;\n    if (types.string !== false) {\n      const currentString = types.string || z5.string();\n      if (currentString instanceof z5.ZodString) {\n        const regex = new RegExp(stringSchema.pattern);\n        types.string = currentString.regex(regex);\n      }\n    }\n  }\n};\n\n// src/handlers/primitive/number.ts\nimport { z as z6 } from \"zod/v4\";\nvar MinimumHandler = class {\n  apply(types, schema) {\n    const numberSchema = schema;\n    if (numberSchema.minimum === void 0) return;\n    if (types.number !== false) {\n      const currentNumber = types.number || z6.number();\n      if (currentNumber instanceof z6.ZodNumber) {\n        types.number = currentNumber.min(numberSchema.minimum);\n      }\n    }\n  }\n};\nvar MaximumHandler = class {\n  apply(types, schema) {\n    const numberSchema = schema;\n    if (numberSchema.maximum === void 0) return;\n    if (types.number !== false) {\n      const currentNumber = types.number || z6.number();\n      if (currentNumber instanceof z6.ZodNumber) {\n        types.number = currentNumber.max(numberSchema.maximum);\n      }\n    }\n  }\n};\nvar ExclusiveMinimumHandler = class {\n  apply(types, schema) {\n    const numberSchema = schema;\n    if (numberSchema.exclusiveMinimum === void 0) return;\n    if (types.number !== false) {\n      const currentNumber = types.number || z6.number();\n      if (currentNumber instanceof z6.ZodNumber) {\n        if (typeof numberSchema.exclusiveMinimum === \"number\") {\n          types.number = currentNumber.gt(numberSchema.exclusiveMinimum);\n        } else {\n          types.number = false;\n        }\n      }\n    }\n  }\n};\nvar ExclusiveMaximumHandler = class {\n  apply(types, schema) {\n    const numberSchema = schema;\n    if (numberSchema.exclusiveMaximum === void 0) return;\n    if (types.number !== false) {\n      const currentNumber = types.number || z6.number();\n      if (currentNumber instanceof z6.ZodNumber) {\n        if (typeof numberSchema.exclusiveMaximum === \"number\") {\n          types.number = currentNumber.lt(numberSchema.exclusiveMaximum);\n        } else {\n          types.number = false;\n        }\n      }\n    }\n  }\n};\nvar MultipleOfHandler = class {\n  apply(types, schema) {\n    const numberSchema = schema;\n    if (numberSchema.multipleOf === void 0) return;\n    if (types.number !== false) {\n      const currentNumber = types.number || z6.number();\n      if (currentNumber instanceof z6.ZodNumber) {\n        types.number = currentNumber.refine(\n          (value) => {\n            if (numberSchema.multipleOf === 0) return false;\n            const quotient = value / numberSchema.multipleOf;\n            const rounded = Math.round(quotient);\n            const tolerance = Math.min(\n              Math.abs(value) * Number.EPSILON * 10,\n              Math.abs(numberSchema.multipleOf) * Number.EPSILON * 10\n            );\n            return Math.abs(quotient - rounded) <= tolerance / Math.abs(numberSchema.multipleOf);\n          },\n          { message: `Must be a multiple of ${numberSchema.multipleOf}` }\n        );\n      }\n    }\n  }\n};\n\n// src/handlers/primitive/array.ts\nimport { z as z7 } from \"zod/v4\";\nvar ImplicitArrayHandler = class {\n  apply(types, schema) {\n    const arraySchema = schema;\n    if (schema.type === void 0 && (arraySchema.minItems !== void 0 || arraySchema.maxItems !== void 0 || arraySchema.items !== void 0 || arraySchema.prefixItems !== void 0)) {\n      if (types.array === void 0) {\n        types.array = z7.array(z7.any());\n      }\n    }\n  }\n};\nvar MinItemsHandler = class {\n  apply(types, schema) {\n    const arraySchema = schema;\n    if (arraySchema.minItems === void 0) return;\n    if (types.array !== false) {\n      types.array = (types.array || z7.array(z7.any())).min(arraySchema.minItems);\n    }\n  }\n};\nvar MaxItemsHandler = class {\n  apply(types, schema) {\n    const arraySchema = schema;\n    if (arraySchema.maxItems === void 0) return;\n    if (types.array !== false) {\n      types.array = (types.array || z7.array(z7.any())).max(arraySchema.maxItems);\n    }\n  }\n};\nvar ItemsHandler = class {\n  apply(types, schema) {\n    const arraySchema = schema;\n    if (types.array === false) return;\n    if (Array.isArray(arraySchema.items)) {\n      types.array = types.array || z7.array(z7.any());\n    } else if (arraySchema.items && typeof arraySchema.items !== \"boolean\" && !arraySchema.prefixItems) {\n      const itemSchema = convertJsonSchemaToZod(arraySchema.items);\n      let newArray = z7.array(itemSchema);\n      if (types.array && types.array instanceof z7.ZodArray) {\n        const existingDef = types.array._def;\n        if (existingDef.checks) {\n          existingDef.checks.forEach((check) => {\n            if (check._zod && check._zod.def) {\n              const def = check._zod.def;\n              if (def.check === \"min_length\" && def.minimum !== void 0) {\n                newArray = newArray.min(def.minimum);\n              } else if (def.check === \"max_length\" && def.maximum !== void 0) {\n                newArray = newArray.max(def.maximum);\n              }\n            }\n          });\n        }\n      }\n      types.array = newArray;\n    } else if (typeof arraySchema.items === \"boolean\" && arraySchema.items === false) {\n      if (!arraySchema.prefixItems) {\n        types.array = z7.array(z7.any()).max(0);\n      } else {\n        types.array = types.array || z7.array(z7.any());\n      }\n    } else if (typeof arraySchema.items === \"boolean\" && arraySchema.items === true) {\n      types.array = types.array || z7.array(z7.any());\n    } else if (arraySchema.prefixItems) {\n      types.array = types.array || z7.array(z7.any());\n    }\n  }\n};\n\n// src/handlers/primitive/tuple.ts\nimport { z as z8 } from \"zod/v4\";\nvar TupleHandler = class {\n  apply(types, schema) {\n    if (schema.type !== \"array\") return;\n    const arraySchema = schema;\n    if (!Array.isArray(arraySchema.items)) return;\n    if (types.array === false) return;\n    const itemSchemas = arraySchema.items.map((itemSchema) => convertJsonSchemaToZod(itemSchema));\n    let tuple;\n    if (itemSchemas.length === 0) {\n      tuple = z8.tuple([]);\n    } else {\n      tuple = z8.tuple(itemSchemas);\n    }\n    if (arraySchema.minItems !== void 0 && arraySchema.minItems > itemSchemas.length) {\n      tuple = false;\n    }\n    if (arraySchema.maxItems !== void 0 && arraySchema.maxItems < itemSchemas.length) {\n      tuple = false;\n    }\n    types.tuple = tuple;\n    types.array = false;\n  }\n};\n\n// src/handlers/primitive/object.ts\nimport { z as z9 } from \"zod/v4\";\nvar PropertiesHandler = class {\n  apply(types, schema) {\n    const objectSchema = schema;\n    if (types.object === false) return;\n    if (objectSchema.properties || objectSchema.required || objectSchema.additionalProperties !== void 0) {\n      types.object = types.object || z9.object({}).passthrough();\n    }\n  }\n};\nvar ImplicitObjectHandler = class {\n  apply(types, schema) {\n    const objectSchema = schema;\n    if (schema.type === void 0 && (objectSchema.maxProperties !== void 0 || objectSchema.minProperties !== void 0)) {\n      if (types.object === void 0) {\n        types.object = z9.object({}).passthrough();\n      }\n    }\n  }\n};\nvar MaxPropertiesHandler = class {\n  apply(types, schema) {\n    const objectSchema = schema;\n    if (objectSchema.maxProperties === void 0) return;\n    if (types.object !== false) {\n      const baseObject = types.object || z9.object({}).passthrough();\n      types.object = baseObject.refine(\n        (obj) => Object.keys(obj).length <= objectSchema.maxProperties,\n        { message: `Object must have at most ${objectSchema.maxProperties} properties` }\n      );\n    }\n  }\n};\nvar MinPropertiesHandler = class {\n  apply(types, schema) {\n    const objectSchema = schema;\n    if (objectSchema.minProperties === void 0) return;\n    if (types.object !== false) {\n      const baseObject = types.object || z9.object({}).passthrough();\n      types.object = baseObject.refine(\n        (obj) => Object.keys(obj).length >= objectSchema.minProperties,\n        { message: `Object must have at least ${objectSchema.minProperties} properties` }\n      );\n    }\n  }\n};\n\n// src/core/utils.ts\nfunction deepEqual(a, b) {\n  if (a === b) return true;\n  if (a == null || b == null) return a === b;\n  if (typeof a !== typeof b) return false;\n  if (Array.isArray(a) && Array.isArray(b)) {\n    if (a.length !== b.length) return false;\n    return a.every((item, index) => deepEqual(item, b[index]));\n  }\n  if (typeof a === \"object\" && typeof b === \"object\") {\n    const keysA = Object.keys(a);\n    const keysB = Object.keys(b);\n    if (keysA.length !== keysB.length) return false;\n    return keysA.every((key) => keysB.includes(key) && deepEqual(a[key], b[key]));\n  }\n  return false;\n}\nfunction createUniqueItemsValidator() {\n  return (value) => {\n    if (!Array.isArray(value)) {\n      return true;\n    }\n    const seen = [];\n    return value.every((item) => {\n      const isDuplicate = seen.some((seenItem) => deepEqual(item, seenItem));\n      if (isDuplicate) {\n        return false;\n      }\n      seen.push(item);\n      return true;\n    });\n  };\n}\nfunction isValidWithSchema(schema, value) {\n  return schema.safeParse(value).success;\n}\n\n// src/handlers/refinement/not.ts\nvar NotHandler = class {\n  apply(zodSchema, schema) {\n    if (!schema.not) return zodSchema;\n    const notSchema = convertJsonSchemaToZod(schema.not);\n    return zodSchema.refine(\n      (value) => !isValidWithSchema(notSchema, value),\n      { message: \"Value must not match the 'not' schema\" }\n    );\n  }\n};\n\n// src/handlers/refinement/uniqueItems.ts\nvar UniqueItemsHandler = class {\n  apply(zodSchema, schema) {\n    const arraySchema = schema;\n    if (arraySchema.uniqueItems !== true) return zodSchema;\n    return zodSchema.refine(createUniqueItemsValidator(), {\n      message: \"Array items must be unique\"\n    });\n  }\n};\n\n// src/handlers/refinement/allOf.ts\nimport { z as z10 } from \"zod/v4\";\nvar AllOfHandler = class {\n  apply(zodSchema, schema) {\n    if (!schema.allOf || schema.allOf.length === 0) return zodSchema;\n    const allOfSchemas = schema.allOf.map((s) => convertJsonSchemaToZod(s));\n    return allOfSchemas.reduce(\n      (acc, s) => z10.intersection(acc, s),\n      zodSchema\n    );\n  }\n};\n\n// src/handlers/refinement/anyOf.ts\nimport { z as z11 } from \"zod/v4\";\nvar AnyOfHandler = class {\n  apply(zodSchema, schema) {\n    if (!schema.anyOf || schema.anyOf.length === 0) return zodSchema;\n    const anyOfSchema = schema.anyOf.length === 1 ? convertJsonSchemaToZod(schema.anyOf[0]) : z11.union([\n      convertJsonSchemaToZod(schema.anyOf[0]),\n      convertJsonSchemaToZod(schema.anyOf[1]),\n      ...schema.anyOf.slice(2).map((s) => convertJsonSchemaToZod(s))\n    ]);\n    return z11.intersection(zodSchema, anyOfSchema);\n  }\n};\n\n// src/handlers/refinement/oneOf.ts\nvar OneOfHandler = class {\n  apply(zodSchema, schema) {\n    if (!schema.oneOf || schema.oneOf.length === 0) return zodSchema;\n    const oneOfSchemas = schema.oneOf.map((s) => convertJsonSchemaToZod(s));\n    return zodSchema.refine(\n      (value) => {\n        let validCount = 0;\n        for (const oneOfSchema of oneOfSchemas) {\n          const result = oneOfSchema.safeParse(value);\n          if (result.success) {\n            validCount++;\n            if (validCount > 1) return false;\n          }\n        }\n        return validCount === 1;\n      },\n      { message: \"Value must match exactly one of the oneOf schemas\" }\n    );\n  }\n};\n\n// src/handlers/refinement/arrayItems.ts\nvar PrefixItemsHandler = class {\n  apply(zodSchema, schema) {\n    const arraySchema = schema;\n    if (arraySchema.prefixItems && Array.isArray(arraySchema.prefixItems)) {\n      const prefixItems = arraySchema.prefixItems;\n      const prefixSchemas = prefixItems.map((itemSchema) => convertJsonSchemaToZod(itemSchema));\n      return zodSchema.refine(\n        (value) => {\n          if (!Array.isArray(value)) return true;\n          for (let i = 0; i < Math.min(value.length, prefixSchemas.length); i++) {\n            if (!isValidWithSchema(prefixSchemas[i], value[i])) {\n              return false;\n            }\n          }\n          if (value.length > prefixSchemas.length) {\n            if (typeof arraySchema.items === \"boolean\" && arraySchema.items === false) {\n              return false;\n            } else if (arraySchema.items && typeof arraySchema.items === \"object\" && !Array.isArray(arraySchema.items)) {\n              const additionalItemSchema = convertJsonSchemaToZod(arraySchema.items);\n              for (let i = prefixSchemas.length; i < value.length; i++) {\n                if (!isValidWithSchema(additionalItemSchema, value[i])) {\n                  return false;\n                }\n              }\n            }\n          }\n          return true;\n        },\n        { message: \"Array does not match prefixItems schema\" }\n      );\n    }\n    return zodSchema;\n  }\n};\n\n// src/handlers/refinement/objectProperties.ts\nimport { z as z12 } from \"zod/v4\";\nvar ObjectPropertiesHandler = class {\n  apply(zodSchema, schema) {\n    const objectSchema = schema;\n    if (!objectSchema.properties && !objectSchema.required && objectSchema.additionalProperties !== false) {\n      return zodSchema;\n    }\n    if (zodSchema instanceof z12.ZodObject || zodSchema instanceof z12.ZodRecord) {\n      const shape = {};\n      if (objectSchema.properties) {\n        for (const [key, propSchema] of Object.entries(objectSchema.properties)) {\n          if (propSchema !== void 0) {\n            shape[key] = convertJsonSchemaToZod(propSchema);\n          }\n        }\n      }\n      if (objectSchema.required && Array.isArray(objectSchema.required)) {\n        const required = new Set(objectSchema.required);\n        for (const key of Object.keys(shape)) {\n          if (!required.has(key)) {\n            shape[key] = shape[key].optional();\n          }\n        }\n      } else {\n        for (const key of Object.keys(shape)) {\n          shape[key] = shape[key].optional();\n        }\n      }\n      if (objectSchema.additionalProperties === false) {\n        return z12.object(shape);\n      } else {\n        return z12.object(shape).passthrough();\n      }\n    }\n    return zodSchema.refine(\n      (value) => {\n        if (typeof value !== \"object\" || value === null || Array.isArray(value)) {\n          return true;\n        }\n        if (objectSchema.properties) {\n          for (const [propName, propSchema] of Object.entries(objectSchema.properties)) {\n            if (propSchema !== void 0) {\n              const propExists = Object.getOwnPropertyDescriptor(value, propName) !== void 0;\n              if (propExists) {\n                const zodPropSchema = convertJsonSchemaToZod(propSchema);\n                const propResult = zodPropSchema.safeParse(value[propName]);\n                if (!propResult.success) {\n                  return false;\n                }\n              }\n            }\n          }\n        }\n        if (objectSchema.required && Array.isArray(objectSchema.required)) {\n          for (const requiredProp of objectSchema.required) {\n            const propExists = Object.getOwnPropertyDescriptor(value, requiredProp) !== void 0;\n            if (!propExists) {\n              return false;\n            }\n          }\n        }\n        if (objectSchema.additionalProperties === false && objectSchema.properties) {\n          const allowedProps = new Set(Object.keys(objectSchema.properties));\n          for (const prop in value) {\n            if (!allowedProps.has(prop)) {\n              return false;\n            }\n          }\n        }\n        return true;\n      },\n      { message: \"Object constraints validation failed\" }\n    );\n  }\n};\n\n// src/handlers/refinement/enumComplex.ts\nvar EnumComplexHandler = class {\n  apply(zodSchema, schema) {\n    if (!schema.enum || schema.enum.length === 0) return zodSchema;\n    const complexValues = schema.enum.filter(\n      (v) => Array.isArray(v) || typeof v === \"object\" && v !== null\n    );\n    if (complexValues.length === 0) return zodSchema;\n    return zodSchema.refine(\n      (value) => {\n        if (typeof value !== \"object\" || value === null) return true;\n        return complexValues.some(\n          (enumValue) => deepEqual(value, enumValue)\n        );\n      },\n      { message: \"Value must match one of the enum values\" }\n    );\n  }\n};\n\n// src/handlers/refinement/constComplex.ts\nvar ConstComplexHandler = class {\n  apply(zodSchema, schema) {\n    if (schema.const === void 0) return zodSchema;\n    const constValue = schema.const;\n    if (typeof constValue !== \"object\" || constValue === null) {\n      return zodSchema;\n    }\n    return zodSchema.refine(\n      (value) => deepEqual(value, constValue),\n      { message: \"Value must equal the const value\" }\n    );\n  }\n};\n\n// src/handlers/refinement/metadata.ts\nvar MetadataHandler = class {\n  apply(zodSchema, schema) {\n    if (schema.description) {\n      zodSchema = zodSchema.describe(schema.description);\n    }\n    return zodSchema;\n  }\n};\n\n// src/handlers/refinement/protoRequired.ts\nimport { z as z13 } from \"zod/v4\";\nvar ProtoRequiredHandler = class {\n  apply(zodSchema, schema) {\n    var _a;\n    const objectSchema = schema;\n    if (!((_a = objectSchema.required) == null ? void 0 : _a.includes(\"__proto__\")) || schema.type !== void 0) {\n      return zodSchema;\n    }\n    return z13.any().refine(\n      (value) => this.validateRequired(value, objectSchema.required),\n      { message: \"Missing required properties\" }\n    );\n  }\n  validateRequired(value, required) {\n    if (typeof value !== \"object\" || value === null || Array.isArray(value)) {\n      return true;\n    }\n    return required.every(\n      (prop) => Object.prototype.hasOwnProperty.call(value, prop)\n    );\n  }\n};\n\n// src/handlers/refinement/contains.ts\nvar ContainsHandler = class {\n  apply(zodSchema, schema) {\n    var _a;\n    const arraySchema = schema;\n    if (arraySchema.contains === void 0) return zodSchema;\n    const containsSchema = convertJsonSchemaToZod(arraySchema.contains);\n    const minContains = (_a = arraySchema.minContains) != null ? _a : 1;\n    const maxContains = arraySchema.maxContains;\n    return zodSchema.refine(\n      (value) => {\n        if (!Array.isArray(value)) {\n          return true;\n        }\n        let matchCount = 0;\n        for (const item of value) {\n          if (isValidWithSchema(containsSchema, item)) {\n            matchCount++;\n          }\n        }\n        if (matchCount < minContains) {\n          return false;\n        }\n        if (maxContains !== void 0 && matchCount > maxContains) {\n          return false;\n        }\n        return true;\n      },\n      { message: \"Array must contain required items matching the schema\" }\n    );\n  }\n};\n\n// src/handlers/refinement/default.ts\nvar DefaultHandler = class {\n  apply(zodSchema, schema) {\n    const { default: v } = schema;\n    if (v === void 0) return zodSchema;\n    if (!zodSchema.safeParse(v).success) {\n      return zodSchema;\n    }\n    return zodSchema.default(v);\n  }\n};\n\n// src/core/converter.ts\nvar primitiveHandlers = [\n  // Type constraints - should run first\n  new ConstHandler(),\n  new EnumHandler(),\n  new TypeHandler(),\n  // File schema detection - must run before string constraints\n  new FileHandler(),\n  // Implicit type detection - must run before other constraints\n  new ImplicitStringHandler(),\n  new ImplicitArrayHandler(),\n  new ImplicitObjectHandler(),\n  // String constraints\n  new MinLengthHandler(),\n  new MaxLengthHandler(),\n  new PatternHandler(),\n  // Number constraints\n  new MinimumHandler(),\n  new MaximumHandler(),\n  new ExclusiveMinimumHandler(),\n  new ExclusiveMaximumHandler(),\n  new MultipleOfHandler(),\n  // Array constraints - TupleHandler must run before ItemsHandler\n  new TupleHandler(),\n  new MinItemsHandler(),\n  new MaxItemsHandler(),\n  new ItemsHandler(),\n  // Object constraints\n  new MaxPropertiesHandler(),\n  new MinPropertiesHandler(),\n  new PropertiesHandler()\n];\nvar refinementHandlers = [\n  // Handle special cases first\n  new ProtoRequiredHandler(),\n  new EnumComplexHandler(),\n  new ConstComplexHandler(),\n  // Logical combinations\n  new AllOfHandler(),\n  new AnyOfHandler(),\n  new OneOfHandler(),\n  // Type-specific refinements\n  new PrefixItemsHandler(),\n  new ObjectPropertiesHandler(),\n  // Array refinements\n  new ContainsHandler(),\n  // Other refinements\n  new NotHandler(),\n  new UniqueItemsHandler(),\n  new DefaultHandler(),\n  // Metadata last\n  new MetadataHandler()\n];\nfunction convertJsonSchemaToZod(schema) {\n  if (typeof schema === \"boolean\") {\n    return schema ? z14.any() : z14.never();\n  }\n  const types = {};\n  for (const handler of primitiveHandlers) {\n    handler.apply(types, schema);\n  }\n  const allowedSchemas = [];\n  if (types.string !== false) {\n    allowedSchemas.push(types.string || z14.string());\n  }\n  if (types.number !== false) {\n    allowedSchemas.push(types.number || z14.number());\n  }\n  if (types.boolean !== false) {\n    allowedSchemas.push(types.boolean || z14.boolean());\n  }\n  if (types.null !== false) {\n    allowedSchemas.push(types.null || z14.null());\n  }\n  if (types.array !== false) {\n    allowedSchemas.push(types.array || z14.array(z14.any()));\n  }\n  if (types.tuple !== false && types.tuple !== void 0) {\n    allowedSchemas.push(types.tuple);\n  }\n  if (types.object !== false) {\n    if (types.object) {\n      allowedSchemas.push(types.object);\n    } else {\n      const objectSchema = z14.custom((val) => {\n        return typeof val === \"object\" && val !== null && !Array.isArray(val);\n      }, \"Must be an object, not an array\");\n      allowedSchemas.push(objectSchema);\n    }\n  }\n  if (types.file !== false && types.file !== void 0) {\n    allowedSchemas.push(types.file);\n  }\n  let zodSchema;\n  if (allowedSchemas.length === 0) {\n    zodSchema = z14.never();\n  } else if (allowedSchemas.length === 1) {\n    zodSchema = allowedSchemas[0];\n  } else {\n    const hasConstraints = Object.keys(schema).some(\n      (key) => key !== \"$schema\" && key !== \"title\" && key !== \"description\"\n    );\n    if (!hasConstraints) {\n      zodSchema = z14.any();\n    } else {\n      zodSchema = z14.union(allowedSchemas);\n    }\n  }\n  for (const handler of refinementHandlers) {\n    zodSchema = handler.apply(zodSchema, schema);\n  }\n  return zodSchema;\n}\n\n// src/index.ts\nfunction jsonSchemaObjectToZodRawShape(schema) {\n  var _a;\n  const raw = {};\n  const requiredArray = Array.isArray(schema.required) ? schema.required : [];\n  const requiredFields = new Set(requiredArray);\n  for (const [key, value] of Object.entries((_a = schema.properties) != null ? _a : {})) {\n    if (value === void 0) continue;\n    let zodType = convertJsonSchemaToZod(value);\n    if (requiredArray.length > 0) {\n      if (!requiredFields.has(key)) {\n        zodType = zodType.optional();\n      }\n    } else {\n      zodType = zodType.optional();\n    }\n    raw[key] = zodType;\n  }\n  return raw;\n}\nexport {\n  convertJsonSchemaToZod,\n  createUniqueItemsValidator,\n  isValidWithSchema,\n  jsonSchemaObjectToZodRawShape\n};\n"],"names":[],"mappings":";;;;;;;;;;AAAA,wBAAwB;AACxB;AAAA;;;AAIA,IAAI,cAAc;IAChB,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,IAAI,CAAC,OAAO,IAAI,EAAE;QAClB,MAAM,eAAe,MAAM,OAAO,CAAC,OAAO,IAAI,IAAI,OAAO,IAAI,GAAG;YAAC,OAAO,IAAI;SAAC;QAC7E,MAAM,UAAU,IAAI,IAAI;QACxB,IAAI,CAAC,QAAQ,GAAG,CAAC,WAAW;YAC1B,MAAM,MAAM,GAAG;QACjB;QACA,IAAI,CAAC,QAAQ,GAAG,CAAC,aAAa,CAAC,QAAQ,GAAG,CAAC,YAAY;YACrD,MAAM,MAAM,GAAG;QACjB;QACA,IAAI,CAAC,QAAQ,GAAG,CAAC,YAAY;YAC3B,MAAM,OAAO,GAAG;QAClB;QACA,IAAI,CAAC,QAAQ,GAAG,CAAC,SAAS;YACxB,MAAM,IAAI,GAAG;QACf;QACA,IAAI,CAAC,QAAQ,GAAG,CAAC,UAAU;YACzB,MAAM,KAAK,GAAG;QAChB;QACA,IAAI,CAAC,QAAQ,GAAG,CAAC,WAAW;YAC1B,MAAM,MAAM,GAAG;QACjB;QACA,IAAI,QAAQ,GAAG,CAAC,cAAc,MAAM,MAAM,KAAK,OAAO;YACpD,MAAM,gBAAgB,MAAM,MAAM,IAAI,qMAAC,CAAC,MAAM;YAC9C,IAAI,yBAAyB,qMAAC,CAAC,SAAS,EAAE;gBACxC,MAAM,MAAM,GAAG,cAAc,GAAG;YAClC;QACF;IACF;AACF;;AAIA,IAAI,eAAe;IACjB,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,IAAI,OAAO,KAAK,KAAK,KAAK,GAAG;QAC7B,MAAM,aAAa,OAAO,KAAK;QAC/B,MAAM,MAAM,GAAG;QACf,MAAM,MAAM,GAAG;QACf,MAAM,OAAO,GAAG;QAChB,MAAM,IAAI,GAAG;QACb,MAAM,KAAK,GAAG;QACd,MAAM,MAAM,GAAG;QACf,IAAI,OAAO,eAAe,UAAU;YAClC,MAAM,MAAM,GAAG,qMAAE,CAAC,OAAO,CAAC;QAC5B,OAAO,IAAI,OAAO,eAAe,UAAU;YACzC,MAAM,MAAM,GAAG,qMAAE,CAAC,OAAO,CAAC;QAC5B,OAAO,IAAI,OAAO,eAAe,WAAW;YAC1C,MAAM,OAAO,GAAG,qMAAE,CAAC,OAAO,CAAC;QAC7B,OAAO,IAAI,eAAe,MAAM;YAC9B,MAAM,IAAI,GAAG,qMAAE,CAAC,IAAI;QACtB,OAAO,IAAI,MAAM,OAAO,CAAC,aAAa;YACpC,MAAM,KAAK,GAAG,KAAK;QACrB,OAAO,IAAI,OAAO,eAAe,UAAU;YACzC,MAAM,MAAM,GAAG,KAAK;QACtB;IACF;AACF;;AAIA,IAAI,cAAc;IAChB,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,IAAI,CAAC,OAAO,IAAI,EAAE;QAClB,IAAI,OAAO,IAAI,CAAC,MAAM,KAAK,GAAG;YAC5B,IAAI,CAAC,OAAO,IAAI,EAAE;gBAChB,MAAM,MAAM,GAAG;gBACf,MAAM,MAAM,GAAG;gBACf,MAAM,OAAO,GAAG;gBAChB,MAAM,IAAI,GAAG;gBACb,MAAM,KAAK,GAAG;gBACd,MAAM,MAAM,GAAG;YACjB;YACA;QACF;QACA,MAAM,eAAe;YACnB,QAAQ,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,IAAM,OAAO,MAAM;YAC/C,QAAQ,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,IAAM,OAAO,MAAM;YAC/C,SAAS,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,IAAM,OAAO,MAAM;YAChD,MAAM,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,IAAM,MAAM;YACtC,OAAO,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,IAAM,MAAM,OAAO,CAAC;YAC/C,QAAQ,OAAO,IAAI,CAAC,MAAM,CAAC,CAAC,IAAM,OAAO,MAAM,YAAY,MAAM,QAAQ,CAAC,MAAM,OAAO,CAAC;QAC1F;QACA,MAAM,MAAM,GAAG,IAAI,CAAC,gBAAgB,CAAC,aAAa,MAAM,EAAE;QAC1D,MAAM,MAAM,GAAG,IAAI,CAAC,gBAAgB,CAAC,aAAa,MAAM,EAAE;QAC1D,MAAM,OAAO,GAAG,IAAI,CAAC,gBAAgB,CAAC,aAAa,OAAO,EAAE;QAC5D,MAAM,IAAI,GAAG,aAAa,IAAI,CAAC,MAAM,GAAG,IAAI,qMAAE,CAAC,IAAI,KAAK;QACxD,MAAM,KAAK,GAAG,aAAa,KAAK,CAAC,MAAM,GAAG,IAAI,KAAK,IAAI;QACvD,MAAM,MAAM,GAAG,aAAa,MAAM,CAAC,MAAM,GAAG,IAAI,KAAK,IAAI;IAC3D;IACA,iBAAiB,MAAM,EAAE,IAAI,EAAE;QAC7B,IAAI,OAAO,MAAM,KAAK,GAAG,OAAO;QAChC,IAAI,OAAO,MAAM,KAAK,GAAG;YACvB,OAAO,qMAAE,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;QAC7B;QACA,IAAI,SAAS,UAAU;YACrB,OAAO,qMAAE,CAAC,IAAI,CAAC;QACjB;QACA,IAAI,SAAS,UAAU;YACrB,MAAM,CAAC,OAAO,QAAQ,GAAG,KAAK,GAAG;YACjC,OAAO,qMAAE,CAAC,KAAK,CAAC;gBAAC,qMAAE,CAAC,OAAO,CAAC;gBAAQ,qMAAE,CAAC,OAAO,CAAC;mBAAY,KAAK,GAAG,CAAC,CAAC,IAAM,qMAAE,CAAC,OAAO,CAAC;aAAI;QAC5F;QACA,IAAI,SAAS,WAAW;YACtB,OAAO,qMAAE,CAAC,KAAK,CAAC;gBAAC,qMAAE,CAAC,OAAO,CAAC;gBAAO,qMAAE,CAAC,OAAO,CAAC;aAAO;QACvD;QACA,OAAO;IACT;AACF;;AAIA,IAAI,cAAc;IAChB,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,MAAM,eAAe;QACrB,IAAI,aAAa,IAAI,KAAK,YAAY,aAAa,MAAM,KAAK,YAAY,aAAa,eAAe,KAAK,UAAU;YACnH,IAAI,aAAa,qMAAE,CAAC,IAAI;YACxB,IAAI,aAAa,SAAS,KAAK,KAAK,GAAG;gBACrC,aAAa,WAAW,GAAG,CAAC,aAAa,SAAS;YACpD;YACA,IAAI,aAAa,SAAS,KAAK,KAAK,GAAG;gBACrC,aAAa,WAAW,GAAG,CAAC,aAAa,SAAS;YACpD;YACA,IAAI,aAAa,gBAAgB,KAAK,KAAK,GAAG;gBAC5C,aAAa,WAAW,IAAI,CAAC,aAAa,gBAAgB;YAC5D;YACA,MAAM,IAAI,GAAG;YACb,MAAM,MAAM,GAAG;QACjB;IACF;AACF;;AAIA,IAAI,wBAAwB;IAC1B,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,MAAM,eAAe;QACrB,IAAI,OAAO,IAAI,KAAK,KAAK,KAAK,CAAC,aAAa,SAAS,KAAK,KAAK,KAAK,aAAa,SAAS,KAAK,KAAK,KAAK,aAAa,OAAO,KAAK,KAAK,CAAC,GAAG;YACzI,IAAI,MAAM,MAAM,KAAK,KAAK,GAAG;gBAC3B,MAAM,MAAM,GAAG,qMAAE,CAAC,MAAM;YAC1B;QACF;IACF;AACF;AACA,IAAI,mBAAmB;IACrB,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,MAAM,eAAe;QACrB,IAAI,aAAa,SAAS,KAAK,KAAK,GAAG;QACvC,IAAI,MAAM,MAAM,KAAK,OAAO;YAC1B,MAAM,gBAAgB,MAAM,MAAM,IAAI,qMAAE,CAAC,MAAM;YAC/C,IAAI,yBAAyB,qMAAE,CAAC,SAAS,EAAE;gBACzC,MAAM,MAAM,GAAG,cAAc,MAAM,CACjC,CAAC;oBACC,MAAM,iBAAiB,MAAM,IAAI,CAAC,OAAO,MAAM;oBAC/C,OAAO,kBAAkB,aAAa,SAAS;gBACjD,GACA;oBAAE,SAAS,CAAC,wBAAwB,EAAE,aAAa,SAAS,CAAC,gBAAgB,CAAC;gBAAC;YAEnF;QACF;IACF;AACF;AACA,IAAI,mBAAmB;IACrB,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,MAAM,eAAe;QACrB,IAAI,aAAa,SAAS,KAAK,KAAK,GAAG;QACvC,IAAI,MAAM,MAAM,KAAK,OAAO;YAC1B,MAAM,gBAAgB,MAAM,MAAM,IAAI,qMAAE,CAAC,MAAM;YAC/C,IAAI,yBAAyB,qMAAE,CAAC,SAAS,EAAE;gBACzC,MAAM,MAAM,GAAG,cAAc,MAAM,CACjC,CAAC;oBACC,MAAM,iBAAiB,MAAM,IAAI,CAAC,OAAO,MAAM;oBAC/C,OAAO,kBAAkB,aAAa,SAAS;gBACjD,GACA;oBAAE,SAAS,CAAC,uBAAuB,EAAE,aAAa,SAAS,CAAC,gBAAgB,CAAC;gBAAC;YAElF;QACF;IACF;AACF;AACA,IAAI,iBAAiB;IACnB,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,MAAM,eAAe;QACrB,IAAI,CAAC,aAAa,OAAO,EAAE;QAC3B,IAAI,MAAM,MAAM,KAAK,OAAO;YAC1B,MAAM,gBAAgB,MAAM,MAAM,IAAI,qMAAE,CAAC,MAAM;YAC/C,IAAI,yBAAyB,qMAAE,CAAC,SAAS,EAAE;gBACzC,MAAM,QAAQ,IAAI,OAAO,aAAa,OAAO;gBAC7C,MAAM,MAAM,GAAG,cAAc,KAAK,CAAC;YACrC;QACF;IACF;AACF;;AAIA,IAAI,iBAAiB;IACnB,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,MAAM,eAAe;QACrB,IAAI,aAAa,OAAO,KAAK,KAAK,GAAG;QACrC,IAAI,MAAM,MAAM,KAAK,OAAO;YAC1B,MAAM,gBAAgB,MAAM,MAAM,IAAI,qMAAE,CAAC,MAAM;YAC/C,IAAI,yBAAyB,qMAAE,CAAC,SAAS,EAAE;gBACzC,MAAM,MAAM,GAAG,cAAc,GAAG,CAAC,aAAa,OAAO;YACvD;QACF;IACF;AACF;AACA,IAAI,iBAAiB;IACnB,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,MAAM,eAAe;QACrB,IAAI,aAAa,OAAO,KAAK,KAAK,GAAG;QACrC,IAAI,MAAM,MAAM,KAAK,OAAO;YAC1B,MAAM,gBAAgB,MAAM,MAAM,IAAI,qMAAE,CAAC,MAAM;YAC/C,IAAI,yBAAyB,qMAAE,CAAC,SAAS,EAAE;gBACzC,MAAM,MAAM,GAAG,cAAc,GAAG,CAAC,aAAa,OAAO;YACvD;QACF;IACF;AACF;AACA,IAAI,0BAA0B;IAC5B,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,MAAM,eAAe;QACrB,IAAI,aAAa,gBAAgB,KAAK,KAAK,GAAG;QAC9C,IAAI,MAAM,MAAM,KAAK,OAAO;YAC1B,MAAM,gBAAgB,MAAM,MAAM,IAAI,qMAAE,CAAC,MAAM;YAC/C,IAAI,yBAAyB,qMAAE,CAAC,SAAS,EAAE;gBACzC,IAAI,OAAO,aAAa,gBAAgB,KAAK,UAAU;oBACrD,MAAM,MAAM,GAAG,cAAc,EAAE,CAAC,aAAa,gBAAgB;gBAC/D,OAAO;oBACL,MAAM,MAAM,GAAG;gBACjB;YACF;QACF;IACF;AACF;AACA,IAAI,0BAA0B;IAC5B,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,MAAM,eAAe;QACrB,IAAI,aAAa,gBAAgB,KAAK,KAAK,GAAG;QAC9C,IAAI,MAAM,MAAM,KAAK,OAAO;YAC1B,MAAM,gBAAgB,MAAM,MAAM,IAAI,qMAAE,CAAC,MAAM;YAC/C,IAAI,yBAAyB,qMAAE,CAAC,SAAS,EAAE;gBACzC,IAAI,OAAO,aAAa,gBAAgB,KAAK,UAAU;oBACrD,MAAM,MAAM,GAAG,cAAc,EAAE,CAAC,aAAa,gBAAgB;gBAC/D,OAAO;oBACL,MAAM,MAAM,GAAG;gBACjB;YACF;QACF;IACF;AACF;AACA,IAAI,oBAAoB;IACtB,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,MAAM,eAAe;QACrB,IAAI,aAAa,UAAU,KAAK,KAAK,GAAG;QACxC,IAAI,MAAM,MAAM,KAAK,OAAO;YAC1B,MAAM,gBAAgB,MAAM,MAAM,IAAI,qMAAE,CAAC,MAAM;YAC/C,IAAI,yBAAyB,qMAAE,CAAC,SAAS,EAAE;gBACzC,MAAM,MAAM,GAAG,cAAc,MAAM,CACjC,CAAC;oBACC,IAAI,aAAa,UAAU,KAAK,GAAG,OAAO;oBAC1C,MAAM,WAAW,QAAQ,aAAa,UAAU;oBAChD,MAAM,UAAU,KAAK,KAAK,CAAC;oBAC3B,MAAM,YAAY,KAAK,GAAG,CACxB,KAAK,GAAG,CAAC,SAAS,OAAO,OAAO,GAAG,IACnC,KAAK,GAAG,CAAC,aAAa,UAAU,IAAI,OAAO,OAAO,GAAG;oBAEvD,OAAO,KAAK,GAAG,CAAC,WAAW,YAAY,YAAY,KAAK,GAAG,CAAC,aAAa,UAAU;gBACrF,GACA;oBAAE,SAAS,CAAC,sBAAsB,EAAE,aAAa,UAAU,EAAE;gBAAC;YAElE;QACF;IACF;AACF;;AAIA,IAAI,uBAAuB;IACzB,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,MAAM,cAAc;QACpB,IAAI,OAAO,IAAI,KAAK,KAAK,KAAK,CAAC,YAAY,QAAQ,KAAK,KAAK,KAAK,YAAY,QAAQ,KAAK,KAAK,KAAK,YAAY,KAAK,KAAK,KAAK,KAAK,YAAY,WAAW,KAAK,KAAK,CAAC,GAAG;YACxK,IAAI,MAAM,KAAK,KAAK,KAAK,GAAG;gBAC1B,MAAM,KAAK,GAAG,qMAAE,CAAC,KAAK,CAAC,qMAAE,CAAC,GAAG;YAC/B;QACF;IACF;AACF;AACA,IAAI,kBAAkB;IACpB,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,MAAM,cAAc;QACpB,IAAI,YAAY,QAAQ,KAAK,KAAK,GAAG;QACrC,IAAI,MAAM,KAAK,KAAK,OAAO;YACzB,MAAM,KAAK,GAAG,CAAC,MAAM,KAAK,IAAI,qMAAE,CAAC,KAAK,CAAC,qMAAE,CAAC,GAAG,GAAG,EAAE,GAAG,CAAC,YAAY,QAAQ;QAC5E;IACF;AACF;AACA,IAAI,kBAAkB;IACpB,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,MAAM,cAAc;QACpB,IAAI,YAAY,QAAQ,KAAK,KAAK,GAAG;QACrC,IAAI,MAAM,KAAK,KAAK,OAAO;YACzB,MAAM,KAAK,GAAG,CAAC,MAAM,KAAK,IAAI,qMAAE,CAAC,KAAK,CAAC,qMAAE,CAAC,GAAG,GAAG,EAAE,GAAG,CAAC,YAAY,QAAQ;QAC5E;IACF;AACF;AACA,IAAI,eAAe;IACjB,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,MAAM,cAAc;QACpB,IAAI,MAAM,KAAK,KAAK,OAAO;QAC3B,IAAI,MAAM,OAAO,CAAC,YAAY,KAAK,GAAG;YACpC,MAAM,KAAK,GAAG,MAAM,KAAK,IAAI,qMAAE,CAAC,KAAK,CAAC,qMAAE,CAAC,GAAG;QAC9C,OAAO,IAAI,YAAY,KAAK,IAAI,OAAO,YAAY,KAAK,KAAK,aAAa,CAAC,YAAY,WAAW,EAAE;YAClG,MAAM,aAAa,uBAAuB,YAAY,KAAK;YAC3D,IAAI,WAAW,qMAAE,CAAC,KAAK,CAAC;YACxB,IAAI,MAAM,KAAK,IAAI,MAAM,KAAK,YAAY,qMAAE,CAAC,QAAQ,EAAE;gBACrD,MAAM,cAAc,MAAM,KAAK,CAAC,IAAI;gBACpC,IAAI,YAAY,MAAM,EAAE;oBACtB,YAAY,MAAM,CAAC,OAAO,CAAC,CAAC;wBAC1B,IAAI,MAAM,IAAI,IAAI,MAAM,IAAI,CAAC,GAAG,EAAE;4BAChC,MAAM,MAAM,MAAM,IAAI,CAAC,GAAG;4BAC1B,IAAI,IAAI,KAAK,KAAK,gBAAgB,IAAI,OAAO,KAAK,KAAK,GAAG;gCACxD,WAAW,SAAS,GAAG,CAAC,IAAI,OAAO;4BACrC,OAAO,IAAI,IAAI,KAAK,KAAK,gBAAgB,IAAI,OAAO,KAAK,KAAK,GAAG;gCAC/D,WAAW,SAAS,GAAG,CAAC,IAAI,OAAO;4BACrC;wBACF;oBACF;gBACF;YACF;YACA,MAAM,KAAK,GAAG;QAChB,OAAO,IAAI,OAAO,YAAY,KAAK,KAAK,aAAa,YAAY,KAAK,KAAK,OAAO;YAChF,IAAI,CAAC,YAAY,WAAW,EAAE;gBAC5B,MAAM,KAAK,GAAG,qMAAE,CAAC,KAAK,CAAC,qMAAE,CAAC,GAAG,IAAI,GAAG,CAAC;YACvC,OAAO;gBACL,MAAM,KAAK,GAAG,MAAM,KAAK,IAAI,qMAAE,CAAC,KAAK,CAAC,qMAAE,CAAC,GAAG;YAC9C;QACF,OAAO,IAAI,OAAO,YAAY,KAAK,KAAK,aAAa,YAAY,KAAK,KAAK,MAAM;YAC/E,MAAM,KAAK,GAAG,MAAM,KAAK,IAAI,qMAAE,CAAC,KAAK,CAAC,qMAAE,CAAC,GAAG;QAC9C,OAAO,IAAI,YAAY,WAAW,EAAE;YAClC,MAAM,KAAK,GAAG,MAAM,KAAK,IAAI,qMAAE,CAAC,KAAK,CAAC,qMAAE,CAAC,GAAG;QAC9C;IACF;AACF;;AAIA,IAAI,eAAe;IACjB,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,IAAI,OAAO,IAAI,KAAK,SAAS;QAC7B,MAAM,cAAc;QACpB,IAAI,CAAC,MAAM,OAAO,CAAC,YAAY,KAAK,GAAG;QACvC,IAAI,MAAM,KAAK,KAAK,OAAO;QAC3B,MAAM,cAAc,YAAY,KAAK,CAAC,GAAG,CAAC,CAAC,aAAe,uBAAuB;QACjF,IAAI;QACJ,IAAI,YAAY,MAAM,KAAK,GAAG;YAC5B,QAAQ,qMAAE,CAAC,KAAK,CAAC,EAAE;QACrB,OAAO;YACL,QAAQ,qMAAE,CAAC,KAAK,CAAC;QACnB;QACA,IAAI,YAAY,QAAQ,KAAK,KAAK,KAAK,YAAY,QAAQ,GAAG,YAAY,MAAM,EAAE;YAChF,QAAQ;QACV;QACA,IAAI,YAAY,QAAQ,KAAK,KAAK,KAAK,YAAY,QAAQ,GAAG,YAAY,MAAM,EAAE;YAChF,QAAQ;QACV;QACA,MAAM,KAAK,GAAG;QACd,MAAM,KAAK,GAAG;IAChB;AACF;;AAIA,IAAI,oBAAoB;IACtB,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,MAAM,eAAe;QACrB,IAAI,MAAM,MAAM,KAAK,OAAO;QAC5B,IAAI,aAAa,UAAU,IAAI,aAAa,QAAQ,IAAI,aAAa,oBAAoB,KAAK,KAAK,GAAG;YACpG,MAAM,MAAM,GAAG,MAAM,MAAM,IAAI,qMAAE,CAAC,MAAM,CAAC,CAAC,GAAG,WAAW;QAC1D;IACF;AACF;AACA,IAAI,wBAAwB;IAC1B,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,MAAM,eAAe;QACrB,IAAI,OAAO,IAAI,KAAK,KAAK,KAAK,CAAC,aAAa,aAAa,KAAK,KAAK,KAAK,aAAa,aAAa,KAAK,KAAK,CAAC,GAAG;YAC9G,IAAI,MAAM,MAAM,KAAK,KAAK,GAAG;gBAC3B,MAAM,MAAM,GAAG,qMAAE,CAAC,MAAM,CAAC,CAAC,GAAG,WAAW;YAC1C;QACF;IACF;AACF;AACA,IAAI,uBAAuB;IACzB,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,MAAM,eAAe;QACrB,IAAI,aAAa,aAAa,KAAK,KAAK,GAAG;QAC3C,IAAI,MAAM,MAAM,KAAK,OAAO;YAC1B,MAAM,aAAa,MAAM,MAAM,IAAI,qMAAE,CAAC,MAAM,CAAC,CAAC,GAAG,WAAW;YAC5D,MAAM,MAAM,GAAG,WAAW,MAAM,CAC9B,CAAC,MAAQ,OAAO,IAAI,CAAC,KAAK,MAAM,IAAI,aAAa,aAAa,EAC9D;gBAAE,SAAS,CAAC,yBAAyB,EAAE,aAAa,aAAa,CAAC,WAAW,CAAC;YAAC;QAEnF;IACF;AACF;AACA,IAAI,uBAAuB;IACzB,MAAM,KAAK,EAAE,MAAM,EAAE;QACnB,MAAM,eAAe;QACrB,IAAI,aAAa,aAAa,KAAK,KAAK,GAAG;QAC3C,IAAI,MAAM,MAAM,KAAK,OAAO;YAC1B,MAAM,aAAa,MAAM,MAAM,IAAI,qMAAE,CAAC,MAAM,CAAC,CAAC,GAAG,WAAW;YAC5D,MAAM,MAAM,GAAG,WAAW,MAAM,CAC9B,CAAC,MAAQ,OAAO,IAAI,CAAC,KAAK,MAAM,IAAI,aAAa,aAAa,EAC9D;gBAAE,SAAS,CAAC,0BAA0B,EAAE,aAAa,aAAa,CAAC,WAAW,CAAC;YAAC;QAEpF;IACF;AACF;AAEA,oBAAoB;AACpB,SAAS,UAAU,CAAC,EAAE,CAAC;IACrB,IAAI,MAAM,GAAG,OAAO;IACpB,IAAI,KAAK,QAAQ,KAAK,MAAM,OAAO,MAAM;IACzC,IAAI,OAAO,MAAM,OAAO,GAAG,OAAO;IAClC,IAAI,MAAM,OAAO,CAAC,MAAM,MAAM,OAAO,CAAC,IAAI;QACxC,IAAI,EAAE,MAAM,KAAK,EAAE,MAAM,EAAE,OAAO;QAClC,OAAO,EAAE,KAAK,CAAC,CAAC,MAAM,QAAU,UAAU,MAAM,CAAC,CAAC,MAAM;IAC1D;IACA,IAAI,OAAO,MAAM,YAAY,OAAO,MAAM,UAAU;QAClD,MAAM,QAAQ,OAAO,IAAI,CAAC;QAC1B,MAAM,QAAQ,OAAO,IAAI,CAAC;QAC1B,IAAI,MAAM,MAAM,KAAK,MAAM,MAAM,EAAE,OAAO;QAC1C,OAAO,MAAM,KAAK,CAAC,CAAC,MAAQ,MAAM,QAAQ,CAAC,QAAQ,UAAU,CAAC,CAAC,IAAI,EAAE,CAAC,CAAC,IAAI;IAC7E;IACA,OAAO;AACT;AACA,SAAS;IACP,OAAO,CAAC;QACN,IAAI,CAAC,MAAM,OAAO,CAAC,QAAQ;YACzB,OAAO;QACT;QACA,MAAM,OAAO,EAAE;QACf,OAAO,MAAM,KAAK,CAAC,CAAC;YAClB,MAAM,cAAc,KAAK,IAAI,CAAC,CAAC,WAAa,UAAU,MAAM;YAC5D,IAAI,aAAa;gBACf,OAAO;YACT;YACA,KAAK,IAAI,CAAC;YACV,OAAO;QACT;IACF;AACF;AACA,SAAS,kBAAkB,MAAM,EAAE,KAAK;IACtC,OAAO,OAAO,SAAS,CAAC,OAAO,OAAO;AACxC;AAEA,iCAAiC;AACjC,IAAI,aAAa;IACf,MAAM,SAAS,EAAE,MAAM,EAAE;QACvB,IAAI,CAAC,OAAO,GAAG,EAAE,OAAO;QACxB,MAAM,YAAY,uBAAuB,OAAO,GAAG;QACnD,OAAO,UAAU,MAAM,CACrB,CAAC,QAAU,CAAC,kBAAkB,WAAW,QACzC;YAAE,SAAS;QAAwC;IAEvD;AACF;AAEA,yCAAyC;AACzC,IAAI,qBAAqB;IACvB,MAAM,SAAS,EAAE,MAAM,EAAE;QACvB,MAAM,cAAc;QACpB,IAAI,YAAY,WAAW,KAAK,MAAM,OAAO;QAC7C,OAAO,UAAU,MAAM,CAAC,8BAA8B;YACpD,SAAS;QACX;IACF;AACF;;AAIA,IAAI,eAAe;IACjB,MAAM,SAAS,EAAE,MAAM,EAAE;QACvB,IAAI,CAAC,OAAO,KAAK,IAAI,OAAO,KAAK,CAAC,MAAM,KAAK,GAAG,OAAO;QACvD,MAAM,eAAe,OAAO,KAAK,CAAC,GAAG,CAAC,CAAC,IAAM,uBAAuB;QACpE,OAAO,aAAa,MAAM,CACxB,CAAC,KAAK,IAAM,qMAAG,CAAC,YAAY,CAAC,KAAK,IAClC;IAEJ;AACF;;AAIA,IAAI,eAAe;IACjB,MAAM,SAAS,EAAE,MAAM,EAAE;QACvB,IAAI,CAAC,OAAO,KAAK,IAAI,OAAO,KAAK,CAAC,MAAM,KAAK,GAAG,OAAO;QACvD,MAAM,cAAc,OAAO,KAAK,CAAC,MAAM,KAAK,IAAI,uBAAuB,OAAO,KAAK,CAAC,EAAE,IAAI,qMAAG,CAAC,KAAK,CAAC;YAClG,uBAAuB,OAAO,KAAK,CAAC,EAAE;YACtC,uBAAuB,OAAO,KAAK,CAAC,EAAE;eACnC,OAAO,KAAK,CAAC,KAAK,CAAC,GAAG,GAAG,CAAC,CAAC,IAAM,uBAAuB;SAC5D;QACD,OAAO,qMAAG,CAAC,YAAY,CAAC,WAAW;IACrC;AACF;AAEA,mCAAmC;AACnC,IAAI,eAAe;IACjB,MAAM,SAAS,EAAE,MAAM,EAAE;QACvB,IAAI,CAAC,OAAO,KAAK,IAAI,OAAO,KAAK,CAAC,MAAM,KAAK,GAAG,OAAO;QACvD,MAAM,eAAe,OAAO,KAAK,CAAC,GAAG,CAAC,CAAC,IAAM,uBAAuB;QACpE,OAAO,UAAU,MAAM,CACrB,CAAC;YACC,IAAI,aAAa;YACjB,KAAK,MAAM,eAAe,aAAc;gBACtC,MAAM,SAAS,YAAY,SAAS,CAAC;gBACrC,IAAI,OAAO,OAAO,EAAE;oBAClB;oBACA,IAAI,aAAa,GAAG,OAAO;gBAC7B;YACF;YACA,OAAO,eAAe;QACxB,GACA;YAAE,SAAS;QAAoD;IAEnE;AACF;AAEA,wCAAwC;AACxC,IAAI,qBAAqB;IACvB,MAAM,SAAS,EAAE,MAAM,EAAE;QACvB,MAAM,cAAc;QACpB,IAAI,YAAY,WAAW,IAAI,MAAM,OAAO,CAAC,YAAY,WAAW,GAAG;YACrE,MAAM,cAAc,YAAY,WAAW;YAC3C,MAAM,gBAAgB,YAAY,GAAG,CAAC,CAAC,aAAe,uBAAuB;YAC7E,OAAO,UAAU,MAAM,CACrB,CAAC;gBACC,IAAI,CAAC,MAAM,OAAO,CAAC,QAAQ,OAAO;gBAClC,IAAK,IAAI,IAAI,GAAG,IAAI,KAAK,GAAG,CAAC,MAAM,MAAM,EAAE,cAAc,MAAM,GAAG,IAAK;oBACrE,IAAI,CAAC,kBAAkB,aAAa,CAAC,EAAE,EAAE,KAAK,CAAC,EAAE,GAAG;wBAClD,OAAO;oBACT;gBACF;gBACA,IAAI,MAAM,MAAM,GAAG,cAAc,MAAM,EAAE;oBACvC,IAAI,OAAO,YAAY,KAAK,KAAK,aAAa,YAAY,KAAK,KAAK,OAAO;wBACzE,OAAO;oBACT,OAAO,IAAI,YAAY,KAAK,IAAI,OAAO,YAAY,KAAK,KAAK,YAAY,CAAC,MAAM,OAAO,CAAC,YAAY,KAAK,GAAG;wBAC1G,MAAM,uBAAuB,uBAAuB,YAAY,KAAK;wBACrE,IAAK,IAAI,IAAI,cAAc,MAAM,EAAE,IAAI,MAAM,MAAM,EAAE,IAAK;4BACxD,IAAI,CAAC,kBAAkB,sBAAsB,KAAK,CAAC,EAAE,GAAG;gCACtD,OAAO;4BACT;wBACF;oBACF;gBACF;gBACA,OAAO;YACT,GACA;gBAAE,SAAS;YAA0C;QAEzD;QACA,OAAO;IACT;AACF;;AAIA,IAAI,0BAA0B;IAC5B,MAAM,SAAS,EAAE,MAAM,EAAE;QACvB,MAAM,eAAe;QACrB,IAAI,CAAC,aAAa,UAAU,IAAI,CAAC,aAAa,QAAQ,IAAI,aAAa,oBAAoB,KAAK,OAAO;YACrG,OAAO;QACT;QACA,IAAI,qBAAqB,qMAAG,CAAC,SAAS,IAAI,qBAAqB,qMAAG,CAAC,SAAS,EAAE;YAC5E,MAAM,QAAQ,CAAC;YACf,IAAI,aAAa,UAAU,EAAE;gBAC3B,KAAK,MAAM,CAAC,KAAK,WAAW,IAAI,OAAO,OAAO,CAAC,aAAa,UAAU,EAAG;oBACvE,IAAI,eAAe,KAAK,GAAG;wBACzB,KAAK,CAAC,IAAI,GAAG,uBAAuB;oBACtC;gBACF;YACF;YACA,IAAI,aAAa,QAAQ,IAAI,MAAM,OAAO,CAAC,aAAa,QAAQ,GAAG;gBACjE,MAAM,WAAW,IAAI,IAAI,aAAa,QAAQ;gBAC9C,KAAK,MAAM,OAAO,OAAO,IAAI,CAAC,OAAQ;oBACpC,IAAI,CAAC,SAAS,GAAG,CAAC,MAAM;wBACtB,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,QAAQ;oBAClC;gBACF;YACF,OAAO;gBACL,KAAK,MAAM,OAAO,OAAO,IAAI,CAAC,OAAQ;oBACpC,KAAK,CAAC,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,QAAQ;gBAClC;YACF;YACA,IAAI,aAAa,oBAAoB,KAAK,OAAO;gBAC/C,OAAO,qMAAG,CAAC,MAAM,CAAC;YACpB,OAAO;gBACL,OAAO,qMAAG,CAAC,MAAM,CAAC,OAAO,WAAW;YACtC;QACF;QACA,OAAO,UAAU,MAAM,CACrB,CAAC;YACC,IAAI,OAAO,UAAU,YAAY,UAAU,QAAQ,MAAM,OAAO,CAAC,QAAQ;gBACvE,OAAO;YACT;YACA,IAAI,aAAa,UAAU,EAAE;gBAC3B,KAAK,MAAM,CAAC,UAAU,WAAW,IAAI,OAAO,OAAO,CAAC,aAAa,UAAU,EAAG;oBAC5E,IAAI,eAAe,KAAK,GAAG;wBACzB,MAAM,aAAa,OAAO,wBAAwB,CAAC,OAAO,cAAc,KAAK;wBAC7E,IAAI,YAAY;4BACd,MAAM,gBAAgB,uBAAuB;4BAC7C,MAAM,aAAa,cAAc,SAAS,CAAC,KAAK,CAAC,SAAS;4BAC1D,IAAI,CAAC,WAAW,OAAO,EAAE;gCACvB,OAAO;4BACT;wBACF;oBACF;gBACF;YACF;YACA,IAAI,aAAa,QAAQ,IAAI,MAAM,OAAO,CAAC,aAAa,QAAQ,GAAG;gBACjE,KAAK,MAAM,gBAAgB,aAAa,QAAQ,CAAE;oBAChD,MAAM,aAAa,OAAO,wBAAwB,CAAC,OAAO,kBAAkB,KAAK;oBACjF,IAAI,CAAC,YAAY;wBACf,OAAO;oBACT;gBACF;YACF;YACA,IAAI,aAAa,oBAAoB,KAAK,SAAS,aAAa,UAAU,EAAE;gBAC1E,MAAM,eAAe,IAAI,IAAI,OAAO,IAAI,CAAC,aAAa,UAAU;gBAChE,IAAK,MAAM,QAAQ,MAAO;oBACxB,IAAI,CAAC,aAAa,GAAG,CAAC,OAAO;wBAC3B,OAAO;oBACT;gBACF;YACF;YACA,OAAO;QACT,GACA;YAAE,SAAS;QAAuC;IAEtD;AACF;AAEA,yCAAyC;AACzC,IAAI,qBAAqB;IACvB,MAAM,SAAS,EAAE,MAAM,EAAE;QACvB,IAAI,CAAC,OAAO,IAAI,IAAI,OAAO,IAAI,CAAC,MAAM,KAAK,GAAG,OAAO;QACrD,MAAM,gBAAgB,OAAO,IAAI,CAAC,MAAM,CACtC,CAAC,IAAM,MAAM,OAAO,CAAC,MAAM,OAAO,MAAM,YAAY,MAAM;QAE5D,IAAI,cAAc,MAAM,KAAK,GAAG,OAAO;QACvC,OAAO,UAAU,MAAM,CACrB,CAAC;YACC,IAAI,OAAO,UAAU,YAAY,UAAU,MAAM,OAAO;YACxD,OAAO,cAAc,IAAI,CACvB,CAAC,YAAc,UAAU,OAAO;QAEpC,GACA;YAAE,SAAS;QAA0C;IAEzD;AACF;AAEA,0CAA0C;AAC1C,IAAI,sBAAsB;IACxB,MAAM,SAAS,EAAE,MAAM,EAAE;QACvB,IAAI,OAAO,KAAK,KAAK,KAAK,GAAG,OAAO;QACpC,MAAM,aAAa,OAAO,KAAK;QAC/B,IAAI,OAAO,eAAe,YAAY,eAAe,MAAM;YACzD,OAAO;QACT;QACA,OAAO,UAAU,MAAM,CACrB,CAAC,QAAU,UAAU,OAAO,aAC5B;YAAE,SAAS;QAAmC;IAElD;AACF;AAEA,sCAAsC;AACtC,IAAI,kBAAkB;IACpB,MAAM,SAAS,EAAE,MAAM,EAAE;QACvB,IAAI,OAAO,WAAW,EAAE;YACtB,YAAY,UAAU,QAAQ,CAAC,OAAO,WAAW;QACnD;QACA,OAAO;IACT;AACF;;AAIA,IAAI,uBAAuB;IACzB,MAAM,SAAS,EAAE,MAAM,EAAE;QACvB,IAAI;QACJ,MAAM,eAAe;QACrB,IAAI,CAAC,CAAC,CAAC,KAAK,aAAa,QAAQ,KAAK,OAAO,KAAK,IAAI,GAAG,QAAQ,CAAC,YAAY,KAAK,OAAO,IAAI,KAAK,KAAK,GAAG;YACzG,OAAO;QACT;QACA,OAAO,qMAAG,CAAC,GAAG,GAAG,MAAM,CACrB,CAAC,QAAU,IAAI,CAAC,gBAAgB,CAAC,OAAO,aAAa,QAAQ,GAC7D;YAAE,SAAS;QAA8B;IAE7C;IACA,iBAAiB,KAAK,EAAE,QAAQ,EAAE;QAChC,IAAI,OAAO,UAAU,YAAY,UAAU,QAAQ,MAAM,OAAO,CAAC,QAAQ;YACvE,OAAO;QACT;QACA,OAAO,SAAS,KAAK,CACnB,CAAC,OAAS,OAAO,SAAS,CAAC,cAAc,CAAC,IAAI,CAAC,OAAO;IAE1D;AACF;AAEA,sCAAsC;AACtC,IAAI,kBAAkB;IACpB,MAAM,SAAS,EAAE,MAAM,EAAE;QACvB,IAAI;QACJ,MAAM,cAAc;QACpB,IAAI,YAAY,QAAQ,KAAK,KAAK,GAAG,OAAO;QAC5C,MAAM,iBAAiB,uBAAuB,YAAY,QAAQ;QAClE,MAAM,cAAc,CAAC,KAAK,YAAY,WAAW,KAAK,OAAO,KAAK;QAClE,MAAM,cAAc,YAAY,WAAW;QAC3C,OAAO,UAAU,MAAM,CACrB,CAAC;YACC,IAAI,CAAC,MAAM,OAAO,CAAC,QAAQ;gBACzB,OAAO;YACT;YACA,IAAI,aAAa;YACjB,KAAK,MAAM,QAAQ,MAAO;gBACxB,IAAI,kBAAkB,gBAAgB,OAAO;oBAC3C;gBACF;YACF;YACA,IAAI,aAAa,aAAa;gBAC5B,OAAO;YACT;YACA,IAAI,gBAAgB,KAAK,KAAK,aAAa,aAAa;gBACtD,OAAO;YACT;YACA,OAAO;QACT,GACA;YAAE,SAAS;QAAwD;IAEvE;AACF;AAEA,qCAAqC;AACrC,IAAI,iBAAiB;IACnB,MAAM,SAAS,EAAE,MAAM,EAAE;QACvB,MAAM,EAAE,SAAS,CAAC,EAAE,GAAG;QACvB,IAAI,MAAM,KAAK,GAAG,OAAO;QACzB,IAAI,CAAC,UAAU,SAAS,CAAC,GAAG,OAAO,EAAE;YACnC,OAAO;QACT;QACA,OAAO,UAAU,OAAO,CAAC;IAC3B;AACF;AAEA,wBAAwB;AACxB,IAAI,oBAAoB;IACtB,sCAAsC;IACtC,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,6DAA6D;IAC7D,IAAI;IACJ,8DAA8D;IAC9D,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,qBAAqB;IACrB,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,qBAAqB;IACrB,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,gEAAgE;IAChE,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,qBAAqB;IACrB,IAAI;IACJ,IAAI;IACJ,IAAI;CACL;AACD,IAAI,qBAAqB;IACvB,6BAA6B;IAC7B,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,uBAAuB;IACvB,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,4BAA4B;IAC5B,IAAI;IACJ,IAAI;IACJ,oBAAoB;IACpB,IAAI;IACJ,oBAAoB;IACpB,IAAI;IACJ,IAAI;IACJ,IAAI;IACJ,gBAAgB;IAChB,IAAI;CACL;AACD,SAAS,uBAAuB,MAAM;IACpC,IAAI,OAAO,WAAW,WAAW;QAC/B,OAAO,SAAS,qMAAG,CAAC,GAAG,KAAK,qMAAG,CAAC,KAAK;IACvC;IACA,MAAM,QAAQ,CAAC;IACf,KAAK,MAAM,WAAW,kBAAmB;QACvC,QAAQ,KAAK,CAAC,OAAO;IACvB;IACA,MAAM,iBAAiB,EAAE;IACzB,IAAI,MAAM,MAAM,KAAK,OAAO;QAC1B,eAAe,IAAI,CAAC,MAAM,MAAM,IAAI,qMAAG,CAAC,MAAM;IAChD;IACA,IAAI,MAAM,MAAM,KAAK,OAAO;QAC1B,eAAe,IAAI,CAAC,MAAM,MAAM,IAAI,qMAAG,CAAC,MAAM;IAChD;IACA,IAAI,MAAM,OAAO,KAAK,OAAO;QAC3B,eAAe,IAAI,CAAC,MAAM,OAAO,IAAI,qMAAG,CAAC,OAAO;IAClD;IACA,IAAI,MAAM,IAAI,KAAK,OAAO;QACxB,eAAe,IAAI,CAAC,MAAM,IAAI,IAAI,qMAAG,CAAC,IAAI;IAC5C;IACA,IAAI,MAAM,KAAK,KAAK,OAAO;QACzB,eAAe,IAAI,CAAC,MAAM,KAAK,IAAI,qMAAG,CAAC,KAAK,CAAC,qMAAG,CAAC,GAAG;IACtD;IACA,IAAI,MAAM,KAAK,KAAK,SAAS,MAAM,KAAK,KAAK,KAAK,GAAG;QACnD,eAAe,IAAI,CAAC,MAAM,KAAK;IACjC;IACA,IAAI,MAAM,MAAM,KAAK,OAAO;QAC1B,IAAI,MAAM,MAAM,EAAE;YAChB,eAAe,IAAI,CAAC,MAAM,MAAM;QAClC,OAAO;YACL,MAAM,eAAe,qMAAG,CAAC,MAAM,CAAC,CAAC;gBAC/B,OAAO,OAAO,QAAQ,YAAY,QAAQ,QAAQ,CAAC,MAAM,OAAO,CAAC;YACnE,GAAG;YACH,eAAe,IAAI,CAAC;QACtB;IACF;IACA,IAAI,MAAM,IAAI,KAAK,SAAS,MAAM,IAAI,KAAK,KAAK,GAAG;QACjD,eAAe,IAAI,CAAC,MAAM,IAAI;IAChC;IACA,IAAI;IACJ,IAAI,eAAe,MAAM,KAAK,GAAG;QAC/B,YAAY,qMAAG,CAAC,KAAK;IACvB,OAAO,IAAI,eAAe,MAAM,KAAK,GAAG;QACtC,YAAY,cAAc,CAAC,EAAE;IAC/B,OAAO;QACL,MAAM,iBAAiB,OAAO,IAAI,CAAC,QAAQ,IAAI,CAC7C,CAAC,MAAQ,QAAQ,aAAa,QAAQ,WAAW,QAAQ;QAE3D,IAAI,CAAC,gBAAgB;YACnB,YAAY,qMAAG,CAAC,GAAG;QACrB,OAAO;YACL,YAAY,qMAAG,CAAC,KAAK,CAAC;QACxB;IACF;IACA,KAAK,MAAM,WAAW,mBAAoB;QACxC,YAAY,QAAQ,KAAK,CAAC,WAAW;IACvC;IACA,OAAO;AACT;AAEA,eAAe;AACf,SAAS,8BAA8B,MAAM;IAC3C,IAAI;IACJ,MAAM,MAAM,CAAC;IACb,MAAM,gBAAgB,MAAM,OAAO,CAAC,OAAO,QAAQ,IAAI,OAAO,QAAQ,GAAG,EAAE;IAC3E,MAAM,iBAAiB,IAAI,IAAI;IAC/B,KAAK,MAAM,CAAC,KAAK,MAAM,IAAI,OAAO,OAAO,CAAC,CAAC,KAAK,OAAO,UAAU,KAAK,OAAO,KAAK,CAAC,GAAI;QACrF,IAAI,UAAU,KAAK,GAAG;QACtB,IAAI,UAAU,uBAAuB;QACrC,IAAI,cAAc,MAAM,GAAG,GAAG;YAC5B,IAAI,CAAC,eAAe,GAAG,CAAC,MAAM;gBAC5B,UAAU,QAAQ,QAAQ;YAC5B;QACF,OAAO;YACL,UAAU,QAAQ,QAAQ;QAC5B;QACA,GAAG,CAAC,IAAI,GAAG;IACb;IACA,OAAO;AACT","ignoreList":[0]}},
    {"offset": {"line": 14463, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/zod-from-json-schema-v3/dist/index.mjs"],"sourcesContent":["// src/index.ts\nimport { z } from \"zod\";\nfunction convertJsonSchemaToZod(schema) {\n  function addMetadata(zodSchema, jsonSchema) {\n    if (jsonSchema.description) {\n      zodSchema = zodSchema.describe(jsonSchema.description);\n    }\n    return zodSchema;\n  }\n  if (schema.const !== void 0) {\n    if (typeof schema.const === \"string\") {\n      return addMetadata(z.literal(schema.const), schema);\n    } else if (typeof schema.const === \"number\") {\n      return addMetadata(z.literal(schema.const), schema);\n    } else if (typeof schema.const === \"boolean\") {\n      return addMetadata(z.literal(schema.const), schema);\n    } else if (schema.const === null) {\n      return addMetadata(z.null(), schema);\n    }\n    return addMetadata(z.literal(schema.const), schema);\n  }\n  if (schema.type) {\n    switch (schema.type) {\n      case \"string\": {\n        if (schema.enum) {\n          if (schema.enum.length === 0) {\n            return addMetadata(z.string(), schema);\n          }\n          return addMetadata(z.enum(schema.enum), schema);\n        }\n        let stringSchema = z.string();\n        if (schema.minLength !== void 0) {\n          stringSchema = stringSchema.min(schema.minLength);\n        }\n        if (schema.maxLength !== void 0) {\n          stringSchema = stringSchema.max(schema.maxLength);\n        }\n        if (schema.pattern !== void 0) {\n          const regex = new RegExp(schema.pattern);\n          stringSchema = stringSchema.regex(regex);\n        }\n        return addMetadata(stringSchema, schema);\n      }\n      case \"number\":\n      case \"integer\": {\n        if (schema.enum) {\n          if (schema.enum.length === 0) {\n            return addMetadata(z.number(), schema);\n          }\n          const options = schema.enum.map((val) => z.literal(val));\n          if (options.length === 1) {\n            return addMetadata(options[0], schema);\n          }\n          if (options.length >= 2) {\n            const unionSchema = z.union([options[0], options[1], ...options.slice(2)]);\n            return addMetadata(unionSchema, schema);\n          }\n        }\n        let numberSchema = schema.type === \"integer\" ? z.number().int() : z.number();\n        if (schema.minimum !== void 0) {\n          numberSchema = numberSchema.min(schema.minimum);\n        }\n        if (schema.maximum !== void 0) {\n          numberSchema = numberSchema.max(schema.maximum);\n        }\n        if (schema.exclusiveMinimum !== void 0) {\n          numberSchema = numberSchema.gt(schema.exclusiveMinimum);\n        }\n        if (schema.exclusiveMaximum !== void 0) {\n          numberSchema = numberSchema.lt(schema.exclusiveMaximum);\n        }\n        if (schema.multipleOf !== void 0) {\n          numberSchema = numberSchema.multipleOf(schema.multipleOf);\n        }\n        return addMetadata(numberSchema, schema);\n      }\n      case \"boolean\":\n        if (schema.enum) {\n          if (schema.enum.length === 0) {\n            return addMetadata(z.boolean(), schema);\n          }\n          const options = schema.enum.map((val) => z.literal(val));\n          if (options.length === 1) {\n            return addMetadata(options[0], schema);\n          }\n          if (options.length >= 2) {\n            const unionSchema = z.union([options[0], options[1], ...options.slice(2)]);\n            return addMetadata(unionSchema, schema);\n          }\n        }\n        return addMetadata(z.boolean(), schema);\n      case \"null\":\n        return addMetadata(z.null(), schema);\n      case \"object\":\n        if (schema.properties) {\n          const shape = {};\n          for (const [key, propSchema] of Object.entries(\n            schema.properties\n          )) {\n            shape[key] = convertJsonSchemaToZod(propSchema);\n          }\n          if (schema.required && Array.isArray(schema.required)) {\n            const required = new Set(schema.required);\n            for (const key of Object.keys(shape)) {\n              if (!required.has(key)) {\n                shape[key] = shape[key].optional();\n              }\n            }\n          } else {\n            for (const key of Object.keys(shape)) {\n              shape[key] = shape[key].optional();\n            }\n          }\n          let zodSchema;\n          if (schema.additionalProperties !== false) {\n            zodSchema = z.object(shape).passthrough();\n          } else {\n            zodSchema = z.object(shape);\n          }\n          return addMetadata(zodSchema, schema);\n        }\n        return addMetadata(z.object({}), schema);\n      case \"array\": {\n        let arraySchema;\n        if (schema.items) {\n          arraySchema = z.array(convertJsonSchemaToZod(schema.items));\n        } else {\n          arraySchema = z.array(z.any());\n        }\n        if (schema.minItems !== void 0) {\n          arraySchema = arraySchema.min(schema.minItems);\n        }\n        if (schema.maxItems !== void 0) {\n          arraySchema = arraySchema.max(schema.maxItems);\n        }\n        if (schema.uniqueItems === true) {\n          arraySchema = arraySchema.refine(\n            (items) => {\n              const seen = /* @__PURE__ */ new Set();\n              return items.every((item) => {\n                if (typeof item === \"string\" || typeof item === \"number\" || typeof item === \"boolean\") {\n                  if (seen.has(item)) return false;\n                  seen.add(item);\n                  return true;\n                }\n                const serialized = JSON.stringify(item);\n                if (seen.has(serialized)) return false;\n                seen.add(serialized);\n                return true;\n              });\n            },\n            { message: \"Array items must be unique\" }\n          );\n        }\n        return addMetadata(arraySchema, schema);\n      }\n    }\n  }\n  if (schema.enum) {\n    if (schema.enum.length === 0) {\n      return addMetadata(z.never(), schema);\n    }\n    const allStrings = schema.enum.every((val) => typeof val === \"string\");\n    if (allStrings) {\n      return addMetadata(z.enum(schema.enum), schema);\n    } else {\n      const options = schema.enum.map((val) => z.literal(val));\n      if (options.length === 1) {\n        return addMetadata(options[0], schema);\n      }\n      if (options.length >= 2) {\n        const unionSchema = z.union([options[0], options[1], ...options.slice(2)]);\n        return addMetadata(unionSchema, schema);\n      }\n    }\n  }\n  if (schema.anyOf && schema.anyOf.length >= 2) {\n    const schemas = schema.anyOf.map(convertJsonSchemaToZod);\n    return addMetadata(\n      z.union([schemas[0], schemas[1], ...schemas.slice(2)]),\n      schema\n    );\n  }\n  if (schema.allOf) {\n    return addMetadata(\n      schema.allOf.reduce(\n        (acc, s) => z.intersection(acc, convertJsonSchemaToZod(s)),\n        z.object({})\n      ),\n      schema\n    );\n  }\n  if (schema.oneOf && schema.oneOf.length >= 2) {\n    const schemas = schema.oneOf.map(convertJsonSchemaToZod);\n    return addMetadata(\n      z.union([schemas[0], schemas[1], ...schemas.slice(2)]),\n      schema\n    );\n  }\n  return addMetadata(z.any(), schema);\n}\nfunction jsonSchemaObjectToZodRawShape(schema) {\n  var _a;\n  let raw = {};\n  for (const [key, value] of Object.entries((_a = schema.properties) != null ? _a : {})) {\n    raw[key] = convertJsonSchemaToZod(value);\n  }\n  return raw;\n}\nexport {\n  convertJsonSchemaToZod,\n  jsonSchemaObjectToZodRawShape\n};\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 14692, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-v5/src/errors/ai-sdk-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-v5/src/errors/api-call-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-v5/src/errors/empty-response-body-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-v5/src/errors/get-error-message.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-v5/src/errors/invalid-argument-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-v5/src/errors/invalid-prompt-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-v5/src/errors/invalid-response-data-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-v5/src/errors/json-parse-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-v5/src/errors/load-api-key-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-v5/src/errors/load-setting-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-v5/src/errors/no-content-generated-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-v5/src/errors/no-such-model-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-v5/src/errors/too-many-embedding-values-for-call-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-v5/src/errors/type-validation-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-v5/src/errors/unsupported-functionality-error.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40ai-sdk/provider-v5/src/json-value/is-json.ts"],"sourcesContent":["/**\n * Symbol used for identifying AI SDK Error instances.\n * Enables checking if an error is an instance of AISDKError across package versions.\n */\nconst marker = 'vercel.ai.error';\nconst symbol = Symbol.for(marker);\n\n/**\n * Custom error class for AI SDK related errors.\n * @extends Error\n */\nexport class AISDKError extends Error {\n  private readonly [symbol] = true; // used in isInstance\n\n  /**\n   * The underlying cause of the error, if any.\n   */\n  readonly cause?: unknown;\n\n  /**\n   * Creates an AI SDK Error.\n   *\n   * @param {Object} params - The parameters for creating the error.\n   * @param {string} params.name - The name of the error.\n   * @param {string} params.message - The error message.\n   * @param {unknown} [params.cause] - The underlying cause of the error.\n   */\n  constructor({\n    name,\n    message,\n    cause,\n  }: {\n    name: string;\n    message: string;\n    cause?: unknown;\n  }) {\n    super(message);\n\n    this.name = name;\n    this.cause = cause;\n  }\n\n  /**\n   * Checks if the given error is an AI SDK Error.\n   * @param {unknown} error - The error to check.\n   * @returns {boolean} True if the error is an AI SDK Error, false otherwise.\n   */\n  static isInstance(error: unknown): error is AISDKError {\n    return AISDKError.hasMarker(error, marker);\n  }\n\n  protected static hasMarker(error: unknown, marker: string): boolean {\n    const markerSymbol = Symbol.for(marker);\n    return (\n      error != null &&\n      typeof error === 'object' &&\n      markerSymbol in error &&\n      typeof error[markerSymbol] === 'boolean' &&\n      error[markerSymbol] === true\n    );\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_APICallError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\nexport class APICallError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  readonly url: string;\n  readonly requestBodyValues: unknown;\n  readonly statusCode?: number;\n\n  readonly responseHeaders?: Record<string, string>;\n  readonly responseBody?: string;\n\n  readonly isRetryable: boolean;\n  readonly data?: unknown;\n\n  constructor({\n    message,\n    url,\n    requestBodyValues,\n    statusCode,\n    responseHeaders,\n    responseBody,\n    cause,\n    isRetryable = statusCode != null &&\n      (statusCode === 408 || // request timeout\n        statusCode === 409 || // conflict\n        statusCode === 429 || // too many requests\n        statusCode >= 500), // server error\n    data,\n  }: {\n    message: string;\n    url: string;\n    requestBodyValues: unknown;\n    statusCode?: number;\n    responseHeaders?: Record<string, string>;\n    responseBody?: string;\n    cause?: unknown;\n    isRetryable?: boolean;\n    data?: unknown;\n  }) {\n    super({ name, message, cause });\n\n    this.url = url;\n    this.requestBodyValues = requestBodyValues;\n    this.statusCode = statusCode;\n    this.responseHeaders = responseHeaders;\n    this.responseBody = responseBody;\n    this.isRetryable = isRetryable;\n    this.data = data;\n  }\n\n  static isInstance(error: unknown): error is APICallError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_EmptyResponseBodyError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\nexport class EmptyResponseBodyError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  constructor({ message = 'Empty response body' }: { message?: string } = {}) {\n    super({ name, message });\n  }\n\n  static isInstance(error: unknown): error is EmptyResponseBodyError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","export function getErrorMessage(error: unknown | undefined) {\n  if (error == null) {\n    return 'unknown error';\n  }\n\n  if (typeof error === 'string') {\n    return error;\n  }\n\n  if (error instanceof Error) {\n    return error.message;\n  }\n\n  return JSON.stringify(error);\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_InvalidArgumentError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\n/**\n * A function argument is invalid.\n */\nexport class InvalidArgumentError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  readonly argument: string;\n\n  constructor({\n    message,\n    cause,\n    argument,\n  }: {\n    argument: string;\n    message: string;\n    cause?: unknown;\n  }) {\n    super({ name, message, cause });\n\n    this.argument = argument;\n  }\n\n  static isInstance(error: unknown): error is InvalidArgumentError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_InvalidPromptError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\n/**\n * A prompt is invalid. This error should be thrown by providers when they cannot\n * process a prompt.\n */\nexport class InvalidPromptError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  readonly prompt: unknown;\n\n  constructor({\n    prompt,\n    message,\n    cause,\n  }: {\n    prompt: unknown;\n    message: string;\n    cause?: unknown;\n  }) {\n    super({ name, message: `Invalid prompt: ${message}`, cause });\n\n    this.prompt = prompt;\n  }\n\n  static isInstance(error: unknown): error is InvalidPromptError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_InvalidResponseDataError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\n/**\n * Server returned a response with invalid data content.\n * This should be thrown by providers when they cannot parse the response from the API.\n */\nexport class InvalidResponseDataError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  readonly data: unknown;\n\n  constructor({\n    data,\n    message = `Invalid response data: ${JSON.stringify(data)}.`,\n  }: {\n    data: unknown;\n    message?: string;\n  }) {\n    super({ name, message });\n\n    this.data = data;\n  }\n\n  static isInstance(error: unknown): error is InvalidResponseDataError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\nimport { getErrorMessage } from './get-error-message';\n\nconst name = 'AI_JSONParseError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\n// TODO v5: rename to ParseError\nexport class JSONParseError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  readonly text: string;\n\n  constructor({ text, cause }: { text: string; cause: unknown }) {\n    super({\n      name,\n      message:\n        `JSON parsing failed: ` +\n        `Text: ${text}.\\n` +\n        `Error message: ${getErrorMessage(cause)}`,\n      cause,\n    });\n\n    this.text = text;\n  }\n\n  static isInstance(error: unknown): error is JSONParseError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_LoadAPIKeyError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\nexport class LoadAPIKeyError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  constructor({ message }: { message: string }) {\n    super({ name, message });\n  }\n\n  static isInstance(error: unknown): error is LoadAPIKeyError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_LoadSettingError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\nexport class LoadSettingError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  constructor({ message }: { message: string }) {\n    super({ name, message });\n  }\n\n  static isInstance(error: unknown): error is LoadSettingError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_NoContentGeneratedError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\n/**\nThrown when the AI provider fails to generate any content.\n */\nexport class NoContentGeneratedError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  constructor({\n    message = 'No content generated.',\n  }: { message?: string } = {}) {\n    super({ name, message });\n  }\n\n  static isInstance(error: unknown): error is NoContentGeneratedError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_NoSuchModelError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\nexport class NoSuchModelError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  readonly modelId: string;\n  readonly modelType:\n    | 'languageModel'\n    | 'textEmbeddingModel'\n    | 'imageModel'\n    | 'transcriptionModel'\n    | 'speechModel';\n\n  constructor({\n    errorName = name,\n    modelId,\n    modelType,\n    message = `No such ${modelType}: ${modelId}`,\n  }: {\n    errorName?: string;\n    modelId: string;\n    modelType:\n      | 'languageModel'\n      | 'textEmbeddingModel'\n      | 'imageModel'\n      | 'transcriptionModel'\n      | 'speechModel';\n    message?: string;\n  }) {\n    super({ name: errorName, message });\n\n    this.modelId = modelId;\n    this.modelType = modelType;\n  }\n\n  static isInstance(error: unknown): error is NoSuchModelError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_TooManyEmbeddingValuesForCallError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\nexport class TooManyEmbeddingValuesForCallError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  readonly provider: string;\n  readonly modelId: string;\n  readonly maxEmbeddingsPerCall: number;\n  readonly values: Array<unknown>;\n\n  constructor(options: {\n    provider: string;\n    modelId: string;\n    maxEmbeddingsPerCall: number;\n    values: Array<unknown>;\n  }) {\n    super({\n      name,\n      message:\n        `Too many values for a single embedding call. ` +\n        `The ${options.provider} model \"${options.modelId}\" can only embed up to ` +\n        `${options.maxEmbeddingsPerCall} values per call, but ${options.values.length} values were provided.`,\n    });\n\n    this.provider = options.provider;\n    this.modelId = options.modelId;\n    this.maxEmbeddingsPerCall = options.maxEmbeddingsPerCall;\n    this.values = options.values;\n  }\n\n  static isInstance(\n    error: unknown,\n  ): error is TooManyEmbeddingValuesForCallError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\nimport { getErrorMessage } from './get-error-message';\n\nconst name = 'AI_TypeValidationError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\nexport class TypeValidationError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  readonly value: unknown;\n\n  constructor({ value, cause }: { value: unknown; cause: unknown }) {\n    super({\n      name,\n      message:\n        `Type validation failed: ` +\n        `Value: ${JSON.stringify(value)}.\\n` +\n        `Error message: ${getErrorMessage(cause)}`,\n      cause,\n    });\n\n    this.value = value;\n  }\n\n  static isInstance(error: unknown): error is TypeValidationError {\n    return AISDKError.hasMarker(error, marker);\n  }\n\n  /**\n   * Wraps an error into a TypeValidationError.\n   * If the cause is already a TypeValidationError with the same value, it returns the cause.\n   * Otherwise, it creates a new TypeValidationError.\n   *\n   * @param {Object} params - The parameters for wrapping the error.\n   * @param {unknown} params.value - The value that failed validation.\n   * @param {unknown} params.cause - The original error or cause of the validation failure.\n   * @returns {TypeValidationError} A TypeValidationError instance.\n   */\n  static wrap({\n    value,\n    cause,\n  }: {\n    value: unknown;\n    cause: unknown;\n  }): TypeValidationError {\n    return TypeValidationError.isInstance(cause) && cause.value === value\n      ? cause\n      : new TypeValidationError({ value, cause });\n  }\n}\n","import { AISDKError } from './ai-sdk-error';\n\nconst name = 'AI_UnsupportedFunctionalityError';\nconst marker = `vercel.ai.error.${name}`;\nconst symbol = Symbol.for(marker);\n\nexport class UnsupportedFunctionalityError extends AISDKError {\n  private readonly [symbol] = true; // used in isInstance\n\n  readonly functionality: string;\n\n  constructor({\n    functionality,\n    message = `'${functionality}' functionality not supported.`,\n  }: {\n    functionality: string;\n    message?: string;\n  }) {\n    super({ name, message });\n    this.functionality = functionality;\n  }\n\n  static isInstance(error: unknown): error is UnsupportedFunctionalityError {\n    return AISDKError.hasMarker(error, marker);\n  }\n}\n","import { JSONArray, JSONObject, JSONValue } from './json-value';\n\nexport function isJSONValue(value: unknown): value is JSONValue {\n  if (\n    value === null ||\n    typeof value === 'string' ||\n    typeof value === 'number' ||\n    typeof value === 'boolean'\n  ) {\n    return true;\n  }\n\n  if (Array.isArray(value)) {\n    return value.every(isJSONValue);\n  }\n\n  if (typeof value === 'object') {\n    return Object.entries(value).every(\n      ([key, val]) => typeof key === 'string' && isJSONValue(val),\n    );\n  }\n\n  return false;\n}\n\nexport function isJSONArray(value: unknown): value is JSONArray {\n  return Array.isArray(value) && value.every(isJSONValue);\n}\n\nexport function isJSONObject(value: unknown): value is JSONObject {\n  return (\n    value != null &&\n    typeof value === 'object' &&\n    Object.entries(value).every(\n      ([key, val]) => typeof key === 'string' && isJSONValue(val),\n    )\n  );\n}\n"],"names":["name","marker","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a","name","marker","symbol","_a"],"mappings":"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"}},
    {"offset": {"line": 15084, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/radash/dist/esm/typed.mjs","sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/radash/src/typed.ts"],"sourcesContent":["export const isSymbol = (value: any): value is symbol => {\n  return !!value && value.constructor === Symbol\n}\n\nexport const isArray = Array.isArray\n\nexport const isObject = (value: any): value is object => {\n  return !!value && value.constructor === Object\n}\n\n/**\n * Checks if the given value is primitive.\n *\n * Primitive Types: number , string , boolean , symbol, bigint, undefined, null\n *\n * @param {*} value value to check\n * @returns {boolean} result\n */\nexport const isPrimitive = (value: any): boolean => {\n  return (\n    value === undefined ||\n    value === null ||\n    (typeof value !== 'object' && typeof value !== 'function')\n  )\n}\n\nexport const isFunction = (value: any): value is Function => {\n  return !!(value && value.constructor && value.call && value.apply)\n}\n\nexport const isString = (value: any): value is string => {\n  return typeof value === 'string' || value instanceof String\n}\n\nexport const isInt = (value: any): value is number => {\n  return isNumber(value) && value % 1 === 0\n}\n\nexport const isFloat = (value: any): value is number => {\n  return isNumber(value) && value % 1 !== 0\n}\n\nexport const isNumber = (value: any): value is number => {\n  try {\n    return Number(value) === value\n  } catch {\n    return false\n  }\n}\n\nexport const isDate = (value: any): value is Date => {\n  return Object.prototype.toString.call(value) === '[object Date]'\n}\n\n/**\n * This is really a _best guess_ promise checking. You\n * should probably use Promise.resolve(value) to be 100%\n * sure you're handling it correctly.\n */\nexport const isPromise = (value: any): value is Promise<any> => {\n  if (!value) return false\n  if (!value.then) return false\n  if (!isFunction(value.then)) return false\n  return true\n}\n\nexport const isEmpty = (value: any) => {\n  if (value === true || value === false) return true\n  if (value === null || value === undefined) return true\n  if (isNumber(value)) return value === 0\n  if (isDate(value)) return isNaN(value.getTime())\n  if (isFunction(value)) return false\n  if (isSymbol(value)) return false\n  const length = (value as any).length\n  if (isNumber(length)) return length === 0\n  const size = (value as any).size\n  if (isNumber(size)) return size === 0\n  const keys = Object.keys(value).length\n  return keys === 0\n}\n\nexport const isEqual = <TType>(x: TType, y: TType): boolean => {\n  if (Object.is(x, y)) return true\n  if (x instanceof Date && y instanceof Date) {\n    return x.getTime() === y.getTime()\n  }\n  if (x instanceof RegExp && y instanceof RegExp) {\n    return x.toString() === y.toString()\n  }\n  if (\n    typeof x !== 'object' ||\n    x === null ||\n    typeof y !== 'object' ||\n    y === null\n  ) {\n    return false\n  }\n  const keysX = Reflect.ownKeys(x as unknown as object) as (keyof typeof x)[]\n  const keysY = Reflect.ownKeys(y as unknown as object)\n  if (keysX.length !== keysY.length) return false\n  for (let i = 0; i < keysX.length; i++) {\n    if (!Reflect.has(y as unknown as object, keysX[i])) return false\n    if (!isEqual(x[keysX[i]], y[keysX[i]])) return false\n  }\n  return true\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 15190, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/base64-js/index.js"],"sourcesContent":["'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 15295, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/xxhash-wasm/esm/xxhash-wasm.js","sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/xxhash-wasm/src/index.js","file:///Users/wsz/lifebud/version2/lifebud/node_modules/xxhash-wasm/src/xxhash.js"],"sourcesContent":["import { xxhash } from \"./xxhash\";\n\n// The .wasm is filled in by the build process, so the user doesn't need to load\n// xxhash.wasm by themselves because it's part of the bundle. Otherwise it\n// couldn't be distributed easily as the user would need to host xxhash.wasm\n// and then fetch it, to be able to use it.\n// eslint-disable-next-line no-undef\nconst wasmBytes = new Uint8Array(WASM_PRECOMPILED_BYTES);\n\nexport default async function () {\n  return xxhash((await WebAssembly.instantiate(wasmBytes)).instance);\n}\n","const u32_BYTES = 4;\nconst u64_BYTES = 8;\n\n// The xxh32 hash state struct:\nconst XXH32_STATE_SIZE_BYTES =\n  u32_BYTES + // total_len\n  u32_BYTES + // large_len\n  u32_BYTES * 4 + // Accumulator lanes\n  u32_BYTES * 4 + // Internal buffer\n  u32_BYTES + // memsize\n  u32_BYTES; // reserved\n\n// The xxh64 hash state struct:\nconst XXH64_STATE_SIZE_BYTES =\n  u64_BYTES + // total_len\n  u64_BYTES * 4 + // Accumulator lanes\n  u64_BYTES * 4 + // Internal buffer\n  u32_BYTES + // memsize\n  u32_BYTES + // reserved32\n  u64_BYTES; // reserved64\n\nexport function xxhash(instance) {\n  const {\n    exports: {\n      mem,\n      xxh32,\n      xxh64,\n      init32,\n      update32,\n      digest32,\n      init64,\n      update64,\n      digest64,\n    },\n  } = instance;\n\n  let memory = new Uint8Array(mem.buffer);\n  // Grow the wasm linear memory to accommodate length + offset bytes\n  function growMemory(length, offset) {\n    if (mem.buffer.byteLength < length + offset) {\n      const extraPages = Math.ceil(\n        // Wasm pages are spec'd to 64K\n        (length + offset - mem.buffer.byteLength) / (64 * 1024),\n      );\n      mem.grow(extraPages);\n      // After growing, the original memory's ArrayBuffer is detached, so we'll\n      // need to replace our view over it with a new one over the new backing\n      // ArrayBuffer.\n      memory = new Uint8Array(mem.buffer);\n    }\n  }\n\n  // The h32 and h64 streaming hash APIs are identical, so we can implement\n  // them both by way of a templated call to this generalized function.\n  function create(size, seed, init, update, digest, finalize) {\n    // Ensure that we've actually got enough space in the wasm memory to store\n    // the state blob for this hasher.\n    growMemory(size);\n\n    // We'll hold our hashing state in this closure.\n    const state = new Uint8Array(size);\n    memory.set(state);\n    init(0, seed);\n\n    // Each time we interact with wasm, it may have mutated our state so we'll\n    // need to read it back into our closed copy.\n    state.set(memory.subarray(0, size));\n\n    return {\n      update(input) {\n        memory.set(state);\n        let length;\n        if (typeof input === \"string\") {\n          growMemory(input.length * 3, size);\n          length = encoder.encodeInto(input, memory.subarray(size)).written;\n        } else {\n          // The only other valid input type is a Uint8Array\n          growMemory(input.byteLength, size);\n          memory.set(input, size);\n          length = input.byteLength;\n        }\n        update(0, size, length);\n        state.set(memory.subarray(0, size));\n        return this;\n      },\n      digest() {\n        memory.set(state);\n        return finalize(digest(0));\n      },\n    };\n  }\n\n  // Logical shift right makes it an u32, otherwise it's interpreted as an i32.\n  function forceUnsigned32(i) {\n    return i >>> 0;\n  }\n\n  // BigInts are arbitrary precision and signed, so to get the \"correct\" u64\n  // value from the return, we'll need to force that interpretation.\n  const u64Max = 2n ** 64n - 1n;\n  function forceUnsigned64(i) {\n    return i & u64Max;\n  }\n\n  const encoder = new TextEncoder();\n  const defaultSeed = 0;\n  const defaultBigSeed = 0n;\n\n  function h32(str, seed = defaultSeed) {\n    // https://developer.mozilla.org/en-US/docs/Web/API/TextEncoder/encodeInto#buffer_sizing\n    // By sizing the buffer to 3 * string-length we guarantee that the buffer\n    // will be appropriately sized for the utf-8 encoding of the string.\n    growMemory(str.length * 3, 0);\n    return forceUnsigned32(\n      xxh32(0, encoder.encodeInto(str, memory).written, seed),\n    );\n  }\n\n  function h64(str, seed = defaultBigSeed) {\n    growMemory(str.length * 3, 0);\n    return forceUnsigned64(\n      xxh64(0, encoder.encodeInto(str, memory).written, seed),\n    );\n  }\n\n  return {\n    h32,\n    h32ToString(str, seed = defaultSeed) {\n      return h32(str, seed).toString(16).padStart(8, \"0\");\n    },\n    h32Raw(inputBuffer, seed = defaultSeed) {\n      growMemory(inputBuffer.byteLength, 0);\n      memory.set(inputBuffer);\n      return forceUnsigned32(xxh32(0, inputBuffer.byteLength, seed));\n    },\n    create32(seed = defaultSeed) {\n      return create(\n        XXH32_STATE_SIZE_BYTES,\n        seed,\n        init32,\n        update32,\n        digest32,\n        forceUnsigned32,\n      );\n    },\n    h64,\n    h64ToString(str, seed = defaultBigSeed) {\n      return h64(str, seed).toString(16).padStart(16, \"0\");\n    },\n    h64Raw(inputBuffer, seed = defaultBigSeed) {\n      growMemory(inputBuffer.byteLength, 0);\n      memory.set(inputBuffer);\n      return forceUnsigned64(xxh64(0, inputBuffer.byteLength, seed));\n    },\n    create64(seed = defaultBigSeed) {\n      return create(\n        XXH64_STATE_SIZE_BYTES,\n        seed,\n        init64,\n        update64,\n        digest64,\n        forceUnsigned64,\n      );\n    },\n  };\n}\n"],"names":["wasmBytes","Uint8Array","index","xxhash","instance","exports","mem","xxh32","xxh64","init32","update32","digest32","init64","update64","digest64","memory","buffer","growMemory","length","offset","byteLength","extraPages","Math","ceil","grow","create","size","seed","init","update","digest","finalize","state","set","subarray","input","encoder","encodeInto","written","forceUnsigned32","i","u64Max","forceUnsigned64","TextEncoder","defaultSeed","defaultBigSeed","h32","str","h64","h32ToString","toString","padStart","h32Raw","inputBuffer","create32","u32_BYTES","h64ToString","h64Raw","create64","u64_BYTES","WebAssembly","instantiate"],"mappings":";;;;AAOA,MAAMA,IAAY,IAAIC,WAAW;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;IAAA;CAAsB;AAExC,eAAAC;IACb,OCWK,SAAgBE,CAAQ;QAC7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"}},
    {"offset": {"line": 18459, "column": 0}, "map": {"version":3,"file":"turbopack:///[project]/node_modules/lru-cache/dist/esm/index.js","sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/lru-cache/src/index.ts"],"sourcesContent":["/**\n * @module LRUCache\n */\n\n// module-private names and types\n// this provides the default Perf object source.\n// it can be passed in via configuration to override it\n// for a single LRU object.\nexport type Perf = { now: () => number }\nconst defaultPerf: Perf =\n  (\n    typeof performance === 'object' &&\n    performance &&\n    typeof performance.now === 'function'\n  ) ?\n    performance\n  : Date\n\nconst warned = new Set<string>()\n\n// either a function or a class\ntype ForC = ((...a: any[]) => any) | { new (...a: any[]): any }\n\n/* c8 ignore start */\nconst PROCESS = (\n  typeof process === 'object' && !!process ?\n    process\n  : {}) as { [k: string]: any }\n/* c8 ignore start */\n\nconst emitWarning = (\n  msg: string,\n  type: string,\n  code: string,\n  fn: ForC,\n) => {\n  typeof PROCESS.emitWarning === 'function' ?\n    PROCESS.emitWarning(msg, type, code, fn)\n  : console.error(`[${code}] ${type}: ${msg}`)\n}\n\nlet AC = globalThis.AbortController\nlet AS = globalThis.AbortSignal\n\n/* c8 ignore start */\nif (typeof AC === 'undefined') {\n  //@ts-ignore\n  AS = class AbortSignal {\n    onabort?: (...a: any[]) => any\n    _onabort: ((...a: any[]) => any)[] = []\n    reason?: any\n    aborted: boolean = false\n    addEventListener(_: string, fn: (...a: any[]) => any) {\n      this._onabort.push(fn)\n    }\n  }\n  //@ts-ignore\n  AC = class AbortController {\n    constructor() {\n      warnACPolyfill()\n    }\n    signal = new AS()\n    abort(reason: any) {\n      if (this.signal.aborted) return\n      //@ts-ignore\n      this.signal.reason = reason\n      //@ts-ignore\n      this.signal.aborted = true\n      //@ts-ignore\n      for (const fn of this.signal._onabort) {\n        fn(reason)\n      }\n      this.signal.onabort?.(reason)\n    }\n  }\n  let printACPolyfillWarning =\n    PROCESS.env?.LRU_CACHE_IGNORE_AC_WARNING !== '1'\n  const warnACPolyfill = () => {\n    if (!printACPolyfillWarning) return\n    printACPolyfillWarning = false\n    emitWarning(\n      'AbortController is not defined. If using lru-cache in ' +\n        'node 14, load an AbortController polyfill from the ' +\n        '`node-abort-controller` package. A minimal polyfill is ' +\n        'provided for use by LRUCache.fetch(), but it should not be ' +\n        'relied upon in other contexts (eg, passing it to other APIs that ' +\n        'use AbortController/AbortSignal might have undesirable effects). ' +\n        'You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.',\n      'NO_ABORT_CONTROLLER',\n      'ENOTSUP',\n      warnACPolyfill,\n    )\n  }\n}\n/* c8 ignore stop */\n\nconst shouldWarn = (code: string) => !warned.has(code)\n\nconst TYPE = Symbol('type')\nexport type PosInt = number & { [TYPE]: 'Positive Integer' }\nexport type Index = number & { [TYPE]: 'LRUCache Index' }\n\nconst isPosInt = (n: any): n is PosInt =>\n  n && n === Math.floor(n) && n > 0 && isFinite(n)\n\nexport type UintArray = Uint8Array | Uint16Array | Uint32Array\nexport type NumberArray = UintArray | number[]\n\n/* c8 ignore start */\n// This is a little bit ridiculous, tbh.\n// The maximum array length is 2^32-1 or thereabouts on most JS impls.\n// And well before that point, you're caching the entire world, I mean,\n// that's ~32GB of just integers for the next/prev links, plus whatever\n// else to hold that many keys and values.  Just filling the memory with\n// zeroes at init time is brutal when you get that big.\n// But why not be complete?\n// Maybe in the future, these limits will have expanded.\nconst getUintArray = (max: number) =>\n  !isPosInt(max) ? null\n  : max <= Math.pow(2, 8) ? Uint8Array\n  : max <= Math.pow(2, 16) ? Uint16Array\n  : max <= Math.pow(2, 32) ? Uint32Array\n  : max <= Number.MAX_SAFE_INTEGER ? ZeroArray\n  : null\n/* c8 ignore stop */\n\nclass ZeroArray extends Array<number> {\n  constructor(size: number) {\n    super(size)\n    this.fill(0)\n  }\n}\nexport type { ZeroArray }\nexport type { Stack }\n\nexport type StackLike = Stack | Index[]\nclass Stack {\n  heap: NumberArray\n  length: number\n  // private constructor\n  static #constructing: boolean = false\n  static create(max: number): StackLike {\n    const HeapCls = getUintArray(max)\n    if (!HeapCls) return []\n    Stack.#constructing = true\n    const s = new Stack(max, HeapCls)\n    Stack.#constructing = false\n    return s\n  }\n  constructor(max: number, HeapCls: { new (n: number): NumberArray }) {\n    /* c8 ignore start */\n    if (!Stack.#constructing) {\n      throw new TypeError('instantiate Stack using Stack.create(n)')\n    }\n    /* c8 ignore stop */\n    this.heap = new HeapCls(max)\n    this.length = 0\n  }\n  push(n: Index) {\n    this.heap[this.length++] = n\n  }\n  pop(): Index {\n    return this.heap[--this.length] as Index\n  }\n}\n\n/**\n * Promise representing an in-progress {@link LRUCache#fetch} call\n */\nexport type BackgroundFetch<V> = Promise<V | undefined> & {\n  __returned: BackgroundFetch<V> | undefined\n  __abortController: AbortController\n  __staleWhileFetching: V | undefined\n}\n\nexport type DisposeTask<K, V> = [\n  value: V,\n  key: K,\n  reason: LRUCache.DisposeReason,\n]\n\nexport namespace LRUCache {\n  /**\n   * An integer greater than 0, reflecting the calculated size of items\n   */\n  export type Size = number\n\n  /**\n   * Integer greater than 0, representing some number of milliseconds, or the\n   * time at which a TTL started counting from.\n   */\n  export type Milliseconds = number\n\n  /**\n   * An integer greater than 0, reflecting a number of items\n   */\n  export type Count = number\n\n  /**\n   * The reason why an item was removed from the cache, passed\n   * to the {@link Disposer} methods.\n   *\n   * - `evict`: The item was evicted because it is the least recently used,\n   *   and the cache is full.\n   * - `set`: A new value was set, overwriting the old value being disposed.\n   * - `delete`: The item was explicitly deleted, either by calling\n   *   {@link LRUCache#delete}, {@link LRUCache#clear}, or\n   *   {@link LRUCache#set} with an undefined value.\n   * - `expire`: The item was removed due to exceeding its TTL.\n   * - `fetch`: A {@link OptionsBase#fetchMethod} operation returned\n   *   `undefined` or was aborted, causing the item to be deleted.\n   */\n  export type DisposeReason =\n    | 'evict'\n    | 'set'\n    | 'delete'\n    | 'expire'\n    | 'fetch'\n  /**\n   * A method called upon item removal, passed as the\n   * {@link OptionsBase.dispose} and/or\n   * {@link OptionsBase.disposeAfter} options.\n   */\n  export type Disposer<K, V> = (\n    value: V,\n    key: K,\n    reason: DisposeReason,\n  ) => void\n\n  /**\n   * The reason why an item was added to the cache, passed\n   * to the {@link Inserter} methods.\n   *\n   * - `add`: the item was not found in the cache, and was added\n   * - `update`: the item was in the cache, with the same value provided\n   * - `replace`: the item was in the cache, and replaced\n   */\n  export type InsertReason = 'add' | 'update' | 'replace'\n\n  /**\n   * A method called upon item insertion, passed as the\n   * {@link OptionsBase.insert}\n   */\n  export type Inserter<K, V> = (\n    value: V,\n    key: K,\n    reason: InsertReason,\n  ) => void\n\n  /**\n   * A function that returns the effective calculated size\n   * of an entry in the cache.\n   */\n  export type SizeCalculator<K, V> = (value: V, key: K) => Size\n\n  /**\n   * Options provided to the\n   * {@link OptionsBase.fetchMethod} function.\n   */\n  export interface FetcherOptions<K, V, FC = unknown> {\n    signal: AbortSignal\n    options: FetcherFetchOptions<K, V, FC>\n    /**\n     * Object provided in the {@link FetchOptions.context} option to\n     * {@link LRUCache#fetch}\n     */\n    context: FC\n  }\n\n  /**\n   * Occasionally, it may be useful to track the internal behavior of the\n   * cache, particularly for logging, debugging, or for behavior within the\n   * `fetchMethod`. To do this, you can pass a `status` object to the\n   * {@link LRUCache#fetch}, {@link LRUCache#get}, {@link LRUCache#set},\n   * {@link LRUCache#memo}, and {@link LRUCache#has} methods.\n   *\n   * The `status` option should be a plain JavaScript object. The following\n   * fields will be set on it appropriately, depending on the situation.\n   */\n  export interface Status<V> {\n    /**\n     * The status of a set() operation.\n     *\n     * - add: the item was not found in the cache, and was added\n     * - update: the item was in the cache, with the same value provided\n     * - replace: the item was in the cache, and replaced\n     * - miss: the item was not added to the cache for some reason\n     */\n    set?: 'add' | 'update' | 'replace' | 'miss'\n\n    /**\n     * the ttl stored for the item, or undefined if ttls are not used.\n     */\n    ttl?: Milliseconds\n\n    /**\n     * the start time for the item, or undefined if ttls are not used.\n     */\n    start?: Milliseconds\n\n    /**\n     * The timestamp used for TTL calculation\n     */\n    now?: Milliseconds\n\n    /**\n     * the remaining ttl for the item, or undefined if ttls are not used.\n     */\n    remainingTTL?: Milliseconds\n\n    /**\n     * The calculated size for the item, if sizes are used.\n     */\n    entrySize?: Size\n\n    /**\n     * The total calculated size of the cache, if sizes are used.\n     */\n    totalCalculatedSize?: Size\n\n    /**\n     * A flag indicating that the item was not stored, due to exceeding the\n     * {@link OptionsBase.maxEntrySize}\n     */\n    maxEntrySizeExceeded?: true\n\n    /**\n     * The old value, specified in the case of `set:'update'` or\n     * `set:'replace'`\n     */\n    oldValue?: V\n\n    /**\n     * The results of a {@link LRUCache#has} operation\n     *\n     * - hit: the item was found in the cache\n     * - stale: the item was found in the cache, but is stale\n     * - miss: the item was not found in the cache\n     */\n    has?: 'hit' | 'stale' | 'miss'\n\n    /**\n     * The status of a {@link LRUCache#fetch} operation.\n     * Note that this can change as the underlying fetch() moves through\n     * various states.\n     *\n     * - inflight: there is another fetch() for this key which is in process\n     * - get: there is no {@link OptionsBase.fetchMethod}, so\n     *   {@link LRUCache#get} was called.\n     * - miss: the item is not in cache, and will be fetched.\n     * - hit: the item is in the cache, and was resolved immediately.\n     * - stale: the item is in the cache, but stale.\n     * - refresh: the item is in the cache, and not stale, but\n     *   {@link FetchOptions.forceRefresh} was specified.\n     */\n    fetch?: 'get' | 'inflight' | 'miss' | 'hit' | 'stale' | 'refresh'\n\n    /**\n     * The {@link OptionsBase.fetchMethod} was called\n     */\n    fetchDispatched?: true\n\n    /**\n     * The cached value was updated after a successful call to\n     * {@link OptionsBase.fetchMethod}\n     */\n    fetchUpdated?: true\n\n    /**\n     * The reason for a fetch() rejection.  Either the error raised by the\n     * {@link OptionsBase.fetchMethod}, or the reason for an\n     * AbortSignal.\n     */\n    fetchError?: Error\n\n    /**\n     * The fetch received an abort signal\n     */\n    fetchAborted?: true\n\n    /**\n     * The abort signal received was ignored, and the fetch was allowed to\n     * continue.\n     */\n    fetchAbortIgnored?: true\n\n    /**\n     * The fetchMethod promise resolved successfully\n     */\n    fetchResolved?: true\n\n    /**\n     * The fetchMethod promise was rejected\n     */\n    fetchRejected?: true\n\n    /**\n     * The status of a {@link LRUCache#get} operation.\n     *\n     * - fetching: The item is currently being fetched.  If a previous value\n     *   is present and allowed, that will be returned.\n     * - stale: The item is in the cache, and is stale.\n     * - hit: the item is in the cache\n     * - miss: the item is not in the cache\n     */\n    get?: 'stale' | 'hit' | 'miss'\n\n    /**\n     * A fetch or get operation returned a stale value.\n     */\n    returnedStale?: true\n  }\n\n  /**\n   * options which override the options set in the LRUCache constructor\n   * when calling {@link LRUCache#fetch}.\n   *\n   * This is the union of {@link GetOptions} and {@link SetOptions}, plus\n   * {@link OptionsBase.noDeleteOnFetchRejection},\n   * {@link OptionsBase.allowStaleOnFetchRejection},\n   * {@link FetchOptions.forceRefresh}, and\n   * {@link FetcherOptions.context}\n   *\n   * Any of these may be modified in the {@link OptionsBase.fetchMethod}\n   * function, but the {@link GetOptions} fields will of course have no\n   * effect, as the {@link LRUCache#get} call already happened by the time\n   * the fetchMethod is called.\n   */\n  export interface FetcherFetchOptions<K, V, FC = unknown>\n    extends Pick<\n      OptionsBase<K, V, FC>,\n      | 'allowStale'\n      | 'updateAgeOnGet'\n      | 'noDeleteOnStaleGet'\n      | 'sizeCalculation'\n      | 'ttl'\n      | 'noDisposeOnSet'\n      | 'noUpdateTTL'\n      | 'noDeleteOnFetchRejection'\n      | 'allowStaleOnFetchRejection'\n      | 'ignoreFetchAbort'\n      | 'allowStaleOnFetchAbort'\n    > {\n    status?: Status<V>\n    size?: Size\n  }\n\n  /**\n   * Options that may be passed to the {@link LRUCache#fetch} method.\n   */\n  export interface FetchOptions<K, V, FC>\n    extends FetcherFetchOptions<K, V, FC> {\n    /**\n     * Set to true to force a re-load of the existing data, even if it\n     * is not yet stale.\n     */\n    forceRefresh?: boolean\n    /**\n     * Context provided to the {@link OptionsBase.fetchMethod} as\n     * the {@link FetcherOptions.context} param.\n     *\n     * If the FC type is specified as unknown (the default),\n     * undefined or void, then this is optional.  Otherwise, it will\n     * be required.\n     */\n    context?: FC\n    signal?: AbortSignal\n    status?: Status<V>\n  }\n  /**\n   * Options provided to {@link LRUCache#fetch} when the FC type is something\n   * other than `unknown`, `undefined`, or `void`\n   */\n  export interface FetchOptionsWithContext<K, V, FC>\n    extends FetchOptions<K, V, FC> {\n    context: FC\n  }\n  /**\n   * Options provided to {@link LRUCache#fetch} when the FC type is\n   * `undefined` or `void`\n   */\n  export interface FetchOptionsNoContext<K, V>\n    extends FetchOptions<K, V, undefined> {\n    context?: undefined\n  }\n\n  export interface MemoOptions<K, V, FC = unknown>\n    extends Pick<\n      OptionsBase<K, V, FC>,\n      | 'allowStale'\n      | 'updateAgeOnGet'\n      | 'noDeleteOnStaleGet'\n      | 'sizeCalculation'\n      | 'ttl'\n      | 'noDisposeOnSet'\n      | 'noUpdateTTL'\n      | 'noDeleteOnFetchRejection'\n      | 'allowStaleOnFetchRejection'\n      | 'ignoreFetchAbort'\n      | 'allowStaleOnFetchAbort'\n    > {\n    /**\n     * Set to true to force a re-load of the existing data, even if it\n     * is not yet stale.\n     */\n    forceRefresh?: boolean\n    /**\n     * Context provided to the {@link OptionsBase.memoMethod} as\n     * the {@link MemoizerOptions.context} param.\n     *\n     * If the FC type is specified as unknown (the default),\n     * undefined or void, then this is optional.  Otherwise, it will\n     * be required.\n     */\n    context?: FC\n    status?: Status<V>\n  }\n  /**\n   * Options provided to {@link LRUCache#memo} when the FC type is something\n   * other than `unknown`, `undefined`, or `void`\n   */\n  export interface MemoOptionsWithContext<K, V, FC>\n    extends MemoOptions<K, V, FC> {\n    context: FC\n  }\n  /**\n   * Options provided to {@link LRUCache#memo} when the FC type is\n   * `undefined` or `void`\n   */\n  export interface MemoOptionsNoContext<K, V>\n    extends MemoOptions<K, V, undefined> {\n    context?: undefined\n  }\n\n  /**\n   * Options provided to the\n   * {@link OptionsBase.memoMethod} function.\n   */\n  export interface MemoizerOptions<K, V, FC = unknown> {\n    options: MemoizerMemoOptions<K, V, FC>\n    /**\n     * Object provided in the {@link MemoOptions.context} option to\n     * {@link LRUCache#memo}\n     */\n    context: FC\n  }\n\n  /**\n   * options which override the options set in the LRUCache constructor\n   * when calling {@link LRUCache#memo}.\n   *\n   * This is the union of {@link GetOptions} and {@link SetOptions}, plus\n   * {@link MemoOptions.forceRefresh}, and\n   * {@link MemoOptions.context}\n   *\n   * Any of these may be modified in the {@link OptionsBase.memoMethod}\n   * function, but the {@link GetOptions} fields will of course have no\n   * effect, as the {@link LRUCache#get} call already happened by the time\n   * the memoMethod is called.\n   */\n  export interface MemoizerMemoOptions<K, V, FC = unknown>\n    extends Pick<\n      OptionsBase<K, V, FC>,\n      | 'allowStale'\n      | 'updateAgeOnGet'\n      | 'noDeleteOnStaleGet'\n      | 'sizeCalculation'\n      | 'ttl'\n      | 'noDisposeOnSet'\n      | 'noUpdateTTL'\n    > {\n    status?: Status<V>\n    size?: Size\n    start?: Milliseconds\n  }\n\n  /**\n   * Options that may be passed to the {@link LRUCache#has} method.\n   */\n  export interface HasOptions<K, V, FC>\n    extends Pick<OptionsBase<K, V, FC>, 'updateAgeOnHas'> {\n    status?: Status<V>\n  }\n\n  /**\n   * Options that may be passed to the {@link LRUCache#get} method.\n   */\n  export interface GetOptions<K, V, FC>\n    extends Pick<\n      OptionsBase<K, V, FC>,\n      'allowStale' | 'updateAgeOnGet' | 'noDeleteOnStaleGet'\n    > {\n    status?: Status<V>\n  }\n\n  /**\n   * Options that may be passed to the {@link LRUCache#peek} method.\n   */\n  export interface PeekOptions<K, V, FC>\n    extends Pick<OptionsBase<K, V, FC>, 'allowStale'> {}\n\n  /**\n   * Options that may be passed to the {@link LRUCache#set} method.\n   */\n  export interface SetOptions<K, V, FC>\n    extends Pick<\n      OptionsBase<K, V, FC>,\n      'sizeCalculation' | 'ttl' | 'noDisposeOnSet' | 'noUpdateTTL'\n    > {\n    /**\n     * If size tracking is enabled, then setting an explicit size\n     * in the {@link LRUCache#set} call will prevent calling the\n     * {@link OptionsBase.sizeCalculation} function.\n     */\n    size?: Size\n    /**\n     * If TTL tracking is enabled, then setting an explicit start\n     * time in the {@link LRUCache#set} call will override the\n     * default time from `performance.now()` or `Date.now()`.\n     *\n     * Note that it must be a valid value for whichever time-tracking\n     * method is in use.\n     */\n    start?: Milliseconds\n    status?: Status<V>\n  }\n\n  /**\n   * The type signature for the {@link OptionsBase.fetchMethod} option.\n   */\n  export type Fetcher<K, V, FC = unknown> = (\n    key: K,\n    staleValue: V | undefined,\n    options: FetcherOptions<K, V, FC>,\n  ) => Promise<V | undefined | void> | V | undefined | void\n\n  /**\n   * the type signature for the {@link OptionsBase.memoMethod} option.\n   */\n  export type Memoizer<K, V, FC = unknown> = (\n    key: K,\n    staleValue: V | undefined,\n    options: MemoizerOptions<K, V, FC>,\n  ) => V\n\n  /**\n   * Options which may be passed to the {@link LRUCache} constructor.\n   *\n   * Most of these may be overridden in the various options that use\n   * them.\n   *\n   * Despite all being technically optional, the constructor requires that\n   * a cache is at minimum limited by one or more of {@link OptionsBase.max},\n   * {@link OptionsBase.ttl}, or {@link OptionsBase.maxSize}.\n   *\n   * If {@link OptionsBase.ttl} is used alone, then it is strongly advised\n   * (and in fact required by the type definitions here) that the cache\n   * also set {@link OptionsBase.ttlAutopurge}, to prevent potentially\n   * unbounded storage.\n   *\n   * All options are also available on the {@link LRUCache} instance, making\n   * it safe to pass an LRUCache instance as the options argumemnt to\n   * make another empty cache of the same type.\n   *\n   * Some options are marked as read-only, because changing them after\n   * instantiation is not safe. Changing any of the other options will of\n   * course only have an effect on subsequent method calls.\n   */\n  export interface OptionsBase<K, V, FC> {\n    /**\n     * The maximum number of items to store in the cache before evicting\n     * old entries. This is read-only on the {@link LRUCache} instance,\n     * and may not be overridden.\n     *\n     * If set, then storage space will be pre-allocated at construction\n     * time, and the cache will perform significantly faster.\n     *\n     * Note that significantly fewer items may be stored, if\n     * {@link OptionsBase.maxSize} and/or {@link OptionsBase.ttl} are also\n     * set.\n     *\n     * **It is strongly recommended to set a `max` to prevent unbounded growth\n     * of the cache.**\n     */\n    max?: Count\n\n    /**\n     * Max time in milliseconds for items to live in cache before they are\n     * considered stale.  Note that stale items are NOT preemptively removed by\n     * default, and MAY live in the cache, contributing to its LRU max, long\n     * after they have expired, unless {@link OptionsBase.ttlAutopurge} is\n     * set.\n     *\n     * If set to `0` (the default value), then that means \"do not track\n     * TTL\", not \"expire immediately\".\n     *\n     * Also, as this cache is optimized for LRU/MRU operations, some of\n     * the staleness/TTL checks will reduce performance, as they will incur\n     * overhead by deleting items.\n     *\n     * This is not primarily a TTL cache, and does not make strong TTL\n     * guarantees. There is no pre-emptive pruning of expired items, but you\n     * _may_ set a TTL on the cache, and it will treat expired items as missing\n     * when they are fetched, and delete them.\n     *\n     * Optional, but must be a non-negative integer in ms if specified.\n     *\n     * This may be overridden by passing an options object to `cache.set()`.\n     *\n     * At least one of `max`, `maxSize`, or `TTL` is required. This must be a\n     * positive integer if set.\n     *\n     * Even if ttl tracking is enabled, **it is strongly recommended to set a\n     * `max` to prevent unbounded growth of the cache.**\n     *\n     * If ttl tracking is enabled, and `max` and `maxSize` are not set,\n     * and `ttlAutopurge` is not set, then a warning will be emitted\n     * cautioning about the potential for unbounded memory consumption.\n     * (The TypeScript definitions will also discourage this.)\n     */\n    ttl?: Milliseconds\n\n    /**\n     * Minimum amount of time in ms in which to check for staleness.\n     * Defaults to 1, which means that the current time is checked\n     * at most once per millisecond.\n     *\n     * Set to 0 to check the current time every time staleness is tested.\n     * (This reduces performance, and is theoretically unnecessary.)\n     *\n     * Setting this to a higher value will improve performance somewhat\n     * while using ttl tracking, albeit at the expense of keeping stale\n     * items around a bit longer than their TTLs would indicate.\n     *\n     * @default 1\n     */\n    ttlResolution?: Milliseconds\n\n    /**\n     * Preemptively remove stale items from the cache.\n     *\n     * Note that this may *significantly* degrade performance, especially if\n     * the cache is storing a large number of items. It is almost always best\n     * to just leave the stale items in the cache, and let them fall out as new\n     * items are added.\n     *\n     * Note that this means that {@link OptionsBase.allowStale} is a bit\n     * pointless, as stale items will be deleted almost as soon as they\n     * expire.\n     *\n     * Use with caution!\n     */\n    ttlAutopurge?: boolean\n\n    /**\n     * When using time-expiring entries with `ttl`, setting this to `true` will\n     * make each item's age reset to 0 whenever it is retrieved from cache with\n     * {@link LRUCache#get}, causing it to not expire. (It can still fall out\n     * of cache based on recency of use, of course.)\n     *\n     * Has no effect if {@link OptionsBase.ttl} is not set.\n     *\n     * This may be overridden by passing an options object to `cache.get()`.\n     */\n    updateAgeOnGet?: boolean\n\n    /**\n     * When using time-expiring entries with `ttl`, setting this to `true` will\n     * make each item's age reset to 0 whenever its presence in the cache is\n     * checked with {@link LRUCache#has}, causing it to not expire. (It can\n     * still fall out of cache based on recency of use, of course.)\n     *\n     * Has no effect if {@link OptionsBase.ttl} is not set.\n     */\n    updateAgeOnHas?: boolean\n\n    /**\n     * Allow {@link LRUCache#get} and {@link LRUCache#fetch} calls to return\n     * stale data, if available.\n     *\n     * By default, if you set `ttl`, stale items will only be deleted from the\n     * cache when you `get(key)`. That is, it's not preemptively pruning items,\n     * unless {@link OptionsBase.ttlAutopurge} is set.\n     *\n     * If you set `allowStale:true`, it'll return the stale value *as well as*\n     * deleting it. If you don't set this, then it'll return `undefined` when\n     * you try to get a stale entry.\n     *\n     * Note that when a stale entry is fetched, _even if it is returned due to\n     * `allowStale` being set_, it is removed from the cache immediately. You\n     * can suppress this behavior by setting\n     * {@link OptionsBase.noDeleteOnStaleGet}, either in the constructor, or in\n     * the options provided to {@link LRUCache#get}.\n     *\n     * This may be overridden by passing an options object to `cache.get()`.\n     * The `cache.has()` method will always return `false` for stale items.\n     *\n     * Only relevant if a ttl is set.\n     */\n    allowStale?: boolean\n\n    /**\n     * Function that is called on items when they are dropped from the\n     * cache, as `dispose(value, key, reason)`.\n     *\n     * This can be handy if you want to close file descriptors or do\n     * other cleanup tasks when items are no longer stored in the cache.\n     *\n     * **NOTE**: It is called _before_ the item has been fully removed\n     * from the cache, so if you want to put it right back in, you need\n     * to wait until the next tick. If you try to add it back in during\n     * the `dispose()` function call, it will break things in subtle and\n     * weird ways.\n     *\n     * Unlike several other options, this may _not_ be overridden by\n     * passing an option to `set()`, for performance reasons.\n     *\n     * The `reason` will be one of the following strings, corresponding\n     * to the reason for the item's deletion:\n     *\n     * - `evict` Item was evicted to make space for a new addition\n     * - `set` Item was overwritten by a new value\n     * - `expire` Item expired its TTL\n     * - `fetch` Item was deleted due to a failed or aborted fetch, or a\n     *   fetchMethod returning `undefined.\n     * - `delete` Item was removed by explicit `cache.delete(key)`,\n     *   `cache.clear()`, or `cache.set(key, undefined)`.\n     */\n    dispose?: Disposer<K, V>\n\n    /**\n     * Function that is called when new items are inserted into the cache,\n     * as `onInsert(value, key, reason)`.\n     *\n     * This can be useful if you need to perform actions when an item is\n     * added, such as logging or tracking insertions.\n     *\n     * Unlike some other options, this may _not_ be overridden by passing\n     * an option to `set()`, for performance and consistency reasons.\n     */\n    onInsert?: Inserter<K, V>\n\n    /**\n     * The same as {@link OptionsBase.dispose}, but called *after* the entry\n     * is completely removed and the cache is once again in a clean state.\n     *\n     * It is safe to add an item right back into the cache at this point.\n     * However, note that it is *very* easy to inadvertently create infinite\n     * recursion this way.\n     */\n    disposeAfter?: Disposer<K, V>\n\n    /**\n     * Set to true to suppress calling the\n     * {@link OptionsBase.dispose} function if the entry key is\n     * still accessible within the cache.\n     *\n     * This may be overridden by passing an options object to\n     * {@link LRUCache#set}.\n     *\n     * Only relevant if `dispose` or `disposeAfter` are set.\n     */\n    noDisposeOnSet?: boolean\n\n    /**\n     * Boolean flag to tell the cache to not update the TTL when setting a new\n     * value for an existing key (ie, when updating a value rather than\n     * inserting a new value).  Note that the TTL value is _always_ set (if\n     * provided) when adding a new entry into the cache.\n     *\n     * Has no effect if a {@link OptionsBase.ttl} is not set.\n     *\n     * May be passed as an option to {@link LRUCache#set}.\n     */\n    noUpdateTTL?: boolean\n\n    /**\n     * Set to a positive integer to track the sizes of items added to the\n     * cache, and automatically evict items in order to stay below this size.\n     * Note that this may result in fewer than `max` items being stored.\n     *\n     * Attempting to add an item to the cache whose calculated size is greater\n     * that this amount will be a no-op. The item will not be cached, and no\n     * other items will be evicted.\n     *\n     * Optional, must be a positive integer if provided.\n     *\n     * Sets `maxEntrySize` to the same value, unless a different value is\n     * provided for `maxEntrySize`.\n     *\n     * At least one of `max`, `maxSize`, or `TTL` is required. This must be a\n     * positive integer if set.\n     *\n     * Even if size tracking is enabled, **it is strongly recommended to set a\n     * `max` to prevent unbounded growth of the cache.**\n     *\n     * Note also that size tracking can negatively impact performance,\n     * though for most cases, only minimally.\n     */\n    maxSize?: Size\n\n    /**\n     * The maximum allowed size for any single item in the cache.\n     *\n     * If a larger item is passed to {@link LRUCache#set} or returned by a\n     * {@link OptionsBase.fetchMethod} or {@link OptionsBase.memoMethod}, then\n     * it will not be stored in the cache.\n     *\n     * Attempting to add an item whose calculated size is greater than\n     * this amount will not cache the item or evict any old items, but\n     * WILL delete an existing value if one is already present.\n     *\n     * Optional, must be a positive integer if provided. Defaults to\n     * the value of `maxSize` if provided.\n     */\n    maxEntrySize?: Size\n\n    /**\n     * A function that returns a number indicating the item's size.\n     *\n     * Requires {@link OptionsBase.maxSize} to be set.\n     *\n     * If not provided, and {@link OptionsBase.maxSize} or\n     * {@link OptionsBase.maxEntrySize} are set, then all\n     * {@link LRUCache#set} calls **must** provide an explicit\n     * {@link SetOptions.size} or sizeCalculation param.\n     */\n    sizeCalculation?: SizeCalculator<K, V>\n\n    /**\n     * Method that provides the implementation for {@link LRUCache#fetch}\n     *\n     * ```ts\n     * fetchMethod(key, staleValue, { signal, options, context })\n     * ```\n     *\n     * If `fetchMethod` is not provided, then `cache.fetch(key)` is equivalent\n     * to `Promise.resolve(cache.get(key))`.\n     *\n     * If at any time, `signal.aborted` is set to `true`, or if the\n     * `signal.onabort` method is called, or if it emits an `'abort'` event\n     * which you can listen to with `addEventListener`, then that means that\n     * the fetch should be abandoned. This may be passed along to async\n     * functions aware of AbortController/AbortSignal behavior.\n     *\n     * The `fetchMethod` should **only** return `undefined` or a Promise\n     * resolving to `undefined` if the AbortController signaled an `abort`\n     * event. In all other cases, it should return or resolve to a value\n     * suitable for adding to the cache.\n     *\n     * The `options` object is a union of the options that may be provided to\n     * `set()` and `get()`. If they are modified, then that will result in\n     * modifying the settings to `cache.set()` when the value is resolved, and\n     * in the case of\n     * {@link OptionsBase.noDeleteOnFetchRejection} and\n     * {@link OptionsBase.allowStaleOnFetchRejection}, the handling of\n     * `fetchMethod` failures.\n     *\n     * For example, a DNS cache may update the TTL based on the value returned\n     * from a remote DNS server by changing `options.ttl` in the `fetchMethod`.\n     */\n    fetchMethod?: Fetcher<K, V, FC>\n\n    /**\n     * Method that provides the implementation for {@link LRUCache#memo}\n     */\n    memoMethod?: Memoizer<K, V, FC>\n\n    /**\n     * Set to true to suppress the deletion of stale data when a\n     * {@link OptionsBase.fetchMethod} returns a rejected promise.\n     */\n    noDeleteOnFetchRejection?: boolean\n\n    /**\n     * Do not delete stale items when they are retrieved with\n     * {@link LRUCache#get}.\n     *\n     * Note that the `get` return value will still be `undefined`\n     * unless {@link OptionsBase.allowStale} is true.\n     *\n     * When using time-expiring entries with `ttl`, by default stale\n     * items will be removed from the cache when the key is accessed\n     * with `cache.get()`.\n     *\n     * Setting this option will cause stale items to remain in the cache, until\n     * they are explicitly deleted with `cache.delete(key)`, or retrieved with\n     * `noDeleteOnStaleGet` set to `false`.\n     *\n     * This may be overridden by passing an options object to `cache.get()`.\n     *\n     * Only relevant if a ttl is used.\n     */\n    noDeleteOnStaleGet?: boolean\n\n    /**\n     * Set to true to allow returning stale data when a\n     * {@link OptionsBase.fetchMethod} throws an error or returns a rejected\n     * promise.\n     *\n     * This differs from using {@link OptionsBase.allowStale} in that stale\n     * data will ONLY be returned in the case that the {@link LRUCache#fetch}\n     * fails, not any other times.\n     *\n     * If a `fetchMethod` fails, and there is no stale value available, the\n     * `fetch()` will resolve to `undefined`. Ie, all `fetchMethod` errors are\n     * suppressed.\n     *\n     * Implies `noDeleteOnFetchRejection`.\n     *\n     * This may be set in calls to `fetch()`, or defaulted on the constructor,\n     * or overridden by modifying the options object in the `fetchMethod`.\n     */\n    allowStaleOnFetchRejection?: boolean\n\n    /**\n     * Set to true to return a stale value from the cache when the\n     * `AbortSignal` passed to the {@link OptionsBase.fetchMethod} dispatches\n     * an `'abort'` event, whether user-triggered, or due to internal cache\n     * behavior.\n     *\n     * Unless {@link OptionsBase.ignoreFetchAbort} is also set, the underlying\n     * {@link OptionsBase.fetchMethod} will still be considered canceled, and\n     * any value it returns will be ignored and not cached.\n     *\n     * Caveat: since fetches are aborted when a new value is explicitly\n     * set in the cache, this can lead to fetch returning a stale value,\n     * since that was the fallback value _at the moment the `fetch()` was\n     * initiated_, even though the new updated value is now present in\n     * the cache.\n     *\n     * For example:\n     *\n     * ```ts\n     * const cache = new LRUCache<string, any>({\n     *   ttl: 100,\n     *   fetchMethod: async (url, oldValue, { signal }) =>  {\n     *     const res = await fetch(url, { signal })\n     *     return await res.json()\n     *   }\n     * })\n     * cache.set('https://example.com/', { some: 'data' })\n     * // 100ms go by...\n     * const result = cache.fetch('https://example.com/')\n     * cache.set('https://example.com/', { other: 'thing' })\n     * console.log(await result) // { some: 'data' }\n     * console.log(cache.get('https://example.com/')) // { other: 'thing' }\n     * ```\n     */\n    allowStaleOnFetchAbort?: boolean\n\n    /**\n     * Set to true to ignore the `abort` event emitted by the `AbortSignal`\n     * object passed to {@link OptionsBase.fetchMethod}, and still cache the\n     * resulting resolution value, as long as it is not `undefined`.\n     *\n     * When used on its own, this means aborted {@link LRUCache#fetch} calls\n     * are not immediately resolved or rejected when they are aborted, and\n     * instead take the full time to await.\n     *\n     * When used with {@link OptionsBase.allowStaleOnFetchAbort}, aborted\n     * {@link LRUCache#fetch} calls will resolve immediately to their stale\n     * cached value or `undefined`, and will continue to process and eventually\n     * update the cache when they resolve, as long as the resulting value is\n     * not `undefined`, thus supporting a \"return stale on timeout while\n     * refreshing\" mechanism by passing `AbortSignal.timeout(n)` as the signal.\n     *\n     * For example:\n     *\n     * ```ts\n     * const c = new LRUCache({\n     *   ttl: 100,\n     *   ignoreFetchAbort: true,\n     *   allowStaleOnFetchAbort: true,\n     *   fetchMethod: async (key, oldValue, { signal }) => {\n     *     // note: do NOT pass the signal to fetch()!\n     *     // let's say this fetch can take a long time.\n     *     const res = await fetch(`https://slow-backend-server/${key}`)\n     *     return await res.json()\n     *   },\n     * })\n     *\n     * // this will return the stale value after 100ms, while still\n     * // updating in the background for next time.\n     * const val = await c.fetch('key', { signal: AbortSignal.timeout(100) })\n     * ```\n     *\n     * **Note**: regardless of this setting, an `abort` event _is still\n     * emitted on the `AbortSignal` object_, so may result in invalid results\n     * when passed to other underlying APIs that use AbortSignals.\n     *\n     * This may be overridden in the {@link OptionsBase.fetchMethod} or the\n     * call to {@link LRUCache#fetch}.\n     */\n    ignoreFetchAbort?: boolean\n\n    /**\n     * In some cases, you may want to swap out the performance/Date object\n     * used for TTL tracking. This should almost certainly NOT be done in\n     * production environments!\n     *\n     * This value defaults to `global.performance` if it has a `now()` method,\n     * or the `global.Date` object otherwise.\n     */\n    perf?: Perf\n  }\n\n  export interface OptionsMaxLimit<K, V, FC>\n    extends OptionsBase<K, V, FC> {\n    max: Count\n  }\n  export interface OptionsTTLLimit<K, V, FC>\n    extends OptionsBase<K, V, FC> {\n    ttl: Milliseconds\n    ttlAutopurge: boolean\n  }\n  export interface OptionsSizeLimit<K, V, FC>\n    extends OptionsBase<K, V, FC> {\n    maxSize: Size\n  }\n\n  /**\n   * The valid safe options for the {@link LRUCache} constructor\n   */\n  export type Options<K, V, FC> =\n    | OptionsMaxLimit<K, V, FC>\n    | OptionsSizeLimit<K, V, FC>\n    | OptionsTTLLimit<K, V, FC>\n\n  /**\n   * Entry objects used by {@link LRUCache#load} and {@link LRUCache#dump},\n   * and returned by {@link LRUCache#info}.\n   */\n  export interface Entry<V> {\n    value: V\n    ttl?: Milliseconds\n    size?: Size\n    start?: Milliseconds\n  }\n}\n\n/**\n * Default export, the thing you're using this module to get.\n *\n * The `K` and `V` types define the key and value types, respectively. The\n * optional `FC` type defines the type of the `context` object passed to\n * `cache.fetch()` and `cache.memo()`.\n *\n * Keys and values **must not** be `null` or `undefined`.\n *\n * All properties from the options object (with the exception of `max`,\n * `maxSize`, `fetchMethod`, `memoMethod`, `dispose` and `disposeAfter`) are\n * added as normal public members. (The listed options are read-only getters.)\n *\n * Changing any of these will alter the defaults for subsequent method calls.\n */\nexport class LRUCache<K extends {}, V extends {}, FC = unknown> {\n  // options that cannot be changed without disaster\n  readonly #max: LRUCache.Count\n  readonly #maxSize: LRUCache.Size\n  readonly #dispose?: LRUCache.Disposer<K, V>\n  readonly #onInsert?: LRUCache.Inserter<K, V>\n  readonly #disposeAfter?: LRUCache.Disposer<K, V>\n  readonly #fetchMethod?: LRUCache.Fetcher<K, V, FC>\n  readonly #memoMethod?: LRUCache.Memoizer<K, V, FC>\n  readonly #perf: Perf\n\n  /**\n   * {@link LRUCache.OptionsBase.perf}\n   */\n  get perf() {\n    return this.#perf\n  }\n\n  /**\n   * {@link LRUCache.OptionsBase.ttl}\n   */\n  ttl: LRUCache.Milliseconds\n\n  /**\n   * {@link LRUCache.OptionsBase.ttlResolution}\n   */\n  ttlResolution: LRUCache.Milliseconds\n  /**\n   * {@link LRUCache.OptionsBase.ttlAutopurge}\n   */\n  ttlAutopurge: boolean\n  /**\n   * {@link LRUCache.OptionsBase.updateAgeOnGet}\n   */\n  updateAgeOnGet: boolean\n  /**\n   * {@link LRUCache.OptionsBase.updateAgeOnHas}\n   */\n  updateAgeOnHas: boolean\n  /**\n   * {@link LRUCache.OptionsBase.allowStale}\n   */\n  allowStale: boolean\n\n  /**\n   * {@link LRUCache.OptionsBase.noDisposeOnSet}\n   */\n  noDisposeOnSet: boolean\n  /**\n   * {@link LRUCache.OptionsBase.noUpdateTTL}\n   */\n  noUpdateTTL: boolean\n  /**\n   * {@link LRUCache.OptionsBase.maxEntrySize}\n   */\n  maxEntrySize: LRUCache.Size\n  /**\n   * {@link LRUCache.OptionsBase.sizeCalculation}\n   */\n  sizeCalculation?: LRUCache.SizeCalculator<K, V>\n  /**\n   * {@link LRUCache.OptionsBase.noDeleteOnFetchRejection}\n   */\n  noDeleteOnFetchRejection: boolean\n  /**\n   * {@link LRUCache.OptionsBase.noDeleteOnStaleGet}\n   */\n  noDeleteOnStaleGet: boolean\n  /**\n   * {@link LRUCache.OptionsBase.allowStaleOnFetchAbort}\n   */\n  allowStaleOnFetchAbort: boolean\n  /**\n   * {@link LRUCache.OptionsBase.allowStaleOnFetchRejection}\n   */\n  allowStaleOnFetchRejection: boolean\n  /**\n   * {@link LRUCache.OptionsBase.ignoreFetchAbort}\n   */\n  ignoreFetchAbort: boolean\n\n  // computed properties\n  #size: LRUCache.Count\n  #calculatedSize: LRUCache.Size\n  #keyMap: Map<K, Index>\n  #keyList: (K | undefined)[]\n  #valList: (V | BackgroundFetch<V> | undefined)[]\n  #next: NumberArray\n  #prev: NumberArray\n  #head: Index\n  #tail: Index\n  #free: StackLike\n  #disposed?: DisposeTask<K, V>[]\n  #sizes?: ZeroArray\n  #starts?: ZeroArray\n  #ttls?: ZeroArray\n  #autopurgeTimers?: (undefined | ReturnType<typeof setTimeout>)[]\n\n  #hasDispose: boolean\n  #hasFetchMethod: boolean\n  #hasDisposeAfter: boolean\n  #hasOnInsert: boolean\n\n  /**\n   * Do not call this method unless you need to inspect the\n   * inner workings of the cache.  If anything returned by this\n   * object is modified in any way, strange breakage may occur.\n   *\n   * These fields are private for a reason!\n   *\n   * @internal\n   */\n  static unsafeExposeInternals<\n    K extends {},\n    V extends {},\n    FC extends unknown = unknown,\n  >(c: LRUCache<K, V, FC>) {\n    return {\n      // properties\n      starts: c.#starts,\n      ttls: c.#ttls,\n      autopurgeTimers: c.#autopurgeTimers,\n      sizes: c.#sizes,\n      keyMap: c.#keyMap as Map<K, number>,\n      keyList: c.#keyList,\n      valList: c.#valList,\n      next: c.#next,\n      prev: c.#prev,\n      get head() {\n        return c.#head\n      },\n      get tail() {\n        return c.#tail\n      },\n      free: c.#free,\n      // methods\n      isBackgroundFetch: (p: any) => c.#isBackgroundFetch(p),\n      backgroundFetch: (\n        k: K,\n        index: number | undefined,\n        options: LRUCache.FetchOptions<K, V, FC>,\n        context: any,\n      ): BackgroundFetch<V> =>\n        c.#backgroundFetch(\n          k,\n          index as Index | undefined,\n          options,\n          context,\n        ),\n      moveToTail: (index: number): void => c.#moveToTail(index as Index),\n      indexes: (options?: { allowStale: boolean }) => c.#indexes(options),\n      rindexes: (options?: { allowStale: boolean }) =>\n        c.#rindexes(options),\n      isStale: (index: number | undefined) => c.#isStale(index as Index),\n    }\n  }\n\n  // Protected read-only members\n\n  /**\n   * {@link LRUCache.OptionsBase.max} (read-only)\n   */\n  get max(): LRUCache.Count {\n    return this.#max\n  }\n  /**\n   * {@link LRUCache.OptionsBase.maxSize} (read-only)\n   */\n  get maxSize(): LRUCache.Count {\n    return this.#maxSize\n  }\n  /**\n   * The total computed size of items in the cache (read-only)\n   */\n  get calculatedSize(): LRUCache.Size {\n    return this.#calculatedSize\n  }\n  /**\n   * The number of items stored in the cache (read-only)\n   */\n  get size(): LRUCache.Count {\n    return this.#size\n  }\n  /**\n   * {@link LRUCache.OptionsBase.fetchMethod} (read-only)\n   */\n  get fetchMethod(): LRUCache.Fetcher<K, V, FC> | undefined {\n    return this.#fetchMethod\n  }\n  get memoMethod(): LRUCache.Memoizer<K, V, FC> | undefined {\n    return this.#memoMethod\n  }\n  /**\n   * {@link LRUCache.OptionsBase.dispose} (read-only)\n   */\n  get dispose() {\n    return this.#dispose\n  }\n  /**\n   * {@link LRUCache.OptionsBase.onInsert} (read-only)\n   */\n  get onInsert() {\n    return this.#onInsert\n  }\n  /**\n   * {@link LRUCache.OptionsBase.disposeAfter} (read-only)\n   */\n  get disposeAfter() {\n    return this.#disposeAfter\n  }\n\n  constructor(options: LRUCache.Options<K, V, FC> | LRUCache<K, V, FC>) {\n    const {\n      max = 0,\n      ttl,\n      ttlResolution = 1,\n      ttlAutopurge,\n      updateAgeOnGet,\n      updateAgeOnHas,\n      allowStale,\n      dispose,\n      onInsert,\n      disposeAfter,\n      noDisposeOnSet,\n      noUpdateTTL,\n      maxSize = 0,\n      maxEntrySize = 0,\n      sizeCalculation,\n      fetchMethod,\n      memoMethod,\n      noDeleteOnFetchRejection,\n      noDeleteOnStaleGet,\n      allowStaleOnFetchRejection,\n      allowStaleOnFetchAbort,\n      ignoreFetchAbort,\n      perf,\n    } = options\n\n    if (perf !== undefined) {\n      if (typeof perf?.now !== 'function') {\n        throw new TypeError(\n          'perf option must have a now() method if specified',\n        )\n      }\n    }\n\n    this.#perf = perf ?? defaultPerf\n\n    if (max !== 0 && !isPosInt(max)) {\n      throw new TypeError('max option must be a nonnegative integer')\n    }\n\n    const UintArray = max ? getUintArray(max) : Array\n    if (!UintArray) {\n      throw new Error('invalid max value: ' + max)\n    }\n\n    this.#max = max\n    this.#maxSize = maxSize\n    this.maxEntrySize = maxEntrySize || this.#maxSize\n    this.sizeCalculation = sizeCalculation\n    if (this.sizeCalculation) {\n      if (!this.#maxSize && !this.maxEntrySize) {\n        throw new TypeError(\n          'cannot set sizeCalculation without setting maxSize or maxEntrySize',\n        )\n      }\n      if (typeof this.sizeCalculation !== 'function') {\n        throw new TypeError('sizeCalculation set to non-function')\n      }\n    }\n\n    if (memoMethod !== undefined && typeof memoMethod !== 'function') {\n      throw new TypeError('memoMethod must be a function if defined')\n    }\n    this.#memoMethod = memoMethod\n\n    if (fetchMethod !== undefined && typeof fetchMethod !== 'function') {\n      throw new TypeError('fetchMethod must be a function if specified')\n    }\n    this.#fetchMethod = fetchMethod\n    this.#hasFetchMethod = !!fetchMethod\n\n    this.#keyMap = new Map()\n    this.#keyList = new Array(max).fill(undefined)\n    this.#valList = new Array(max).fill(undefined)\n    this.#next = new UintArray(max)\n    this.#prev = new UintArray(max)\n    this.#head = 0 as Index\n    this.#tail = 0 as Index\n    this.#free = Stack.create(max)\n    this.#size = 0\n    this.#calculatedSize = 0\n\n    if (typeof dispose === 'function') {\n      this.#dispose = dispose\n    }\n    if (typeof onInsert === 'function') {\n      this.#onInsert = onInsert\n    }\n    if (typeof disposeAfter === 'function') {\n      this.#disposeAfter = disposeAfter\n      this.#disposed = []\n    } else {\n      this.#disposeAfter = undefined\n      this.#disposed = undefined\n    }\n    this.#hasDispose = !!this.#dispose\n    this.#hasOnInsert = !!this.#onInsert\n    this.#hasDisposeAfter = !!this.#disposeAfter\n\n    this.noDisposeOnSet = !!noDisposeOnSet\n    this.noUpdateTTL = !!noUpdateTTL\n    this.noDeleteOnFetchRejection = !!noDeleteOnFetchRejection\n    this.allowStaleOnFetchRejection = !!allowStaleOnFetchRejection\n    this.allowStaleOnFetchAbort = !!allowStaleOnFetchAbort\n    this.ignoreFetchAbort = !!ignoreFetchAbort\n\n    // NB: maxEntrySize is set to maxSize if it's set\n    if (this.maxEntrySize !== 0) {\n      if (this.#maxSize !== 0) {\n        if (!isPosInt(this.#maxSize)) {\n          throw new TypeError(\n            'maxSize must be a positive integer if specified',\n          )\n        }\n      }\n      if (!isPosInt(this.maxEntrySize)) {\n        throw new TypeError(\n          'maxEntrySize must be a positive integer if specified',\n        )\n      }\n      this.#initializeSizeTracking()\n    }\n\n    this.allowStale = !!allowStale\n    this.noDeleteOnStaleGet = !!noDeleteOnStaleGet\n    this.updateAgeOnGet = !!updateAgeOnGet\n    this.updateAgeOnHas = !!updateAgeOnHas\n    this.ttlResolution =\n      isPosInt(ttlResolution) || ttlResolution === 0 ? ttlResolution : 1\n    this.ttlAutopurge = !!ttlAutopurge\n    this.ttl = ttl || 0\n    if (this.ttl) {\n      if (!isPosInt(this.ttl)) {\n        throw new TypeError('ttl must be a positive integer if specified')\n      }\n      this.#initializeTTLTracking()\n    }\n\n    // do not allow completely unbounded caches\n    if (this.#max === 0 && this.ttl === 0 && this.#maxSize === 0) {\n      throw new TypeError(\n        'At least one of max, maxSize, or ttl is required',\n      )\n    }\n    if (!this.ttlAutopurge && !this.#max && !this.#maxSize) {\n      const code = 'LRU_CACHE_UNBOUNDED'\n      if (shouldWarn(code)) {\n        warned.add(code)\n        const msg =\n          'TTL caching without ttlAutopurge, max, or maxSize can ' +\n          'result in unbounded memory consumption.'\n        emitWarning(msg, 'UnboundedCacheWarning', code, LRUCache)\n      }\n    }\n  }\n\n  /**\n   * Return the number of ms left in the item's TTL. If item is not in cache,\n   * returns `0`. Returns `Infinity` if item is in cache without a defined TTL.\n   */\n  getRemainingTTL(key: K) {\n    return this.#keyMap.has(key) ? Infinity : 0\n  }\n\n  #initializeTTLTracking() {\n    const ttls = new ZeroArray(this.#max)\n    const starts = new ZeroArray(this.#max)\n    this.#ttls = ttls\n    this.#starts = starts\n    const purgeTimers =\n      this.ttlAutopurge ?\n        new Array<undefined | ReturnType<typeof setTimeout>>(this.#max)\n      : undefined\n    this.#autopurgeTimers = purgeTimers\n\n    this.#setItemTTL = (index, ttl, start = this.#perf.now()) => {\n      starts[index] = ttl !== 0 ? start : 0\n      ttls[index] = ttl\n      // clear out the purge timer if we're setting TTL to 0, and\n      // previously had a ttl purge timer running, so it doesn't\n      // fire unnecessarily.\n      if (purgeTimers?.[index]) {\n        clearTimeout(purgeTimers[index])\n        purgeTimers[index] = undefined\n      }\n      if (ttl !== 0 && purgeTimers) {\n        const t = setTimeout(() => {\n          if (this.#isStale(index)) {\n            this.#delete(this.#keyList[index] as K, 'expire')\n          }\n        }, ttl + 1)\n        // unref() not supported on all platforms\n        /* c8 ignore start */\n        if (t.unref) {\n          t.unref()\n        }\n        /* c8 ignore stop */\n        purgeTimers[index] = t\n      }\n    }\n\n    this.#updateItemAge = index => {\n      starts[index] = ttls[index] !== 0 ? this.#perf.now() : 0\n    }\n\n    this.#statusTTL = (status, index) => {\n      if (ttls[index]) {\n        const ttl = ttls[index]\n        const start = starts[index]\n        /* c8 ignore next */\n        if (!ttl || !start) return\n        status.ttl = ttl\n        status.start = start\n        status.now = cachedNow || getNow()\n        const age = status.now - start\n        status.remainingTTL = ttl - age\n      }\n    }\n\n    // debounce calls to perf.now() to 1s so we're not hitting\n    // that costly call repeatedly.\n    let cachedNow = 0\n    const getNow = () => {\n      const n = this.#perf.now()\n      if (this.ttlResolution > 0) {\n        cachedNow = n\n        const t = setTimeout(() => (cachedNow = 0), this.ttlResolution)\n        // not available on all platforms\n        /* c8 ignore start */\n        if (t.unref) {\n          t.unref()\n        }\n        /* c8 ignore stop */\n      }\n      return n\n    }\n\n    this.getRemainingTTL = key => {\n      const index = this.#keyMap.get(key)\n      if (index === undefined) {\n        return 0\n      }\n      const ttl = ttls[index]\n      const start = starts[index]\n      if (!ttl || !start) {\n        return Infinity\n      }\n      const age = (cachedNow || getNow()) - start\n      return ttl - age\n    }\n\n    this.#isStale = index => {\n      const s = starts[index]\n      const t = ttls[index]\n      return !!t && !!s && (cachedNow || getNow()) - s > t\n    }\n  }\n\n  // conditionally set private methods related to TTL\n  #updateItemAge: (index: Index) => void = () => {}\n  #statusTTL: (status: LRUCache.Status<V>, index: Index) => void = () => {}\n  #setItemTTL: (\n    index: Index,\n    ttl: LRUCache.Milliseconds,\n    start?: LRUCache.Milliseconds,\n    // ignore because we never call this if we're not already in TTL mode\n    /* c8 ignore start */\n  ) => void = () => {}\n  /* c8 ignore stop */\n\n  #isStale: (index: Index) => boolean = () => false\n\n  #initializeSizeTracking() {\n    const sizes = new ZeroArray(this.#max)\n    this.#calculatedSize = 0\n    this.#sizes = sizes\n    this.#removeItemSize = index => {\n      this.#calculatedSize -= sizes[index] as number\n      sizes[index] = 0\n    }\n    this.#requireSize = (k, v, size, sizeCalculation) => {\n      // provisionally accept background fetches.\n      // actual value size will be checked when they return.\n      if (this.#isBackgroundFetch(v)) {\n        return 0\n      }\n      if (!isPosInt(size)) {\n        if (sizeCalculation) {\n          if (typeof sizeCalculation !== 'function') {\n            throw new TypeError('sizeCalculation must be a function')\n          }\n          size = sizeCalculation(v, k)\n          if (!isPosInt(size)) {\n            throw new TypeError(\n              'sizeCalculation return invalid (expect positive integer)',\n            )\n          }\n        } else {\n          throw new TypeError(\n            'invalid size value (must be positive integer). ' +\n              'When maxSize or maxEntrySize is used, sizeCalculation ' +\n              'or size must be set.',\n          )\n        }\n      }\n      return size\n    }\n    this.#addItemSize = (\n      index: Index,\n      size: LRUCache.Size,\n      status?: LRUCache.Status<V>,\n    ) => {\n      sizes[index] = size\n      if (this.#maxSize) {\n        const maxSize = this.#maxSize - (sizes[index] as number)\n        while (this.#calculatedSize > maxSize) {\n          this.#evict(true)\n        }\n      }\n      this.#calculatedSize += sizes[index] as number\n      if (status) {\n        status.entrySize = size\n        status.totalCalculatedSize = this.#calculatedSize\n      }\n    }\n  }\n\n  #removeItemSize: (index: Index) => void = _i => {}\n  #addItemSize: (\n    index: Index,\n    size: LRUCache.Size,\n    status?: LRUCache.Status<V>,\n  ) => void = (_i, _s, _st) => {}\n  #requireSize: (\n    k: K,\n    v: V | BackgroundFetch<V>,\n    size?: LRUCache.Size,\n    sizeCalculation?: LRUCache.SizeCalculator<K, V>,\n  ) => LRUCache.Size = (\n    _k: K,\n    _v: V | BackgroundFetch<V>,\n    size?: LRUCache.Size,\n    sizeCalculation?: LRUCache.SizeCalculator<K, V>,\n  ) => {\n    if (size || sizeCalculation) {\n      throw new TypeError(\n        'cannot set size without setting maxSize or maxEntrySize on cache',\n      )\n    }\n    return 0\n  };\n\n  *#indexes({ allowStale = this.allowStale } = {}) {\n    if (this.#size) {\n      for (let i = this.#tail; true; ) {\n        if (!this.#isValidIndex(i)) {\n          break\n        }\n        if (allowStale || !this.#isStale(i)) {\n          yield i\n        }\n        if (i === this.#head) {\n          break\n        } else {\n          i = this.#prev[i] as Index\n        }\n      }\n    }\n  }\n\n  *#rindexes({ allowStale = this.allowStale } = {}) {\n    if (this.#size) {\n      for (let i = this.#head; true; ) {\n        if (!this.#isValidIndex(i)) {\n          break\n        }\n        if (allowStale || !this.#isStale(i)) {\n          yield i\n        }\n        if (i === this.#tail) {\n          break\n        } else {\n          i = this.#next[i] as Index\n        }\n      }\n    }\n  }\n\n  #isValidIndex(index: Index) {\n    return (\n      index !== undefined &&\n      this.#keyMap.get(this.#keyList[index] as K) === index\n    )\n  }\n\n  /**\n   * Return a generator yielding `[key, value]` pairs,\n   * in order from most recently used to least recently used.\n   */\n  *entries() {\n    for (const i of this.#indexes()) {\n      if (\n        this.#valList[i] !== undefined &&\n        this.#keyList[i] !== undefined &&\n        !this.#isBackgroundFetch(this.#valList[i])\n      ) {\n        yield [this.#keyList[i], this.#valList[i]] as [K, V]\n      }\n    }\n  }\n\n  /**\n   * Inverse order version of {@link LRUCache.entries}\n   *\n   * Return a generator yielding `[key, value]` pairs,\n   * in order from least recently used to most recently used.\n   */\n  *rentries() {\n    for (const i of this.#rindexes()) {\n      if (\n        this.#valList[i] !== undefined &&\n        this.#keyList[i] !== undefined &&\n        !this.#isBackgroundFetch(this.#valList[i])\n      ) {\n        yield [this.#keyList[i], this.#valList[i]]\n      }\n    }\n  }\n\n  /**\n   * Return a generator yielding the keys in the cache,\n   * in order from most recently used to least recently used.\n   */\n  *keys() {\n    for (const i of this.#indexes()) {\n      const k = this.#keyList[i]\n      if (k !== undefined && !this.#isBackgroundFetch(this.#valList[i])) {\n        yield k\n      }\n    }\n  }\n\n  /**\n   * Inverse order version of {@link LRUCache.keys}\n   *\n   * Return a generator yielding the keys in the cache,\n   * in order from least recently used to most recently used.\n   */\n  *rkeys() {\n    for (const i of this.#rindexes()) {\n      const k = this.#keyList[i]\n      if (k !== undefined && !this.#isBackgroundFetch(this.#valList[i])) {\n        yield k\n      }\n    }\n  }\n\n  /**\n   * Return a generator yielding the values in the cache,\n   * in order from most recently used to least recently used.\n   */\n  *values() {\n    for (const i of this.#indexes()) {\n      const v = this.#valList[i]\n      if (v !== undefined && !this.#isBackgroundFetch(this.#valList[i])) {\n        yield this.#valList[i] as V\n      }\n    }\n  }\n\n  /**\n   * Inverse order version of {@link LRUCache.values}\n   *\n   * Return a generator yielding the values in the cache,\n   * in order from least recently used to most recently used.\n   */\n  *rvalues() {\n    for (const i of this.#rindexes()) {\n      const v = this.#valList[i]\n      if (v !== undefined && !this.#isBackgroundFetch(this.#valList[i])) {\n        yield this.#valList[i]\n      }\n    }\n  }\n\n  /**\n   * Iterating over the cache itself yields the same results as\n   * {@link LRUCache.entries}\n   */\n  [Symbol.iterator]() {\n    return this.entries()\n  }\n\n  /**\n   * A String value that is used in the creation of the default string\n   * description of an object. Called by the built-in method\n   * `Object.prototype.toString`.\n   */\n  [Symbol.toStringTag] = 'LRUCache'\n\n  /**\n   * Find a value for which the supplied fn method returns a truthy value,\n   * similar to `Array.find()`. fn is called as `fn(value, key, cache)`.\n   */\n  find(\n    fn: (v: V, k: K, self: LRUCache<K, V, FC>) => boolean,\n    getOptions: LRUCache.GetOptions<K, V, FC> = {},\n  ) {\n    for (const i of this.#indexes()) {\n      const v = this.#valList[i]\n      const value = this.#isBackgroundFetch(v) ? v.__staleWhileFetching : v\n      if (value === undefined) continue\n      if (fn(value, this.#keyList[i] as K, this)) {\n        return this.get(this.#keyList[i] as K, getOptions)\n      }\n    }\n  }\n\n  /**\n   * Call the supplied function on each item in the cache, in order from most\n   * recently used to least recently used.\n   *\n   * `fn` is called as `fn(value, key, cache)`.\n   *\n   * If `thisp` is provided, function will be called in the `this`-context of\n   * the provided object, or the cache if no `thisp` object is provided.\n   *\n   * Does not update age or recenty of use, or iterate over stale values.\n   */\n  forEach(\n    fn: (v: V, k: K, self: LRUCache<K, V, FC>) => any,\n    thisp: any = this,\n  ) {\n    for (const i of this.#indexes()) {\n      const v = this.#valList[i]\n      const value = this.#isBackgroundFetch(v) ? v.__staleWhileFetching : v\n      if (value === undefined) continue\n      fn.call(thisp, value, this.#keyList[i] as K, this)\n    }\n  }\n\n  /**\n   * The same as {@link LRUCache.forEach} but items are iterated over in\n   * reverse order.  (ie, less recently used items are iterated over first.)\n   */\n  rforEach(\n    fn: (v: V, k: K, self: LRUCache<K, V, FC>) => any,\n    thisp: any = this,\n  ) {\n    for (const i of this.#rindexes()) {\n      const v = this.#valList[i]\n      const value = this.#isBackgroundFetch(v) ? v.__staleWhileFetching : v\n      if (value === undefined) continue\n      fn.call(thisp, value, this.#keyList[i] as K, this)\n    }\n  }\n\n  /**\n   * Delete any stale entries. Returns true if anything was removed,\n   * false otherwise.\n   */\n  purgeStale() {\n    let deleted = false\n    for (const i of this.#rindexes({ allowStale: true })) {\n      if (this.#isStale(i)) {\n        this.#delete(this.#keyList[i] as K, 'expire')\n        deleted = true\n      }\n    }\n    return deleted\n  }\n\n  /**\n   * Get the extended info about a given entry, to get its value, size, and\n   * TTL info simultaneously. Returns `undefined` if the key is not present.\n   *\n   * Unlike {@link LRUCache#dump}, which is designed to be portable and survive\n   * serialization, the `start` value is always the current timestamp, and the\n   * `ttl` is a calculated remaining time to live (negative if expired).\n   *\n   * Always returns stale values, if their info is found in the cache, so be\n   * sure to check for expirations (ie, a negative {@link LRUCache.Entry#ttl})\n   * if relevant.\n   */\n  info(key: K): LRUCache.Entry<V> | undefined {\n    const i = this.#keyMap.get(key)\n    if (i === undefined) return undefined\n    const v = this.#valList[i]\n    /* c8 ignore start - this isn't tested for the info function,\n     * but it's the same logic as found in other places. */\n    const value: V | undefined =\n      this.#isBackgroundFetch(v) ? v.__staleWhileFetching : v\n    if (value === undefined) return undefined\n    /* c8 ignore end */\n    const entry: LRUCache.Entry<V> = { value }\n    if (this.#ttls && this.#starts) {\n      const ttl = this.#ttls[i]\n      const start = this.#starts[i]\n      if (ttl && start) {\n        const remain = ttl - (this.#perf.now() - start)\n        entry.ttl = remain\n        entry.start = Date.now()\n      }\n    }\n    if (this.#sizes) {\n      entry.size = this.#sizes[i]\n    }\n    return entry\n  }\n\n  /**\n   * Return an array of [key, {@link LRUCache.Entry}] tuples which can be\n   * passed to {@link LRUCache#load}.\n   *\n   * The `start` fields are calculated relative to a portable `Date.now()`\n   * timestamp, even if `performance.now()` is available.\n   *\n   * Stale entries are always included in the `dump`, even if\n   * {@link LRUCache.OptionsBase.allowStale} is false.\n   *\n   * Note: this returns an actual array, not a generator, so it can be more\n   * easily passed around.\n   */\n  dump() {\n    const arr: [K, LRUCache.Entry<V>][] = []\n    for (const i of this.#indexes({ allowStale: true })) {\n      const key = this.#keyList[i]\n      const v = this.#valList[i]\n      const value: V | undefined =\n        this.#isBackgroundFetch(v) ? v.__staleWhileFetching : v\n      if (value === undefined || key === undefined) continue\n      const entry: LRUCache.Entry<V> = { value }\n      if (this.#ttls && this.#starts) {\n        entry.ttl = this.#ttls[i]\n        // always dump the start relative to a portable timestamp\n        // it's ok for this to be a bit slow, it's a rare operation.\n        const age = this.#perf.now() - (this.#starts[i] as number)\n        entry.start = Math.floor(Date.now() - age)\n      }\n      if (this.#sizes) {\n        entry.size = this.#sizes[i]\n      }\n      arr.unshift([key, entry])\n    }\n    return arr\n  }\n\n  /**\n   * Reset the cache and load in the items in entries in the order listed.\n   *\n   * The shape of the resulting cache may be different if the same options are\n   * not used in both caches.\n   *\n   * The `start` fields are assumed to be calculated relative to a portable\n   * `Date.now()` timestamp, even if `performance.now()` is available.\n   */\n  load(arr: [K, LRUCache.Entry<V>][]) {\n    this.clear()\n    for (const [key, entry] of arr) {\n      if (entry.start) {\n        // entry.start is a portable timestamp, but we may be using\n        // node's performance.now(), so calculate the offset, so that\n        // we get the intended remaining TTL, no matter how long it's\n        // been on ice.\n        //\n        // it's ok for this to be a bit slow, it's a rare operation.\n        const age = Date.now() - entry.start\n        entry.start = this.#perf.now() - age\n      }\n      this.set(key, entry.value, entry)\n    }\n  }\n\n  /**\n   * Add a value to the cache.\n   *\n   * Note: if `undefined` is specified as a value, this is an alias for\n   * {@link LRUCache#delete}\n   *\n   * Fields on the {@link LRUCache.SetOptions} options param will override\n   * their corresponding values in the constructor options for the scope\n   * of this single `set()` operation.\n   *\n   * If `start` is provided, then that will set the effective start\n   * time for the TTL calculation. Note that this must be a previous\n   * value of `performance.now()` if supported, or a previous value of\n   * `Date.now()` if not.\n   *\n   * Options object may also include `size`, which will prevent\n   * calling the `sizeCalculation` function and just use the specified\n   * number if it is a positive integer, and `noDisposeOnSet` which\n   * will prevent calling a `dispose` function in the case of\n   * overwrites.\n   *\n   * If the `size` (or return value of `sizeCalculation`) for a given\n   * entry is greater than `maxEntrySize`, then the item will not be\n   * added to the cache.\n   *\n   * Will update the recency of the entry.\n   *\n   * If the value is `undefined`, then this is an alias for\n   * `cache.delete(key)`. `undefined` is never stored in the cache.\n   */\n  set(\n    k: K,\n    v: V | BackgroundFetch<V> | undefined,\n    setOptions: LRUCache.SetOptions<K, V, FC> = {},\n  ) {\n    if (v === undefined) {\n      this.delete(k)\n      return this\n    }\n    const {\n      ttl = this.ttl,\n      start,\n      noDisposeOnSet = this.noDisposeOnSet,\n      sizeCalculation = this.sizeCalculation,\n      status,\n    } = setOptions\n    let { noUpdateTTL = this.noUpdateTTL } = setOptions\n\n    const size = this.#requireSize(\n      k,\n      v,\n      setOptions.size || 0,\n      sizeCalculation,\n    )\n    // if the item doesn't fit, don't do anything\n    // NB: maxEntrySize set to maxSize by default\n    if (this.maxEntrySize && size > this.maxEntrySize) {\n      if (status) {\n        status.set = 'miss'\n        status.maxEntrySizeExceeded = true\n      }\n      // have to delete, in case something is there already.\n      this.#delete(k, 'set')\n      return this\n    }\n    let index = this.#size === 0 ? undefined : this.#keyMap.get(k)\n    if (index === undefined) {\n      // addition\n      index = (\n        this.#size === 0 ? this.#tail\n        : this.#free.length !== 0 ? this.#free.pop()\n        : this.#size === this.#max ? this.#evict(false)\n        : this.#size) as Index\n      this.#keyList[index] = k\n      this.#valList[index] = v\n      this.#keyMap.set(k, index)\n      this.#next[this.#tail] = index\n      this.#prev[index] = this.#tail\n      this.#tail = index\n      this.#size++\n      this.#addItemSize(index, size, status)\n      if (status) status.set = 'add'\n      noUpdateTTL = false\n      if (this.#hasOnInsert) {\n        this.#onInsert?.(v as V, k, 'add')\n      }\n    } else {\n      // update\n      this.#moveToTail(index)\n      const oldVal = this.#valList[index] as V | BackgroundFetch<V>\n      if (v !== oldVal) {\n        if (this.#hasFetchMethod && this.#isBackgroundFetch(oldVal)) {\n          oldVal.__abortController.abort(new Error('replaced'))\n          const { __staleWhileFetching: s } = oldVal\n          if (s !== undefined && !noDisposeOnSet) {\n            if (this.#hasDispose) {\n              this.#dispose?.(s as V, k, 'set')\n            }\n            if (this.#hasDisposeAfter) {\n              this.#disposed?.push([s as V, k, 'set'])\n            }\n          }\n        } else if (!noDisposeOnSet) {\n          if (this.#hasDispose) {\n            this.#dispose?.(oldVal as V, k, 'set')\n          }\n          if (this.#hasDisposeAfter) {\n            this.#disposed?.push([oldVal as V, k, 'set'])\n          }\n        }\n        this.#removeItemSize(index)\n        this.#addItemSize(index, size, status)\n        this.#valList[index] = v\n        if (status) {\n          status.set = 'replace'\n          const oldValue =\n            oldVal && this.#isBackgroundFetch(oldVal) ?\n              oldVal.__staleWhileFetching\n            : oldVal\n          if (oldValue !== undefined) status.oldValue = oldValue\n        }\n      } else if (status) {\n        status.set = 'update'\n      }\n\n      if (this.#hasOnInsert) {\n        this.onInsert?.(v as V, k, v === oldVal ? 'update' : 'replace')\n      }\n    }\n    if (ttl !== 0 && !this.#ttls) {\n      this.#initializeTTLTracking()\n    }\n    if (this.#ttls) {\n      if (!noUpdateTTL) {\n        this.#setItemTTL(index, ttl, start)\n      }\n      if (status) this.#statusTTL(status, index)\n    }\n    if (!noDisposeOnSet && this.#hasDisposeAfter && this.#disposed) {\n      const dt = this.#disposed\n      let task: DisposeTask<K, V> | undefined\n      while ((task = dt?.shift())) {\n        this.#disposeAfter?.(...task)\n      }\n    }\n    return this\n  }\n\n  /**\n   * Evict the least recently used item, returning its value or\n   * `undefined` if cache is empty.\n   */\n  pop(): V | undefined {\n    try {\n      while (this.#size) {\n        const val = this.#valList[this.#head]\n        this.#evict(true)\n        if (this.#isBackgroundFetch(val)) {\n          if (val.__staleWhileFetching) {\n            return val.__staleWhileFetching\n          }\n        } else if (val !== undefined) {\n          return val\n        }\n      }\n    } finally {\n      if (this.#hasDisposeAfter && this.#disposed) {\n        const dt = this.#disposed\n        let task: DisposeTask<K, V> | undefined\n        while ((task = dt?.shift())) {\n          this.#disposeAfter?.(...task)\n        }\n      }\n    }\n  }\n\n  #evict(free: boolean) {\n    const head = this.#head\n    const k = this.#keyList[head] as K\n    const v = this.#valList[head] as V\n    if (this.#hasFetchMethod && this.#isBackgroundFetch(v)) {\n      v.__abortController.abort(new Error('evicted'))\n    } else if (this.#hasDispose || this.#hasDisposeAfter) {\n      if (this.#hasDispose) {\n        this.#dispose?.(v, k, 'evict')\n      }\n      if (this.#hasDisposeAfter) {\n        this.#disposed?.push([v, k, 'evict'])\n      }\n    }\n    this.#removeItemSize(head)\n    if (this.#autopurgeTimers?.[head]) {\n      clearTimeout(this.#autopurgeTimers[head])\n      this.#autopurgeTimers[head] = undefined\n    }\n    // if we aren't about to use the index, then null these out\n    if (free) {\n      this.#keyList[head] = undefined\n      this.#valList[head] = undefined\n      this.#free.push(head)\n    }\n    if (this.#size === 1) {\n      this.#head = this.#tail = 0 as Index\n      this.#free.length = 0\n    } else {\n      this.#head = this.#next[head] as Index\n    }\n    this.#keyMap.delete(k)\n    this.#size--\n    return head\n  }\n\n  /**\n   * Check if a key is in the cache, without updating the recency of use.\n   * Will return false if the item is stale, even though it is technically\n   * in the cache.\n   *\n   * Check if a key is in the cache, without updating the recency of\n   * use. Age is updated if {@link LRUCache.OptionsBase.updateAgeOnHas} is set\n   * to `true` in either the options or the constructor.\n   *\n   * Will return `false` if the item is stale, even though it is technically in\n   * the cache. The difference can be determined (if it matters) by using a\n   * `status` argument, and inspecting the `has` field.\n   *\n   * Will not update item age unless\n   * {@link LRUCache.OptionsBase.updateAgeOnHas} is set.\n   */\n  has(k: K, hasOptions: LRUCache.HasOptions<K, V, FC> = {}) {\n    const { updateAgeOnHas = this.updateAgeOnHas, status } = hasOptions\n    const index = this.#keyMap.get(k)\n    if (index !== undefined) {\n      const v = this.#valList[index]\n      if (\n        this.#isBackgroundFetch(v) &&\n        v.__staleWhileFetching === undefined\n      ) {\n        return false\n      }\n      if (!this.#isStale(index)) {\n        if (updateAgeOnHas) {\n          this.#updateItemAge(index)\n        }\n        if (status) {\n          status.has = 'hit'\n          this.#statusTTL(status, index)\n        }\n        return true\n      } else if (status) {\n        status.has = 'stale'\n        this.#statusTTL(status, index)\n      }\n    } else if (status) {\n      status.has = 'miss'\n    }\n    return false\n  }\n\n  /**\n   * Like {@link LRUCache#get} but doesn't update recency or delete stale\n   * items.\n   *\n   * Returns `undefined` if the item is stale, unless\n   * {@link LRUCache.OptionsBase.allowStale} is set.\n   */\n  peek(k: K, peekOptions: LRUCache.PeekOptions<K, V, FC> = {}) {\n    const { allowStale = this.allowStale } = peekOptions\n    const index = this.#keyMap.get(k)\n    if (index === undefined || (!allowStale && this.#isStale(index))) {\n      return\n    }\n    const v = this.#valList[index]\n    // either stale and allowed, or forcing a refresh of non-stale value\n    return this.#isBackgroundFetch(v) ? v.__staleWhileFetching : v\n  }\n\n  #backgroundFetch(\n    k: K,\n    index: Index | undefined,\n    options: LRUCache.FetchOptions<K, V, FC>,\n    context: any,\n  ): BackgroundFetch<V> {\n    const v = index === undefined ? undefined : this.#valList[index]\n    if (this.#isBackgroundFetch(v)) {\n      return v\n    }\n\n    const ac = new AC()\n    const { signal } = options\n    // when/if our AC signals, then stop listening to theirs.\n    signal?.addEventListener('abort', () => ac.abort(signal.reason), {\n      signal: ac.signal,\n    })\n\n    const fetchOpts = {\n      signal: ac.signal,\n      options,\n      context,\n    }\n\n    const cb = (v: V | undefined, updateCache = false): V | undefined => {\n      const { aborted } = ac.signal\n      const ignoreAbort = options.ignoreFetchAbort && v !== undefined\n      if (options.status) {\n        if (aborted && !updateCache) {\n          options.status.fetchAborted = true\n          options.status.fetchError = ac.signal.reason\n          if (ignoreAbort) options.status.fetchAbortIgnored = true\n        } else {\n          options.status.fetchResolved = true\n        }\n      }\n      if (aborted && !ignoreAbort && !updateCache) {\n        return fetchFail(ac.signal.reason)\n      }\n      // either we didn't abort, and are still here, or we did, and ignored\n      const bf = p as BackgroundFetch<V>\n      // if nothing else has been written there but we're set to update the\n      // cache and ignore the abort, or if it's still pending on this specific\n      // background request, then write it to the cache.\n      const vl = this.#valList[index as Index]\n      if (vl === p || (ignoreAbort && updateCache && vl === undefined)) {\n        if (v === undefined) {\n          if (bf.__staleWhileFetching !== undefined) {\n            this.#valList[index as Index] = bf.__staleWhileFetching\n          } else {\n            this.#delete(k, 'fetch')\n          }\n        } else {\n          if (options.status) options.status.fetchUpdated = true\n          this.set(k, v, fetchOpts.options)\n        }\n      }\n      return v\n    }\n\n    const eb = (er: any) => {\n      if (options.status) {\n        options.status.fetchRejected = true\n        options.status.fetchError = er\n      }\n      return fetchFail(er)\n    }\n\n    const fetchFail = (er: any): V | undefined => {\n      const { aborted } = ac.signal\n      const allowStaleAborted = aborted && options.allowStaleOnFetchAbort\n      const allowStale =\n        allowStaleAborted || options.allowStaleOnFetchRejection\n      const noDelete = allowStale || options.noDeleteOnFetchRejection\n      const bf = p as BackgroundFetch<V>\n      if (this.#valList[index as Index] === p) {\n        // if we allow stale on fetch rejections, then we need to ensure that\n        // the stale value is not removed from the cache when the fetch fails.\n        const del = !noDelete || bf.__staleWhileFetching === undefined\n        if (del) {\n          this.#delete(k, 'fetch')\n        } else if (!allowStaleAborted) {\n          // still replace the *promise* with the stale value,\n          // since we are done with the promise at this point.\n          // leave it untouched if we're still waiting for an\n          // aborted background fetch that hasn't yet returned.\n          this.#valList[index as Index] = bf.__staleWhileFetching\n        }\n      }\n      if (allowStale) {\n        if (options.status && bf.__staleWhileFetching !== undefined) {\n          options.status.returnedStale = true\n        }\n        return bf.__staleWhileFetching\n      } else if (bf.__returned === bf) {\n        throw er\n      }\n    }\n\n    const pcall = (\n      res: (v: V | undefined) => void,\n      rej: (e: any) => void,\n    ) => {\n      const fmp = this.#fetchMethod?.(k, v, fetchOpts)\n      if (fmp && fmp instanceof Promise) {\n        fmp.then(v => res(v === undefined ? undefined : v), rej)\n      }\n      // ignored, we go until we finish, regardless.\n      // defer check until we are actually aborting,\n      // so fetchMethod can override.\n      ac.signal.addEventListener('abort', () => {\n        if (!options.ignoreFetchAbort || options.allowStaleOnFetchAbort) {\n          res(undefined)\n          // when it eventually resolves, update the cache.\n          if (options.allowStaleOnFetchAbort) {\n            res = v => cb(v, true)\n          }\n        }\n      })\n    }\n\n    if (options.status) options.status.fetchDispatched = true\n    const p = new Promise(pcall).then(cb, eb)\n    const bf: BackgroundFetch<V> = Object.assign(p, {\n      __abortController: ac,\n      __staleWhileFetching: v,\n      __returned: undefined,\n    })\n\n    if (index === undefined) {\n      // internal, don't expose status.\n      this.set(k, bf, { ...fetchOpts.options, status: undefined })\n      index = this.#keyMap.get(k)\n    } else {\n      this.#valList[index] = bf\n    }\n    return bf\n  }\n\n  #isBackgroundFetch(p: any): p is BackgroundFetch<V> {\n    if (!this.#hasFetchMethod) return false\n    const b = p as BackgroundFetch<V>\n    return (\n      !!b &&\n      b instanceof Promise &&\n      b.hasOwnProperty('__staleWhileFetching') &&\n      b.__abortController instanceof AC\n    )\n  }\n\n  /**\n   * Make an asynchronous cached fetch using the\n   * {@link LRUCache.OptionsBase.fetchMethod} function.\n   *\n   * If the value is in the cache and not stale, then the returned\n   * Promise resolves to the value.\n   *\n   * If not in the cache, or beyond its TTL staleness, then\n   * `fetchMethod(key, staleValue, { options, signal, context })` is\n   * called, and the value returned will be added to the cache once\n   * resolved.\n   *\n   * If called with `allowStale`, and an asynchronous fetch is\n   * currently in progress to reload a stale value, then the former\n   * stale value will be returned.\n   *\n   * If called with `forceRefresh`, then the cached item will be\n   * re-fetched, even if it is not stale. However, if `allowStale` is also\n   * set, then the old value will still be returned. This is useful\n   * in cases where you want to force a reload of a cached value. If\n   * a background fetch is already in progress, then `forceRefresh`\n   * has no effect.\n   *\n   * If multiple fetches for the same key are issued, then they will all be\n   * coalesced into a single call to fetchMethod.\n   *\n   * Note that this means that handling options such as\n   * {@link LRUCache.OptionsBase.allowStaleOnFetchAbort},\n   * {@link LRUCache.FetchOptions.signal},\n   * and {@link LRUCache.OptionsBase.allowStaleOnFetchRejection} will be\n   * determined by the FIRST fetch() call for a given key.\n   *\n   * This is a known (fixable) shortcoming which will be addresed on when\n   * someone complains about it, as the fix would involve added complexity and\n   * may not be worth the costs for this edge case.\n   *\n   * If {@link LRUCache.OptionsBase.fetchMethod} is not specified, then this is\n   * effectively an alias for `Promise.resolve(cache.get(key))`.\n   *\n   * When the fetch method resolves to a value, if the fetch has not\n   * been aborted due to deletion, eviction, or being overwritten,\n   * then it is added to the cache using the options provided.\n   *\n   * If the key is evicted or deleted before the `fetchMethod`\n   * resolves, then the AbortSignal passed to the `fetchMethod` will\n   * receive an `abort` event, and the promise returned by `fetch()`\n   * will reject with the reason for the abort.\n   *\n   * If a `signal` is passed to the `fetch()` call, then aborting the\n   * signal will abort the fetch and cause the `fetch()` promise to\n   * reject with the reason provided.\n   *\n   * **Setting `context`**\n   *\n   * If an `FC` type is set to a type other than `unknown`, `void`, or\n   * `undefined` in the {@link LRUCache} constructor, then all\n   * calls to `cache.fetch()` _must_ provide a `context` option. If\n   * set to `undefined` or `void`, then calls to fetch _must not_\n   * provide a `context` option.\n   *\n   * The `context` param allows you to provide arbitrary data that\n   * might be relevant in the course of fetching the data. It is only\n   * relevant for the course of a single `fetch()` operation, and\n   * discarded afterwards.\n   *\n   * **Note: `fetch()` calls are inflight-unique**\n   *\n   * If you call `fetch()` multiple times with the same key value,\n   * then every call after the first will resolve on the same\n   * promise<sup>1</sup>,\n   * _even if they have different settings that would otherwise change\n   * the behavior of the fetch_, such as `noDeleteOnFetchRejection`\n   * or `ignoreFetchAbort`.\n   *\n   * In most cases, this is not a problem (in fact, only fetching\n   * something once is what you probably want, if you're caching in\n   * the first place). If you are changing the fetch() options\n   * dramatically between runs, there's a good chance that you might\n   * be trying to fit divergent semantics into a single object, and\n   * would be better off with multiple cache instances.\n   *\n   * **1**: Ie, they're not the \"same Promise\", but they resolve at\n   * the same time, because they're both waiting on the same\n   * underlying fetchMethod response.\n   */\n\n  fetch(\n    k: K,\n    fetchOptions: unknown extends FC ? LRUCache.FetchOptions<K, V, FC>\n    : FC extends undefined | void ? LRUCache.FetchOptionsNoContext<K, V>\n    : LRUCache.FetchOptionsWithContext<K, V, FC>,\n  ): Promise<undefined | V>\n\n  // this overload not allowed if context is required\n  fetch(\n    k: unknown extends FC ? K\n    : FC extends undefined | void ? K\n    : never,\n    fetchOptions?: unknown extends FC ? LRUCache.FetchOptions<K, V, FC>\n    : FC extends undefined | void ? LRUCache.FetchOptionsNoContext<K, V>\n    : never,\n  ): Promise<undefined | V>\n\n  async fetch(\n    k: K,\n    fetchOptions: LRUCache.FetchOptions<K, V, FC> = {},\n  ): Promise<undefined | V> {\n    const {\n      // get options\n      allowStale = this.allowStale,\n      updateAgeOnGet = this.updateAgeOnGet,\n      noDeleteOnStaleGet = this.noDeleteOnStaleGet,\n      // set options\n      ttl = this.ttl,\n      noDisposeOnSet = this.noDisposeOnSet,\n      size = 0,\n      sizeCalculation = this.sizeCalculation,\n      noUpdateTTL = this.noUpdateTTL,\n      // fetch exclusive options\n      noDeleteOnFetchRejection = this.noDeleteOnFetchRejection,\n      allowStaleOnFetchRejection = this.allowStaleOnFetchRejection,\n      ignoreFetchAbort = this.ignoreFetchAbort,\n      allowStaleOnFetchAbort = this.allowStaleOnFetchAbort,\n      context,\n      forceRefresh = false,\n      status,\n      signal,\n    } = fetchOptions\n\n    if (!this.#hasFetchMethod) {\n      if (status) status.fetch = 'get'\n      return this.get(k, {\n        allowStale,\n        updateAgeOnGet,\n        noDeleteOnStaleGet,\n        status,\n      })\n    }\n\n    const options = {\n      allowStale,\n      updateAgeOnGet,\n      noDeleteOnStaleGet,\n      ttl,\n      noDisposeOnSet,\n      size,\n      sizeCalculation,\n      noUpdateTTL,\n      noDeleteOnFetchRejection,\n      allowStaleOnFetchRejection,\n      allowStaleOnFetchAbort,\n      ignoreFetchAbort,\n      status,\n      signal,\n    }\n\n    let index = this.#keyMap.get(k)\n    if (index === undefined) {\n      if (status) status.fetch = 'miss'\n      const p = this.#backgroundFetch(k, index, options, context)\n      return (p.__returned = p)\n    } else {\n      // in cache, maybe already fetching\n      const v = this.#valList[index]\n      if (this.#isBackgroundFetch(v)) {\n        const stale = allowStale && v.__staleWhileFetching !== undefined\n        if (status) {\n          status.fetch = 'inflight'\n          if (stale) status.returnedStale = true\n        }\n        return stale ? v.__staleWhileFetching : (v.__returned = v)\n      }\n\n      // if we force a refresh, that means do NOT serve the cached value,\n      // unless we are already in the process of refreshing the cache.\n      const isStale = this.#isStale(index)\n      if (!forceRefresh && !isStale) {\n        if (status) status.fetch = 'hit'\n        this.#moveToTail(index)\n        if (updateAgeOnGet) {\n          this.#updateItemAge(index)\n        }\n        if (status) this.#statusTTL(status, index)\n        return v\n      }\n\n      // ok, it is stale or a forced refresh, and not already fetching.\n      // refresh the cache.\n      const p = this.#backgroundFetch(k, index, options, context)\n      const hasStale = p.__staleWhileFetching !== undefined\n      const staleVal = hasStale && allowStale\n      if (status) {\n        status.fetch = isStale ? 'stale' : 'refresh'\n        if (staleVal && isStale) status.returnedStale = true\n      }\n      return staleVal ? p.__staleWhileFetching : (p.__returned = p)\n    }\n  }\n\n  /**\n   * In some cases, `cache.fetch()` may resolve to `undefined`, either because\n   * a {@link LRUCache.OptionsBase#fetchMethod} was not provided (turning\n   * `cache.fetch(k)` into just an async wrapper around `cache.get(k)`) or\n   * because `ignoreFetchAbort` was specified (either to the constructor or\n   * in the {@link LRUCache.FetchOptions}). Also, the\n   * {@link LRUCache.OptionsBase.fetchMethod} may return `undefined` or `void`, making\n   * the test even more complicated.\n   *\n   * Because inferring the cases where `undefined` might be returned are so\n   * cumbersome, but testing for `undefined` can also be annoying, this method\n   * can be used, which will reject if `this.fetch()` resolves to undefined.\n   */\n  forceFetch(\n    k: K,\n    fetchOptions: unknown extends FC ? LRUCache.FetchOptions<K, V, FC>\n    : FC extends undefined | void ? LRUCache.FetchOptionsNoContext<K, V>\n    : LRUCache.FetchOptionsWithContext<K, V, FC>,\n  ): Promise<V>\n  // this overload not allowed if context is required\n  forceFetch(\n    k: unknown extends FC ? K\n    : FC extends undefined | void ? K\n    : never,\n    fetchOptions?: unknown extends FC ? LRUCache.FetchOptions<K, V, FC>\n    : FC extends undefined | void ? LRUCache.FetchOptionsNoContext<K, V>\n    : never,\n  ): Promise<V>\n  async forceFetch(\n    k: K,\n    fetchOptions: LRUCache.FetchOptions<K, V, FC> = {},\n  ): Promise<V> {\n    const v = await this.fetch(\n      k,\n      fetchOptions as unknown extends FC ? LRUCache.FetchOptions<K, V, FC>\n      : FC extends undefined | void ? LRUCache.FetchOptionsNoContext<K, V>\n      : LRUCache.FetchOptionsWithContext<K, V, FC>,\n    )\n    if (v === undefined) throw new Error('fetch() returned undefined')\n    return v\n  }\n\n  /**\n   * If the key is found in the cache, then this is equivalent to\n   * {@link LRUCache#get}. If not, in the cache, then calculate the value using\n   * the {@link LRUCache.OptionsBase.memoMethod}, and add it to the cache.\n   *\n   * If an `FC` type is set to a type other than `unknown`, `void`, or\n   * `undefined` in the LRUCache constructor, then all calls to `cache.memo()`\n   * _must_ provide a `context` option. If set to `undefined` or `void`, then\n   * calls to memo _must not_ provide a `context` option.\n   *\n   * The `context` param allows you to provide arbitrary data that might be\n   * relevant in the course of fetching the data. It is only relevant for the\n   * course of a single `memo()` operation, and discarded afterwards.\n   */\n  memo(\n    k: K,\n    memoOptions: unknown extends FC ? LRUCache.MemoOptions<K, V, FC>\n    : FC extends undefined | void ? LRUCache.MemoOptionsNoContext<K, V>\n    : LRUCache.MemoOptionsWithContext<K, V, FC>,\n  ): V\n  // this overload not allowed if context is required\n  memo(\n    k: unknown extends FC ? K\n    : FC extends undefined | void ? K\n    : never,\n    memoOptions?: unknown extends FC ? LRUCache.MemoOptions<K, V, FC>\n    : FC extends undefined | void ? LRUCache.MemoOptionsNoContext<K, V>\n    : never,\n  ): V\n  memo(k: K, memoOptions: LRUCache.MemoOptions<K, V, FC> = {}) {\n    const memoMethod = this.#memoMethod\n    if (!memoMethod) {\n      throw new Error('no memoMethod provided to constructor')\n    }\n    const { context, forceRefresh, ...options } = memoOptions\n    const v = this.get(k, options)\n    if (!forceRefresh && v !== undefined) return v\n    const vv = memoMethod(k, v, {\n      options,\n      context,\n    } as LRUCache.MemoizerOptions<K, V, FC>)\n    this.set(k, vv, options)\n    return vv\n  }\n\n  /**\n   * Return a value from the cache. Will update the recency of the cache\n   * entry found.\n   *\n   * If the key is not found, get() will return `undefined`.\n   */\n  get(k: K, getOptions: LRUCache.GetOptions<K, V, FC> = {}) {\n    const {\n      allowStale = this.allowStale,\n      updateAgeOnGet = this.updateAgeOnGet,\n      noDeleteOnStaleGet = this.noDeleteOnStaleGet,\n      status,\n    } = getOptions\n    const index = this.#keyMap.get(k)\n    if (index !== undefined) {\n      const value = this.#valList[index]\n      const fetching = this.#isBackgroundFetch(value)\n      if (status) this.#statusTTL(status, index)\n      if (this.#isStale(index)) {\n        if (status) status.get = 'stale'\n        // delete only if not an in-flight background fetch\n        if (!fetching) {\n          if (!noDeleteOnStaleGet) {\n            this.#delete(k, 'expire')\n          }\n          if (status && allowStale) status.returnedStale = true\n          return allowStale ? value : undefined\n        } else {\n          if (\n            status &&\n            allowStale &&\n            value.__staleWhileFetching !== undefined\n          ) {\n            status.returnedStale = true\n          }\n          return allowStale ? value.__staleWhileFetching : undefined\n        }\n      } else {\n        if (status) status.get = 'hit'\n        // if we're currently fetching it, we don't actually have it yet\n        // it's not stale, which means this isn't a staleWhileRefetching.\n        // If it's not stale, and fetching, AND has a __staleWhileFetching\n        // value, then that means the user fetched with {forceRefresh:true},\n        // so it's safe to return that value.\n        if (fetching) {\n          return value.__staleWhileFetching\n        }\n        this.#moveToTail(index)\n        if (updateAgeOnGet) {\n          this.#updateItemAge(index)\n        }\n        return value\n      }\n    } else if (status) {\n      status.get = 'miss'\n    }\n  }\n\n  #connect(p: Index, n: Index) {\n    this.#prev[n] = p\n    this.#next[p] = n\n  }\n\n  #moveToTail(index: Index): void {\n    // if tail already, nothing to do\n    // if head, move head to next[index]\n    // else\n    //   move next[prev[index]] to next[index] (head has no prev)\n    //   move prev[next[index]] to prev[index]\n    // prev[index] = tail\n    // next[tail] = index\n    // tail = index\n    if (index !== this.#tail) {\n      if (index === this.#head) {\n        this.#head = this.#next[index] as Index\n      } else {\n        this.#connect(\n          this.#prev[index] as Index,\n          this.#next[index] as Index,\n        )\n      }\n      this.#connect(this.#tail, index)\n      this.#tail = index\n    }\n  }\n\n  /**\n   * Deletes a key out of the cache.\n   *\n   * Returns true if the key was deleted, false otherwise.\n   */\n  delete(k: K) {\n    return this.#delete(k, 'delete')\n  }\n\n  #delete(k: K, reason: LRUCache.DisposeReason) {\n    let deleted = false\n    if (this.#size !== 0) {\n      const index = this.#keyMap.get(k)\n      if (index !== undefined) {\n        if (this.#autopurgeTimers?.[index]) {\n          clearTimeout(this.#autopurgeTimers?.[index])\n          this.#autopurgeTimers[index] = undefined\n        }\n        deleted = true\n        if (this.#size === 1) {\n          this.#clear(reason)\n        } else {\n          this.#removeItemSize(index)\n          const v = this.#valList[index]\n          if (this.#isBackgroundFetch(v)) {\n            v.__abortController.abort(new Error('deleted'))\n          } else if (this.#hasDispose || this.#hasDisposeAfter) {\n            if (this.#hasDispose) {\n              this.#dispose?.(v as V, k, reason)\n            }\n            if (this.#hasDisposeAfter) {\n              this.#disposed?.push([v as V, k, reason])\n            }\n          }\n          this.#keyMap.delete(k)\n          this.#keyList[index] = undefined\n          this.#valList[index] = undefined\n          if (index === this.#tail) {\n            this.#tail = this.#prev[index] as Index\n          } else if (index === this.#head) {\n            this.#head = this.#next[index] as Index\n          } else {\n            const pi = this.#prev[index] as number\n            this.#next[pi] = this.#next[index] as number\n            const ni = this.#next[index] as number\n            this.#prev[ni] = this.#prev[index] as number\n          }\n          this.#size--\n          this.#free.push(index)\n        }\n      }\n    }\n    if (this.#hasDisposeAfter && this.#disposed?.length) {\n      const dt = this.#disposed\n      let task: DisposeTask<K, V> | undefined\n      while ((task = dt?.shift())) {\n        this.#disposeAfter?.(...task)\n      }\n    }\n    return deleted\n  }\n\n  /**\n   * Clear the cache entirely, throwing away all values.\n   */\n  clear() {\n    return this.#clear('delete')\n  }\n  #clear(reason: LRUCache.DisposeReason) {\n    for (const index of this.#rindexes({ allowStale: true })) {\n      const v = this.#valList[index]\n      if (this.#isBackgroundFetch(v)) {\n        v.__abortController.abort(new Error('deleted'))\n      } else {\n        const k = this.#keyList[index]\n        if (this.#hasDispose) {\n          this.#dispose?.(v as V, k as K, reason)\n        }\n        if (this.#hasDisposeAfter) {\n          this.#disposed?.push([v as V, k as K, reason])\n        }\n      }\n    }\n\n    this.#keyMap.clear()\n    this.#valList.fill(undefined)\n    this.#keyList.fill(undefined)\n    if (this.#ttls && this.#starts) {\n      this.#ttls.fill(0)\n      this.#starts.fill(0)\n      for (const t of this.#autopurgeTimers ?? []) {\n        if (t !== undefined) clearTimeout(t)\n      }\n      this.#autopurgeTimers?.fill(undefined)\n    }\n    if (this.#sizes) {\n      this.#sizes.fill(0)\n    }\n    this.#head = 0 as Index\n    this.#tail = 0 as Index\n    this.#free.length = 0\n    this.#calculatedSize = 0\n    this.#size = 0\n    if (this.#hasDisposeAfter && this.#disposed) {\n      const dt = this.#disposed\n      let task: DisposeTask<K, V> | undefined\n      while ((task = dt?.shift())) {\n        this.#disposeAfter?.(...task)\n      }\n    }\n  }\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 19906, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/p-map/index.js"],"sourcesContent":["export default async function pMap(\n\titerable,\n\tmapper,\n\t{\n\t\tconcurrency = Number.POSITIVE_INFINITY,\n\t\tstopOnError = true,\n\t\tsignal,\n\t} = {},\n) {\n\treturn new Promise((resolve_, reject_) => {\n\t\tif (iterable[Symbol.iterator] === undefined && iterable[Symbol.asyncIterator] === undefined) {\n\t\t\tthrow new TypeError(`Expected \\`input\\` to be either an \\`Iterable\\` or \\`AsyncIterable\\`, got (${typeof iterable})`);\n\t\t}\n\n\t\tif (typeof mapper !== 'function') {\n\t\t\tthrow new TypeError('Mapper function is required');\n\t\t}\n\n\t\tif (!((Number.isSafeInteger(concurrency) && concurrency >= 1) || concurrency === Number.POSITIVE_INFINITY)) {\n\t\t\tthrow new TypeError(`Expected \\`concurrency\\` to be an integer from 1 and up or \\`Infinity\\`, got \\`${concurrency}\\` (${typeof concurrency})`);\n\t\t}\n\n\t\tconst result = [];\n\t\tconst errors = [];\n\t\tconst skippedIndexesMap = new Map();\n\t\tlet isRejected = false;\n\t\tlet isResolved = false;\n\t\tlet isIterableDone = false;\n\t\tlet resolvingCount = 0;\n\t\tlet currentIndex = 0;\n\t\tconst iterator = iterable[Symbol.iterator] === undefined ? iterable[Symbol.asyncIterator]() : iterable[Symbol.iterator]();\n\n\t\tconst signalListener = () => {\n\t\t\treject(signal.reason);\n\t\t};\n\n\t\tconst cleanup = () => {\n\t\t\tsignal?.removeEventListener('abort', signalListener);\n\t\t};\n\n\t\tconst resolve = value => {\n\t\t\tresolve_(value);\n\t\t\tcleanup();\n\t\t};\n\n\t\tconst reject = reason => {\n\t\t\tisRejected = true;\n\t\t\tisResolved = true;\n\t\t\treject_(reason);\n\t\t\tcleanup();\n\t\t};\n\n\t\tif (signal) {\n\t\t\tif (signal.aborted) {\n\t\t\t\treject(signal.reason);\n\t\t\t}\n\n\t\t\tsignal.addEventListener('abort', signalListener, {once: true});\n\t\t}\n\n\t\tconst next = async () => {\n\t\t\tif (isResolved) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst nextItem = await iterator.next();\n\n\t\t\tconst index = currentIndex;\n\t\t\tcurrentIndex++;\n\n\t\t\t// Note: `iterator.next()` can be called many times in parallel.\n\t\t\t// This can cause multiple calls to this `next()` function to\n\t\t\t// receive a `nextItem` with `done === true`.\n\t\t\t// The shutdown logic that rejects/resolves must be protected\n\t\t\t// so it runs only one time as the `skippedIndex` logic is\n\t\t\t// non-idempotent.\n\t\t\tif (nextItem.done) {\n\t\t\t\tisIterableDone = true;\n\n\t\t\t\tif (resolvingCount === 0 && !isResolved) {\n\t\t\t\t\tif (!stopOnError && errors.length > 0) {\n\t\t\t\t\t\treject(new AggregateError(errors)); // eslint-disable-line unicorn/error-message\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tisResolved = true;\n\n\t\t\t\t\tif (skippedIndexesMap.size === 0) {\n\t\t\t\t\t\tresolve(result);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst pureResult = [];\n\n\t\t\t\t\t// Support multiple `pMapSkip`'s.\n\t\t\t\t\tfor (const [index, value] of result.entries()) {\n\t\t\t\t\t\tif (skippedIndexesMap.get(index) === pMapSkip) {\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpureResult.push(value);\n\t\t\t\t\t}\n\n\t\t\t\t\tresolve(pureResult);\n\t\t\t\t}\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresolvingCount++;\n\n\t\t\t// Intentionally detached\n\t\t\t(async () => {\n\t\t\t\ttry {\n\t\t\t\t\tconst element = await nextItem.value;\n\n\t\t\t\t\tif (isResolved) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst value = await mapper(element, index);\n\n\t\t\t\t\t// Use Map to stage the index of the element.\n\t\t\t\t\tif (value === pMapSkip) {\n\t\t\t\t\t\tskippedIndexesMap.set(index, value);\n\t\t\t\t\t}\n\n\t\t\t\t\tresult[index] = value;\n\n\t\t\t\t\tresolvingCount--;\n\t\t\t\t\tawait next();\n\t\t\t\t} catch (error) {\n\t\t\t\t\tif (stopOnError) {\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t} else {\n\t\t\t\t\t\terrors.push(error);\n\t\t\t\t\t\tresolvingCount--;\n\n\t\t\t\t\t\t// In that case we can't really continue regardless of `stopOnError` state\n\t\t\t\t\t\t// since an iterable is likely to continue throwing after it throws once.\n\t\t\t\t\t\t// If we continue calling `next()` indefinitely we will likely end up\n\t\t\t\t\t\t// in an infinite loop of failed iteration.\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tawait next();\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})();\n\t\t};\n\n\t\t// Create the concurrent runners in a detached (non-awaited)\n\t\t// promise. We need this so we can await the `next()` calls\n\t\t// to stop creating runners before hitting the concurrency limit\n\t\t// if the iterable has already been marked as done.\n\t\t// NOTE: We *must* do this for async iterators otherwise we'll spin up\n\t\t// infinite `next()` calls by default and never start the event loop.\n\t\t(async () => {\n\t\t\tfor (let index = 0; index < concurrency; index++) {\n\t\t\t\ttry {\n\t\t\t\t\t// eslint-disable-next-line no-await-in-loop\n\t\t\t\t\tawait next();\n\t\t\t\t} catch (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (isIterableDone || isRejected) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t})();\n\t});\n}\n\nexport function pMapIterable(\n\titerable,\n\tmapper,\n\t{\n\t\tconcurrency = Number.POSITIVE_INFINITY,\n\t\tbackpressure = concurrency,\n\t} = {},\n) {\n\tif (iterable[Symbol.iterator] === undefined && iterable[Symbol.asyncIterator] === undefined) {\n\t\tthrow new TypeError(`Expected \\`input\\` to be either an \\`Iterable\\` or \\`AsyncIterable\\`, got (${typeof iterable})`);\n\t}\n\n\tif (typeof mapper !== 'function') {\n\t\tthrow new TypeError('Mapper function is required');\n\t}\n\n\tif (!((Number.isSafeInteger(concurrency) && concurrency >= 1) || concurrency === Number.POSITIVE_INFINITY)) {\n\t\tthrow new TypeError(`Expected \\`concurrency\\` to be an integer from 1 and up or \\`Infinity\\`, got \\`${concurrency}\\` (${typeof concurrency})`);\n\t}\n\n\tif (!((Number.isSafeInteger(backpressure) && backpressure >= concurrency) || backpressure === Number.POSITIVE_INFINITY)) {\n\t\tthrow new TypeError(`Expected \\`backpressure\\` to be an integer from \\`concurrency\\` (${concurrency}) and up or \\`Infinity\\`, got \\`${backpressure}\\` (${typeof backpressure})`);\n\t}\n\n\treturn {\n\t\tasync * [Symbol.asyncIterator]() {\n\t\t\tconst iterator = iterable[Symbol.asyncIterator] === undefined ? iterable[Symbol.iterator]() : iterable[Symbol.asyncIterator]();\n\n\t\t\tconst promises = [];\n\t\t\tlet pendingPromisesCount = 0;\n\t\t\tlet isDone = false;\n\t\t\tlet index = 0;\n\n\t\t\tfunction trySpawn() {\n\t\t\t\tif (isDone || !(pendingPromisesCount < concurrency && promises.length < backpressure)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tpendingPromisesCount++;\n\n\t\t\t\tconst promise = (async () => {\n\t\t\t\t\tconst {done, value} = await iterator.next();\n\n\t\t\t\t\tif (done) {\n\t\t\t\t\t\tpendingPromisesCount--;\n\t\t\t\t\t\treturn {done: true};\n\t\t\t\t\t}\n\n\t\t\t\t\t// Spawn if still below concurrency and backpressure limit\n\t\t\t\t\ttrySpawn();\n\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst returnValue = await mapper(await value, index++);\n\n\t\t\t\t\t\tpendingPromisesCount--;\n\n\t\t\t\t\t\tif (returnValue === pMapSkip) {\n\t\t\t\t\t\t\tconst index = promises.indexOf(promise);\n\n\t\t\t\t\t\t\tif (index > 0) {\n\t\t\t\t\t\t\t\tpromises.splice(index, 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Spawn if still below backpressure limit and just dropped below concurrency limit\n\t\t\t\t\t\ttrySpawn();\n\n\t\t\t\t\t\treturn {done: false, value: returnValue};\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tpendingPromisesCount--;\n\t\t\t\t\t\tisDone = true;\n\t\t\t\t\t\treturn {error};\n\t\t\t\t\t}\n\t\t\t\t})();\n\n\t\t\t\tpromises.push(promise);\n\t\t\t}\n\n\t\t\ttrySpawn();\n\n\t\t\twhile (promises.length > 0) {\n\t\t\t\tconst {error, done, value} = await promises[0]; // eslint-disable-line no-await-in-loop\n\n\t\t\t\tpromises.shift();\n\n\t\t\t\tif (error) {\n\t\t\t\t\tthrow error;\n\t\t\t\t}\n\n\t\t\t\tif (done) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// Spawn if just dropped below backpressure limit and below the concurrency limit\n\t\t\t\ttrySpawn();\n\n\t\t\t\tif (value === pMapSkip) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tyield value;\n\t\t\t}\n\t\t},\n\t};\n}\n\nexport const pMapSkip = Symbol('skip');\n"],"names":[],"mappings":"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","ignoreList":[0]}},
    {"offset": {"line": 20147, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/async-mutex/index.mjs"],"sourcesContent":["const E_TIMEOUT = new Error('timeout while waiting for mutex to become available');\nconst E_ALREADY_LOCKED = new Error('mutex already locked');\nconst E_CANCELED = new Error('request for lock canceled');\n\nvar __awaiter$2 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nclass Semaphore {\n    constructor(_value, _cancelError = E_CANCELED) {\n        this._value = _value;\n        this._cancelError = _cancelError;\n        this._queue = [];\n        this._weightedWaiters = [];\n    }\n    acquire(weight = 1, priority = 0) {\n        if (weight <= 0)\n            throw new Error(`invalid weight ${weight}: must be positive`);\n        return new Promise((resolve, reject) => {\n            const task = { resolve, reject, weight, priority };\n            const i = findIndexFromEnd(this._queue, (other) => priority <= other.priority);\n            if (i === -1 && weight <= this._value) {\n                // Needs immediate dispatch, skip the queue\n                this._dispatchItem(task);\n            }\n            else {\n                this._queue.splice(i + 1, 0, task);\n            }\n        });\n    }\n    runExclusive(callback_1) {\n        return __awaiter$2(this, arguments, void 0, function* (callback, weight = 1, priority = 0) {\n            const [value, release] = yield this.acquire(weight, priority);\n            try {\n                return yield callback(value);\n            }\n            finally {\n                release();\n            }\n        });\n    }\n    waitForUnlock(weight = 1, priority = 0) {\n        if (weight <= 0)\n            throw new Error(`invalid weight ${weight}: must be positive`);\n        if (this._couldLockImmediately(weight, priority)) {\n            return Promise.resolve();\n        }\n        else {\n            return new Promise((resolve) => {\n                if (!this._weightedWaiters[weight - 1])\n                    this._weightedWaiters[weight - 1] = [];\n                insertSorted(this._weightedWaiters[weight - 1], { resolve, priority });\n            });\n        }\n    }\n    isLocked() {\n        return this._value <= 0;\n    }\n    getValue() {\n        return this._value;\n    }\n    setValue(value) {\n        this._value = value;\n        this._dispatchQueue();\n    }\n    release(weight = 1) {\n        if (weight <= 0)\n            throw new Error(`invalid weight ${weight}: must be positive`);\n        this._value += weight;\n        this._dispatchQueue();\n    }\n    cancel() {\n        this._queue.forEach((entry) => entry.reject(this._cancelError));\n        this._queue = [];\n    }\n    _dispatchQueue() {\n        this._drainUnlockWaiters();\n        while (this._queue.length > 0 && this._queue[0].weight <= this._value) {\n            this._dispatchItem(this._queue.shift());\n            this._drainUnlockWaiters();\n        }\n    }\n    _dispatchItem(item) {\n        const previousValue = this._value;\n        this._value -= item.weight;\n        item.resolve([previousValue, this._newReleaser(item.weight)]);\n    }\n    _newReleaser(weight) {\n        let called = false;\n        return () => {\n            if (called)\n                return;\n            called = true;\n            this.release(weight);\n        };\n    }\n    _drainUnlockWaiters() {\n        if (this._queue.length === 0) {\n            for (let weight = this._value; weight > 0; weight--) {\n                const waiters = this._weightedWaiters[weight - 1];\n                if (!waiters)\n                    continue;\n                waiters.forEach((waiter) => waiter.resolve());\n                this._weightedWaiters[weight - 1] = [];\n            }\n        }\n        else {\n            const queuedPriority = this._queue[0].priority;\n            for (let weight = this._value; weight > 0; weight--) {\n                const waiters = this._weightedWaiters[weight - 1];\n                if (!waiters)\n                    continue;\n                const i = waiters.findIndex((waiter) => waiter.priority <= queuedPriority);\n                (i === -1 ? waiters : waiters.splice(0, i))\n                    .forEach((waiter => waiter.resolve()));\n            }\n        }\n    }\n    _couldLockImmediately(weight, priority) {\n        return (this._queue.length === 0 || this._queue[0].priority < priority) &&\n            weight <= this._value;\n    }\n}\nfunction insertSorted(a, v) {\n    const i = findIndexFromEnd(a, (other) => v.priority <= other.priority);\n    a.splice(i + 1, 0, v);\n}\nfunction findIndexFromEnd(a, predicate) {\n    for (let i = a.length - 1; i >= 0; i--) {\n        if (predicate(a[i])) {\n            return i;\n        }\n    }\n    return -1;\n}\n\nvar __awaiter$1 = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nclass Mutex {\n    constructor(cancelError) {\n        this._semaphore = new Semaphore(1, cancelError);\n    }\n    acquire() {\n        return __awaiter$1(this, arguments, void 0, function* (priority = 0) {\n            const [, releaser] = yield this._semaphore.acquire(1, priority);\n            return releaser;\n        });\n    }\n    runExclusive(callback, priority = 0) {\n        return this._semaphore.runExclusive(() => callback(), 1, priority);\n    }\n    isLocked() {\n        return this._semaphore.isLocked();\n    }\n    waitForUnlock(priority = 0) {\n        return this._semaphore.waitForUnlock(1, priority);\n    }\n    release() {\n        if (this._semaphore.isLocked())\n            this._semaphore.release();\n    }\n    cancel() {\n        return this._semaphore.cancel();\n    }\n}\n\nvar __awaiter = (undefined && undefined.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nfunction withTimeout(sync, timeout, timeoutError = E_TIMEOUT) {\n    return {\n        acquire: (weightOrPriority, priority) => {\n            let weight;\n            if (isSemaphore(sync)) {\n                weight = weightOrPriority;\n            }\n            else {\n                weight = undefined;\n                priority = weightOrPriority;\n            }\n            if (weight !== undefined && weight <= 0) {\n                throw new Error(`invalid weight ${weight}: must be positive`);\n            }\n            return new Promise((resolve, reject) => __awaiter(this, void 0, void 0, function* () {\n                let isTimeout = false;\n                const handle = setTimeout(() => {\n                    isTimeout = true;\n                    reject(timeoutError);\n                }, timeout);\n                try {\n                    const ticket = yield (isSemaphore(sync)\n                        ? sync.acquire(weight, priority)\n                        : sync.acquire(priority));\n                    if (isTimeout) {\n                        const release = Array.isArray(ticket) ? ticket[1] : ticket;\n                        release();\n                    }\n                    else {\n                        clearTimeout(handle);\n                        resolve(ticket);\n                    }\n                }\n                catch (e) {\n                    if (!isTimeout) {\n                        clearTimeout(handle);\n                        reject(e);\n                    }\n                }\n            }));\n        },\n        runExclusive(callback, weight, priority) {\n            return __awaiter(this, void 0, void 0, function* () {\n                let release = () => undefined;\n                try {\n                    const ticket = yield this.acquire(weight, priority);\n                    if (Array.isArray(ticket)) {\n                        release = ticket[1];\n                        return yield callback(ticket[0]);\n                    }\n                    else {\n                        release = ticket;\n                        return yield callback();\n                    }\n                }\n                finally {\n                    release();\n                }\n            });\n        },\n        release(weight) {\n            sync.release(weight);\n        },\n        cancel() {\n            return sync.cancel();\n        },\n        waitForUnlock: (weightOrPriority, priority) => {\n            let weight;\n            if (isSemaphore(sync)) {\n                weight = weightOrPriority;\n            }\n            else {\n                weight = undefined;\n                priority = weightOrPriority;\n            }\n            if (weight !== undefined && weight <= 0) {\n                throw new Error(`invalid weight ${weight}: must be positive`);\n            }\n            return new Promise((resolve, reject) => {\n                const handle = setTimeout(() => reject(timeoutError), timeout);\n                (isSemaphore(sync)\n                    ? sync.waitForUnlock(weight, priority)\n                    : sync.waitForUnlock(priority)).then(() => {\n                    clearTimeout(handle);\n                    resolve();\n                });\n            });\n        },\n        isLocked: () => sync.isLocked(),\n        getValue: () => sync.getValue(),\n        setValue: (value) => sync.setValue(value),\n    };\n}\nfunction isSemaphore(sync) {\n    return sync.getValue !== undefined;\n}\n\n// eslint-disable-next-lisne @typescript-eslint/explicit-module-boundary-types\nfunction tryAcquire(sync, alreadyAcquiredError = E_ALREADY_LOCKED) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return withTimeout(sync, 0, alreadyAcquiredError);\n}\n\nexport { E_ALREADY_LOCKED, E_CANCELED, E_TIMEOUT, Mutex, Semaphore, tryAcquire, withTimeout };\n"],"names":[],"mappings":"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","ignoreList":[0]}}]
}