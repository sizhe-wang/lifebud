{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":[],"sourcesContent":[],"names":[],"mappings":""}},
    {"offset": {"line": 71, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40copilotkit/react-core/src/lib/status-checker.ts"],"sourcesContent":["import {\n  COPILOT_CLOUD_API_URL,\n  COPILOT_CLOUD_PUBLIC_API_KEY_HEADER,\n  Severity,\n} from \"@copilotkit/shared\";\n\nconst STATUS_CHECK_INTERVAL = 1000 * 60 * 5; // 5 minutes\n\nexport type Status = {\n  severity: Severity;\n  message: string;\n};\n\nexport class StatusChecker {\n  private activeKey: string | null = null;\n  private intervalId: ReturnType<typeof setInterval> | null = null;\n  private instanceCount = 0;\n  private lastResponse: Status | null = null;\n\n  async start(publicApiKey: string, onUpdate?: (status: Status | null) => void) {\n    this.instanceCount++;\n    if (this.activeKey === publicApiKey) return;\n\n    if (this.intervalId) clearInterval(this.intervalId);\n\n    const checkStatus = async () => {\n      try {\n        const response = await fetch(`${COPILOT_CLOUD_API_URL}/ciu`, {\n          method: \"GET\",\n          headers: {\n            [COPILOT_CLOUD_PUBLIC_API_KEY_HEADER]: publicApiKey,\n          },\n        }).then((response) => response.json() as Promise<Status>);\n        this.lastResponse = response;\n        onUpdate?.(response);\n        return response;\n      } catch (error) {\n        // Silently fail\n        return null;\n      }\n    };\n\n    const initialResponse = await checkStatus();\n    this.intervalId = setInterval(checkStatus, STATUS_CHECK_INTERVAL);\n    this.activeKey = publicApiKey;\n    return initialResponse;\n  }\n\n  getLastResponse() {\n    return this.lastResponse;\n  }\n\n  stop() {\n    this.instanceCount--;\n    if (this.instanceCount === 0) {\n      if (this.intervalId) {\n        clearInterval(this.intervalId);\n        this.intervalId = null;\n        this.activeKey = null;\n        this.lastResponse = null;\n      }\n    }\n  }\n}\n"],"names":["response"],"mappings":";;;;;;AAAA;;;AAMA,IAAM,wBAAwB,MAAO,KAAK;AAOnC,IAAM,gBAAN,MAAoB;IAApB,aAAA;QACL,IAAA,CAAQ,SAAA,GAA2B;QACnC,IAAA,CAAQ,UAAA,GAAoD;QAC5D,IAAA,CAAQ,aAAA,GAAgB;QACxB,IAAA,CAAQ,YAAA,GAA8B;IAAA;IAEhC,MAAM,YAAA,EAAsB,QAAA,EAA4C;QAAA,OAAA,IAAA,yLAAA,EAAA,IAAA,EAAA,MAAA;YAC5E,IAAA,CAAK,aAAA;YACL,IAAI,IAAA,CAAK,SAAA,KAAc,cAAc;YAErC,IAAI,IAAA,CAAK,UAAA,EAAY,cAAc,IAAA,CAAK,UAAU;YAElD,MAAM,cAAc,QAAY,yLAAA,EAAA,IAAA,EAAA,MAAA;oBAC9B,IAAI;wBACF,MAAM,WAAW,MAAM,MAAM,GAAG,gMAAA,CAAA,IAAA,CAAA,EAA6B;4BAC3D,QAAQ;4BACR,SAAS;gCACP,CAAC,8MAAmC,CAAA,EAAG;4BACzC;wBACF,CAAC,EAAE,IAAA,CAAK,CAACA,YAAaA,UAAS,IAAA,CAAK,CAAoB;wBACxD,IAAA,CAAK,YAAA,GAAe;wBACpB,YAAA,OAAA,KAAA,IAAA,SAAW;wBACX,OAAO;oBACT,EAAA,OAAS,OAAP;wBAEA,OAAO;oBACT;gBACF;YAEA,MAAM,kBAAkB,MAAM,YAAY;YAC1C,IAAA,CAAK,UAAA,GAAa,YAAY,aAAa,qBAAqB;YAChE,IAAA,CAAK,SAAA,GAAY;YACjB,OAAO;QACT;IAAA;IAEA,kBAAkB;QAChB,OAAO,IAAA,CAAK,YAAA;IACd;IAEA,OAAO;QACL,IAAA,CAAK,aAAA;QACL,IAAI,IAAA,CAAK,aAAA,KAAkB,GAAG;YAC5B,IAAI,IAAA,CAAK,UAAA,EAAY;gBACnB,cAAc,IAAA,CAAK,UAAU;gBAC7B,IAAA,CAAK,UAAA,GAAa;gBAClB,IAAA,CAAK,SAAA,GAAY;gBACjB,IAAA,CAAK,YAAA,GAAe;YACtB;QACF;IACF;AACF"}},
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40copilotkit/react-core/src/components/toast/exclamation-mark-icon.tsx"],"sourcesContent":["import React from \"react\";\n\nexport const ExclamationMarkIcon = ({\n  className,\n  style,\n}: {\n  className?: string;\n  style?: React.CSSProperties;\n}) => (\n  <svg\n    xmlns=\"http://www.w3.org/2000/svg\"\n    width=\"24\"\n    height=\"24\"\n    viewBox=\"0 0 24 24\"\n    fill=\"none\"\n    stroke=\"currentColor\"\n    strokeWidth=\"2\"\n    strokeLinecap=\"round\"\n    strokeLinejoin=\"round\"\n    className={`lucide lucide-circle-alert ${className ? className : \"\"}`}\n    style={style}\n  >\n    <circle cx=\"12\" cy=\"12\" r=\"10\" />\n    <line x1=\"12\" x2=\"12\" y1=\"8\" y2=\"12\" />\n    <line x1=\"12\" x2=\"12.01\" y1=\"16\" y2=\"16\" />\n  </svg>\n);\n"],"names":[],"mappings":";;;;;AASE,SAaE,KAbF;;AAPK,IAAM,sBAAsB,CAAC,EAClC,SAAA,EACA,KAAA,EACF,GAIE,aAAA,GAAA,IAAA,8KAAA,EAAC,OAAA;QACC,OAAM;QACN,OAAM;QACN,QAAO;QACP,SAAQ;QACR,MAAK;QACL,QAAO;QACP,aAAY;QACZ,eAAc;QACd,gBAAe;QACf,WAAW,CAAA,2BAAA,EAA8B,YAAY,YAAY,IAAA;QACjE;QAEA,UAAA;YAAA,aAAA,GAAA,IAAA,6KAAA,EAAC,UAAA;gBAAO,IAAG;gBAAK,IAAG;gBAAK,GAAE;YAAA,CAAK;YAC/B,aAAA,GAAA,IAAA,6KAAA,EAAC,QAAA;gBAAK,IAAG;gBAAK,IAAG;gBAAK,IAAG;gBAAI,IAAG;YAAA,CAAK;YACrC,aAAA,GAAA,IAAA,6KAAA,EAAC,QAAA;gBAAK,IAAG;gBAAK,IAAG;gBAAQ,IAAG;gBAAK,IAAG;YAAA,CAAK;SAAA;IAAA"}},
    {"offset": {"line": 180, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40copilotkit/react-core/src/components/toast/toast-provider.tsx"],"sourcesContent":["import { GraphQLError } from \"@copilotkit/runtime-client-gql\";\nimport React, { createContext, useContext, useState, useCallback } from \"react\";\nimport { PartialBy, CopilotKitError, Severity } from \"@copilotkit/shared\";\n\ninterface Toast {\n  id: string;\n  message: string | React.ReactNode;\n  type: \"info\" | \"success\" | \"warning\" | \"error\";\n  duration?: number;\n}\n\ninterface ToastContextValue {\n  toasts: Toast[];\n  addToast: (toast: PartialBy<Toast, \"id\">) => void;\n  addGraphQLErrorsToast: (errors: GraphQLError[]) => void;\n  removeToast: (id: string) => void;\n  enabled: boolean;\n  // Banner management\n  bannerError: CopilotKitError | null;\n  setBannerError: (error: CopilotKitError | null) => void;\n}\n\nconst ToastContext = createContext<ToastContextValue | undefined>(undefined);\n\n// Helper functions for error banner styling\ntype ErrorSeverity = \"critical\" | \"warning\" | \"info\";\n\ninterface ErrorColors {\n  background: string;\n  border: string;\n  text: string;\n  icon: string;\n}\n\nfunction getErrorSeverity(error: CopilotKitError): ErrorSeverity {\n  // Use structured error severity if available\n  if (error.severity) {\n    switch (error.severity) {\n      case Severity.CRITICAL:\n        return \"critical\";\n      case Severity.WARNING:\n        return \"warning\";\n      case Severity.INFO:\n        return \"info\";\n      default:\n        return \"info\";\n    }\n  }\n\n  // Fallback: Check for API key errors which should always be critical\n  const message = error.message.toLowerCase();\n  if (\n    message.includes(\"api key\") ||\n    message.includes(\"401\") ||\n    message.includes(\"unauthorized\") ||\n    message.includes(\"authentication\") ||\n    message.includes(\"incorrect api key\")\n  ) {\n    return \"critical\";\n  }\n\n  // Default to info level\n  return \"info\";\n}\n\nfunction getErrorColors(severity: ErrorSeverity): ErrorColors {\n  switch (severity) {\n    case \"critical\":\n      return {\n        background: \"#fee2e2\",\n        border: \"#dc2626\",\n        text: \"#7f1d1d\",\n        icon: \"#dc2626\",\n      };\n    case \"warning\":\n      return {\n        background: \"#fef3c7\",\n        border: \"#d97706\",\n        text: \"#78350f\",\n        icon: \"#d97706\",\n      };\n    case \"info\":\n      return {\n        background: \"#dbeafe\",\n        border: \"#2563eb\",\n        text: \"#1e3a8a\",\n        icon: \"#2563eb\",\n      };\n  }\n}\n\nexport function useToast() {\n  const context = useContext(ToastContext);\n  if (!context) {\n    throw new Error(\"useToast must be used within a ToastProvider\");\n  }\n  return context;\n}\n\nexport function ToastProvider({\n  enabled,\n  children,\n}: {\n  enabled: boolean;\n  children: React.ReactNode;\n}) {\n  const [toasts, setToasts] = useState<Toast[]>([]);\n  const [bannerError, setBannerErrorState] = useState<CopilotKitError | null>(null);\n\n  const removeToast = useCallback((id: string) => {\n    setToasts((prev) => prev.filter((toast) => toast.id !== id));\n  }, []);\n\n  const addToast = useCallback(\n    (toast: PartialBy<Toast, \"id\">) => {\n      // Respect the enabled flag for ALL toasts\n      if (!enabled) {\n        return;\n      }\n\n      const id = toast.id ?? Math.random().toString(36).substring(2, 9);\n\n      setToasts((currentToasts) => {\n        if (currentToasts.find((toast) => toast.id === id)) return currentToasts;\n        return [...currentToasts, { ...toast, id }];\n      });\n\n      if (toast.duration) {\n        setTimeout(() => {\n          removeToast(id);\n        }, toast.duration);\n      }\n    },\n    [enabled, removeToast],\n  );\n\n  const setBannerError = useCallback(\n    (error: CopilotKitError | null) => {\n      // Respect the enabled flag for ALL errors\n      if (!enabled && error !== null) {\n        return;\n      }\n      setBannerErrorState(error);\n    },\n    [enabled],\n  );\n\n  const addGraphQLErrorsToast = useCallback((errors: GraphQLError[]) => {\n    // DEPRECATED: All errors now route to banners for consistency\n    console.warn(\"addGraphQLErrorsToast is deprecated. All errors now show as banners.\");\n    // Function kept for backward compatibility - does nothing\n  }, []);\n\n  const value = {\n    toasts,\n    addToast,\n    addGraphQLErrorsToast,\n    removeToast,\n    enabled,\n    bannerError,\n    setBannerError,\n  };\n\n  return (\n    <ToastContext.Provider value={value}>\n      {/* Banner Error Display */}\n      {bannerError &&\n        (() => {\n          const severity = getErrorSeverity(bannerError);\n          const colors = getErrorColors(severity);\n\n          return (\n            <div\n              style={{\n                position: \"fixed\",\n                bottom: \"20px\",\n                left: \"50%\",\n                transform: \"translateX(-50%)\",\n                zIndex: 9999,\n                backgroundColor: colors.background,\n                border: `1px solid ${colors.border}`,\n                borderLeft: `4px solid ${colors.border}`,\n                borderRadius: \"8px\",\n                padding: \"12px 16px\",\n                fontSize: \"13px\",\n                boxShadow: \"0 4px 12px rgba(0, 0, 0, 0.15)\",\n                backdropFilter: \"blur(8px)\",\n                maxWidth: \"min(90vw, 700px)\",\n                width: \"100%\",\n                boxSizing: \"border-box\",\n                overflow: \"hidden\",\n              }}\n            >\n              <div\n                style={{\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                  alignItems: \"center\",\n                  gap: \"10px\",\n                }}\n              >\n                <div\n                  style={{\n                    display: \"flex\",\n                    alignItems: \"center\",\n                    gap: \"8px\",\n                    flex: 1,\n                    minWidth: 0,\n                  }}\n                >\n                  <div\n                    style={{\n                      width: \"12px\",\n                      height: \"12px\",\n                      borderRadius: \"50%\",\n                      backgroundColor: colors.border,\n                      flexShrink: 0,\n                    }}\n                  />\n                  <div\n                    style={{\n                      display: \"flex\",\n                      alignItems: \"center\",\n                      gap: \"10px\",\n                      flex: 1,\n                      minWidth: 0,\n                    }}\n                  >\n                    <div\n                      style={{\n                        color: colors.text,\n                        lineHeight: \"1.4\",\n                        fontWeight: \"400\",\n                        fontSize: \"13px\",\n                        flex: 1,\n                        wordBreak: \"break-all\",\n                        overflowWrap: \"break-word\",\n                        maxWidth: \"550px\",\n                        overflow: \"hidden\",\n                        display: \"-webkit-box\",\n                        WebkitLineClamp: 10,\n                        WebkitBoxOrient: \"vertical\",\n                      }}\n                    >\n                      {(() => {\n                        let message = bannerError.message;\n\n                        // Try to extract the useful message from JSON first\n                        const jsonMatch = message.match(/'message':\\s*'([^']+)'/);\n                        if (jsonMatch) {\n                          return jsonMatch[1]; // Return the actual error message\n                        }\n\n                        // Strip technical garbage but keep the meaningful message\n                        message = message.split(\" - \")[0]; // Remove everything after \" - {\"\n                        message = message.split(\": Error code\")[0]; // Remove \": Error code: 401\"\n                        message = message.replace(/:\\s*\\d{3}$/, \"\"); // Remove trailing \": 401\"\n                        message = message.replace(/See more:.*$/g, \"\"); // Remove \"See more\" links\n                        message = message.trim();\n\n                        // If it's still garbage (contains { or '), use fallback\n                        // if (message.includes(\"{\") || message.includes(\"'\")) {\n                        //   return \"Configuration error.... Please check your setup.\";\n                        // }\n\n                        return message || \"Configuration error occurred.\";\n                      })()}\n                    </div>\n\n                    {(() => {\n                      const message = bannerError.message;\n                      const markdownLinkRegex = /\\[([^\\]]+)\\]\\(([^)]+)\\)/g;\n                      const plainUrlRegex = /(https?:\\/\\/[^\\s)]+)/g;\n\n                      // Extract the first URL found\n                      let url = null;\n                      let buttonText = \"See More\";\n\n                      // Check for markdown links first\n                      const markdownMatch = markdownLinkRegex.exec(message);\n                      if (markdownMatch) {\n                        url = markdownMatch[2];\n                        buttonText = \"See More\";\n                      } else {\n                        // Check for plain URLs\n                        const urlMatch = plainUrlRegex.exec(message);\n                        if (urlMatch) {\n                          url = urlMatch[0].replace(/[.,;:'\"]*$/, \"\"); // Remove trailing punctuation\n                          buttonText = \"See More\";\n                        }\n                      }\n\n                      if (!url) return null;\n\n                      return (\n                        <button\n                          onClick={() => window.open(url, \"_blank\", \"noopener,noreferrer\")}\n                          style={{\n                            background: colors.border,\n                            color: \"white\",\n                            border: \"none\",\n                            borderRadius: \"5px\",\n                            padding: \"4px 10px\",\n                            fontSize: \"11px\",\n                            fontWeight: \"500\",\n                            cursor: \"pointer\",\n                            transition: \"all 0.2s ease\",\n                            flexShrink: 0,\n                          }}\n                          onMouseEnter={(e) => {\n                            e.currentTarget.style.opacity = \"0.9\";\n                            e.currentTarget.style.transform = \"translateY(-1px)\";\n                          }}\n                          onMouseLeave={(e) => {\n                            e.currentTarget.style.opacity = \"1\";\n                            e.currentTarget.style.transform = \"translateY(0)\";\n                          }}\n                        >\n                          {buttonText}\n                        </button>\n                      );\n                    })()}\n                  </div>\n                </div>\n                <button\n                  onClick={() => setBannerError(null)}\n                  style={{\n                    background: \"transparent\",\n                    border: \"none\",\n                    color: colors.text,\n                    cursor: \"pointer\",\n                    padding: \"2px\",\n                    borderRadius: \"3px\",\n                    fontSize: \"14px\",\n                    lineHeight: \"1\",\n                    opacity: 0.6,\n                    transition: \"all 0.2s ease\",\n                    flexShrink: 0,\n                  }}\n                  title=\"Dismiss\"\n                  onMouseEnter={(e) => {\n                    e.currentTarget.style.opacity = \"1\";\n                    e.currentTarget.style.background = \"rgba(0, 0, 0, 0.05)\";\n                  }}\n                  onMouseLeave={(e) => {\n                    e.currentTarget.style.opacity = \"0.6\";\n                    e.currentTarget.style.background = \"transparent\";\n                  }}\n                >\n                  ×\n                </button>\n              </div>\n            </div>\n          );\n        })()}\n\n      {/* Toast Display - Deprecated: All errors now show as banners */}\n      {children}\n    </ToastContext.Provider>\n  );\n}\n\n// Toast component removed - all errors now show as banners for consistency\n"],"names":["toast"],"mappings":"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"}},
    {"offset": {"line": 492, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40copilotkit/react-core/src/components/error-boundary/error-utils.tsx"],"sourcesContent":["import React, { useCallback } from \"react\";\nimport { GraphQLError } from \"@copilotkit/runtime-client-gql\";\nimport { useToast } from \"../toast/toast-provider\";\nimport { ExclamationMarkIcon } from \"../toast/exclamation-mark-icon\";\nimport ReactMarkdown from \"react-markdown\";\n\ninterface OriginalError {\n  message?: string;\n  stack?: string;\n}\n\nexport function ErrorToast({ errors }: { errors: (Error | GraphQLError)[] }) {\n  const errorsToRender = errors.map((error, idx) => {\n    const originalError =\n      \"extensions\" in error ? (error.extensions?.originalError as undefined | OriginalError) : {};\n    const message = originalError?.message ?? error.message;\n    const code = \"extensions\" in error ? (error.extensions?.code as string) : null;\n\n    return (\n      <div\n        key={idx}\n        style={{\n          marginTop: idx === 0 ? 0 : 10,\n          marginBottom: 14,\n        }}\n      >\n        <ExclamationMarkIcon style={{ marginBottom: 4 }} />\n\n        {code && (\n          <div\n            style={{\n              fontWeight: \"600\",\n              marginBottom: 4,\n            }}\n          >\n            Copilot Runtime Error:{\" \"}\n            <span style={{ fontFamily: \"monospace\", fontWeight: \"normal\" }}>{code}</span>\n          </div>\n        )}\n        <ReactMarkdown>{message}</ReactMarkdown>\n      </div>\n    );\n  });\n  return (\n    <div\n      style={{\n        fontSize: \"13px\",\n        maxWidth: \"600px\",\n      }}\n    >\n      {errorsToRender}\n      <div style={{ fontSize: \"11px\", opacity: 0.75 }}>\n        NOTE: This error only displays during local development.\n      </div>\n    </div>\n  );\n}\n\nexport function useErrorToast() {\n  const { addToast } = useToast();\n\n  return useCallback(\n    (errors: (Error | GraphQLError)[]) => {\n      const errorId = errors\n        .map((err) => {\n          const message =\n            \"extensions\" in err\n              ? (err.extensions?.originalError as any)?.message || err.message\n              : err.message;\n          const stack = err.stack || \"\";\n          return btoa(message + stack).slice(0, 32); // Create hash from message + stack\n        })\n        .join(\"|\");\n\n      addToast({\n        type: \"error\",\n        id: errorId, // Toast libraries typically dedupe by id\n        message: <ErrorToast errors={errors} />,\n      });\n    },\n    [addToast],\n  );\n}\n\nexport function useAsyncCallback<T extends (...args: any[]) => Promise<any>>(\n  callback: T,\n  deps: Parameters<typeof useCallback>[1],\n) {\n  const addErrorToast = useErrorToast();\n  return useCallback(async (...args: Parameters<T>) => {\n    try {\n      return await callback(...args);\n    } catch (error) {\n      console.error(\"Error in async callback:\", error);\n      // @ts-ignore\n      addErrorToast([error]);\n      throw error;\n    }\n  }, deps);\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 619, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40copilotkit/react-core/src/components/usage-banner.tsx"],"sourcesContent":["import {\n  Severity,\n  CopilotKitError,\n  ErrorVisibility,\n  CopilotKitErrorCode,\n} from \"@copilotkit/shared\";\nimport React from \"react\";\n\ninterface UsageBannerProps {\n  severity?: Severity;\n  message?: string | React.ReactNode;\n  onClose?: () => void;\n  actions?: {\n    primary?: {\n      label: string;\n      onClick: () => void;\n    };\n    secondary?: {\n      label: string;\n      onClick: () => void;\n    };\n  };\n}\n\nexport function UsageBanner({\n  severity = Severity.CRITICAL,\n  message = \"\",\n  onClose,\n  actions,\n}: UsageBannerProps) {\n  if (!message || !severity) {\n    return null;\n  }\n\n  const themes = {\n    [Severity.INFO]: {\n      bg: \"#f8fafc\",\n      border: \"#e2e8f0\",\n      text: \"#475569\",\n      accent: \"#3b82f6\",\n    },\n    [Severity.WARNING]: {\n      bg: \"#fffbeb\",\n      border: \"#fbbf24\",\n      text: \"#92400e\",\n      accent: \"#f59e0b\",\n    },\n    [Severity.CRITICAL]: {\n      bg: \"#fef2f2\",\n      border: \"#fecaca\",\n      text: \"#dc2626\",\n      accent: \"#ef4444\",\n    },\n  };\n\n  const theme = themes[severity];\n\n  return (\n    <>\n      <style>\n        {`\n          @keyframes slideUp {\n            from { opacity: 0; transform: translateX(-50%) translateY(8px); }\n            to { opacity: 1; transform: translateX(-50%) translateY(0); }\n          }\n          \n          .usage-banner {\n            position: fixed;\n            bottom: 24px;\n            left: 50%;\n            transform: translateX(-50%);\n            width: min(600px, calc(100vw - 32px));\n            z-index: 10000;\n            animation: slideUp 0.2s cubic-bezier(0.16, 1, 0.3, 1);\n          }\n          \n          .banner-content {\n            background: linear-gradient(135deg, ${theme.bg} 0%, ${theme.bg}f5 100%);\n            border: 1px solid ${theme.border};\n            border-radius: 12px;\n            padding: 18px 20px;\n            box-shadow: \n              0 4px 24px rgba(0, 0, 0, 0.08),\n              0 2px 8px rgba(0, 0, 0, 0.04),\n              inset 0 1px 0 rgba(255, 255, 255, 0.7);\n            display: flex;\n            align-items: center;\n            gap: 16px;\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;\n            backdrop-filter: blur(12px);\n            position: relative;\n            overflow: hidden;\n          }\n          \n          .banner-content::before {\n            content: '';\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            height: 1px;\n            background: linear-gradient(90deg, transparent, ${theme.accent}40, transparent);\n          }\n          \n          .banner-message {\n            color: ${theme.text};\n            font-size: 14px;\n            line-height: 1.5;\n            font-weight: 500;\n            flex: 1;\n            letter-spacing: -0.01em;\n          }\n          \n          .close-btn {\n            background: rgba(0, 0, 0, 0.05);\n            border: none;\n            color: ${theme.text};\n            cursor: pointer;\n            padding: 0;\n            border-radius: 6px;\n            opacity: 0.6;\n            transition: all 0.15s cubic-bezier(0.16, 1, 0.3, 1);\n            font-size: 14px;\n            line-height: 1;\n            flex-shrink: 0;\n            width: 24px;\n            height: 24px;\n            display: flex;\n            align-items: center;\n            justify-content: center;\n          }\n          \n          .close-btn:hover {\n            opacity: 1;\n            background: rgba(0, 0, 0, 0.08);\n            transform: scale(1.05);\n          }\n          \n          .btn-primary {\n            background: linear-gradient(135deg, ${theme.accent} 0%, ${theme.accent}e6 100%);\n            color: white;\n            border: none;\n            border-radius: 8px;\n            padding: 10px 18px;\n            font-size: 13px;\n            font-weight: 600;\n            cursor: pointer;\n            transition: all 0.15s cubic-bezier(0.16, 1, 0.3, 1);\n            font-family: inherit;\n            flex-shrink: 0;\n            box-shadow: \n              0 2px 8px ${theme.accent}30,\n              inset 0 1px 0 rgba(255, 255, 255, 0.2);\n            letter-spacing: -0.01em;\n          }\n          \n          .btn-primary:hover {\n            transform: translateY(-1px) scale(1.02);\n            box-shadow: \n              0 4px 12px ${theme.accent}40,\n              inset 0 1px 0 rgba(255, 255, 255, 0.25);\n          }\n          \n          .btn-primary:active {\n            transform: translateY(0) scale(0.98);\n            transition: all 0.08s cubic-bezier(0.16, 1, 0.3, 1);\n          }\n          \n          @media (max-width: 640px) {\n            .usage-banner {\n              width: calc(100vw - 24px);\n            }\n            \n            .banner-content {\n              padding: 16px;\n              gap: 12px;\n            }\n            \n            .banner-message {\n              font-size: 13px;\n              line-height: 1.45;\n            }\n            \n            .btn-primary {\n              padding: 8px 14px;\n              font-size: 12px;\n            }\n            \n            .close-btn {\n              width: 22px;\n              height: 22px;\n              font-size: 12px;\n            }\n          }\n        `}\n      </style>\n\n      <div className=\"usage-banner\">\n        <div className=\"banner-content\">\n          <div className=\"banner-message\">{message}</div>\n          {actions?.primary && (\n            <button className=\"btn-primary\" onClick={actions.primary.onClick}>\n              {actions.primary.label}\n            </button>\n          )}\n          {onClose && (\n            <button className=\"close-btn\" onClick={onClose} title=\"Close\">\n              ×\n            </button>\n          )}\n        </div>\n      </div>\n    </>\n  );\n}\n\n// Get action button based on error type\nexport const getErrorActions = (error: CopilotKitError) => {\n  switch (error.code) {\n    case CopilotKitErrorCode.MISSING_PUBLIC_API_KEY_ERROR:\n      return {\n        primary: {\n          label: \"Show me how\",\n          onClick: () =>\n            window.open(\n              \"https://docs.copilotkit.ai/premium#how-do-i-get-access-to-premium-features\",\n              \"_blank\",\n              \"noopener,noreferrer\",\n            ),\n        },\n      };\n    case CopilotKitErrorCode.UPGRADE_REQUIRED_ERROR:\n      return {\n        primary: {\n          label: \"Upgrade\",\n          onClick: () =>\n            window.open(\"https://cloud.copilotkit.ai\", \"_blank\", \"noopener,noreferrer\"),\n        },\n      };\n    default:\n      return undefined;\n  }\n};\n\nexport function renderCopilotKitUsage(error: CopilotKitError, onClose?: () => void) {\n  // Route based on error visibility level\n  if (error.visibility !== ErrorVisibility.BANNER) {\n    return null;\n  }\n\n  return (\n    <UsageBanner\n      severity={error.severity || Severity.CRITICAL}\n      message={error.message}\n      onClose={onClose}\n      actions={getErrorActions(error)}\n    />\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 859, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40copilotkit/react-core/src/components/error-boundary/error-boundary.tsx"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { Severity, CopilotKitError } from \"@copilotkit/shared\";\nimport { StatusChecker } from \"../../lib/status-checker\";\nimport { getErrorActions, UsageBanner } from \"../usage-banner\";\nimport { useErrorToast } from \"./error-utils\";\n\nconst statusChecker = new StatusChecker();\n\ninterface Props {\n  children: React.ReactNode;\n  publicApiKey?: string;\n  showUsageBanner?: boolean;\n}\n\ninterface State {\n  hasError: boolean;\n  error?: CopilotKitError;\n  status?: {\n    severity: Severity;\n    message: string;\n  };\n}\n\nexport class CopilotErrorBoundary extends React.Component<Props, State> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      hasError: false,\n    };\n  }\n\n  static getDerivedStateFromError(error: CopilotKitError): State {\n    return { hasError: true, error };\n  }\n\n  componentDidMount() {\n    if (this.props.publicApiKey) {\n      statusChecker.start(this.props.publicApiKey, (newStatus) => {\n        this.setState((prevState) => {\n          if (newStatus?.severity !== prevState.status?.severity) {\n            return { status: newStatus ?? undefined };\n          }\n          return null;\n        });\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    statusChecker.stop();\n  }\n\n  componentDidCatch(error: Error, errorInfo: React.ErrorInfo) {\n    console.error(\"CopilotKit Error:\", error, errorInfo);\n  }\n\n  render() {\n    if (this.state.hasError) {\n      if (this.state.error instanceof CopilotKitError) {\n        return (\n          <>\n            {this.props.children}\n            {this.props.showUsageBanner && (\n              <UsageBanner\n                severity={this.state.status?.severity ?? this.state.error.severity}\n                message={this.state.status?.message ?? this.state.error.message}\n                actions={getErrorActions(this.state.error)}\n              />\n            )}\n          </>\n        );\n      }\n      throw this.state.error;\n    }\n\n    return this.props.children;\n  }\n}\n\nexport function ErrorToast({ error, children }: { error?: Error; children: React.ReactNode }) {\n  const addErrorToast = useErrorToast();\n\n  useEffect(() => {\n    if (error) {\n      addErrorToast([error]);\n    }\n  }, [error, addErrorToast]);\n\n  if (!error) throw error;\n  return children;\n}\n"],"names":[],"mappings":";;;;;;;;;;AAAA,OAAO,SAAS,iBAAiB;AACjC,SAAmB,uBAAuB;AA2DhC,mBAGI,KAHJ;;;;;;;AAtDV,IAAM,gBAAgB,IAAI,+LAAA,CAAc;AAiBjC,IAAM,uBAAN,cAAmC,wKAAA,CAAM,SAAA,CAAwB;IACtE,YAAY,KAAA,CAAc;QACxB,KAAA,CAAM,KAAK;QACX,IAAA,CAAK,KAAA,GAAQ;YACX,UAAU;QACZ;IACF;IAEA,OAAO,yBAAyB,KAAA,EAA+B;QAC7D,OAAO;YAAE,UAAU;YAAM;QAAM;IACjC;IAEA,oBAAoB;QAClB,IAAI,IAAA,CAAK,KAAA,CAAM,YAAA,EAAc;YAC3B,cAAc,KAAA,CAAM,IAAA,CAAK,KAAA,CAAM,YAAA,EAAc,CAAC,cAAc;gBAC1D,IAAA,CAAK,QAAA,CAAS,CAAC,cAAc;oBAtCrC,IAAA;oBAuCU,IAAA,CAAI,aAAA,OAAA,KAAA,IAAA,UAAW,QAAA,MAAA,CAAA,CAAa,KAAA,UAAU,MAAA,KAAV,OAAA,KAAA,IAAA,GAAkB,QAAA,GAAU;wBACtD,OAAO;4BAAE,QAAQ,aAAA,OAAA,YAAa,KAAA;wBAAU;oBAC1C;oBACA,OAAO;gBACT,CAAC;YACH,CAAC;QACH;IACF;IAEA,uBAAuB;QACrB,cAAc,IAAA,CAAK;IACrB;IAEA,kBAAkB,KAAA,EAAc,SAAA,EAA4B;QAC1D,QAAQ,KAAA,CAAM,qBAAqB,OAAO,SAAS;IACrD;IAEA,SAAS;QAxDX,IAAA,IAAA,IAAA,IAAA;QAyDI,IAAI,IAAA,CAAK,KAAA,CAAM,QAAA,EAAU;YACvB,IAAI,IAAA,CAAK,KAAA,CAAM,KAAA,YAAiB,0LAAA,EAAiB;gBAC/C,OACE,aAAA,GAAA,IAAA,8KAAA,EAAA,kLAAA,EAAA;oBACG,UAAA;wBAAA,IAAA,CAAK,KAAA,CAAM,QAAA;wBACX,IAAA,CAAK,KAAA,CAAM,eAAA,IACV,aAAA,GAAA,IAAA,6KAAA,EAAC,6LAAA,EAAA;4BACC,UAAA,CAAU,KAAA,CAAA,KAAA,IAAA,CAAK,KAAA,CAAM,MAAA,KAAX,OAAA,KAAA,IAAA,GAAmB,QAAA,KAAnB,OAAA,KAA+B,IAAA,CAAK,KAAA,CAAM,KAAA,CAAM,QAAA;4BAC1D,SAAA,CAAS,KAAA,CAAA,KAAA,IAAA,CAAK,KAAA,CAAM,MAAA,KAAX,OAAA,KAAA,IAAA,GAAmB,OAAA,KAAnB,OAAA,KAA8B,IAAA,CAAK,KAAA,CAAM,KAAA,CAAM,OAAA;4BACxD,aAAS,iMAAA,EAAgB,IAAA,CAAK,KAAA,CAAM,KAAK;wBAAA;qBAC3C;gBAAA,CAEJ;YAEJ;YACA,MAAM,IAAA,CAAK,KAAA,CAAM,KAAA;QACnB;QAEA,OAAO,IAAA,CAAK,KAAA,CAAM,QAAA;IACpB;AACF;AAEO,SAAS,WAAW,EAAE,KAAA,EAAO,QAAA,CAAS,CAAA,EAAiD;IAC5F,MAAM,oBAAgB,+LAAA,CAAc;IAEpC,IAAA,0KAAA;gCAAU,MAAM;YACd,IAAI,OAAO;gBACT,cAAc;oBAAC,KAAK;iBAAC;YACvB;QACF;+BAAG;QAAC;QAAO,aAAa;KAAC;IAEzB,IAAI,CAAC,OAAO,MAAM;IAClB,OAAO;AACT"}},
    {"offset": {"line": 956, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40copilotkit/react-core/src/utils/dev-console.ts"],"sourcesContent":["function isLocalhost(): boolean {\n  if (typeof window === \"undefined\") return false;\n\n  return (\n    window.location.hostname === \"localhost\" ||\n    window.location.hostname === \"127.0.0.1\" ||\n    window.location.hostname === \"0.0.0.0\"\n  );\n}\n\nexport function shouldShowDevConsole(showDevConsole?: boolean): boolean {\n  // If explicitly set, use that value\n  if (showDevConsole !== undefined) {\n    return showDevConsole;\n  }\n\n  // If not set, default to true on localhost\n  return isLocalhost();\n}\n"],"names":[],"mappings":";;;;;AAAA,SAAS,cAAuB;IAC9B,IAAI,OAAO,WAAW,aAAa,OAAO;IAE1C,OACE,OAAO,QAAA,CAAS,QAAA,KAAa,eAC7B,OAAO,QAAA,CAAS,QAAA,KAAa,eAC7B,OAAO,QAAA,CAAS,QAAA,KAAa;AAEjC;AAEO,SAAS,qBAAqB,cAAA,EAAmC;IAEtE,IAAI,mBAAmB,KAAA,GAAW;QAChC,OAAO;IACT;IAGA,OAAO,YAAY;AACrB"}},
    {"offset": {"line": 977, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40copilotkit/react-core/src/context/copilot-context.tsx"],"sourcesContent":["import {\n  CopilotCloudConfig,\n  FunctionCallHandler,\n  CopilotErrorHandler,\n  CopilotKitError,\n} from \"@copilotkit/shared\";\nimport {\n  ActionRenderProps,\n  CatchAllActionRenderProps,\n  FrontendAction,\n} from \"../types/frontend-action\";\nimport React from \"react\";\nimport { TreeNodeId, Tree } from \"../hooks/use-tree\";\nimport { DocumentPointer } from \"../types\";\nimport { CopilotChatSuggestionConfiguration } from \"../types/chat-suggestion-configuration\";\nimport { CoAgentStateRender, CoAgentStateRenderProps } from \"../types/coagent-action\";\nimport { CoagentState } from \"../types/coagent-state\";\nimport {\n  CopilotRuntimeClient,\n  ExtensionsInput,\n  ForwardedParametersInput,\n} from \"@copilotkit/runtime-client-gql\";\nimport { Agent } from \"@copilotkit/runtime-client-gql\";\nimport {\n  LangGraphInterruptRender,\n  LangGraphInterruptActionSetter,\n  QueuedInterruptEvent,\n} from \"../types/interrupt-action\";\n\n/**\n * Interface for the configuration of the Copilot API.\n */\nexport interface CopilotApiConfig {\n  /**\n   * The public API key for Copilot Cloud.\n   */\n  publicApiKey?: string;\n\n  /**\n   * The configuration for Copilot Cloud.\n   */\n  cloud?: CopilotCloudConfig;\n\n  /**\n   * The endpoint for the chat API.\n   */\n  chatApiEndpoint: string;\n\n  /**\n   * The endpoint for the Copilot transcribe audio service.\n   */\n  transcribeAudioUrl?: string;\n\n  /**\n   * The endpoint for the Copilot text to speech service.\n   */\n  textToSpeechUrl?: string;\n\n  /**\n   * additional headers to be sent with the request\n   * @default {}\n   * @example\n   * ```\n   * {\n   *   'Authorization': 'Bearer your_token_here'\n   * }\n   * ```\n   */\n  headers: Record<string, string>;\n\n  /**\n   * Custom properties to be sent with the request\n   * @default {}\n   * @example\n   * ```\n   * {\n   *   'user_id': 'user_id'\n   * }\n   * ```\n   */\n  properties?: Record<string, any>;\n\n  /**\n   * Indicates whether the user agent should send or receive cookies from the other domain\n   * in the case of cross-origin requests.\n   */\n  credentials?: RequestCredentials;\n\n  /**\n   * Optional configuration for connecting to Model Context Protocol (MCP) servers.\n   * This is typically derived from the CopilotKitProps and used internally.\n   * @experimental\n   */\n  mcpServers?: Array<{ endpoint: string; apiKey?: string }>;\n}\n\nexport type InChatRenderFunction<TProps = ActionRenderProps<any> | CatchAllActionRenderProps<any>> =\n  (props: TProps) => string | React.JSX.Element;\nexport type CoagentInChatRenderFunction = (\n  props: CoAgentStateRenderProps<any>,\n) => string | React.JSX.Element | undefined | null;\n\nexport interface ChatComponentsCache {\n  actions: Record<string, InChatRenderFunction | string>;\n  coAgentStateRenders: Record<string, CoagentInChatRenderFunction | string>;\n}\n\nexport interface AgentSession {\n  agentName: string;\n  threadId?: string;\n  nodeName?: string;\n}\n\nexport interface AuthState {\n  status: \"authenticated\" | \"unauthenticated\";\n  authHeaders: Record<string, string>;\n  userId?: string;\n  metadata?: Record<string, any>;\n}\n\nexport type ActionName = string;\nexport type ContextTree = Tree;\n\nexport interface CopilotContextParams {\n  // function-calling\n  actions: Record<string, FrontendAction<any>>;\n  setAction: (id: string, action: FrontendAction<any>) => void;\n  removeAction: (id: string) => void;\n\n  // registered actions for component-based rendering\n  setRegisteredActions: (actionConfig: any) => string;\n  removeRegisteredAction: (actionKey: string) => void;\n\n  chatComponentsCache: React.RefObject<ChatComponentsCache>;\n\n  getFunctionCallHandler: (\n    customEntryPoints?: Record<string, FrontendAction<any>>,\n  ) => FunctionCallHandler;\n\n  // text context\n  addContext: (context: string, parentId?: string, categories?: string[]) => TreeNodeId;\n  removeContext: (id: TreeNodeId) => void;\n  getAllContext: () => Tree;\n  getContextString: (documents: DocumentPointer[], categories: string[]) => string;\n\n  // document context\n  addDocumentContext: (documentPointer: DocumentPointer, categories?: string[]) => TreeNodeId;\n  removeDocumentContext: (documentId: string) => void;\n  getDocumentsContext: (categories: string[]) => DocumentPointer[];\n\n  isLoading: boolean;\n  setIsLoading: React.Dispatch<React.SetStateAction<boolean>>;\n\n  chatSuggestionConfiguration: { [key: string]: CopilotChatSuggestionConfiguration };\n  addChatSuggestionConfiguration: (\n    id: string,\n    suggestion: CopilotChatSuggestionConfiguration,\n  ) => void;\n  removeChatSuggestionConfiguration: (id: string) => void;\n\n  chatInstructions: string;\n  setChatInstructions: React.Dispatch<React.SetStateAction<string>>;\n\n  additionalInstructions?: string[];\n  setAdditionalInstructions: React.Dispatch<React.SetStateAction<string[]>>;\n\n  // api endpoints\n  copilotApiConfig: CopilotApiConfig;\n\n  showDevConsole: boolean;\n\n  // agents\n  coagentStates: Record<string, CoagentState>;\n  setCoagentStates: React.Dispatch<React.SetStateAction<Record<string, CoagentState>>>;\n  coagentStatesRef: React.RefObject<Record<string, CoagentState>>;\n  setCoagentStatesWithRef: (\n    value:\n      | Record<string, CoagentState>\n      | ((prev: Record<string, CoagentState>) => Record<string, CoagentState>),\n  ) => void;\n\n  agentSession: AgentSession | null;\n  setAgentSession: React.Dispatch<React.SetStateAction<AgentSession | null>>;\n\n  agentLock: string | null;\n\n  threadId: string;\n  setThreadId: React.Dispatch<React.SetStateAction<string>>;\n\n  runId: string | null;\n  setRunId: React.Dispatch<React.SetStateAction<string | null>>;\n\n  // The chat abort controller can be used to stop generation globally,\n  // i.e. when using `stop()` from `useChat`\n  chatAbortControllerRef: React.MutableRefObject<AbortController | null>;\n\n  /**\n   * The forwarded parameters to use for the task.\n   */\n  forwardedParameters?: Partial<Pick<ForwardedParametersInput, \"temperature\">>;\n  availableAgents: Agent[];\n\n  /**\n   * The auth states for the CopilotKit.\n   */\n  authStates_c?: Record<ActionName, AuthState>;\n  setAuthStates_c?: React.Dispatch<React.SetStateAction<Record<ActionName, AuthState>>>;\n\n  /**\n   * The auth config for the CopilotKit.\n   */\n  authConfig_c?: {\n    SignInComponent: React.ComponentType<{\n      onSignInComplete: (authState: AuthState) => void;\n    }>;\n  };\n\n  extensions: ExtensionsInput;\n  setExtensions: React.Dispatch<React.SetStateAction<ExtensionsInput>>;\n  interruptActions: Record<string, LangGraphInterruptRender>;\n  setInterruptAction: LangGraphInterruptActionSetter;\n  removeInterruptAction: (actionId: string) => void;\n  interruptEventQueue: Record<string, QueuedInterruptEvent[]>;\n  addInterruptEvent: (queuedEvent: QueuedInterruptEvent) => void;\n  resolveInterruptEvent: (threadId: string, eventId: string, response: string) => void;\n\n  /**\n   * Optional trace handler for comprehensive debugging and observability.\n   */\n  onError: CopilotErrorHandler;\n\n  // banner error state\n  bannerError: CopilotKitError | null;\n  setBannerError: React.Dispatch<React.SetStateAction<CopilotKitError | null>>;\n  // Internal error handlers\n  // These are used to handle errors that occur during the execution of the chat.\n  // They are not intended for use by the developer. A component can register itself an error listener to be activated somewhere else as needed\n  internalErrorHandlers: Record<string, CopilotErrorHandler>;\n  setInternalErrorHandler: (handler: Record<string, CopilotErrorHandler>) => void;\n  removeInternalErrorHandler: (id: string) => void;\n}\n\nconst emptyCopilotContext: CopilotContextParams = {\n  actions: {},\n  setAction: () => {},\n  removeAction: () => {},\n\n  setRegisteredActions: () => \"\",\n  removeRegisteredAction: () => {},\n\n  chatComponentsCache: { current: { actions: {}, coAgentStateRenders: {} } },\n  getContextString: (documents: DocumentPointer[], categories: string[]) =>\n    returnAndThrowInDebug(\"\"),\n  addContext: () => \"\",\n  removeContext: () => {},\n  getAllContext: () => [],\n\n  getFunctionCallHandler: () => returnAndThrowInDebug(async () => {}),\n\n  isLoading: false,\n  setIsLoading: () => returnAndThrowInDebug(false),\n\n  chatInstructions: \"\",\n  setChatInstructions: () => returnAndThrowInDebug(\"\"),\n\n  additionalInstructions: [],\n  setAdditionalInstructions: () => returnAndThrowInDebug([]),\n\n  getDocumentsContext: (categories: string[]) => returnAndThrowInDebug([]),\n  addDocumentContext: () => returnAndThrowInDebug(\"\"),\n  removeDocumentContext: () => {},\n\n  copilotApiConfig: new (class implements CopilotApiConfig {\n    get chatApiEndpoint(): string {\n      throw new Error(\"Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!\");\n    }\n\n    get headers(): Record<string, string> {\n      return {};\n    }\n    get body(): Record<string, any> {\n      return {};\n    }\n  })(),\n\n  chatSuggestionConfiguration: {},\n  addChatSuggestionConfiguration: () => {},\n  removeChatSuggestionConfiguration: () => {},\n  showDevConsole: false,\n  coagentStates: {},\n  setCoagentStates: () => {},\n  coagentStatesRef: { current: {} },\n  setCoagentStatesWithRef: () => {},\n  agentSession: null,\n  setAgentSession: () => {},\n  forwardedParameters: {},\n  agentLock: null,\n  threadId: \"\",\n  setThreadId: () => {},\n  runId: null,\n  setRunId: () => {},\n  chatAbortControllerRef: { current: null },\n  availableAgents: [],\n  extensions: {},\n  setExtensions: () => {},\n  interruptActions: {},\n  setInterruptAction: () => {},\n  removeInterruptAction: () => {},\n  interruptEventQueue: {},\n  addInterruptEvent: () => {},\n  resolveInterruptEvent: () => {},\n  onError: () => {},\n  bannerError: null,\n  setBannerError: () => {},\n  internalErrorHandlers: {},\n  setInternalErrorHandler: () => {},\n  removeInternalErrorHandler: () => {},\n};\n\nexport const CopilotContext = React.createContext<CopilotContextParams>(emptyCopilotContext);\n\nexport function useCopilotContext(): CopilotContextParams {\n  const context = React.useContext(CopilotContext);\n  if (context === emptyCopilotContext) {\n    throw new Error(\"Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!\");\n  }\n  return context;\n}\n\nfunction returnAndThrowInDebug<T>(_value: T): T {\n  throw new Error(\"Remember to wrap your app in a `<CopilotKit> {...} </CopilotKit>` !!!\");\n}\n"],"names":[],"mappings":";;;;;;;;AAWA,OAAO,WAAW;;;AAuOlB,IAAM,sBAA4C;IAChD,SAAS,CAAC;IACV,WAAW,KAAO,CAAD;IACjB,cAAc,KAAO,CAAD;IAEpB,sBAAsB,IAAM;IAC5B,wBAAwB,KAAO,CAAD;IAE9B,qBAAqB;QAAE,SAAS;YAAE,SAAS,CAAC;YAAG,qBAAqB,CAAC;QAAE;IAAE;IACzE,kBAAkB,CAAC,WAA8B,aAC/C,sBAAsB,EAAE;IAC1B,YAAY,IAAM;IAClB,eAAe,KAAO,CAAD;IACrB,eAAe,IAAM,CAAC,CAAA;IAEtB,wBAAwB,IAAM,sBAAsB,QAAY,yLAAA,EAAA,KAAA,GAAA,MAAA,aAAC,EAAC;IAElE,WAAW;IACX,cAAc,IAAM,sBAAsB,KAAK;IAE/C,kBAAkB;IAClB,qBAAqB,IAAM,sBAAsB,EAAE;IAEnD,wBAAwB,CAAC,CAAA;IACzB,2BAA2B,IAAM,sBAAsB,CAAC,CAAC;IAEzD,qBAAqB,CAAC,aAAyB,sBAAsB,CAAC,CAAC;IACvE,oBAAoB,IAAM,sBAAsB,EAAE;IAClD,uBAAuB,KAAO,CAAD;IAE7B,kBAAkB,IAAK,MAAkC;QACvD,IAAI,kBAA0B;YAC5B,MAAM,IAAI,MAAM,uEAAuE;QACzF;QAEA,IAAI,UAAkC;YACpC,OAAO,CAAC;QACV;QACA,IAAI,OAA4B;YAC9B,OAAO,CAAC;QACV;IACF,EAAG;IAEH,6BAA6B,CAAC;IAC9B,gCAAgC,KAAO,CAAD;IACtC,mCAAmC,KAAO,CAAD;IACzC,gBAAgB;IAChB,eAAe,CAAC;IAChB,kBAAkB,KAAO,CAAD;IACxB,kBAAkB;QAAE,SAAS,CAAC;IAAE;IAChC,yBAAyB,KAAO,CAAD;IAC/B,cAAc;IACd,iBAAiB,KAAO,CAAD;IACvB,qBAAqB,CAAC;IACtB,WAAW;IACX,UAAU;IACV,aAAa,KAAO,CAAD;IACnB,OAAO;IACP,UAAU,KAAO,CAAD;IAChB,wBAAwB;QAAE,SAAS;IAAK;IACxC,iBAAiB,CAAC,CAAA;IAClB,YAAY,CAAC;IACb,eAAe,KAAO,CAAD;IACrB,kBAAkB,CAAC;IACnB,oBAAoB,KAAO,CAAD;IAC1B,uBAAuB,KAAO,CAAD;IAC7B,qBAAqB,CAAC;IACtB,mBAAmB,KAAO,CAAD;IACzB,uBAAuB,KAAO,CAAD;IAC7B,SAAS,KAAO,CAAD;IACf,aAAa;IACb,gBAAgB,KAAO,CAAD;IACtB,uBAAuB,CAAC;IACxB,yBAAyB,KAAO,CAAD;IAC/B,4BAA4B,KAAO,CAAD;AACpC;AAEO,IAAM,iBAAiB,wKAAA,CAAM,aAAA,CAAoC,mBAAmB;AAEpF,SAAS,oBAA0C;IACxD,MAAM,UAAU,wKAAA,CAAM,UAAA,CAAW,cAAc;IAC/C,IAAI,YAAY,qBAAqB;QACnC,MAAM,IAAI,MAAM,uEAAuE;IACzF;IACA,OAAO;AACT;AAEA,SAAS,sBAAyB,MAAA,EAAc;IAC9C,MAAM,IAAI,MAAM,uEAAuE;AACzF"}},
    {"offset": {"line": 1079, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40copilotkit/react-core/src/context/copilot-messages-context.tsx"],"sourcesContent":["/**\n * An internal context to separate the messages state (which is constantly changing) from the rest of CopilotKit context\n */\n\nimport { Message } from \"@copilotkit/runtime-client-gql\";\nimport React from \"react\";\nimport { Suggestion } from \"@copilotkitnext/core\";\n\nexport interface CopilotMessagesContextParams {\n  messages: Message[];\n  setMessages: React.Dispatch<React.SetStateAction<Message[]>>; // suggestions state\n  suggestions: Suggestion[];\n  setSuggestions: React.Dispatch<React.SetStateAction<Suggestion[]>>;\n}\n\nconst emptyCopilotContext: CopilotMessagesContextParams = {\n  messages: [],\n  setMessages: () => [],\n  // suggestions state\n  suggestions: [],\n  setSuggestions: () => [],\n};\n\nexport const CopilotMessagesContext =\n  React.createContext<CopilotMessagesContextParams>(emptyCopilotContext);\n\nexport function useCopilotMessagesContext(): CopilotMessagesContextParams {\n  const context = React.useContext(CopilotMessagesContext);\n  if (context === emptyCopilotContext) {\n    throw new Error(\n      \"A messages consuming component was not wrapped with `<CopilotMessages> {...} </CopilotMessages>`\",\n    );\n  }\n  return context;\n}\n"],"names":[],"mappings":";;;;;;;AAKA,OAAO,WAAW;;AAUlB,IAAM,sBAAoD;IACxD,UAAU,CAAC,CAAA;IACX,aAAa,IAAM,CAAC,CAAA;IAAA,oBAAA;IAEpB,aAAa,CAAC,CAAA;IACd,gBAAgB,IAAM,CAAC,CAAA;AACzB;AAEO,IAAM,yBACX,wKAAA,CAAM,aAAA,CAA4C,mBAAmB;AAEhE,SAAS,4BAA0D;IACxE,MAAM,UAAU,wKAAA,CAAM,UAAA,CAAW,sBAAsB;IACvD,IAAI,YAAY,qBAAqB;QACnC,MAAM,IAAI,MACR;IAEJ;IACA,OAAO;AACT"}},
    {"offset": {"line": 1109, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40copilotkit/react-core/src/components/copilot-provider/copilot-messages.tsx"],"sourcesContent":["/**\n * An internal context to separate the messages state (which is constantly changing) from the rest of CopilotKit context\n */\n\nimport {\n  ReactNode,\n  useEffect,\n  useState,\n  useRef,\n  useCallback,\n  useMemo,\n  createContext,\n  useContext,\n} from \"react\";\nimport { CopilotMessagesContext } from \"../../context/copilot-messages-context\";\nimport {\n  loadMessagesFromJsonRepresentation,\n  Message,\n  GraphQLError,\n} from \"@copilotkit/runtime-client-gql\";\nimport { useCopilotContext } from \"../../context/copilot-context\";\nimport { useToast } from \"../toast/toast-provider\";\nimport { shouldShowDevConsole } from \"../../utils/dev-console\";\nimport {\n  ErrorVisibility,\n  CopilotKitApiDiscoveryError,\n  CopilotKitRemoteEndpointDiscoveryError,\n  CopilotKitAgentDiscoveryError,\n  CopilotKitError,\n  CopilotKitErrorCode,\n} from \"@copilotkit/shared\";\nimport { Suggestion } from \"@copilotkitnext/core\";\n\n// Helper to determine if error should show as banner based on visibility and legacy patterns\nfunction shouldShowAsBanner(gqlError: GraphQLError): boolean {\n  const extensions = gqlError.extensions;\n  if (!extensions) return false;\n\n  // Priority 1: Check error code for discovery errors (these should always be banners)\n  const code = extensions.code as CopilotKitErrorCode;\n  if (\n    code === CopilotKitErrorCode.AGENT_NOT_FOUND ||\n    code === CopilotKitErrorCode.API_NOT_FOUND ||\n    code === CopilotKitErrorCode.REMOTE_ENDPOINT_NOT_FOUND ||\n    code === CopilotKitErrorCode.CONFIGURATION_ERROR ||\n    code === CopilotKitErrorCode.MISSING_PUBLIC_API_KEY_ERROR ||\n    code === CopilotKitErrorCode.UPGRADE_REQUIRED_ERROR\n  ) {\n    return true;\n  }\n\n  // Priority 2: Check banner visibility\n  if (extensions.visibility === ErrorVisibility.BANNER) {\n    return true;\n  }\n\n  // Priority 3: Check for critical errors that should be banners regardless of formal classification\n  const errorMessage = gqlError.message.toLowerCase();\n  if (\n    errorMessage.includes(\"api key\") ||\n    errorMessage.includes(\"401\") ||\n    errorMessage.includes(\"unauthorized\") ||\n    errorMessage.includes(\"authentication\") ||\n    errorMessage.includes(\"incorrect api key\")\n  ) {\n    return true;\n  }\n\n  // Priority 4: Legacy stack trace detection for discovery errors\n  const originalError = extensions.originalError as any;\n  if (originalError?.stack) {\n    return (\n      originalError.stack.includes(\"CopilotApiDiscoveryError\") ||\n      originalError.stack.includes(\"CopilotKitRemoteEndpointDiscoveryError\") ||\n      originalError.stack.includes(\"CopilotKitAgentDiscoveryError\")\n    );\n  }\n\n  return false;\n}\n\n/**\n * MessagesTap is used to mitigate performance issues when we only need\n * a snapshot of the messages, not a continuously updating stream of messages.\n */\n\nexport type MessagesTap = {\n  getMessagesFromTap: () => Message[];\n  updateTapMessages: (messages: Message[]) => void;\n};\n\nconst MessagesTapContext = createContext<MessagesTap | null>(null);\n\nexport function useMessagesTap() {\n  const tap = useContext(MessagesTapContext);\n  if (!tap) throw new Error(\"useMessagesTap must be used inside <MessagesTapProvider>\");\n  return tap;\n}\n\nexport function MessagesTapProvider({ children }: { children: React.ReactNode }) {\n  const messagesRef = useRef<Message[]>([]);\n\n  const tapRef = useRef<MessagesTap>({\n    getMessagesFromTap: () => messagesRef.current,\n    updateTapMessages: (messages: Message[]) => {\n      messagesRef.current = messages;\n    },\n  });\n\n  return (\n    <MessagesTapContext.Provider value={tapRef.current}>{children}</MessagesTapContext.Provider>\n  );\n}\n\n/**\n * CopilotKit messages context.\n */\n\nexport function CopilotMessages({ children }: { children: ReactNode }) {\n  const [messages, setMessages] = useState<Message[]>([]);\n  const lastLoadedThreadId = useRef<string>(undefined!);\n  const lastLoadedAgentName = useRef<string>(undefined!);\n  const lastLoadedMessages = useRef<string>(undefined!);\n\n  const { updateTapMessages } = useMessagesTap();\n\n  const { threadId, agentSession, showDevConsole, onError, copilotApiConfig } = useCopilotContext();\n  const { setBannerError } = useToast();\n\n  // Helper function to trace UI errors (similar to useCopilotRuntimeClient)\n  const traceUIError = useCallback(\n    async (error: CopilotKitError, originalError?: any) => {\n      // Just check if onError and publicApiKey are defined\n      if (!onError || !copilotApiConfig.publicApiKey) return;\n\n      try {\n        const traceEvent = {\n          type: \"error\" as const,\n          timestamp: Date.now(),\n          context: {\n            source: \"ui\" as const,\n            request: {\n              operation: \"loadAgentState\",\n              url: copilotApiConfig.chatApiEndpoint,\n              startTime: Date.now(),\n            },\n            technical: {\n              environment: \"browser\",\n              userAgent: typeof navigator !== \"undefined\" ? navigator.userAgent : undefined,\n              stackTrace: originalError instanceof Error ? originalError.stack : undefined,\n            },\n          },\n          error,\n        };\n        await onError(traceEvent);\n      } catch (traceError) {\n        console.error(\"Error in CopilotMessages onError handler:\", traceError);\n      }\n    },\n    [onError, copilotApiConfig.publicApiKey, copilotApiConfig.chatApiEndpoint],\n  );\n\n  const createStructuredError = (gqlError: GraphQLError): CopilotKitError | null => {\n    const extensions = gqlError.extensions;\n    const originalError = extensions?.originalError as any;\n\n    // Priority: Check stack trace for discovery errors first\n    if (originalError?.stack) {\n      if (originalError.stack.includes(\"CopilotApiDiscoveryError\")) {\n        return new CopilotKitApiDiscoveryError({ message: originalError.message });\n      }\n      if (originalError.stack.includes(\"CopilotKitRemoteEndpointDiscoveryError\")) {\n        return new CopilotKitRemoteEndpointDiscoveryError({ message: originalError.message });\n      }\n      if (originalError.stack.includes(\"CopilotKitAgentDiscoveryError\")) {\n        return new CopilotKitAgentDiscoveryError({\n          agentName: \"\",\n          availableAgents: [],\n        });\n      }\n    }\n\n    // Fallback: Use the formal error code if available\n    const message = originalError?.message || gqlError.message;\n    const code = extensions?.code as CopilotKitErrorCode;\n\n    if (code) {\n      return new CopilotKitError({ message, code });\n    }\n\n    return null;\n  };\n\n  const handleGraphQLErrors = useCallback(\n    (error: any) => {\n      if (error.graphQLErrors?.length) {\n        const graphQLErrors = error.graphQLErrors as GraphQLError[];\n\n        // Route all errors to banners for consistent UI\n        const routeError = (gqlError: GraphQLError) => {\n          const extensions = gqlError.extensions;\n          const visibility = extensions?.visibility as ErrorVisibility;\n          const isDev = shouldShowDevConsole(showDevConsole);\n\n          if (!isDev) {\n            console.error(\"CopilotKit Error (hidden in production):\", gqlError.message);\n            return;\n          }\n\n          // Silent errors - just log\n          if (visibility === ErrorVisibility.SILENT) {\n            console.error(\"CopilotKit Silent Error:\", gqlError.message);\n            return;\n          }\n\n          // All other errors (including DEV_ONLY) show as banners for consistency\n          const ckError = createStructuredError(gqlError);\n          if (ckError) {\n            setBannerError(ckError);\n            // Trace the structured error\n            traceUIError(ckError, gqlError);\n          } else {\n            // Fallback: create a generic error for unstructured GraphQL errors\n            const fallbackError = new CopilotKitError({\n              message: gqlError.message,\n              code: CopilotKitErrorCode.UNKNOWN,\n            });\n            setBannerError(fallbackError);\n            // Trace the fallback error\n            traceUIError(fallbackError, gqlError);\n          }\n        };\n\n        // Process all errors as banners\n        graphQLErrors.forEach(routeError);\n      } else {\n        const isDev = shouldShowDevConsole(showDevConsole);\n        if (!isDev) {\n          console.error(\"CopilotKit Error (hidden in production):\", error);\n        } else {\n          // Route non-GraphQL errors to banner as well\n          const fallbackError = new CopilotKitError({\n            message: error?.message || String(error),\n            code: CopilotKitErrorCode.UNKNOWN,\n          });\n          setBannerError(fallbackError);\n          // Trace the non-GraphQL error\n          traceUIError(fallbackError, error);\n        }\n      }\n    },\n    [setBannerError, showDevConsole, traceUIError],\n  );\n\n  useEffect(() => {\n    updateTapMessages(messages);\n  }, [messages, updateTapMessages]);\n\n  const memoizedChildren = useMemo(() => children, [children]);\n  const [suggestions, setSuggestions] = useState<Suggestion[]>([]);\n\n  return (\n    <CopilotMessagesContext.Provider\n      value={{\n        messages,\n        setMessages,\n        suggestions,\n        setSuggestions,\n      }}\n    >\n      {memoizedChildren}\n    </CopilotMessagesContext.Provider>\n  );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1312, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40copilotkit/react-core/src/hooks/use-tree.ts"],"sourcesContent":["import { randomId } from \"@copilotkit/shared\";\nimport { useCallback, useReducer } from \"react\";\n\nexport type TreeNodeId = string;\n\nexport interface TreeNode {\n  id: TreeNodeId;\n  value: string;\n  children: TreeNode[];\n  parentId?: TreeNodeId;\n  categories: Set<string>;\n}\n\nexport type Tree = TreeNode[];\n\nexport interface UseTreeReturn {\n  tree: Tree;\n  addElement: (value: string, categories: string[], parentId?: TreeNodeId) => TreeNodeId;\n  printTree: (categories: string[]) => string;\n  removeElement: (id: TreeNodeId) => void;\n  getAllElements: () => Tree;\n}\n\nconst findNode = (nodes: Tree, id: TreeNodeId): TreeNode | undefined => {\n  for (const node of nodes) {\n    if (node.id === id) {\n      return node;\n    }\n    const result = findNode(node.children, id);\n    if (result) {\n      return result;\n    }\n  }\n  return undefined;\n};\n\nconst removeNode = (nodes: Tree, id: TreeNodeId): Tree => {\n  return nodes.reduce((result: Tree, node) => {\n    if (node.id !== id) {\n      const newNode = { ...node, children: removeNode(node.children, id) };\n      result.push(newNode);\n    }\n    return result;\n  }, []);\n};\n\nconst addNode = (nodes: Tree, newNode: TreeNode, parentId?: TreeNodeId): Tree => {\n  if (!parentId) {\n    return [...nodes, newNode];\n  }\n  return nodes.map((node) => {\n    if (node.id === parentId) {\n      return { ...node, children: [...node.children, newNode] };\n    } else if (node.children.length) {\n      return { ...node, children: addNode(node.children, newNode, parentId) };\n    }\n    return node;\n  });\n};\n\nconst treeIndentationRepresentation = (index: number, indentLevel: number): string => {\n  if (indentLevel === 0) {\n    return (index + 1).toString();\n  } else if (indentLevel === 1) {\n    return String.fromCharCode(65 + index); // 65 is the ASCII value for 'A'\n  } else if (indentLevel === 2) {\n    return String.fromCharCode(97 + index); // 97 is the ASCII value for 'a'\n  } else {\n    return \"-\";\n  }\n};\n\nconst printNode = (node: TreeNode, prefix = \"\", indentLevel = 0): string => {\n  const indent = \" \".repeat(3).repeat(indentLevel);\n\n  const prefixPlusIndentLength = prefix.length + indent.length;\n  const subsequentLinesPrefix = \" \".repeat(prefixPlusIndentLength);\n\n  const valueLines = node.value.split(\"\\n\");\n\n  const outputFirstLine = `${indent}${prefix}${valueLines[0]}`;\n  const outputSubsequentLines = valueLines\n    .slice(1)\n    .map((line) => `${subsequentLinesPrefix}${line}`)\n    .join(\"\\n\");\n\n  let output = `${outputFirstLine}\\n`;\n  if (outputSubsequentLines) {\n    output += `${outputSubsequentLines}\\n`;\n  }\n\n  const childPrePrefix = \" \".repeat(prefix.length);\n\n  node.children.forEach(\n    (child, index) =>\n      (output += printNode(\n        child,\n        `${childPrePrefix}${treeIndentationRepresentation(index, indentLevel + 1)}. `,\n        indentLevel + 1,\n      )),\n  );\n  return output;\n};\n\n// Action types\ntype Action =\n  | {\n      type: \"ADD_NODE\";\n      value: string;\n      parentId?: string;\n      id: string;\n      categories: string[];\n    }\n  | { type: \"REMOVE_NODE\"; id: string };\n\n// Reducer function\nfunction treeReducer(state: Tree, action: Action): Tree {\n  switch (action.type) {\n    case \"ADD_NODE\": {\n      const { value, parentId, id: newNodeId } = action;\n      const newNode: TreeNode = {\n        id: newNodeId,\n        value,\n        children: [],\n        categories: new Set(action.categories),\n      };\n\n      try {\n        return addNode(state, newNode, parentId);\n      } catch (error) {\n        console.error(`Error while adding node with id ${newNodeId}: ${error}`);\n        return state;\n      }\n    }\n    case \"REMOVE_NODE\":\n      return removeNode(state, action.id);\n    default:\n      return state;\n  }\n}\n\n// useTree hook\nconst useTree = (): UseTreeReturn => {\n  const [tree, dispatch] = useReducer(treeReducer, []);\n\n  const addElement = useCallback(\n    (value: string, categories: string[], parentId?: string): TreeNodeId => {\n      const newNodeId = randomId(); // Generate new ID outside of dispatch\n      dispatch({\n        type: \"ADD_NODE\",\n        value,\n        parentId,\n        id: newNodeId,\n        categories: categories,\n      });\n      return newNodeId; // Return the new ID\n    },\n    [],\n  );\n\n  const removeElement = useCallback((id: TreeNodeId): void => {\n    dispatch({ type: \"REMOVE_NODE\", id });\n  }, []);\n\n  const getAllElements = useCallback(() => {\n    return tree;\n  }, [tree]);\n\n  const printTree = useCallback(\n    (categories: string[]): string => {\n      const categoriesSet = new Set(categories);\n\n      let output = \"\";\n      tree.forEach((node, index) => {\n        // if the node does not have any of the desired categories, continue to the next node\n        if (!setsHaveIntersection(categoriesSet, node.categories)) {\n          return;\n        }\n\n        // add a new line before each node except the first one\n        if (index !== 0) {\n          output += \"\\n\";\n        }\n\n        output += printNode(node, `${treeIndentationRepresentation(index, 0)}. `);\n      });\n      return output;\n    },\n    [tree],\n  );\n\n  return { tree, addElement, printTree, removeElement, getAllElements };\n};\n\nexport default useTree;\n\nfunction setsHaveIntersection<T>(setA: Set<T>, setB: Set<T>): boolean {\n  const [smallerSet, largerSet] = setA.size <= setB.size ? [setA, setB] : [setB, setA];\n\n  for (let item of smallerSet) {\n    if (largerSet.has(item)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n"],"names":[],"mappings":";;;;;;AAAA,SAAS,gBAAgB;AACzB,SAAS,aAAa,kBAAkB;;;;AAmCxC,IAAM,aAAa,CAAC,OAAa,OAAyB;IACxD,OAAO,MAAM,MAAA,CAAO,CAAC,QAAc,SAAS;QAC1C,IAAI,KAAK,EAAA,KAAO,IAAI;YAClB,MAAM,cAAU,+LAAA,EAAA,IAAA,gMAAA,EAAA,CAAA,GAAK,OAAL;gBAAW,UAAU,WAAW,KAAK,QAAA,EAAU,EAAE;YAAE;YACnE,OAAO,IAAA,CAAK,OAAO;QACrB;QACA,OAAO;IACT,GAAG,CAAC,CAAC;AACP;AAEA,IAAM,UAAU,CAAC,OAAa,SAAmB,aAAgC;IAC/E,IAAI,CAAC,UAAU;QACb,OAAO,CAAC;eAAG;YAAO,OAAO;SAAA;IAC3B;IACA,OAAO,MAAM,GAAA,CAAI,CAAC,SAAS;QACzB,IAAI,KAAK,EAAA,KAAO,UAAU;YACxB,WAAO,+LAAA,EAAA,IAAA,gMAAA,EAAA,CAAA,GAAK,OAAL;gBAAW,UAAU,CAAC;uBAAG,KAAK,QAAA;oBAAU,OAAO;iBAAA;YAAE;QAC1D,OAAA,IAAW,KAAK,QAAA,CAAS,MAAA,EAAQ;YAC/B,WAAO,+LAAA,EAAA,IAAA,gMAAA,EAAA,CAAA,GAAK,OAAL;gBAAW,UAAU,QAAQ,KAAK,QAAA,EAAU,SAAS,QAAQ;YAAE;QACxE;QACA,OAAO;IACT,CAAC;AACH;AAEA,IAAM,gCAAgC,CAAC,OAAe,gBAAgC;IACpF,IAAI,gBAAgB,GAAG;QACrB,OAAA,CAAQ,QAAQ,CAAA,EAAG,QAAA,CAAS;IAC9B,OAAA,IAAW,gBAAgB,GAAG;QAC5B,OAAO,OAAO,YAAA,CAAa,KAAK,KAAK;IACvC,OAAA,IAAW,gBAAgB,GAAG;QAC5B,OAAO,OAAO,YAAA,CAAa,KAAK,KAAK;IACvC,OAAO;QACL,OAAO;IACT;AACF;AAEA,IAAM,YAAY,CAAC,MAAgB,SAAS,EAAA,EAAI,cAAc,CAAA,KAAc;IAC1E,MAAM,SAAS,IAAI,MAAA,CAAO,CAAC,EAAE,MAAA,CAAO,WAAW;IAE/C,MAAM,yBAAyB,OAAO,MAAA,GAAS,OAAO,MAAA;IACtD,MAAM,wBAAwB,IAAI,MAAA,CAAO,sBAAsB;IAE/D,MAAM,aAAa,KAAK,KAAA,CAAM,KAAA,CAAM,IAAI;IAExC,MAAM,kBAAkB,GAAG,SAAS,SAAS,UAAA,CAAW,CAAC,CAAA,EAAA;IACzD,MAAM,wBAAwB,WAC3B,KAAA,CAAM,CAAC,EACP,GAAA,CAAI,CAAC,OAAS,GAAG,wBAAwB,MAAM,EAC/C,IAAA,CAAK,IAAI;IAEZ,IAAI,SAAS,GAAG,gBAAA;AAAA,CAAA;IAChB,IAAI,uBAAuB;QACzB,UAAU,GAAG,sBAAA;AAAA,CAAA;IACf;IAEA,MAAM,iBAAiB,IAAI,MAAA,CAAO,OAAO,MAAM;IAE/C,KAAK,QAAA,CAAS,OAAA,CACZ,CAAC,OAAO,QACL,UAAU,UACT,OACA,GAAG,iBAAiB,8BAA8B,OAAO,cAAc,CAAC,EAAA,EAAA,CAAA,EACxE,cAAc;IAGpB,OAAO;AACT;AAcA,SAAS,YAAY,KAAA,EAAa,MAAA,EAAsB;IACtD,OAAQ,OAAO,IAAA,EAAM;QACnB,KAAK;YAAY;gBACf,MAAM,EAAE,KAAA,EAAO,QAAA,EAAU,IAAI,SAAA,CAAU,CAAA,GAAI;gBAC3C,MAAM,UAAoB;oBACxB,IAAI;oBACJ;oBACA,UAAU,CAAC,CAAA;oBACX,YAAY,IAAI,IAAI,OAAO,UAAU;gBACvC;gBAEA,IAAI;oBACF,OAAO,QAAQ,OAAO,SAAS,QAAQ;gBACzC,EAAA,OAAS,OAAP;oBACA,QAAQ,KAAA,CAAM,CAAA,gCAAA,EAAmC,UAAA,EAAA,EAAc,OAAO;oBACtE,OAAO;gBACT;YACF;QACA,KAAK;YACH,OAAO,WAAW,OAAO,OAAO,EAAE;QACpC;YACE,OAAO;IACX;AACF;AAGA,IAAM,UAAU,MAAqB;IACnC,MAAM,CAAC,MAAM,QAAQ,CAAA,OAAI,2KAAA,EAAW,aAAa,CAAC,CAAC;IAEnD,MAAM,iBAAa,4KAAA;2CACjB,CAAC,OAAe,YAAsB,aAAkC;YACtE,MAAM,gBAAY,mLAAA,CAAS;YAC3B,SAAS;gBACP,MAAM;gBACN;gBACA;gBACA,IAAI;gBACJ;YACF,CAAC;YACD,OAAO;QACT;0CACA,CAAC,CAAA;IAGH,MAAM,oBAAgB,4KAAA;8CAAY,CAAC,OAAyB;YAC1D,SAAS;gBAAE,MAAM;gBAAe;YAAG,CAAC;QACtC;6CAAG,CAAC,CAAC;IAEL,MAAM,qBAAiB,4KAAA;+CAAY,MAAM;YACvC,OAAO;QACT;8CAAG;QAAC,IAAI;KAAC;IAET,MAAM,gBAAY,4KAAA;0CAChB,CAAC,eAAiC;YAChC,MAAM,gBAAgB,IAAI,IAAI,UAAU;YAExC,IAAI,SAAS;YACb,KAAK,OAAA;kDAAQ,CAAC,MAAM,UAAU;oBAE5B,IAAI,CAAC,qBAAqB,eAAe,KAAK,UAAU,GAAG;wBACzD;oBACF;oBAGA,IAAI,UAAU,GAAG;wBACf,UAAU;oBACZ;oBAEA,UAAU,UAAU,MAAM,GAAG,8BAA8B,OAAO,CAAC,EAAA,EAAA,CAAK;gBAC1E,CAAC;;YACD,OAAO;QACT;yCACA;QAAC,IAAI;KAAA;IAGP,OAAO;QAAE;QAAM;QAAY;QAAW;QAAe;IAAe;AACtE;AAEA,IAAO,mBAAQ;AAEf,SAAS,qBAAwB,IAAA,EAAc,IAAA,EAAuB;IACpE,MAAM,CAAC,YAAY,SAAS,CAAA,GAAI,KAAK,IAAA,IAAQ,KAAK,IAAA,GAAO;QAAC;QAAM,IAAI;KAAA,GAAI;QAAC;QAAM,IAAI;KAAA;IAEnF,KAAA,IAAS,QAAQ,WAAY;QAC3B,IAAI,UAAU,GAAA,CAAI,IAAI,GAAG;YACvB,OAAO;QACT;IACF;IAEA,OAAO;AACT"}},
    {"offset": {"line": 1489, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40copilotkit/react-core/src/hooks/use-flat-category-store.ts"],"sourcesContent":["import { useCallback, useReducer } from \"react\";\nimport { randomId } from \"@copilotkit/shared\";\n\nexport type FlatCategoryStoreId = string;\n\nexport interface UseFlatCategoryStoreReturn<T> {\n  addElement: (value: T, categories: string[]) => FlatCategoryStoreId;\n  removeElement: (id: FlatCategoryStoreId) => void;\n  allElements: (categories: string[]) => T[];\n}\n\ninterface FlatCategoryStoreElement<T> {\n  id: FlatCategoryStoreId;\n  value: T;\n  categories: Set<string>;\n}\n\nconst useFlatCategoryStore = <T>(): UseFlatCategoryStoreReturn<T> => {\n  const [elements, dispatch] = useReducer(\n    flatCategoryStoreReducer<T>,\n    new Map<FlatCategoryStoreId, FlatCategoryStoreElement<T>>(),\n  );\n\n  const addElement = useCallback((value: T, categories: string[]): FlatCategoryStoreId => {\n    const newId = randomId();\n    dispatch({\n      type: \"ADD_ELEMENT\",\n      value,\n      id: newId,\n      categories,\n    });\n    return newId;\n  }, []);\n\n  const removeElement = useCallback((id: FlatCategoryStoreId): void => {\n    dispatch({ type: \"REMOVE_ELEMENT\", id });\n  }, []);\n\n  const allElements = useCallback(\n    (categories: string[]): T[] => {\n      const categoriesSet = new Set(categories);\n      const result: T[] = [];\n      elements.forEach((element) => {\n        if (setsHaveIntersection(categoriesSet, element.categories)) {\n          result.push(element.value);\n        }\n      });\n      return result;\n    },\n    [elements],\n  );\n\n  return { addElement, removeElement, allElements };\n};\n\nexport default useFlatCategoryStore;\n\n// Action types\ntype Action<T> =\n  | {\n      type: \"ADD_ELEMENT\";\n      value: T;\n      id: FlatCategoryStoreId;\n      categories: string[];\n    }\n  | { type: \"REMOVE_ELEMENT\"; id: FlatCategoryStoreId };\n\n// Reducer\nfunction flatCategoryStoreReducer<T>(\n  state: Map<FlatCategoryStoreId, FlatCategoryStoreElement<T>>,\n  action: Action<T>,\n): Map<FlatCategoryStoreId, FlatCategoryStoreElement<T>> {\n  switch (action.type) {\n    case \"ADD_ELEMENT\": {\n      const { value, id, categories } = action;\n      const newElement: FlatCategoryStoreElement<T> = {\n        id,\n        value,\n        categories: new Set(categories),\n      };\n      const newState = new Map(state);\n      newState.set(id, newElement);\n      return newState;\n    }\n    case \"REMOVE_ELEMENT\": {\n      const newState = new Map(state);\n      newState.delete(action.id);\n      return newState;\n    }\n    default:\n      return state;\n  }\n}\n\nfunction setsHaveIntersection<T>(setA: Set<T>, setB: Set<T>): boolean {\n  const [smallerSet, largerSet] = setA.size <= setB.size ? [setA, setB] : [setB, setA];\n\n  for (let item of smallerSet) {\n    if (largerSet.has(item)) {\n      return true;\n    }\n  }\n\n  return false;\n}\n"],"names":[],"mappings":";;;;;AAAA,SAAS,aAAa,kBAAkB;AACxC,SAAS,gBAAgB;;;AAgBzB,IAAM,uBAAuB,MAAwC;IACnE,MAAM,CAAC,UAAU,QAAQ,CAAA,OAAI,2KAAA,EAC3B,0BACA,aAAA,GAAA,IAAI,IAAsD;IAG5D,MAAM,iBAAa,4KAAA;wDAAY,CAAC,OAAU,eAA8C;YACtF,MAAM,YAAQ,mLAAA,CAAS;YACvB,SAAS;gBACP,MAAM;gBACN;gBACA,IAAI;gBACJ;YACF,CAAC;YACD,OAAO;QACT;uDAAG,CAAC,CAAC;IAEL,MAAM,oBAAgB,4KAAA;2DAAY,CAAC,OAAkC;YACnE,SAAS;gBAAE,MAAM;gBAAkB;YAAG,CAAC;QACzC;0DAAG,CAAC,CAAC;IAEL,MAAM,kBAAc,4KAAA;yDAClB,CAAC,eAA8B;YAC7B,MAAM,gBAAgB,IAAI,IAAI,UAAU;YACxC,MAAM,SAAc,CAAC,CAAA;YACrB,SAAS,OAAA;iEAAQ,CAAC,YAAY;oBAC5B,IAAI,qBAAqB,eAAe,QAAQ,UAAU,GAAG;wBAC3D,OAAO,IAAA,CAAK,QAAQ,KAAK;oBAC3B;gBACF,CAAC;;YACD,OAAO;QACT;wDACA;QAAC,QAAQ;KAAA;IAGX,OAAO;QAAE;QAAY;QAAe;IAAY;AAClD;AAEA,IAAO,kCAAQ;AAaf,SAAS,yBACP,KAAA,EACA,MAAA,EACuD;IACvD,OAAQ,OAAO,IAAA,EAAM;QACnB,KAAK;YAAe;gBAClB,MAAM,EAAE,KAAA,EAAO,EAAA,EAAI,UAAA,CAAW,CAAA,GAAI;gBAClC,MAAM,aAA0C;oBAC9C;oBACA;oBACA,YAAY,IAAI,IAAI,UAAU;gBAChC;gBACA,MAAM,WAAW,IAAI,IAAI,KAAK;gBAC9B,SAAS,GAAA,CAAI,IAAI,UAAU;gBAC3B,OAAO;YACT;QACA,KAAK;YAAkB;gBACrB,MAAM,WAAW,IAAI,IAAI,KAAK;gBAC9B,SAAS,MAAA,CAAO,OAAO,EAAE;gBACzB,OAAO;YACT;QACA;YACE,OAAO;IACX;AACF;AAEA,SAAS,qBAAwB,IAAA,EAAc,IAAA,EAAuB;IACpE,MAAM,CAAC,YAAY,SAAS,CAAA,GAAI,KAAK,IAAA,IAAQ,KAAK,IAAA,GAAO;QAAC;QAAM,IAAI;KAAA,GAAI;QAAC;QAAM,IAAI;KAAA;IAEnF,KAAA,IAAS,QAAQ,WAAY;QAC3B,IAAI,UAAU,GAAA,CAAI,IAAI,GAAG;YACvB,OAAO;QACT;IACF;IAEA,OAAO;AACT"}},
    {"offset": {"line": 1588, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40copilotkit/react-core/src/context/coagent-state-renders-context.tsx"],"sourcesContent":["import React, {\n  createContext,\n  useContext,\n  useCallback,\n  useState,\n  useRef,\n  ReactNode,\n  RefObject,\n} from \"react\";\nimport { CoAgentStateRender } from \"../types/coagent-action\";\n\ninterface StateRenderClaim {\n  stateRenderId: string;\n  stateSnapshot?: any;\n  runId?: string;\n  locked?: boolean;\n}\n\ntype ClaimsRef = Record<string, StateRenderClaim>;\n\nexport interface CoAgentStateRendersContextValue {\n  coAgentStateRenders: Record<string, CoAgentStateRender<any>>;\n  setCoAgentStateRender: (id: string, stateRender: CoAgentStateRender<any>) => void;\n  removeCoAgentStateRender: (id: string) => void;\n  claimsRef: RefObject<ClaimsRef>;\n}\n\nconst CoAgentStateRendersContext = createContext<CoAgentStateRendersContextValue | undefined>(\n  undefined,\n);\n\nexport function CoAgentStateRendersProvider({ children }: { children: ReactNode }) {\n  const [coAgentStateRenders, setCoAgentStateRenders] = useState<\n    Record<string, CoAgentStateRender<any>>\n  >({});\n\n  const setCoAgentStateRender = useCallback((id: string, stateRender: CoAgentStateRender<any>) => {\n    setCoAgentStateRenders((prevPoints) => ({\n      ...prevPoints,\n      [id]: stateRender,\n    }));\n  }, []);\n\n  const removeCoAgentStateRender = useCallback((id: string) => {\n    setCoAgentStateRenders((prevPoints) => {\n      const newPoints = { ...prevPoints };\n      delete newPoints[id];\n      return newPoints;\n    });\n  }, []);\n\n  const claimsRef = useRef<ClaimsRef>({});\n\n  return (\n    <CoAgentStateRendersContext.Provider\n      value={{\n        coAgentStateRenders,\n        setCoAgentStateRender,\n        removeCoAgentStateRender,\n        claimsRef,\n      }}\n    >\n      {children}\n    </CoAgentStateRendersContext.Provider>\n  );\n}\n\nexport function useCoAgentStateRenders() {\n  const context = useContext(CoAgentStateRendersContext);\n  if (!context) {\n    throw new Error(\"useCoAgentStateRenders must be used within CoAgentStateRendersProvider\");\n  }\n  return context;\n}\n\nexport { CoAgentStateRendersContext };\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AAsDI;;;;AA3BJ,IAAM,iCAA6B,8KAAA,EACjC,KAAA;AAGK,SAAS,4BAA4B,EAAE,QAAA,CAAS,CAAA,EAA4B;IACjF,MAAM,CAAC,qBAAqB,sBAAsB,CAAA,OAAI,yKAAA,EAEpD,CAAC,CAAC;IAEJ,MAAM,4BAAwB,4KAAA;0EAAY,CAAC,IAAY,gBAAyC;YAC9F;kFAAuB,CAAC,iBAAgB,+LAAA,EAAA,IAAA,gMAAA,EAAA,CAAA,GACnC,aADmC;wBAEtC,CAAC,EAAE,CAAA,EAAG;oBACR,EAAE;;QACJ;yEAAG,CAAC,CAAC;IAEL,MAAM,+BAA2B,4KAAA;6EAAY,CAAC,OAAe;YAC3D;qFAAuB,CAAC,eAAe;oBACrC,MAAM,gBAAY,gMAAA,EAAA,CAAA,GAAK;oBACvB,OAAO,SAAA,CAAU,EAAE,CAAA;oBACnB,OAAO;gBACT,CAAC;;QACH;4EAAG,CAAC,CAAC;IAEL,MAAM,gBAAY,uKAAA,EAAkB,CAAC,CAAC;IAEtC,OACE,aAAA,GAAA,IAAA,6KAAA,EAAC,2BAA2B,QAAA,EAA3B;QACC,OAAO;YACL;YACA;YACA;YACA;QACF;QAEC;IAAA;AAGP;AAEO,SAAS,yBAAyB;IACvC,MAAM,cAAU,2KAAA,EAAW,0BAA0B;IACrD,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM,wEAAwE;IAC1F;IACA,OAAO;AACT"}},
    {"offset": {"line": 1650, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40copilotkit/react-core/src/hooks/use-coagent-state-render-bridge.tsx"],"sourcesContent":["import { ReactCustomMessageRendererPosition, useAgent } from \"@copilotkitnext/react\";\nimport { useCallback, useEffect, useMemo, useState } from \"react\";\nimport type { AgentSubscriber } from \"@ag-ui/client\";\nimport { useCoAgentStateRenders } from \"../context\";\nimport { dataToUUID, parseJson } from \"@copilotkit/shared\";\n\nfunction getStateWithoutConstantKeys(state: any) {\n  if (!state) return {};\n  const { messages, tools, copilotkit, ...stateWithoutConstantKeys } = state;\n  return stateWithoutConstantKeys;\n}\n\n// Function that compares states, without the constant keys\nfunction areStatesEquals(a: any, b: any) {\n  if ((a && !b) || (!a && b)) return false;\n  const { messages, tools, copilotkit, ...aWithoutConstantKeys } = a;\n  const {\n    messages: bMessages,\n    tools: bTools,\n    copilotkit: bCopilotkit,\n    ...bWithoutConstantKeys\n  } = b;\n\n  return JSON.stringify(aWithoutConstantKeys) === JSON.stringify(bWithoutConstantKeys);\n}\n\n/**\n * Bridge hook that connects agent state renders to chat messages.\n *\n * ## Purpose\n * This hook finds matching state render configurations (registered via useCoAgentStateRender)\n * and returns UI to render in chat.\n * It ensures each state render appears bound to a specific message, preventing duplicates while\n * allowing re-binding when the underlying state changes significantly.\n *\n * ## Message-ID-Based Claiming System\n *\n * ### The Problem\n * Multiple bridge component instances render simultaneously (one per message). Without coordination,\n * they would all try to render the same state render, causing duplicates.\n *\n * ### The Solution: Message-ID Claims with State Comparison\n * Each state render is \"claimed\" by exactly one **message ID** (not runId):\n *\n * **Claim Structure**: `claimsRef.current[messageId] = { stateRenderId, runId, stateSnapshot, locked }`\n *\n * **Primary binding is by messageId because**:\n * - runId is not always available immediately (starts as \"pending\")\n * - messageId is the stable identifier throughout the message lifecycle\n * - Claims persist across component remounts via context ref\n *\n * ### Claiming Logic Flow\n *\n * 1. **Message already has a claim**:\n *    - Check if the claim matches the current stateRenderId\n *    - If yes → render (this message owns this render)\n *    - Update runId if it was \"pending\" and now available\n *\n * 2. **State render claimed by another message**:\n *    - Compare state snapshots (ignoring constant keys: messages, tools, copilotkit)\n *    - If states are identical → block rendering (duplicate)\n *    - **If states are different → allow claiming** (new data, new message)\n *    - This handles cases where the same render type shows different states in different messages\n *\n * 3. **Unclaimed state render**:\n *    - Only allow claiming if runId is \"pending\" (initial render)\n *    - If runId is real but no claim exists → block (edge case protection)\n *    - Create new claim: `claimsRef.current[messageId] = { stateRenderId, runId }`\n *\n * ### State Snapshot Locking\n *\n * Once a state snapshot is captured and locked for a message:\n * - The UI always renders with the locked snapshot (not live agent.state)\n * - Prevents UI from appearing \"wiped\" during state transitions\n * - Locked when: stateSnapshot prop is available (from message persistence)\n * - Unlocked state: can still update from live agent.state\n *\n * ### Synchronous Claiming (Ref-based)\n *\n * Claims are stored in a context-level ref (not React state):\n * - Multiple bridges render in the same tick\n * - State updates are async - would allow duplicates before update completes\n * - Ref provides immediate, synchronous claim checking\n * - Survives component remounts (stored in context, not component)\n *\n * ## Flow Example\n *\n * ```\n * Time 1: Message A renders, runId=undefined, state={progress: 50%}\n *   → effectiveRunId = \"pending\"\n *   → Claims: claimsRef[\"msgA\"] = { stateRenderId: \"tasks\", runId: \"pending\", stateSnapshot: {progress: 50%} }\n *   → Renders UI with 50% progress\n *\n * Time 2: Message B renders, runId=undefined, same state\n *   → Checks: \"tasks\" already claimed by msgA with same state\n *   → Returns null (blocked - duplicate)\n *\n * Time 3: Real runId appears (e.g., \"run-123\")\n *   → Updates claim: claimsRef[\"msgA\"].runId = \"run-123\"\n *   → Message A continues rendering\n *\n * Time 4: Agent processes more, state={progress: 100%}\n *   → Message A: locked to 50% (stateSnapshot locked)\n *   → Message C renders with state={progress: 100%}\n *   → Checks: \"tasks\" claimed by msgA but state is DIFFERENT (50% vs 100%)\n *   → Allows new claim: claimsRef[\"msgC\"] = { stateRenderId: \"tasks\", runId: \"run-123\", stateSnapshot: {progress: 100%} }\n *   → Both messages render independently with their own snapshots\n * ```\n */\nexport interface CoAgentStateRenderBridgeProps {\n  message: any;\n  position: ReactCustomMessageRendererPosition;\n  runId: string;\n  messageIndex: number;\n  messageIndexInRun: number;\n  numberOfMessagesInRun: number;\n  agentId: string;\n  stateSnapshot: any;\n}\n\nexport function useCoagentStateRenderBridge(agentId: string, props: CoAgentStateRenderBridgeProps) {\n  const { stateSnapshot, messageIndexInRun, message } = props;\n  const { coAgentStateRenders, claimsRef } = useCoAgentStateRenders();\n  const { agent } = useAgent({ agentId });\n  const [nodeName, setNodeName] = useState<string | undefined>(undefined);\n\n  const runId = props.runId ?? message.runId;\n  const effectiveRunId = runId || \"pending\";\n\n  useEffect(() => {\n    if (!agent) return;\n    const subscriber: AgentSubscriber = {\n      onStepStartedEvent: ({ event }) => {\n        if (event.stepName !== nodeName) {\n          setNodeName(event.stepName);\n        }\n      },\n      onStepFinishedEvent: ({ event }) => {\n        if (event.stepName === nodeName) {\n          setNodeName(undefined);\n        }\n      },\n    };\n\n    const { unsubscribe } = agent.subscribe(subscriber);\n    return () => {\n      unsubscribe();\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [agentId, nodeName]);\n\n  const getStateRender = useCallback(\n    (messageId: string) => {\n      return Object.entries(coAgentStateRenders).find(([stateRenderId, stateRender]) => {\n        if (claimsRef.current[messageId]) {\n          return stateRenderId === claimsRef.current[messageId].stateRenderId;\n        }\n        const matchingAgentName = stateRender.name === agentId;\n        const matchesNodeContext = stateRender.nodeName ? stateRender.nodeName === nodeName : true;\n        return matchingAgentName && matchesNodeContext;\n      });\n    },\n    [coAgentStateRenders, nodeName, agentId],\n  );\n\n  // Message ID-based claim system - A state render can only be claimed by one message ID\n  const handleRenderRequest = ({\n    stateRenderId,\n    messageId,\n    runId,\n    stateSnapshot: renderSnapshot,\n  }: {\n    stateRenderId: string;\n    messageId: string;\n    runId?: string;\n    stateSnapshot?: any;\n  }): boolean => {\n    // Check if this message has already claimed this state render\n    if (claimsRef.current[messageId]) {\n      const canRender = claimsRef.current[messageId].stateRenderId === stateRenderId;\n\n      // Update runId if it doesn't exist\n      if (\n        canRender &&\n        runId &&\n        (!claimsRef.current[messageId].runId || claimsRef.current[messageId].runId === \"pending\")\n      ) {\n        claimsRef.current[messageId].runId = runId;\n      }\n\n      return canRender;\n    }\n\n    // Do not allow render if any other message has claimed this state render\n    const renderClaimedByOtherMessage = Object.values(claimsRef.current).find(\n      (c) =>\n        c.stateRenderId === stateRenderId &&\n        dataToUUID(getStateWithoutConstantKeys(c.stateSnapshot)) ===\n          dataToUUID(getStateWithoutConstantKeys(renderSnapshot)),\n    );\n    if (renderClaimedByOtherMessage) {\n      // If:\n      //   - state render already claimed\n      //   - snapshot exists in the claiming object and is different from current,\n      if (\n        renderSnapshot &&\n        renderClaimedByOtherMessage.stateSnapshot &&\n        !areStatesEquals(renderClaimedByOtherMessage.stateSnapshot, renderSnapshot)\n      ) {\n        claimsRef.current[messageId] = { stateRenderId, runId };\n        return true;\n      }\n      return false;\n    }\n\n    // No existing claim anywhere yet – allow this message to claim even if we already know the runId.\n    if (!runId) {\n      return false;\n    }\n\n    claimsRef.current[messageId] = { stateRenderId, runId };\n    return true;\n  };\n\n  return useMemo(() => {\n    if (messageIndexInRun !== 0) {\n      return null;\n    }\n\n    const [stateRenderId, stateRender] = getStateRender(message.id) ?? [];\n\n    if (!stateRender || !stateRenderId) {\n      return null;\n    }\n\n    // Is there any state we can use?\n    const snapshot = stateSnapshot ? parseJson(stateSnapshot, stateSnapshot) : agent?.state;\n\n    // Synchronously check/claim - returns true if this message can render\n    const canRender = handleRenderRequest({\n      stateRenderId,\n      messageId: message.id,\n      runId: effectiveRunId,\n      stateSnapshot: snapshot,\n    });\n    if (!canRender) {\n      return null;\n    }\n\n    // If we found state, and given that now there's a claim for the current message, let's save it in the claim\n    if (snapshot && !claimsRef.current[message.id].locked) {\n      if (stateSnapshot) {\n        claimsRef.current[message.id].stateSnapshot = snapshot;\n        claimsRef.current[message.id].locked = true;\n      } else {\n        claimsRef.current[message.id].stateSnapshot = snapshot;\n      }\n    }\n\n    if (stateRender.handler) {\n      stateRender.handler({\n        state: stateSnapshot ? parseJson(stateSnapshot, stateSnapshot) : (agent?.state ?? {}),\n        nodeName: nodeName ?? \"\",\n      });\n    }\n\n    if (stateRender.render) {\n      const status = agent?.isRunning ? \"inProgress\" : \"complete\";\n\n      if (typeof stateRender.render === \"string\") return stateRender.render;\n\n      return stateRender.render({\n        status,\n        // Always use state from claim, to make sure the state does not seem \"wiped\" for a fraction of a second\n        state: claimsRef.current[message.id].stateSnapshot ?? {},\n        nodeName: nodeName ?? \"\",\n      });\n    }\n  }, [\n    getStateRender,\n    stateSnapshot,\n    agent?.state,\n    agent?.isRunning,\n    nodeName,\n    effectiveRunId,\n    message.id,\n    messageIndexInRun,\n  ]);\n}\n\nexport function CoAgentStateRenderBridge(props: CoAgentStateRenderBridgeProps) {\n  return useCoagentStateRenderBridge(props.agentId, props);\n}\n"],"names":["runId","_a"],"mappings":"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"}},
    {"offset": {"line": 1842, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40copilotkit/react-core/src/context/threads-context.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, ReactNode, SetStateAction } from \"react\";\nimport { randomUUID } from \"@copilotkit/shared\";\n\nexport interface ThreadsContextValue {\n  threadId: string;\n  setThreadId: (value: SetStateAction<string>) => void;\n}\n\nconst ThreadsContext = createContext<ThreadsContextValue | undefined>(undefined);\n\nexport interface ThreadsProviderProps {\n  children: ReactNode;\n  threadId?: string;\n}\n\nexport function ThreadsProvider({ children, threadId: explicitThreadId }: ThreadsProviderProps) {\n  const [internalThreadId, setThreadId] = useState<string>(explicitThreadId ?? randomUUID());\n\n  const threadId = internalThreadId;\n\n  return (\n    <ThreadsContext.Provider\n      value={{\n        threadId,\n        setThreadId,\n      }}\n    >\n      {children}\n    </ThreadsContext.Provider>\n  );\n}\n\nexport function useThreads() {\n  const context = useContext(ThreadsContext);\n  if (!context) {\n    throw new Error(\"useThreads must be used within ThreadsProvider\");\n  }\n  return context;\n}\n\nexport { ThreadsContext };\n"],"names":[],"mappings":";;;;;;;;;AAAA,SAAgB,eAAe,YAAY,gBAA2C;AACtF,SAAS,kBAAkB;AAoBvB;;;;AAbJ,IAAM,qBAAiB,8KAAA,EAA+C,KAAA,CAAS;AAOxE,SAAS,gBAAgB,EAAE,QAAA,EAAU,UAAU,gBAAA,CAAiB,CAAA,EAAyB;IAC9F,MAAM,CAAC,kBAAkB,WAAW,CAAA,OAAI,yKAAA,EAAiB,oBAAA,OAAA,uBAAoB,qLAAA,CAAW,CAAC;IAEzF,MAAM,WAAW;IAEjB,OACE,aAAA,GAAA,IAAA,6KAAA,EAAC,eAAe,QAAA,EAAf;QACC,OAAO;YACL;YACA;QACF;QAEC;IAAA;AAGP;AAEO,SAAS,aAAa;IAC3B,MAAM,cAAU,2KAAA,EAAW,cAAc;IACzC,IAAI,CAAC,SAAS;QACZ,MAAM,IAAI,MAAM,gDAAgD;IAClE;IACA,OAAO;AACT"}},
    {"offset": {"line": 1882, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40copilotkit/react-core/src/components/CopilotListeners.tsx"],"sourcesContent":["import { useCallback, useEffect, useMemo, useRef } from \"react\";\nimport { useAgent, useCopilotChatConfiguration, useCopilotKit } from \"@copilotkitnext/react\";\nimport { CopilotKitError, parseJson } from \"@copilotkit/shared\";\nimport { useCopilotContext } from \"../context\";\nimport { AbstractAgent, AgentSubscriber, AGUIConnectNotImplementedError } from \"@ag-ui/client\";\nimport { useErrorToast } from \"./error-boundary/error-utils\";\nimport { CopilotKitCoreSubscriber } from \"@copilotkitnext/core\";\nimport { useToast } from \"./toast/toast-provider\";\nimport { CopilotKitLowLevelError } from \"@copilotkit/shared\";\n\nconst usePredictStateSubscription = (agent?: AbstractAgent) => {\n  const predictStateToolsRef = useRef<\n    {\n      tool: string;\n      state_key: string;\n      tool_argument: string;\n    }[]\n  >([]);\n\n  const getSubscriber = useCallback(\n    (agent: AbstractAgent): AgentSubscriber => ({\n      onCustomEvent: ({ event }) => {\n        if (event.name === \"PredictState\") {\n          predictStateToolsRef.current = event.value;\n        }\n      },\n      onToolCallArgsEvent: ({ partialToolCallArgs, toolCallName }) => {\n        predictStateToolsRef.current.forEach((t) => {\n          if (t?.tool !== toolCallName) return;\n\n          const emittedState =\n            typeof partialToolCallArgs === \"string\"\n              ? parseJson(partialToolCallArgs as unknown as string, partialToolCallArgs)\n              : partialToolCallArgs;\n\n          agent.setState({\n            [t.state_key]: emittedState[t.state_key],\n          });\n        });\n      },\n    }),\n    [],\n  );\n\n  useEffect(() => {\n    if (!agent) return;\n\n    const subscriber = getSubscriber(agent);\n    const { unsubscribe } = agent.subscribe(subscriber);\n    return () => {\n      unsubscribe();\n    };\n  }, [agent, getSubscriber]);\n};\n\nexport function CopilotListeners() {\n  const { copilotkit } = useCopilotKit();\n  const existingConfig = useCopilotChatConfiguration();\n  const resolvedAgentId = existingConfig?.agentId;\n  const { setBannerError } = useToast();\n\n  const { agent } = useAgent({ agentId: resolvedAgentId });\n\n  usePredictStateSubscription(agent);\n\n  useEffect(() => {\n    const subscriber: CopilotKitCoreSubscriber = {\n      onError: ({ error }) => {\n        // @ts-expect-error -- for now, choose a random CPK error type to display the error toast\n        setBannerError(new CopilotKitLowLevelError({ error, message: error.message }));\n      },\n    };\n    const subscription = copilotkit.subscribe(subscriber);\n\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [copilotkit?.subscribe]);\n\n  return null;\n}\n"],"names":["agent"],"mappings":";;;;;;AAAA,SAAS,aAAa,WAAoB,cAAc;AACxD,SAAS,UAAU,6BAA6B,qBAAqB;AACrE,SAA0B,iBAAiB;;;;;;AAQ3C,IAAM,8BAA8B,CAAC,UAA0B;IAC7D,MAAM,2BAAuB,uKAAA,EAM3B,CAAC,CAAC;IAEJ,MAAM,oBAAgB,4KAAA;kEACpB,CAACA,SAAAA,CAA2C;gBAC1C,aAAA;8EAAe,CAAC,EAAE,KAAA,CAAM,CAAA,KAAM;wBAC5B,IAAI,MAAM,IAAA,KAAS,gBAAgB;4BACjC,qBAAqB,OAAA,GAAU,MAAM,KAAA;wBACvC;oBACF;;gBACA,mBAAA;8EAAqB,CAAC,EAAE,mBAAA,EAAqB,YAAA,CAAa,CAAA,KAAM;wBAC9D,qBAAqB,OAAA,CAAQ,OAAA;sFAAQ,CAAC,MAAM;gCAC1C,IAAA,CAAI,KAAA,OAAA,KAAA,IAAA,EAAG,IAAA,MAAS,cAAc;gCAE9B,MAAM,eACJ,OAAO,wBAAwB,eAC3B,oLAAA,EAAU,qBAA0C,mBAAmB,IACvE;gCAENA,OAAM,QAAA,CAAS;oCACb,CAAC,EAAE,SAAS,CAAA,EAAG,YAAA,CAAa,EAAE,SAAS,CAAA;gCACzC,CAAC;4BACH,CAAC;;oBACH;;YACF,CAAA;iEACA,CAAC,CAAA;IAGH,IAAA,0KAAA;iDAAU,MAAM;YACd,IAAI,CAAC,OAAO;YAEZ,MAAM,aAAa,cAAc,KAAK;YACtC,MAAM,EAAE,WAAA,CAAY,CAAA,GAAI,MAAM,SAAA,CAAU,UAAU;YAClD;yDAAO,MAAM;oBACX,YAAY;gBACd;;QACF;gDAAG;QAAC;QAAO,aAAa;KAAC;AAC3B;AAEO,SAAS,mBAAmB;IACjC,MAAM,EAAE,UAAA,CAAW,CAAA,OAAI,+LAAA,CAAc;IACrC,MAAM,qBAAiB,6MAAA,CAA4B;IACnD,MAAM,kBAAkB,kBAAA,OAAA,KAAA,IAAA,eAAgB,OAAA;IACxC,MAAM,EAAE,cAAA,CAAe,CAAA,OAAI,0LAAA,CAAS;IAEpC,MAAM,EAAE,KAAA,CAAM,CAAA,OAAI,0LAAA,EAAS;QAAE,SAAS;IAAgB,CAAC;IAEvD,4BAA4B,KAAK;IAEjC,IAAA,0KAAA;sCAAU,MAAM;YACd,MAAM,aAAuC;gBAC3C,OAAA;kDAAS,CAAC,EAAE,KAAA,CAAM,CAAA,KAAM;wBAEtB,eAAe,IAAI,kMAAA,CAAwB;4BAAE;4BAAO,SAAS,MAAM,OAAA;wBAAQ,CAAC,CAAC;oBAC/E;;YACF;YACA,MAAM,eAAe,WAAW,SAAA,CAAU,UAAU;YAEpD;8CAAO,MAAM;oBACX,aAAa,WAAA,CAAY;gBAC3B;;QACF;qCAAG;QAAC,cAAA,OAAA,KAAA,IAAA,WAAY,SAAS;KAAC;IAE1B,OAAO;AACT"}},
    {"offset": {"line": 1977, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40copilotkit/react-core/src/components/copilot-provider/copilotkit.tsx"],"sourcesContent":["/**\n * This component will typically wrap your entire application (or a sub-tree of your application where you want to have a copilot). It provides the copilot context to all other components and hooks.\n *\n * ## Example\n *\n * You can find more information about self-hosting CopilotKit [here](/guides/self-hosting).\n *\n * ```tsx\n * import { CopilotKit } from \"@copilotkit/react-core\";\n *\n * <CopilotKit runtimeUrl=\"<your-runtime-url>\">\n *   // ... your app ...\n * </CopilotKit>\n * ```\n */\n\nimport { useCallback, useEffect, useMemo, useRef, useState, SetStateAction } from \"react\";\nimport {\n  CopilotChatConfigurationProvider,\n  CopilotKitInspector,\n  CopilotKitProvider as CopilotKitNextProvider,\n} from \"@copilotkitnext/react\";\nimport {\n  CopilotContext,\n  CopilotApiConfig,\n  ChatComponentsCache,\n  AgentSession,\n  AuthState,\n} from \"../../context/copilot-context\";\nimport useTree from \"../../hooks/use-tree\";\nimport { CopilotChatSuggestionConfiguration, DocumentPointer } from \"../../types\";\nimport { flushSync } from \"react-dom\";\nimport {\n  COPILOT_CLOUD_CHAT_URL,\n  CopilotCloudConfig,\n  FunctionCallHandler,\n  COPILOT_CLOUD_PUBLIC_API_KEY_HEADER,\n  randomUUID,\n  ConfigurationError,\n  MissingPublicApiKeyError,\n  CopilotKitError,\n  CopilotErrorEvent,\n  CopilotErrorHandler,\n} from \"@copilotkit/shared\";\nimport { FrontendAction } from \"../../types/frontend-action\";\nimport useFlatCategoryStore from \"../../hooks/use-flat-category-store\";\nimport { CopilotKitProps } from \"./copilotkit-props\";\nimport { CoagentState } from \"../../types/coagent-state\";\nimport { CopilotMessages, MessagesTapProvider } from \"./copilot-messages\";\nimport { ToastProvider } from \"../toast/toast-provider\";\nimport { getErrorActions, UsageBanner } from \"../usage-banner\";\nimport { shouldShowDevConsole } from \"../../utils\";\nimport { CopilotErrorBoundary } from \"../error-boundary/error-boundary\";\nimport { Agent, ExtensionsInput } from \"@copilotkit/runtime-client-gql\";\nimport {\n  LangGraphInterruptRender,\n  LangGraphInterruptActionSetterArgs,\n  QueuedInterruptEvent,\n} from \"../../types/interrupt-action\";\nimport { CoAgentStateRendersProvider } from \"../../context/coagent-state-renders-context\";\nimport { CoAgentStateRenderBridge } from \"../../hooks/use-coagent-state-render-bridge\";\nimport { ThreadsProvider, useThreads } from \"../../context/threads-context\";\nimport { CopilotListeners } from \"../CopilotListeners\";\n\nexport function CopilotKit({ children, ...props }: CopilotKitProps) {\n  const enabled = shouldShowDevConsole(props.showDevConsole);\n  const showInspector = shouldShowDevConsole(props.enableInspector);\n\n  // Use API key if provided, otherwise use the license key\n  const publicApiKey = props.publicApiKey || props.publicLicenseKey;\n\n  const renderArr = useMemo(() => [{ render: CoAgentStateRenderBridge }], []);\n\n  return (\n    <ToastProvider enabled={enabled}>\n      <CopilotErrorBoundary publicApiKey={publicApiKey} showUsageBanner={enabled}>\n        <ThreadsProvider threadId={props.threadId}>\n          <CopilotKitNextProvider\n            {...props}\n            showDevConsole={showInspector}\n            renderCustomMessages={renderArr}\n            useSingleEndpoint={true}\n          >\n            <CopilotKitInternal {...props}>{children}</CopilotKitInternal>\n          </CopilotKitNextProvider>\n        </ThreadsProvider>\n      </CopilotErrorBoundary>\n    </ToastProvider>\n  );\n}\n\nexport function CopilotKitInternal(cpkProps: CopilotKitProps) {\n  const { children, ...props } = cpkProps;\n\n  /**\n   * This will throw an error if the props are invalid.\n   */\n  validateProps(cpkProps);\n\n  // Use license key as API key if provided, otherwise use the API key\n  const publicApiKey = props.publicLicenseKey || props.publicApiKey;\n\n  const chatApiEndpoint = props.runtimeUrl || COPILOT_CLOUD_CHAT_URL;\n\n  const [actions, setActions] = useState<Record<string, FrontendAction<any>>>({});\n\n  // State for registered actions from useCopilotAction\n  const [registeredActionConfigs, setRegisteredActionConfigs] = useState<\n    Map<string, { type: string; action: any; component: any }>\n  >(new Map());\n\n  const chatComponentsCache = useRef<ChatComponentsCache>({\n    actions: {},\n    coAgentStateRenders: {},\n  });\n\n  const { addElement, removeElement, printTree, getAllElements } = useTree();\n  const [isLoading, setIsLoading] = useState(false);\n  const [chatInstructions, setChatInstructions] = useState(\"\");\n  const [authStates, setAuthStates] = useState<Record<string, AuthState>>({});\n  const [extensions, setExtensions] = useState<ExtensionsInput>({});\n  const [additionalInstructions, setAdditionalInstructions] = useState<string[]>([]);\n\n  const {\n    addElement: addDocument,\n    removeElement: removeDocument,\n    allElements: allDocuments,\n  } = useFlatCategoryStore<DocumentPointer>();\n\n  // Compute all the functions and properties that we need to pass\n  const setAction = useCallback((id: string, action: FrontendAction<any>) => {\n    setActions((prevPoints) => {\n      return {\n        ...prevPoints,\n        [id]: action,\n      };\n    });\n  }, []);\n\n  const removeAction = useCallback((id: string) => {\n    setActions((prevPoints) => {\n      const newPoints = { ...prevPoints };\n      delete newPoints[id];\n      return newPoints;\n    });\n  }, []);\n\n  const getContextString = useCallback(\n    (documents: DocumentPointer[], categories: string[]) => {\n      const documentsString = documents\n        .map((document) => {\n          return `${document.name} (${document.sourceApplication}):\\n${document.getContents()}`;\n        })\n        .join(\"\\n\\n\");\n\n      const nonDocumentStrings = printTree(categories);\n\n      return `${documentsString}\\n\\n${nonDocumentStrings}`;\n    },\n    [printTree],\n  );\n\n  const addContext = useCallback(\n    (\n      context: string,\n      parentId?: string,\n      categories: string[] = defaultCopilotContextCategories,\n    ) => {\n      return addElement(context, categories, parentId);\n    },\n    [addElement],\n  );\n\n  const removeContext = useCallback(\n    (id: string) => {\n      removeElement(id);\n    },\n    [removeElement],\n  );\n\n  const getAllContext = useCallback(() => {\n    return getAllElements();\n  }, [getAllElements]);\n\n  const getFunctionCallHandler = useCallback(\n    (customEntryPoints?: Record<string, FrontendAction<any>>) => {\n      return entryPointsToFunctionCallHandler(Object.values(customEntryPoints || actions));\n    },\n    [actions],\n  );\n\n  const getDocumentsContext = useCallback(\n    (categories: string[]) => {\n      return allDocuments(categories);\n    },\n    [allDocuments],\n  );\n\n  const addDocumentContext = useCallback(\n    (documentPointer: DocumentPointer, categories: string[] = defaultCopilotContextCategories) => {\n      return addDocument(documentPointer, categories);\n    },\n    [addDocument],\n  );\n\n  const removeDocumentContext = useCallback(\n    (documentId: string) => {\n      removeDocument(documentId);\n    },\n    [removeDocument],\n  );\n\n  // get the appropriate CopilotApiConfig from the props\n  const copilotApiConfig: CopilotApiConfig = useMemo(() => {\n    let cloud: CopilotCloudConfig | undefined = undefined;\n    if (publicApiKey) {\n      cloud = {\n        guardrails: {\n          input: {\n            restrictToTopic: {\n              enabled: Boolean(props.guardrails_c),\n              validTopics: props.guardrails_c?.validTopics || [],\n              invalidTopics: props.guardrails_c?.invalidTopics || [],\n            },\n          },\n        },\n      };\n    }\n\n    return {\n      publicApiKey: publicApiKey,\n      ...(cloud ? { cloud } : {}),\n      chatApiEndpoint: chatApiEndpoint,\n      headers: props.headers || {},\n      properties: props.properties || {},\n      transcribeAudioUrl: props.transcribeAudioUrl,\n      textToSpeechUrl: props.textToSpeechUrl,\n      credentials: props.credentials,\n    };\n  }, [\n    publicApiKey,\n    props.headers,\n    props.properties,\n    props.transcribeAudioUrl,\n    props.textToSpeechUrl,\n    props.credentials,\n    props.cloudRestrictToTopic,\n    props.guardrails_c,\n  ]);\n\n  const headers = useMemo(() => {\n    const authHeaders = Object.values(authStates || {}).reduce((acc, state) => {\n      if (state.status === \"authenticated\" && state.authHeaders) {\n        return {\n          ...acc,\n          ...Object.entries(state.authHeaders).reduce(\n            (headers, [key, value]) => ({\n              ...headers,\n              [key.startsWith(\"X-Custom-\") ? key : `X-Custom-${key}`]: value,\n            }),\n            {},\n          ),\n        };\n      }\n      return acc;\n    }, {});\n\n    return {\n      ...(copilotApiConfig.headers || {}),\n      ...(copilotApiConfig.publicApiKey\n        ? { [COPILOT_CLOUD_PUBLIC_API_KEY_HEADER]: copilotApiConfig.publicApiKey }\n        : {}),\n      ...authHeaders,\n    };\n  }, [copilotApiConfig.headers, copilotApiConfig.publicApiKey, authStates]);\n\n  const [internalErrorHandlers, _setInternalErrorHandler] = useState<\n    Record<string, CopilotErrorHandler>\n  >({});\n  const setInternalErrorHandler = useCallback((handler: Record<string, CopilotErrorHandler>) => {\n    _setInternalErrorHandler((prev: Record<string, CopilotErrorHandler>) => ({\n      ...prev,\n      ...handler,\n    }));\n  }, []);\n  const removeInternalErrorHandler = useCallback((key: string) => {\n    _setInternalErrorHandler((prev) => {\n      const { [key]: _removed, ...rest } = prev;\n      return rest;\n    });\n  }, []);\n\n  // Keep latest values in refs\n  const onErrorRef = useRef<CopilotErrorHandler | undefined>(props.onError);\n  useEffect(() => {\n    onErrorRef.current = props.onError;\n  }, [props.onError]);\n\n  const internalHandlersRef = useRef<Record<string, CopilotErrorHandler>>({});\n  useEffect(() => {\n    internalHandlersRef.current = internalErrorHandlers;\n  }, [internalErrorHandlers]);\n\n  const handleErrors = useCallback(\n    async (error: CopilotErrorEvent) => {\n      if (copilotApiConfig.publicApiKey && onErrorRef.current) {\n        try {\n          await onErrorRef.current(error);\n        } catch (e) {\n          console.error(\"Error in public onError handler:\", e);\n        }\n      }\n      const handlers = Object.values(internalHandlersRef.current);\n      await Promise.all(\n        handlers.map((h) =>\n          Promise.resolve(h(error)).catch((e) =>\n            console.error(\"Error in internal error handler:\", e),\n          ),\n        ),\n      );\n    },\n    [copilotApiConfig.publicApiKey],\n  );\n\n  const [chatSuggestionConfiguration, setChatSuggestionConfiguration] = useState<{\n    [key: string]: CopilotChatSuggestionConfiguration;\n  }>({});\n\n  const addChatSuggestionConfiguration = useCallback(\n    (id: string, suggestion: CopilotChatSuggestionConfiguration) => {\n      setChatSuggestionConfiguration((prev) => ({ ...prev, [id]: suggestion }));\n    },\n    [setChatSuggestionConfiguration],\n  );\n\n  const removeChatSuggestionConfiguration = useCallback(\n    (id: string) => {\n      setChatSuggestionConfiguration((prev) => {\n        const { [id]: _, ...rest } = prev;\n        return rest;\n      });\n    },\n    [setChatSuggestionConfiguration],\n  );\n\n  const [availableAgents, setAvailableAgents] = useState<Agent[]>([]);\n  const [coagentStates, setCoagentStates] = useState<Record<string, CoagentState>>({});\n  const coagentStatesRef = useRef<Record<string, CoagentState>>({});\n  const setCoagentStatesWithRef = useCallback(\n    (\n      value:\n        | Record<string, CoagentState>\n        | ((prev: Record<string, CoagentState>) => Record<string, CoagentState>),\n    ) => {\n      const newValue = typeof value === \"function\" ? value(coagentStatesRef.current) : value;\n      coagentStatesRef.current = newValue;\n      setCoagentStates((prev) => {\n        return newValue;\n      });\n    },\n    [],\n  );\n\n  let initialAgentSession: AgentSession | null = null;\n  if (props.agent) {\n    initialAgentSession = {\n      agentName: props.agent,\n    };\n  }\n\n  const [agentSession, setAgentSession] = useState<AgentSession | null>(initialAgentSession);\n\n  // Update agentSession when props.agent changes\n  useEffect(() => {\n    if (props.agent) {\n      setAgentSession({\n        agentName: props.agent,\n      });\n    } else {\n      setAgentSession(null);\n    }\n  }, [props.agent]);\n\n  const { threadId, setThreadId: setInternalThreadId } = useThreads();\n\n  const setThreadId = useCallback(\n    (value: SetStateAction<string>) => {\n      if (props.threadId) {\n        throw new Error(\"Cannot call setThreadId() when threadId is provided via props.\");\n      }\n      setInternalThreadId(value);\n    },\n    [props.threadId],\n  );\n\n  const [runId, setRunId] = useState<string | null>(null);\n\n  const chatAbortControllerRef = useRef<AbortController | null>(null);\n\n  const showDevConsole = shouldShowDevConsole(props.showDevConsole);\n\n  const [interruptActions, _setInterruptActions] = useState<\n    Record<string, LangGraphInterruptRender>\n  >({});\n  const setInterruptAction = useCallback((action: LangGraphInterruptActionSetterArgs) => {\n    _setInterruptActions((prev) => {\n      if (action == null || !action.id) {\n        // Cannot set action without id\n        return prev;\n      }\n      return {\n        ...prev,\n        [action.id]: { ...(prev[action.id] ?? {}), ...action } as LangGraphInterruptRender,\n      };\n    });\n  }, []);\n  const removeInterruptAction = useCallback((actionId: string): void => {\n    _setInterruptActions((prev) => {\n      const { [actionId]: _, ...rest } = prev;\n      return rest;\n    });\n  }, []);\n\n  const [interruptEventQueue, setInterruptEventQueue] = useState<\n    Record<string, QueuedInterruptEvent[]>\n  >({});\n\n  const addInterruptEvent = useCallback((queuedEvent: QueuedInterruptEvent) => {\n    setInterruptEventQueue((prev) => {\n      const threadQueue = prev[queuedEvent.threadId] || [];\n      return {\n        ...prev,\n        [queuedEvent.threadId]: [...threadQueue, queuedEvent],\n      };\n    });\n  }, []);\n\n  const resolveInterruptEvent = useCallback(\n    (threadId: string, eventId: string, response: string) => {\n      setInterruptEventQueue((prev) => {\n        const threadQueue = prev[threadId] || [];\n        return {\n          ...prev,\n          [threadId]: threadQueue.map((queuedEvent) =>\n            queuedEvent.eventId === eventId\n              ? { ...queuedEvent, event: { ...queuedEvent.event, response } }\n              : queuedEvent,\n          ),\n        };\n      });\n    },\n    [],\n  );\n\n  const memoizedChildren = useMemo(() => children, [children]);\n  const [bannerError, setBannerError] = useState<CopilotKitError | null>(null);\n\n  const agentLock = useMemo(() => props.agent ?? null, [props.agent]);\n\n  const forwardedParameters = useMemo(\n    () => props.forwardedParameters ?? {},\n    [props.forwardedParameters],\n  );\n\n  const updateExtensions = useCallback(\n    (newExtensions: SetStateAction<ExtensionsInput>) => {\n      setExtensions((prev: ExtensionsInput) => {\n        const resolved = typeof newExtensions === \"function\" ? newExtensions(prev) : newExtensions;\n        const isSameLength = Object.keys(resolved).length === Object.keys(prev).length;\n        const isEqual =\n          isSameLength &&\n          // @ts-ignore\n          Object.entries(resolved).every(([key, value]) => prev[key] === value);\n\n        return isEqual ? prev : resolved;\n      });\n    },\n    [setExtensions],\n  );\n\n  const updateAuthStates = useCallback(\n    (newAuthStates: SetStateAction<Record<string, AuthState>>) => {\n      setAuthStates((prev) => {\n        const resolved = typeof newAuthStates === \"function\" ? newAuthStates(prev) : newAuthStates;\n        const isSameLength = Object.keys(resolved).length === Object.keys(prev).length;\n        const isEqual =\n          isSameLength &&\n          // @ts-ignore\n          Object.entries(resolved).every(([key, value]) => prev[key] === value);\n\n        return isEqual ? prev : resolved;\n      });\n    },\n    [setAuthStates],\n  );\n\n  const handleSetRegisteredActions = useCallback((actionConfig: any): string => {\n    const key = actionConfig.action.name || randomUUID();\n    setRegisteredActionConfigs((prev) => {\n      const newMap = new Map(prev);\n      newMap.set(key, actionConfig);\n      return newMap;\n    });\n    return key;\n  }, []);\n\n  const handleRemoveRegisteredAction = useCallback((actionKey: string) => {\n    setRegisteredActionConfigs((prev) => {\n      const newMap = new Map(prev);\n      newMap.delete(actionKey);\n      return newMap;\n    });\n  }, []);\n\n  // Component to render all registered actions\n  const RegisteredActionsRenderer = useMemo(() => {\n    return () => (\n      <>\n        {Array.from(registeredActionConfigs.entries()).map(([key, config]) => {\n          const Component = config.component;\n          return <Component key={key} action={config.action} />;\n        })}\n      </>\n    );\n  }, [registeredActionConfigs]);\n\n  return (\n    <CopilotChatConfigurationProvider\n      // labels={labels}\n      // isModalDefaultOpen={isModalDefaultOpen}\n      agentId={props.agent ?? \"default\"}\n      threadId={threadId}\n    >\n      <CopilotContext.Provider\n        value={{\n          actions,\n          chatComponentsCache,\n          getFunctionCallHandler,\n          setAction,\n          removeAction,\n          setRegisteredActions: handleSetRegisteredActions,\n          removeRegisteredAction: handleRemoveRegisteredAction,\n          getContextString,\n          addContext,\n          removeContext,\n          getAllContext,\n          getDocumentsContext,\n          addDocumentContext,\n          removeDocumentContext,\n          copilotApiConfig: copilotApiConfig,\n          isLoading,\n          setIsLoading,\n          chatSuggestionConfiguration,\n          addChatSuggestionConfiguration,\n          removeChatSuggestionConfiguration,\n          chatInstructions,\n          setChatInstructions,\n          additionalInstructions,\n          setAdditionalInstructions,\n          showDevConsole,\n          coagentStates,\n          setCoagentStates,\n          coagentStatesRef,\n          setCoagentStatesWithRef,\n          agentSession,\n          setAgentSession,\n          forwardedParameters,\n          agentLock,\n          threadId,\n          setThreadId,\n          runId,\n          setRunId,\n          chatAbortControllerRef,\n          availableAgents,\n          authConfig_c: props.authConfig_c,\n          authStates_c: authStates,\n          setAuthStates_c: updateAuthStates,\n          extensions,\n          setExtensions: updateExtensions,\n          interruptActions,\n          setInterruptAction,\n          removeInterruptAction,\n          interruptEventQueue,\n          addInterruptEvent,\n          resolveInterruptEvent,\n          bannerError,\n          setBannerError,\n          onError: handleErrors,\n          internalErrorHandlers,\n          setInternalErrorHandler,\n          removeInternalErrorHandler,\n        }}\n      >\n        <CopilotListeners />\n        <CoAgentStateRendersProvider>\n          <MessagesTapProvider>\n            <CopilotMessages>\n              {memoizedChildren}\n              <RegisteredActionsRenderer />\n            </CopilotMessages>\n          </MessagesTapProvider>\n          {bannerError && showDevConsole && (\n            <UsageBanner\n              severity={bannerError.severity}\n              message={bannerError.message}\n              onClose={() => setBannerError(null)}\n              actions={getErrorActions(bannerError)}\n            />\n          )}\n        </CoAgentStateRendersProvider>\n      </CopilotContext.Provider>\n    </CopilotChatConfigurationProvider>\n  );\n}\n\nexport const defaultCopilotContextCategories = [\"global\"];\n\nfunction entryPointsToFunctionCallHandler(actions: FrontendAction<any>[]): FunctionCallHandler {\n  return async ({ name, args }: { name: string; args: Record<string, any> }) => {\n    let actionsByFunctionName: Record<string, FrontendAction<any>> = {};\n    for (let action of actions) {\n      actionsByFunctionName[action.name] = action;\n    }\n\n    const action = actionsByFunctionName[name];\n    let result: any = undefined;\n    if (action) {\n      await new Promise<void>((resolve, reject) => {\n        flushSync(async () => {\n          try {\n            result = await action.handler?.(args);\n            resolve();\n          } catch (error) {\n            reject(error);\n          }\n        });\n      });\n      await new Promise((resolve) => setTimeout(resolve, 20));\n    }\n    return result;\n  };\n}\n\nfunction formatFeatureName(featureName: string): string {\n  return featureName\n    .replace(/_c$/, \"\")\n    .split(\"_\")\n    .map((word) => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())\n    .join(\" \");\n}\n\nfunction validateProps(props: CopilotKitProps): never | void {\n  const cloudFeatures = Object.keys(props).filter((key) => key.endsWith(\"_c\"));\n\n  // Check if we have either a runtimeUrl or one of the API keys\n  const hasApiKey = props.publicApiKey || props.publicLicenseKey;\n\n  if (!props.runtimeUrl && !hasApiKey) {\n    throw new ConfigurationError(\n      \"Missing required prop: 'runtimeUrl' or 'publicApiKey' or 'publicLicenseKey'\",\n    );\n  }\n\n  if (cloudFeatures.length > 0 && !hasApiKey) {\n    throw new MissingPublicApiKeyError(\n      `Missing required prop: 'publicApiKey' or 'publicLicenseKey' to use cloud features: ${cloudFeatures\n        .map(formatFeatureName)\n        .join(\", \")}`,\n    );\n  }\n}\n"],"names":["_a","_b","headers","threadId","action"],"mappings":"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"}}]
}