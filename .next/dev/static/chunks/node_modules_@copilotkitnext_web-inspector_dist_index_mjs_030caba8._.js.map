{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40copilotkitnext/web-inspector/src/index.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40copilotkitnext/web-inspector/src/styles/generated.css","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40copilotkitnext/web-inspector/src/lib/context-helpers.ts","file:///Users/wsz/lifebud/version2/lifebud/node_modules/%40copilotkitnext/web-inspector/src/lib/persistence.ts"],"sourcesContent":["import { LitElement, css, html, nothing, unsafeCSS } from \"lit\";\nimport { styleMap } from \"lit/directives/style-map.js\";\nimport tailwindStyles from \"./styles/generated.css\";\nimport inspectorLogoUrl from \"./assets/inspector-logo.svg\";\nimport inspectorLogoIconUrl from \"./assets/inspector-logo-icon.svg\";\nimport { unsafeHTML } from \"lit/directives/unsafe-html.js\";\nimport { marked } from \"marked\";\nimport { icons } from \"lucide\";\nimport {\n  CopilotKitCore,\n  CopilotKitCoreRuntimeConnectionStatus,\n  type CopilotKitCoreSubscriber,\n  type CopilotKitCoreErrorCode,\n} from \"@copilotkitnext/core\";\nimport type { AbstractAgent, AgentSubscriber } from \"@ag-ui/client\";\nimport type { Anchor, ContextKey, ContextState, DockMode, Position, Size } from \"./lib/types\";\nimport {\n  applyAnchorPosition as applyAnchorPositionHelper,\n  centerContext as centerContextHelper,\n  constrainToViewport,\n  keepPositionWithinViewport,\n  updateAnchorFromPosition as updateAnchorFromPositionHelper,\n  updateSizeFromElement,\n  clampSize as clampSizeToViewport,\n} from \"./lib/context-helpers\";\nimport {\n  loadInspectorState,\n  saveInspectorState,\n  type PersistedState,\n  isValidAnchor,\n  isValidPosition,\n  isValidSize,\n  isValidDockMode,\n} from \"./lib/persistence\";\n\nexport const WEB_INSPECTOR_TAG = \"cpk-web-inspector\" as const;\n\ntype LucideIconName = keyof typeof icons;\n\ntype MenuKey = \"ag-ui-events\" | \"agents\" | \"frontend-tools\" | \"agent-context\";\n\ntype MenuItem = {\n  key: MenuKey;\n  label: string;\n  icon: LucideIconName;\n};\n\nconst EDGE_MARGIN = 16;\nconst DRAG_THRESHOLD = 6;\nconst MIN_WINDOW_WIDTH = 600;\nconst MIN_WINDOW_WIDTH_DOCKED_LEFT = 420;\nconst MIN_WINDOW_HEIGHT = 200;\nconst INSPECTOR_STORAGE_KEY = \"cpk:inspector:state\";\nconst ANNOUNCEMENT_STORAGE_KEY = \"cpk:inspector:announcements\";\nconst ANNOUNCEMENT_URL = \"https://cdn.copilotkit.ai/announcements.json\";\nconst DEFAULT_BUTTON_SIZE: Size = { width: 48, height: 48 };\nconst DEFAULT_WINDOW_SIZE: Size = { width: 840, height: 560 };\nconst DOCKED_LEFT_WIDTH = 500; // Sensible width for left dock with collapsed sidebar\nconst MAX_AGENT_EVENTS = 200;\nconst MAX_TOTAL_EVENTS = 500;\n\ntype InspectorAgentEventType =\n  | \"RUN_STARTED\"\n  | \"RUN_FINISHED\"\n  | \"RUN_ERROR\"\n  | \"TEXT_MESSAGE_START\"\n  | \"TEXT_MESSAGE_CONTENT\"\n  | \"TEXT_MESSAGE_END\"\n  | \"TOOL_CALL_START\"\n  | \"TOOL_CALL_ARGS\"\n  | \"TOOL_CALL_END\"\n  | \"TOOL_CALL_RESULT\"\n  | \"STATE_SNAPSHOT\"\n  | \"STATE_DELTA\"\n  | \"MESSAGES_SNAPSHOT\"\n  | \"RAW_EVENT\"\n  | \"CUSTOM_EVENT\";\n\nconst AGENT_EVENT_TYPES: readonly InspectorAgentEventType[] = [\n  \"RUN_STARTED\",\n  \"RUN_FINISHED\",\n  \"RUN_ERROR\",\n  \"TEXT_MESSAGE_START\",\n  \"TEXT_MESSAGE_CONTENT\",\n  \"TEXT_MESSAGE_END\",\n  \"TOOL_CALL_START\",\n  \"TOOL_CALL_ARGS\",\n  \"TOOL_CALL_END\",\n  \"TOOL_CALL_RESULT\",\n  \"STATE_SNAPSHOT\",\n  \"STATE_DELTA\",\n  \"MESSAGES_SNAPSHOT\",\n  \"RAW_EVENT\",\n  \"CUSTOM_EVENT\",\n] as const;\n\ntype SanitizedValue =\n  | string\n  | number\n  | boolean\n  | null\n  | SanitizedValue[]\n  | { [key: string]: SanitizedValue };\n\ntype InspectorToolCall = {\n  id?: string;\n  function?: {\n    name?: string;\n    arguments?: SanitizedValue | string;\n  };\n  toolName?: string;\n  status?: string;\n};\n\ntype InspectorMessage = {\n  id?: string;\n  role: string;\n  contentText: string;\n  contentRaw?: SanitizedValue;\n  toolCalls: InspectorToolCall[];\n};\n\ntype InspectorToolDefinition = {\n  agentId: string;\n  name: string;\n  description?: string;\n  parameters?: unknown;\n  type: \"handler\" | \"renderer\";\n};\n\ntype InspectorEvent = {\n  id: string;\n  agentId: string;\n  type: InspectorAgentEventType;\n  timestamp: number;\n  payload: SanitizedValue;\n};\n\nexport class WebInspectorElement extends LitElement {\n  static properties = {\n    core: { attribute: false },\n    autoAttachCore: { type: Boolean, attribute: \"auto-attach-core\" },\n  } as const;\n\n  private _core: CopilotKitCore | null = null;\n  private coreSubscriber: CopilotKitCoreSubscriber | null = null;\n  private coreUnsubscribe: (() => void) | null = null;\n  private runtimeStatus: CopilotKitCoreRuntimeConnectionStatus | null = null;\n  private coreProperties: Readonly<Record<string, unknown>> = {};\n  private lastCoreError: { code: CopilotKitCoreErrorCode; message: string } | null = null;\n  private agentSubscriptions: Map<string, () => void> = new Map();\n  private agentEvents: Map<string, InspectorEvent[]> = new Map();\n  private agentMessages: Map<string, InspectorMessage[]> = new Map();\n  private agentStates: Map<string, SanitizedValue> = new Map();\n  private flattenedEvents: InspectorEvent[] = [];\n  private eventCounter = 0;\n  private contextStore: Record<string, { description?: string; value: unknown }> = {};\n\n  private pointerId: number | null = null;\n  private dragStart: Position | null = null;\n  private dragOffset: Position = { x: 0, y: 0 };\n  private isDragging = false;\n  private pointerContext: ContextKey | null = null;\n  private isOpen = false;\n  private draggedDuringInteraction = false;\n  private ignoreNextButtonClick = false;\n  private selectedMenu: MenuKey = \"ag-ui-events\";\n  private contextMenuOpen = false;\n  private dockMode: DockMode = \"floating\";\n  private previousBodyMargins: { left: string; bottom: string } | null = null;\n  private transitionTimeoutId: ReturnType<typeof setTimeout> | null = null;\n  private pendingSelectedContext: string | null = null;\n  private autoAttachCore = true;\n  private attemptedAutoAttach = false;\n  private cachedTools: InspectorToolDefinition[] = [];\n  private toolSignature = \"\";\n  private eventFilterText = \"\";\n  private eventTypeFilter: InspectorAgentEventType | \"all\" = \"all\";\n\n  private announcementMarkdown: string | null = null;\n  private announcementHtml: string | null = null;\n  private announcementTimestamp: string | null = null;\n  private announcementPreviewText: string | null = null;\n  private hasUnseenAnnouncement = false;\n  private announcementLoaded = false;\n  private announcementLoadError: unknown = null;\n  private announcementPromise: Promise<void> | null = null;\n  private showAnnouncementPreview = true;\n\n  get core(): CopilotKitCore | null {\n    return this._core;\n  }\n\n  set core(value: CopilotKitCore | null) {\n    const oldValue = this._core;\n    if (oldValue === value) {\n      return;\n    }\n\n    this.detachFromCore();\n\n    this._core = value ?? null;\n    this.requestUpdate(\"core\", oldValue);\n\n    if (this._core) {\n      this.attachToCore(this._core);\n    }\n  }\n\n  private readonly contextState: Record<ContextKey, ContextState> = {\n    button: {\n      position: { x: EDGE_MARGIN, y: EDGE_MARGIN },\n      size: { ...DEFAULT_BUTTON_SIZE },\n      anchor: { horizontal: \"right\", vertical: \"top\" },\n      anchorOffset: { x: EDGE_MARGIN, y: EDGE_MARGIN },\n    },\n    window: {\n      position: { x: EDGE_MARGIN, y: EDGE_MARGIN },\n      size: { ...DEFAULT_WINDOW_SIZE },\n      anchor: { horizontal: \"right\", vertical: \"top\" },\n      anchorOffset: { x: EDGE_MARGIN, y: EDGE_MARGIN },\n    },\n  };\n\n  private hasCustomPosition: Record<ContextKey, boolean> = {\n    button: false,\n    window: false,\n  };\n\n  private resizePointerId: number | null = null;\n  private resizeStart: Position | null = null;\n  private resizeInitialSize: { width: number; height: number } | null = null;\n  private isResizing = false;\n\n  private readonly menuItems: MenuItem[] = [\n    { key: \"ag-ui-events\", label: \"AG-UI Events\", icon: \"Zap\" },\n    { key: \"agents\", label: \"Agent\", icon: \"Bot\" },\n    { key: \"frontend-tools\", label: \"Frontend Tools\", icon: \"Hammer\" },\n    { key: \"agent-context\", label: \"Context\", icon: \"FileText\" },\n  ];\n\n  private attachToCore(core: CopilotKitCore): void {\n    this.runtimeStatus = core.runtimeConnectionStatus;\n    this.coreProperties = core.properties;\n    this.lastCoreError = null;\n\n    this.coreSubscriber = {\n      onRuntimeConnectionStatusChanged: ({ status }) => {\n        this.runtimeStatus = status;\n        this.requestUpdate();\n      },\n      onPropertiesChanged: ({ properties }) => {\n        this.coreProperties = properties;\n        this.requestUpdate();\n      },\n      onError: ({ code, error }) => {\n        this.lastCoreError = { code, message: error.message };\n        this.requestUpdate();\n      },\n      onAgentsChanged: ({ agents }) => {\n        this.processAgentsChanged(agents);\n      },\n      onContextChanged: ({ context }) => {\n        this.contextStore = this.normalizeContextStore(context);\n        this.requestUpdate();\n      },\n    } satisfies CopilotKitCoreSubscriber;\n\n    this.coreUnsubscribe = core.subscribe(this.coreSubscriber).unsubscribe;\n    this.processAgentsChanged(core.agents);\n\n    // Initialize context from core\n    if (core.context) {\n      this.contextStore = this.normalizeContextStore(core.context);\n    }\n  }\n\n  private detachFromCore(): void {\n    if (this.coreUnsubscribe) {\n      this.coreUnsubscribe();\n      this.coreUnsubscribe = null;\n    }\n    this.coreSubscriber = null;\n    this.runtimeStatus = null;\n    this.lastCoreError = null;\n    this.coreProperties = {};\n    this.cachedTools = [];\n    this.toolSignature = \"\";\n    this.teardownAgentSubscriptions();\n  }\n\n  private teardownAgentSubscriptions(): void {\n    for (const unsubscribe of this.agentSubscriptions.values()) {\n      unsubscribe();\n    }\n    this.agentSubscriptions.clear();\n    this.agentEvents.clear();\n    this.agentMessages.clear();\n    this.agentStates.clear();\n    this.flattenedEvents = [];\n    this.eventCounter = 0;\n  }\n\n  private processAgentsChanged(agents: Readonly<Record<string, AbstractAgent>>): void {\n    const seenAgentIds = new Set<string>();\n\n    for (const agent of Object.values(agents)) {\n      if (!agent?.agentId) {\n        continue;\n      }\n      seenAgentIds.add(agent.agentId);\n      this.subscribeToAgent(agent);\n    }\n\n    for (const agentId of Array.from(this.agentSubscriptions.keys())) {\n      if (!seenAgentIds.has(agentId)) {\n        this.unsubscribeFromAgent(agentId);\n        this.agentEvents.delete(agentId);\n        this.agentMessages.delete(agentId);\n        this.agentStates.delete(agentId);\n      }\n    }\n\n    this.updateContextOptions(seenAgentIds);\n    this.refreshToolsSnapshot();\n    this.requestUpdate();\n  }\n\n  private refreshToolsSnapshot(): void {\n    if (!this._core) {\n      if (this.cachedTools.length > 0) {\n        this.cachedTools = [];\n        this.toolSignature = \"\";\n        this.requestUpdate();\n      }\n      return;\n    }\n\n    const tools = this.extractToolsFromAgents();\n    const signature = JSON.stringify(\n      tools.map((tool) => ({\n        agentId: tool.agentId,\n        name: tool.name,\n        type: tool.type,\n        hasDescription: Boolean(tool.description),\n        hasParameters: Boolean(tool.parameters),\n      })),\n    );\n\n    if (signature !== this.toolSignature) {\n      this.toolSignature = signature;\n      this.cachedTools = tools;\n      this.requestUpdate();\n    }\n  }\n\n  private tryAutoAttachCore(): void {\n    if (this.attemptedAutoAttach || this._core || !this.autoAttachCore || typeof window === \"undefined\") {\n      return;\n    }\n\n    this.attemptedAutoAttach = true;\n\n    const globalWindow = window as unknown as Record<string, unknown>;\n    const globalCandidates: Array<unknown> = [\n      // Common app-level globals used during development\n      globalWindow.__COPILOTKIT_CORE__,\n      (globalWindow.copilotkit as { core?: unknown } | undefined)?.core,\n      globalWindow.copilotkitCore,\n    ];\n\n    const foundCore = globalCandidates.find(\n      (candidate): candidate is CopilotKitCore => !!candidate && typeof candidate === \"object\",\n    );\n\n    if (foundCore) {\n      this.core = foundCore;\n    }\n  }\n\n  private subscribeToAgent(agent: AbstractAgent): void {\n    if (!agent.agentId) {\n      return;\n    }\n\n    const agentId = agent.agentId;\n\n    this.unsubscribeFromAgent(agentId);\n\n    const subscriber: AgentSubscriber = {\n      onRunStartedEvent: ({ event }) => {\n        this.recordAgentEvent(agentId, \"RUN_STARTED\", event);\n      },\n      onRunFinishedEvent: ({ event, result }) => {\n        this.recordAgentEvent(agentId, \"RUN_FINISHED\", { event, result });\n      },\n      onRunErrorEvent: ({ event }) => {\n        this.recordAgentEvent(agentId, \"RUN_ERROR\", event);\n      },\n      onTextMessageStartEvent: ({ event }) => {\n        this.recordAgentEvent(agentId, \"TEXT_MESSAGE_START\", event);\n      },\n      onTextMessageContentEvent: ({ event, textMessageBuffer }) => {\n        this.recordAgentEvent(agentId, \"TEXT_MESSAGE_CONTENT\", { event, textMessageBuffer });\n      },\n      onTextMessageEndEvent: ({ event, textMessageBuffer }) => {\n        this.recordAgentEvent(agentId, \"TEXT_MESSAGE_END\", { event, textMessageBuffer });\n      },\n      onToolCallStartEvent: ({ event }) => {\n        this.recordAgentEvent(agentId, \"TOOL_CALL_START\", event);\n      },\n      onToolCallArgsEvent: ({ event, toolCallBuffer, toolCallName, partialToolCallArgs }) => {\n        this.recordAgentEvent(agentId, \"TOOL_CALL_ARGS\", { event, toolCallBuffer, toolCallName, partialToolCallArgs });\n      },\n      onToolCallEndEvent: ({ event, toolCallArgs, toolCallName }) => {\n        this.recordAgentEvent(agentId, \"TOOL_CALL_END\", { event, toolCallArgs, toolCallName });\n      },\n      onToolCallResultEvent: ({ event }) => {\n        this.recordAgentEvent(agentId, \"TOOL_CALL_RESULT\", event);\n      },\n      onStateSnapshotEvent: ({ event }) => {\n        this.recordAgentEvent(agentId, \"STATE_SNAPSHOT\", event);\n        this.syncAgentState(agent);\n      },\n      onStateDeltaEvent: ({ event }) => {\n        this.recordAgentEvent(agentId, \"STATE_DELTA\", event);\n        this.syncAgentState(agent);\n      },\n      onMessagesSnapshotEvent: ({ event }) => {\n        this.recordAgentEvent(agentId, \"MESSAGES_SNAPSHOT\", event);\n        this.syncAgentMessages(agent);\n      },\n      onMessagesChanged: () => {\n        this.syncAgentMessages(agent);\n      },\n      onRawEvent: ({ event }) => {\n        this.recordAgentEvent(agentId, \"RAW_EVENT\", event);\n      },\n      onCustomEvent: ({ event }) => {\n        this.recordAgentEvent(agentId, \"CUSTOM_EVENT\", event);\n      },\n    };\n\n    const { unsubscribe } = agent.subscribe(subscriber);\n    this.agentSubscriptions.set(agentId, unsubscribe);\n    this.syncAgentMessages(agent);\n    this.syncAgentState(agent);\n\n    if (!this.agentEvents.has(agentId)) {\n      this.agentEvents.set(agentId, []);\n    }\n  }\n\n  private unsubscribeFromAgent(agentId: string): void {\n    const unsubscribe = this.agentSubscriptions.get(agentId);\n    if (unsubscribe) {\n      unsubscribe();\n      this.agentSubscriptions.delete(agentId);\n    }\n  }\n\n  private recordAgentEvent(agentId: string, type: InspectorAgentEventType, payload: unknown): void {\n    const eventId = `${agentId}:${++this.eventCounter}`;\n    const normalizedPayload = this.normalizeEventPayload(type, payload);\n    const event: InspectorEvent = {\n      id: eventId,\n      agentId,\n      type,\n      timestamp: Date.now(),\n      payload: normalizedPayload,\n    };\n\n    const currentAgentEvents = this.agentEvents.get(agentId) ?? [];\n    const nextAgentEvents = [event, ...currentAgentEvents].slice(0, MAX_AGENT_EVENTS);\n    this.agentEvents.set(agentId, nextAgentEvents);\n\n    this.flattenedEvents = [event, ...this.flattenedEvents].slice(0, MAX_TOTAL_EVENTS);\n    this.refreshToolsSnapshot();\n    this.requestUpdate();\n  }\n\n  private syncAgentMessages(agent: AbstractAgent): void {\n    if (!agent?.agentId) {\n      return;\n    }\n\n    const messages = this.normalizeAgentMessages((agent as { messages?: unknown }).messages);\n    if (messages) {\n      this.agentMessages.set(agent.agentId, messages);\n    } else {\n      this.agentMessages.delete(agent.agentId);\n    }\n\n    this.requestUpdate();\n  }\n\n  private syncAgentState(agent: AbstractAgent): void {\n    if (!agent?.agentId) {\n      return;\n    }\n\n    const state = (agent as { state?: unknown }).state;\n\n    if (state === undefined || state === null) {\n      this.agentStates.delete(agent.agentId);\n    } else {\n      this.agentStates.set(agent.agentId, this.sanitizeForLogging(state));\n    }\n\n    this.requestUpdate();\n  }\n\n  private updateContextOptions(agentIds: Set<string>): void {\n    const nextOptions: Array<{ key: string; label: string }> = [\n      { key: \"all-agents\", label: \"All Agents\" },\n      ...Array.from(agentIds)\n        .sort((a, b) => a.localeCompare(b))\n        .map((id) => ({ key: id, label: id })),\n    ];\n\n    const optionsChanged =\n      this.contextOptions.length !== nextOptions.length ||\n      this.contextOptions.some((option, index) => option.key !== nextOptions[index]?.key);\n\n    if (optionsChanged) {\n      this.contextOptions = nextOptions;\n    }\n\n    const pendingContext = this.pendingSelectedContext;\n    if (pendingContext) {\n      const isPendingAvailable = pendingContext === \"all-agents\" || agentIds.has(pendingContext);\n      if (isPendingAvailable) {\n        if (this.selectedContext !== pendingContext) {\n          this.selectedContext = pendingContext;\n          this.expandedRows.clear();\n        }\n        this.pendingSelectedContext = null;\n      } else if (agentIds.size > 0) {\n        // Agents are loaded but the pending selection no longer exists\n        this.pendingSelectedContext = null;\n      }\n    }\n\n    const hasSelectedContext = nextOptions.some((option) => option.key === this.selectedContext);\n\n    if (!hasSelectedContext && this.pendingSelectedContext === null) {\n      // Auto-select \"default\" agent if it exists, otherwise first agent, otherwise \"all-agents\"\n      let nextSelected: string = \"all-agents\";\n\n      if (agentIds.has(\"default\")) {\n        nextSelected = \"default\";\n      } else if (agentIds.size > 0) {\n        nextSelected = Array.from(agentIds).sort((a, b) => a.localeCompare(b))[0]!;\n      }\n\n      if (this.selectedContext !== nextSelected) {\n        this.selectedContext = nextSelected;\n        this.expandedRows.clear();\n        this.persistState();\n      }\n    }\n  }\n\n  private getEventsForSelectedContext(): InspectorEvent[] {\n    if (this.selectedContext === \"all-agents\") {\n      return this.flattenedEvents;\n    }\n\n    return this.agentEvents.get(this.selectedContext) ?? [];\n  }\n\n  private filterEvents(events: InspectorEvent[]): InspectorEvent[] {\n    const query = this.eventFilterText.trim().toLowerCase();\n\n    return events.filter((event) => {\n      if (this.eventTypeFilter !== \"all\" && event.type !== this.eventTypeFilter) {\n        return false;\n      }\n\n      if (!query) {\n        return true;\n      }\n\n      const payloadText = this.stringifyPayload(event.payload, false).toLowerCase();\n      return (\n        event.type.toLowerCase().includes(query) ||\n        event.agentId.toLowerCase().includes(query) ||\n        payloadText.includes(query)\n      );\n    });\n  }\n\n  private getLatestStateForAgent(agentId: string): SanitizedValue | null {\n    if (this.agentStates.has(agentId)) {\n      const value = this.agentStates.get(agentId);\n      return value === undefined ? null : value;\n    }\n\n    const events = this.agentEvents.get(agentId) ?? [];\n    const stateEvent = events.find((e) => e.type === \"STATE_SNAPSHOT\");\n    if (!stateEvent) {\n      return null;\n    }\n    return stateEvent.payload;\n  }\n\n  private getLatestMessagesForAgent(agentId: string): InspectorMessage[] | null {\n    const messages = this.agentMessages.get(agentId);\n    return messages ?? null;\n  }\n\n  private getAgentStatus(agentId: string): \"running\" | \"idle\" | \"error\" {\n    const events = this.agentEvents.get(agentId) ?? [];\n    if (events.length === 0) {\n      return \"idle\";\n    }\n\n    // Check most recent run-related event\n    const runEvent = events.find((e) => e.type === \"RUN_STARTED\" || e.type === \"RUN_FINISHED\" || e.type === \"RUN_ERROR\");\n\n    if (!runEvent) {\n      return \"idle\";\n    }\n\n    if (runEvent.type === \"RUN_ERROR\") {\n      return \"error\";\n    }\n\n    if (runEvent.type === \"RUN_STARTED\") {\n      // Check if there's a RUN_FINISHED after this\n      const finishedAfter = events.find(\n        (e) => e.type === \"RUN_FINISHED\" && e.timestamp > runEvent.timestamp\n      );\n      return finishedAfter ? \"idle\" : \"running\";\n    }\n\n    return \"idle\";\n  }\n\n  private getAgentStats(agentId: string): { totalEvents: number; lastActivity: number | null; messages: number; toolCalls: number; errors: number } {\n    const events = this.agentEvents.get(agentId) ?? [];\n\n    const messages = this.agentMessages.get(agentId);\n\n    const toolCallCount = messages\n      ? messages.reduce((count, message) => count + (message.toolCalls?.length ?? 0), 0)\n      : events.filter((e) => e.type === \"TOOL_CALL_END\").length;\n\n    const messageCount = messages?.length ?? 0;\n\n    return {\n      totalEvents: events.length,\n      lastActivity: events[0]?.timestamp ?? null,\n      messages: messageCount,\n      toolCalls: toolCallCount,\n      errors: events.filter((e) => e.type === \"RUN_ERROR\").length,\n    };\n  }\n\n  private renderToolCallDetails(toolCalls: InspectorToolCall[]) {\n    if (!Array.isArray(toolCalls) || toolCalls.length === 0) {\n      return nothing;\n    }\n\n    return html`\n      <div class=\"mt-2 space-y-2\">\n        ${toolCalls.map((call, index) => {\n          const functionName = call.function?.name ?? call.toolName ?? \"Unknown function\";\n          const callId = typeof call?.id === \"string\" ? call.id : `tool-call-${index + 1}`;\n          const argsString = this.formatToolCallArguments(call.function?.arguments);\n          return html`\n            <div class=\"rounded-md border border-gray-200 bg-gray-50 p-3 text-xs text-gray-700\">\n              <div class=\"flex flex-wrap items-center justify-between gap-1 font-medium text-gray-900\">\n                <span>${functionName}</span>\n                <span class=\"text-[10px] text-gray-500\">ID: ${callId}</span>\n              </div>\n              ${argsString\n                ? html`<pre class=\"mt-2 overflow-auto rounded bg-white p-2 text-[11px] leading-relaxed text-gray-800\">${argsString}</pre>`\n                : nothing}\n            </div>\n          `;\n        })}\n      </div>\n    `;\n  }\n\n  private formatToolCallArguments(args: unknown): string | null {\n    if (args === undefined || args === null || args === '') {\n      return null;\n    }\n\n    if (typeof args === 'string') {\n      try {\n        const parsed = JSON.parse(args);\n        return JSON.stringify(parsed, null, 2);\n      } catch {\n        return args;\n      }\n    }\n\n    if (typeof args === 'object') {\n      try {\n        return JSON.stringify(args, null, 2);\n      } catch {\n        return String(args);\n      }\n    }\n\n    return String(args);\n  }\n\n  private hasRenderableState(state: unknown): boolean {\n    if (state === null || state === undefined) {\n      return false;\n    }\n\n    if (Array.isArray(state)) {\n      return state.length > 0;\n    }\n\n    if (typeof state === 'object') {\n      return Object.keys(state as Record<string, unknown>).length > 0;\n    }\n\n    if (typeof state === 'string') {\n      const trimmed = state.trim();\n      return trimmed.length > 0 && trimmed !== '{}';\n    }\n\n    return true;\n  }\n\n  private formatStateForDisplay(state: unknown): string {\n    if (state === null || state === undefined) {\n      return '';\n    }\n\n    if (typeof state === 'string') {\n      const trimmed = state.trim();\n      if (trimmed.length === 0) {\n        return '';\n      }\n      try {\n        const parsed = JSON.parse(trimmed);\n        return JSON.stringify(parsed, null, 2);\n      } catch {\n        return state;\n      }\n    }\n\n    if (typeof state === 'object') {\n      try {\n        return JSON.stringify(state, null, 2);\n      } catch {\n        return String(state);\n      }\n    }\n\n    return String(state);\n  }\n\n  private getEventBadgeClasses(type: string): string {\n    const base = \"font-mono text-[10px] font-medium inline-flex items-center rounded-sm px-1.5 py-0.5 border\";\n\n    if (type.startsWith(\"RUN_\")) {\n      return `${base} bg-blue-50 text-blue-700 border-blue-200`;\n    }\n\n    if (type.startsWith(\"TEXT_MESSAGE\")) {\n      return `${base} bg-emerald-50 text-emerald-700 border-emerald-200`;\n    }\n\n    if (type.startsWith(\"TOOL_CALL\")) {\n      return `${base} bg-amber-50 text-amber-700 border-amber-200`;\n    }\n\n    if (type.startsWith(\"STATE\")) {\n      return `${base} bg-violet-50 text-violet-700 border-violet-200`;\n    }\n\n    if (type.startsWith(\"MESSAGES\")) {\n      return `${base} bg-sky-50 text-sky-700 border-sky-200`;\n    }\n\n    if (type === \"RUN_ERROR\") {\n      return `${base} bg-rose-50 text-rose-700 border-rose-200`;\n    }\n\n    return `${base} bg-gray-100 text-gray-600 border-gray-200`;\n  }\n\n  private stringifyPayload(payload: unknown, pretty: boolean): string {\n    try {\n      if (payload === undefined) {\n        return pretty ? \"undefined\" : \"undefined\";\n      }\n      if (typeof payload === \"string\") {\n        return payload;\n      }\n      return JSON.stringify(payload, null, pretty ? 2 : 0) ?? \"\";\n    } catch (error) {\n      console.warn(\"Failed to stringify inspector payload\", error);\n      return String(payload);\n    }\n  }\n\n  private extractEventFromPayload(payload: unknown): unknown {\n    // If payload is an object with an 'event' field, extract it\n    if (payload && typeof payload === \"object\" && \"event\" in payload) {\n      return (payload as Record<string, unknown>).event;\n    }\n    // Otherwise, assume the payload itself is the event\n    return payload;\n  }\n\n  private async copyToClipboard(text: string, eventId: string): Promise<void> {\n    try {\n      await navigator.clipboard.writeText(text);\n      this.copiedEvents.add(eventId);\n      this.requestUpdate();\n\n      // Clear the \"copied\" state after 2 seconds\n      setTimeout(() => {\n        this.copiedEvents.delete(eventId);\n        this.requestUpdate();\n      }, 2000);\n    } catch (err) {\n      console.error(\"Failed to copy to clipboard:\", err);\n    }\n  }\n\n  static styles = [\n    unsafeCSS(tailwindStyles),\n    css`\n      :host {\n        position: fixed;\n        top: 0;\n        left: 0;\n        z-index: 2147483646;\n        display: block;\n        will-change: transform;\n      }\n\n      :host([data-transitioning=\"true\"]) {\n        transition: transform 300ms ease;\n      }\n\n      .console-button {\n        transition:\n          transform 300ms cubic-bezier(0.34, 1.56, 0.64, 1),\n          opacity 160ms ease;\n      }\n\n      .console-button[data-dragging=\"true\"] {\n        transition: opacity 160ms ease;\n      }\n\n      .inspector-window[data-transitioning=\"true\"] {\n        transition: width 300ms ease, height 300ms ease;\n      }\n\n      .inspector-window[data-docked=\"true\"] {\n        border-radius: 0 !important;\n        box-shadow: none !important;\n      }\n\n      .resize-handle {\n        touch-action: none;\n        user-select: none;\n      }\n\n      .dock-resize-handle {\n        position: absolute;\n        top: 0;\n        right: 0;\n        width: 10px;\n        height: 100%;\n        cursor: ew-resize;\n        touch-action: none;\n        z-index: 50;\n        background: transparent;\n      }\n\n      .tooltip-target {\n        position: relative;\n      }\n\n      .tooltip-target::after {\n        content: attr(data-tooltip);\n        position: absolute;\n        top: calc(100% + 6px);\n        left: 50%;\n        transform: translateX(-50%) translateY(-4px);\n        white-space: nowrap;\n        background: rgba(17, 24, 39, 0.95);\n        color: white;\n        padding: 4px 8px;\n        border-radius: 6px;\n        font-size: 10px;\n        line-height: 1.2;\n        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);\n        opacity: 0;\n        pointer-events: none;\n        transition: opacity 120ms ease, transform 120ms ease;\n        z-index: 4000;\n      }\n\n      .tooltip-target:hover::after {\n        opacity: 1;\n        transform: translateX(-50%) translateY(0);\n      }\n\n      .announcement-preview {\n        position: absolute;\n        top: 50%;\n        transform: translateY(-50%);\n        min-width: 300px;\n        max-width: 300px;\n        background: white;\n        color: #111827;\n        font-size: 13px;\n        line-height: 1.4;\n        border-radius: 12px;\n        box-shadow: 0 12px 28px rgba(15, 23, 42, 0.22);\n        padding: 10px 12px;\n        display: inline-flex;\n        align-items: flex-start;\n        gap: 8px;\n        z-index: 4500;\n        animation: fade-slide-in 160ms ease;\n        border: 1px solid rgba(148, 163, 184, 0.35);\n        white-space: normal;\n        word-break: break-word;\n        text-align: left;\n      }\n\n      .announcement-preview[data-side=\"left\"] {\n        right: 100%;\n        margin-right: 10px;\n      }\n\n      .announcement-preview[data-side=\"right\"] {\n        left: 100%;\n        margin-left: 10px;\n      }\n\n      .announcement-preview__arrow {\n        position: absolute;\n        width: 10px;\n        height: 10px;\n        background: white;\n        border: 1px solid rgba(148, 163, 184, 0.35);\n        transform: rotate(45deg);\n        top: 50%;\n        margin-top: -5px;\n        z-index: -1;\n      }\n\n      .announcement-preview[data-side=\"left\"] .announcement-preview__arrow {\n        right: -5px;\n        box-shadow: 6px -6px 10px rgba(15, 23, 42, 0.12);\n      }\n\n      .announcement-preview[data-side=\"right\"] .announcement-preview__arrow {\n        left: -5px;\n        box-shadow: -6px 6px 10px rgba(15, 23, 42, 0.12);\n      }\n\n      .announcement-dismiss {\n        color: #6b7280;\n        font-size: 12px;\n        padding: 2px 8px;\n        border-radius: 8px;\n        border: 1px solid rgba(148, 163, 184, 0.5);\n        background: rgba(248, 250, 252, 0.9);\n        transition: background 120ms ease, color 120ms ease;\n      }\n\n      .announcement-dismiss:hover {\n        background: rgba(241, 245, 249, 1);\n        color: #111827;\n      }\n\n      .announcement-content {\n        color: #111827;\n        font-size: 14px;\n        line-height: 1.6;\n      }\n\n      .announcement-content h1,\n      .announcement-content h2,\n      .announcement-content h3 {\n        font-weight: 700;\n        margin: 0.4rem 0 0.2rem;\n      }\n\n      .announcement-content h1 {\n        font-size: 1.1rem;\n      }\n\n      .announcement-content h2 {\n        font-size: 1rem;\n      }\n\n      .announcement-content h3 {\n        font-size: 0.95rem;\n      }\n\n      .announcement-content p {\n        margin: 0.25rem 0;\n      }\n\n      .announcement-content ul {\n        list-style: disc;\n        padding-left: 1.25rem;\n        margin: 0.3rem 0;\n      }\n\n      .announcement-content ol {\n        list-style: decimal;\n        padding-left: 1.25rem;\n        margin: 0.3rem 0;\n      }\n\n      .announcement-content a {\n        color: #0f766e;\n        text-decoration: underline;\n      }\n    `,\n  ];\n\n  connectedCallback(): void {\n    super.connectedCallback();\n    if (typeof window !== \"undefined\") {\n      window.addEventListener(\"resize\", this.handleResize);\n      window.addEventListener(\"pointerdown\", this.handleGlobalPointerDown as EventListener);\n\n      // Load state early (before first render) so menu selection is correct\n      this.hydrateStateFromStorageEarly();\n      this.tryAutoAttachCore();\n      this.ensureAnnouncementLoading();\n    }\n  }\n\n  disconnectedCallback(): void {\n    super.disconnectedCallback();\n    if (typeof window !== \"undefined\") {\n      window.removeEventListener(\"resize\", this.handleResize);\n      window.removeEventListener(\"pointerdown\", this.handleGlobalPointerDown as EventListener);\n    }\n    this.removeDockStyles(); // Clean up any docking styles\n    this.detachFromCore();\n  }\n\n  firstUpdated(): void {\n    if (typeof window === \"undefined\") {\n      return;\n    }\n\n    if (!this._core) {\n      this.tryAutoAttachCore();\n    }\n\n    this.measureContext(\"button\");\n    this.measureContext(\"window\");\n\n    this.contextState.button.anchor = { horizontal: \"right\", vertical: \"top\" };\n    this.contextState.button.anchorOffset = { x: EDGE_MARGIN, y: EDGE_MARGIN };\n\n    this.contextState.window.anchor = { horizontal: \"right\", vertical: \"top\" };\n    this.contextState.window.anchorOffset = { x: EDGE_MARGIN, y: EDGE_MARGIN };\n\n    this.hydrateStateFromStorage();\n\n    // Apply docking styles if open and docked (skip transition on initial load)\n    if (this.isOpen && this.dockMode !== 'floating') {\n      this.applyDockStyles(true);\n    }\n\n    this.applyAnchorPosition(\"button\");\n\n    if (this.dockMode === 'floating') {\n      if (this.hasCustomPosition.window) {\n        this.applyAnchorPosition(\"window\");\n      } else {\n        this.centerContext(\"window\");\n      }\n    }\n\n    this.ensureAnnouncementLoading();\n\n    this.updateHostTransform(this.isOpen ? \"window\" : \"button\");\n  }\n\n  render() {\n    return this.isOpen ? this.renderWindow() : this.renderButton();\n  }\n\n  private renderButton() {\n    const buttonClasses = [\n      \"console-button\",\n      \"group\",\n      \"relative\",\n      \"pointer-events-auto\",\n      \"inline-flex\",\n      \"h-12\",\n      \"w-12\",\n      \"items-center\",\n      \"justify-center\",\n      \"rounded-full\",\n      \"border\",\n      \"border-white/20\",\n      \"bg-slate-950/95\",\n      \"text-xs\",\n      \"font-medium\",\n      \"text-white\",\n      \"ring-1\",\n      \"ring-white/10\",\n      \"backdrop-blur-md\",\n      \"transition\",\n      \"hover:border-white/30\",\n      \"hover:bg-slate-900/95\",\n      \"hover:scale-105\",\n      \"focus-visible:outline\",\n      \"focus-visible:outline-2\",\n      \"focus-visible:outline-offset-2\",\n      \"focus-visible:outline-rose-500\",\n      \"touch-none\",\n      \"select-none\",\n      this.isDragging ? \"cursor-grabbing\" : \"cursor-grab\",\n    ].join(\" \");\n\n    return html`\n      <button\n        class=${buttonClasses}\n        type=\"button\"\n        aria-label=\"Web Inspector\"\n        data-drag-context=\"button\"\n        data-dragging=${this.isDragging && this.pointerContext === \"button\" ? \"true\" : \"false\"}\n        @pointerdown=${this.handlePointerDown}\n        @pointermove=${this.handlePointerMove}\n        @pointerup=${this.handlePointerUp}\n        @pointercancel=${this.handlePointerCancel}\n        @click=${this.handleButtonClick}\n      >\n        ${this.renderAnnouncementPreview()}\n        <img src=${inspectorLogoIconUrl} alt=\"Inspector logo\" class=\"h-5 w-auto\" loading=\"lazy\" />\n      </button>\n    `;\n  }\n\n  private renderWindow() {\n    const windowState = this.contextState.window;\n    const isDocked = this.dockMode !== 'floating';\n    const isTransitioning = this.hasAttribute('data-transitioning');\n\n    const windowStyles = isDocked\n      ? this.getDockedWindowStyles()\n      : {\n          width: `${Math.round(windowState.size.width)}px`,\n          height: `${Math.round(windowState.size.height)}px`,\n          minWidth: `${MIN_WINDOW_WIDTH}px`,\n          minHeight: `${MIN_WINDOW_HEIGHT}px`,\n        };\n\n    const hasContextDropdown = this.contextOptions.length > 0;\n    const contextDropdown = hasContextDropdown ? this.renderContextDropdown() : nothing;\n    const coreStatus = this.getCoreStatusSummary();\n    const agentSelector = hasContextDropdown\n      ? contextDropdown\n      : html`\n          <div class=\"flex items-center gap-2 rounded-md border border-dashed border-gray-200 px-2 py-1 text-xs text-gray-400\">\n            <span>${this.renderIcon(\"Bot\")}</span>\n            <span class=\"truncate\">No agents available</span>\n          </div>\n        `;\n\n    return html`\n      <section\n        class=\"inspector-window pointer-events-auto relative flex flex-col overflow-hidden rounded-xl border border-gray-200 bg-white text-gray-900 shadow-lg\"\n        style=${styleMap(windowStyles)}\n        data-docked=${isDocked}\n        data-transitioning=${isTransitioning}\n      >\n        ${isDocked\n          ? html`\n              <div\n                class=\"dock-resize-handle pointer-events-auto\"\n                role=\"presentation\"\n                aria-hidden=\"true\"\n                @pointerdown=${this.handleResizePointerDown}\n                @pointermove=${this.handleResizePointerMove}\n                @pointerup=${this.handleResizePointerUp}\n                @pointercancel=${this.handleResizePointerCancel}\n              ></div>\n            `\n          : nothing}\n        <div class=\"flex flex-1 flex-col overflow-hidden bg-white text-gray-800\">\n          <div\n            class=\"drag-handle relative z-30 flex flex-col border-b border-gray-200 bg-white/95 backdrop-blur-sm ${isDocked ? '' : (this.isDragging && this.pointerContext === 'window' ? 'cursor-grabbing' : 'cursor-grab')}\"\n            data-drag-context=\"window\"\n            @pointerdown=${isDocked ? undefined : this.handlePointerDown}\n            @pointermove=${isDocked ? undefined : this.handlePointerMove}\n            @pointerup=${isDocked ? undefined : this.handlePointerUp}\n            @pointercancel=${isDocked ? undefined : this.handlePointerCancel}\n          >\n            <div class=\"flex flex-wrap items-center gap-3 px-4 py-3\">\n              <div class=\"flex items-center min-w-0\">\n                <img src=${inspectorLogoUrl} alt=\"Inspector logo\" class=\"h-6 w-auto\" loading=\"lazy\" />\n              </div>\n              <div class=\"ml-auto flex min-w-0 items-center gap-2\">\n                <div class=\"min-w-[160px] max-w-xs\">\n                  ${agentSelector}\n                </div>\n                <div class=\"flex items-center gap-1\">\n                  ${this.renderDockControls()}\n                  <button\n                    class=\"flex h-8 w-8 items-center justify-center rounded-md text-gray-400 transition hover:bg-gray-100 hover:text-gray-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-400\"\n                    type=\"button\"\n                    aria-label=\"Close Web Inspector\"\n                    @pointerdown=${this.handleClosePointerDown}\n                    @click=${this.handleCloseClick}\n                  >\n                    ${this.renderIcon(\"X\")}\n                  </button>\n                </div>\n              </div>\n            </div>\n            <div class=\"flex flex-wrap items-center gap-2 border-t border-gray-100 px-3 py-2 text-xs\">\n              ${this.menuItems.map(({ key, label, icon }) => {\n                const isSelected = this.selectedMenu === key;\n                const tabClasses = [\n                  \"inline-flex items-center gap-2 rounded-md px-3 py-2 transition focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-300\",\n                  isSelected ? \"bg-gray-900 text-white shadow-sm\" : \"text-gray-600 hover:bg-gray-100 hover:text-gray-900\",\n                ].join(\" \");\n\n                return html`\n                  <button\n                    type=\"button\"\n                    class=${tabClasses}\n                    aria-pressed=${isSelected}\n                    @click=${() => this.handleMenuSelect(key)}\n                  >\n                    <span class=\"text-gray-400 ${isSelected ? 'text-white' : ''}\">\n                      ${this.renderIcon(icon)}\n                    </span>\n                    <span>${label}</span>\n                  </button>\n                `;\n              })}\n            </div>\n          </div>\n            <div class=\"flex flex-1 flex-col overflow-hidden\">\n              <div class=\"flex-1 overflow-auto\">\n                ${this.renderAnnouncementPanel()}\n                ${this.renderCoreWarningBanner()}\n                ${this.renderMainContent()}\n                <slot></slot>\n              </div>\n              <div class=\"border-t border-gray-200 bg-gray-50 px-4 py-2\">\n                <div\n                  class=\"flex items-center gap-2 rounded-md px-3 py-2 text-xs ${coreStatus.tone} w-full overflow-hidden my-1\"\n                  title=${coreStatus.description}\n                >\n                  <span class=\"flex h-6 w-6 items-center justify-center rounded bg-white/60\">\n                    ${this.renderIcon(\"Activity\")}\n                  </span>\n                  <span class=\"font-medium\">${coreStatus.label}</span>\n                  <span class=\"truncate text-[11px] opacity-80\">${coreStatus.description}</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        <div\n          class=\"resize-handle pointer-events-auto absolute bottom-1 right-1 flex h-5 w-5 cursor-nwse-resize items-center justify-center text-gray-400 transition hover:text-gray-600\"\n          role=\"presentation\"\n          aria-hidden=\"true\"\n          @pointerdown=${this.handleResizePointerDown}\n          @pointermove=${this.handleResizePointerMove}\n          @pointerup=${this.handleResizePointerUp}\n          @pointercancel=${this.handleResizePointerCancel}\n        >\n          <svg\n            class=\"h-3 w-3\"\n            viewBox=\"0 0 16 16\"\n            fill=\"none\"\n            stroke=\"currentColor\"\n            stroke-linecap=\"round\"\n            stroke-width=\"1.5\"\n          >\n            <path d=\"M5 15L15 5\" />\n            <path d=\"M9 15L15 9\" />\n          </svg>\n        </div>\n      </section>\n    `;\n  }\n\n  private hydrateStateFromStorageEarly(): void {\n    if (typeof document === \"undefined\" || typeof window === \"undefined\") {\n      return;\n    }\n\n    const persisted = loadInspectorState(INSPECTOR_STORAGE_KEY);\n    if (!persisted) {\n      return;\n    }\n\n    // Restore the open/closed state\n    if (typeof persisted.isOpen === \"boolean\") {\n      this.isOpen = persisted.isOpen;\n    }\n\n    // Restore the dock mode\n    if (isValidDockMode(persisted.dockMode)) {\n      this.dockMode = persisted.dockMode;\n    }\n\n    // Restore selected menu\n    if (typeof persisted.selectedMenu === \"string\") {\n      const validMenu = this.menuItems.find((item) => item.key === persisted.selectedMenu);\n      if (validMenu) {\n        this.selectedMenu = validMenu.key;\n      }\n    }\n\n    // Restore selected context (agent), will be validated later against available agents\n    if (typeof persisted.selectedContext === \"string\") {\n      this.selectedContext = persisted.selectedContext;\n      this.pendingSelectedContext = persisted.selectedContext;\n    }\n  }\n\n  private hydrateStateFromStorage(): void {\n    if (typeof document === \"undefined\" || typeof window === \"undefined\") {\n      return;\n    }\n\n    const persisted = loadInspectorState(INSPECTOR_STORAGE_KEY);\n    if (!persisted) {\n      return;\n    }\n\n    const persistedButton = persisted.button;\n    if (persistedButton) {\n      if (isValidAnchor(persistedButton.anchor)) {\n        this.contextState.button.anchor = persistedButton.anchor;\n      }\n\n      if (isValidPosition(persistedButton.anchorOffset)) {\n        this.contextState.button.anchorOffset = persistedButton.anchorOffset;\n      }\n\n      if (typeof persistedButton.hasCustomPosition === \"boolean\") {\n        this.hasCustomPosition.button = persistedButton.hasCustomPosition;\n      }\n    }\n\n    const persistedWindow = persisted.window;\n    if (persistedWindow) {\n      if (isValidAnchor(persistedWindow.anchor)) {\n        this.contextState.window.anchor = persistedWindow.anchor;\n      }\n\n      if (isValidPosition(persistedWindow.anchorOffset)) {\n        this.contextState.window.anchorOffset = persistedWindow.anchorOffset;\n      }\n\n      if (isValidSize(persistedWindow.size)) {\n        // Now clampWindowSize will use the correct minimum based on dockMode\n        this.contextState.window.size = this.clampWindowSize(persistedWindow.size);\n      }\n\n      if (typeof persistedWindow.hasCustomPosition === \"boolean\") {\n        this.hasCustomPosition.window = persistedWindow.hasCustomPosition;\n      }\n    }\n\n    if (typeof persisted.selectedContext === \"string\") {\n      this.selectedContext = persisted.selectedContext;\n      this.pendingSelectedContext = persisted.selectedContext;\n    }\n  }\n\n  private get activeContext(): ContextKey {\n    return this.isOpen ? \"window\" : \"button\";\n  }\n\n  private handlePointerDown = (event: PointerEvent) => {\n    // Don't allow dragging when docked\n    if (this.dockMode !== 'floating' && this.isOpen) {\n      return;\n    }\n\n    const target = event.currentTarget as HTMLElement | null;\n    const contextAttr = target?.dataset.dragContext;\n    const context: ContextKey = contextAttr === \"window\" ? \"window\" : \"button\";\n\n    const eventTarget = event.target as HTMLElement | null;\n    if (context === \"window\" && eventTarget?.closest(\"button\")) {\n      return;\n    }\n\n    this.pointerContext = context;\n    this.measureContext(context);\n\n    event.preventDefault();\n\n    this.pointerId = event.pointerId;\n    this.dragStart = { x: event.clientX, y: event.clientY };\n    const state = this.contextState[context];\n    this.dragOffset = {\n      x: event.clientX - state.position.x,\n      y: event.clientY - state.position.y,\n    };\n    this.isDragging = false;\n    this.draggedDuringInteraction = false;\n    this.ignoreNextButtonClick = false;\n\n    target?.setPointerCapture?.(this.pointerId);\n  };\n\n  private handlePointerMove = (event: PointerEvent) => {\n    if (this.pointerId !== event.pointerId || !this.dragStart || !this.pointerContext) {\n      return;\n    }\n\n    const distance = Math.hypot(event.clientX - this.dragStart.x, event.clientY - this.dragStart.y);\n    if (!this.isDragging && distance < DRAG_THRESHOLD) {\n      return;\n    }\n\n    event.preventDefault();\n    this.setDragging(true);\n    this.draggedDuringInteraction = true;\n\n    const desired: Position = {\n      x: event.clientX - this.dragOffset.x,\n      y: event.clientY - this.dragOffset.y,\n    };\n\n    const constrained = this.constrainToViewport(desired, this.pointerContext);\n    this.contextState[this.pointerContext].position = constrained;\n    this.updateHostTransform(this.pointerContext);\n  };\n\n  private handlePointerUp = (event: PointerEvent) => {\n    if (this.pointerId !== event.pointerId) {\n      return;\n    }\n\n    const target = event.currentTarget as HTMLElement | null;\n    if (target?.hasPointerCapture(this.pointerId)) {\n      target.releasePointerCapture(this.pointerId);\n    }\n\n    const context = this.pointerContext ?? this.activeContext;\n\n    if (this.isDragging && this.pointerContext) {\n      event.preventDefault();\n      this.setDragging(false);\n      if (this.pointerContext === \"window\") {\n        this.updateAnchorFromPosition(this.pointerContext);\n        this.hasCustomPosition.window = true;\n        this.applyAnchorPosition(this.pointerContext);\n      } else if (this.pointerContext === \"button\") {\n        // Snap button to nearest corner\n        this.snapButtonToCorner();\n        this.hasCustomPosition.button = true;\n        if (this.draggedDuringInteraction) {\n          this.ignoreNextButtonClick = true;\n        }\n      }\n    } else if (context === \"button\" && !this.isOpen && !this.draggedDuringInteraction) {\n      this.openInspector();\n    }\n\n    this.resetPointerTracking();\n  };\n\n  private handlePointerCancel = (event: PointerEvent) => {\n    if (this.pointerId !== event.pointerId) {\n      return;\n    }\n\n    const target = event.currentTarget as HTMLElement | null;\n    if (target?.hasPointerCapture(this.pointerId)) {\n      target.releasePointerCapture(this.pointerId);\n    }\n\n    this.resetPointerTracking();\n  };\n\n  private handleButtonClick = (event: Event) => {\n    if (this.isDragging) {\n      event.preventDefault();\n      return;\n    }\n\n    if (this.ignoreNextButtonClick) {\n      event.preventDefault();\n      this.ignoreNextButtonClick = false;\n      return;\n    }\n\n    if (!this.isOpen) {\n      event.preventDefault();\n      this.openInspector();\n    }\n  };\n\n  private handleClosePointerDown = (event: PointerEvent) => {\n    event.stopPropagation();\n    event.preventDefault();\n  };\n\n  private handleCloseClick = () => {\n    this.closeInspector();\n  };\n\n  private handleResizePointerDown = (event: PointerEvent) => {\n    event.stopPropagation();\n    event.preventDefault();\n\n    this.hasCustomPosition.window = true;\n    this.isResizing = true;\n    this.resizePointerId = event.pointerId;\n    this.resizeStart = { x: event.clientX, y: event.clientY };\n    this.resizeInitialSize = { ...this.contextState.window.size };\n\n    // Remove transition from body during resize to prevent lag\n    if (document.body && this.dockMode !== 'floating') {\n      document.body.style.transition = '';\n    }\n\n    const target = event.currentTarget as HTMLElement | null;\n    target?.setPointerCapture?.(event.pointerId);\n  };\n\n  private handleResizePointerMove = (event: PointerEvent) => {\n    if (!this.isResizing || this.resizePointerId !== event.pointerId || !this.resizeStart || !this.resizeInitialSize) {\n      return;\n    }\n\n    event.preventDefault();\n\n    const deltaX = event.clientX - this.resizeStart.x;\n    const deltaY = event.clientY - this.resizeStart.y;\n    const state = this.contextState.window;\n\n    // For docked states, only resize in the appropriate dimension\n    if (this.dockMode === 'docked-left') {\n      // Only resize width for left dock\n      state.size = this.clampWindowSize({\n        width: this.resizeInitialSize.width + deltaX,\n        height: state.size.height,\n      });\n      // Update the body margin\n      if (document.body) {\n        document.body.style.marginLeft = `${state.size.width}px`;\n      }\n    } else {\n      // Full resize for floating mode\n      state.size = this.clampWindowSize({\n        width: this.resizeInitialSize.width + deltaX,\n        height: this.resizeInitialSize.height + deltaY,\n      });\n      this.keepPositionWithinViewport(\"window\");\n      this.updateAnchorFromPosition(\"window\");\n    }\n\n    this.requestUpdate();\n    this.updateHostTransform(\"window\");\n  };\n\n  private handleResizePointerUp = (event: PointerEvent) => {\n    if (this.resizePointerId !== event.pointerId) {\n      return;\n    }\n\n    const target = event.currentTarget as HTMLElement | null;\n    if (target?.hasPointerCapture(this.resizePointerId)) {\n      target.releasePointerCapture(this.resizePointerId);\n    }\n\n    // Only update anchor position for floating mode\n    if (this.dockMode === 'floating') {\n      this.updateAnchorFromPosition(\"window\");\n      this.applyAnchorPosition(\"window\");\n    }\n\n    // Persist the new size after resize completes\n    this.persistState();\n    this.resetResizeTracking();\n  };\n\n  private handleResizePointerCancel = (event: PointerEvent) => {\n    if (this.resizePointerId !== event.pointerId) {\n      return;\n    }\n\n    const target = event.currentTarget as HTMLElement | null;\n    if (target?.hasPointerCapture(this.resizePointerId)) {\n      target.releasePointerCapture(this.resizePointerId);\n    }\n\n    // Only update anchor position for floating mode\n    if (this.dockMode === 'floating') {\n      this.updateAnchorFromPosition(\"window\");\n      this.applyAnchorPosition(\"window\");\n    }\n\n    // Persist the new size after resize completes\n    this.persistState();\n    this.resetResizeTracking();\n  };\n\n  private handleResize = () => {\n    this.measureContext(\"button\");\n    this.applyAnchorPosition(\"button\");\n\n    this.measureContext(\"window\");\n    if (this.hasCustomPosition.window) {\n      this.applyAnchorPosition(\"window\");\n    } else {\n      this.centerContext(\"window\");\n    }\n\n    this.updateHostTransform();\n  };\n\n  private measureContext(context: ContextKey): void {\n    const selector = context === \"window\" ? \".inspector-window\" : \".console-button\";\n    const element = this.renderRoot?.querySelector(selector) as HTMLElement | null;\n    if (!element) {\n      return;\n    }\n    const fallback = context === \"window\" ? DEFAULT_WINDOW_SIZE : DEFAULT_BUTTON_SIZE;\n    updateSizeFromElement(this.contextState[context], element, fallback);\n  }\n\n  private centerContext(context: ContextKey): void {\n    if (typeof window === \"undefined\") {\n      return;\n    }\n\n    const viewport = this.getViewportSize();\n    centerContextHelper(this.contextState[context], viewport, EDGE_MARGIN);\n\n    if (context === this.activeContext) {\n      this.updateHostTransform(context);\n    }\n\n    this.hasCustomPosition[context] = false;\n    this.persistState();\n  }\n\n  private ensureWindowPlacement(): void {\n    if (typeof window === \"undefined\") {\n      return;\n    }\n\n    if (!this.hasCustomPosition.window) {\n      this.centerContext(\"window\");\n      return;\n    }\n\n    const viewport = this.getViewportSize();\n    keepPositionWithinViewport(this.contextState.window, viewport, EDGE_MARGIN);\n    updateAnchorFromPositionHelper(this.contextState.window, viewport, EDGE_MARGIN);\n    this.updateHostTransform(\"window\");\n    this.persistState();\n  }\n\n  private constrainToViewport(position: Position, context: ContextKey): Position {\n    if (typeof window === \"undefined\") {\n      return position;\n    }\n\n    const viewport = this.getViewportSize();\n    return constrainToViewport(this.contextState[context], position, viewport, EDGE_MARGIN);\n  }\n\n  private keepPositionWithinViewport(context: ContextKey): void {\n    if (typeof window === \"undefined\") {\n      return;\n    }\n\n    const viewport = this.getViewportSize();\n    keepPositionWithinViewport(this.contextState[context], viewport, EDGE_MARGIN);\n  }\n\n  private getViewportSize(): Size {\n    if (typeof window === \"undefined\") {\n      return { ...DEFAULT_WINDOW_SIZE };\n    }\n\n    return { width: window.innerWidth, height: window.innerHeight };\n  }\n\n  private persistState(): void {\n    const state: PersistedState = {\n      button: {\n        anchor: this.contextState.button.anchor,\n        anchorOffset: this.contextState.button.anchorOffset,\n        hasCustomPosition: this.hasCustomPosition.button,\n      },\n      window: {\n        anchor: this.contextState.window.anchor,\n        anchorOffset: this.contextState.window.anchorOffset,\n        size: {\n          width: Math.round(this.contextState.window.size.width),\n          height: Math.round(this.contextState.window.size.height),\n        },\n        hasCustomPosition: this.hasCustomPosition.window,\n      },\n      isOpen: this.isOpen,\n      dockMode: this.dockMode,\n      selectedMenu: this.selectedMenu,\n      selectedContext: this.selectedContext,\n    };\n    saveInspectorState(INSPECTOR_STORAGE_KEY, state);\n    this.pendingSelectedContext = state.selectedContext ?? null;\n  }\n\n  private clampWindowSize(size: Size): Size {\n    // Use smaller minimum width when docked left\n    const minWidth = this.dockMode === 'docked-left' ? MIN_WINDOW_WIDTH_DOCKED_LEFT : MIN_WINDOW_WIDTH;\n\n    if (typeof window === \"undefined\") {\n      return {\n        width: Math.max(minWidth, size.width),\n        height: Math.max(MIN_WINDOW_HEIGHT, size.height),\n      };\n    }\n\n    const viewport = this.getViewportSize();\n    return clampSizeToViewport(size, viewport, EDGE_MARGIN, minWidth, MIN_WINDOW_HEIGHT);\n  }\n\n  private setDockMode(mode: DockMode): void {\n    if (this.dockMode === mode) {\n      return;\n    }\n\n    // Add transition class for smooth dock mode changes\n    this.startHostTransition();\n\n    // Clean up previous dock state\n    this.removeDockStyles();\n\n    this.dockMode = mode;\n\n    if (mode !== 'floating') {\n      // For docking, set the target size immediately so body margins are correct\n      if (mode === 'docked-left') {\n        this.contextState.window.size.width = DOCKED_LEFT_WIDTH;\n      }\n\n      // Then apply dock styles with correct sizes\n      this.applyDockStyles();\n    } else {\n      // When floating, set size first then center\n      this.contextState.window.size = { ...DEFAULT_WINDOW_SIZE };\n      this.centerContext('window');\n    }\n\n    this.persistState();\n    this.requestUpdate();\n    this.updateHostTransform('window');\n  }\n\n  private startHostTransition(duration = 300): void {\n    this.setAttribute('data-transitioning', 'true');\n\n    if (this.transitionTimeoutId !== null) {\n      clearTimeout(this.transitionTimeoutId);\n    }\n\n    this.transitionTimeoutId = setTimeout(() => {\n      this.removeAttribute('data-transitioning');\n      this.transitionTimeoutId = null;\n    }, duration);\n  }\n\n  private applyDockStyles(skipTransition = false): void {\n    if (typeof document === 'undefined' || !document.body) {\n      return;\n    }\n\n    // Save original body margins\n    const computedStyle = window.getComputedStyle(document.body);\n    this.previousBodyMargins = {\n      left: computedStyle.marginLeft,\n      bottom: computedStyle.marginBottom,\n    };\n\n    // Apply transition to body for smooth animation (only when docking, not during resize or initial load)\n    if (!this.isResizing && !skipTransition) {\n      document.body.style.transition = 'margin 300ms ease';\n    }\n\n    // Apply body margins with the actual window sizes\n    if (this.dockMode === 'docked-left') {\n      document.body.style.marginLeft = `${this.contextState.window.size.width}px`;\n    }\n\n    // Remove transition after animation completes\n    if (!this.isResizing && !skipTransition) {\n      setTimeout(() => {\n        if (document.body) {\n          document.body.style.transition = '';\n        }\n      }, 300);\n    }\n  }\n\n  private removeDockStyles(): void {\n    if (typeof document === 'undefined' || !document.body) {\n      return;\n    }\n\n    // Only add transition if not resizing\n    if (!this.isResizing) {\n      document.body.style.transition = 'margin 300ms ease';\n    }\n\n    // Restore original margins if saved\n    if (this.previousBodyMargins) {\n      document.body.style.marginLeft = this.previousBodyMargins.left;\n      document.body.style.marginBottom = this.previousBodyMargins.bottom;\n      this.previousBodyMargins = null;\n    } else {\n      // Reset to default if no previous values\n      document.body.style.marginLeft = '';\n      document.body.style.marginBottom = '';\n    }\n\n    // Clean up transition after animation completes\n    setTimeout(() => {\n      if (document.body) {\n        document.body.style.transition = '';\n      }\n    }, 300);\n  }\n\n  private updateHostTransform(context: ContextKey = this.activeContext): void {\n    if (context !== this.activeContext) {\n      return;\n    }\n\n    // For docked states, CSS handles positioning with fixed positioning\n    if (this.isOpen && this.dockMode === 'docked-left') {\n      this.style.transform = `translate3d(0, 0, 0)`;\n    } else {\n      const { position } = this.contextState[context];\n      this.style.transform = `translate3d(${position.x}px, ${position.y}px, 0)`;\n    }\n  }\n\n  private setDragging(value: boolean): void {\n    if (this.isDragging !== value) {\n      this.isDragging = value;\n      this.requestUpdate();\n    }\n  }\n\n  private updateAnchorFromPosition(context: ContextKey): void {\n    if (typeof window === \"undefined\") {\n      return;\n    }\n    const viewport = this.getViewportSize();\n    updateAnchorFromPositionHelper(this.contextState[context], viewport, EDGE_MARGIN);\n  }\n\n  private snapButtonToCorner(): void {\n    if (typeof window === \"undefined\") {\n      return;\n    }\n\n    const viewport = this.getViewportSize();\n    const state = this.contextState.button;\n\n    // Determine which corner is closest based on center of button\n    const centerX = state.position.x + state.size.width / 2;\n    const centerY = state.position.y + state.size.height / 2;\n\n    const horizontal: Anchor['horizontal'] = centerX < viewport.width / 2 ? 'left' : 'right';\n    const vertical: Anchor['vertical'] = centerY < viewport.height / 2 ? 'top' : 'bottom';\n\n    // Set anchor to nearest corner\n    state.anchor = { horizontal, vertical };\n\n    // Always use EDGE_MARGIN as offset (pinned to corner)\n    state.anchorOffset = { x: EDGE_MARGIN, y: EDGE_MARGIN };\n\n    // Apply the anchor position to snap to corner\n    this.startHostTransition();\n    this.applyAnchorPosition('button');\n  }\n\n  private applyAnchorPosition(context: ContextKey): void {\n    if (typeof window === \"undefined\") {\n      return;\n    }\n    const viewport = this.getViewportSize();\n    applyAnchorPositionHelper(this.contextState[context], viewport, EDGE_MARGIN);\n    this.updateHostTransform(context);\n    this.persistState();\n  }\n\n  private resetResizeTracking(): void {\n    this.resizePointerId = null;\n    this.resizeStart = null;\n    this.resizeInitialSize = null;\n    this.isResizing = false;\n  }\n\n  private resetPointerTracking(): void {\n    this.pointerId = null;\n    this.dragStart = null;\n    this.pointerContext = null;\n    this.setDragging(false);\n    this.draggedDuringInteraction = false;\n  }\n\n  private openInspector(): void {\n    if (this.isOpen) {\n      return;\n    }\n\n    this.showAnnouncementPreview = false; // hide the bubble once the inspector is opened\n\n    this.ensureAnnouncementLoading();\n\n    this.isOpen = true;\n    this.persistState(); // Save the open state\n\n    // Apply docking styles if in docked mode\n    if (this.dockMode !== 'floating') {\n      this.applyDockStyles();\n    }\n\n    this.ensureWindowPlacement();\n    this.requestUpdate();\n    void this.updateComplete.then(() => {\n      this.measureContext(\"window\");\n      if (this.dockMode === 'floating') {\n        if (this.hasCustomPosition.window) {\n          this.applyAnchorPosition(\"window\");\n        } else {\n          this.centerContext(\"window\");\n        }\n      } else {\n        // Update transform for docked position\n        this.updateHostTransform(\"window\");\n      }\n\n    });\n  }\n\n  private closeInspector(): void {\n    if (!this.isOpen) {\n      return;\n    }\n\n    this.isOpen = false;\n\n    // Remove docking styles when closing\n    if (this.dockMode !== 'floating') {\n      this.removeDockStyles();\n    }\n\n    this.persistState(); // Save the closed state\n    this.updateHostTransform(\"button\");\n    this.requestUpdate();\n    void this.updateComplete.then(() => {\n      this.measureContext(\"button\");\n      this.applyAnchorPosition(\"button\");\n    });\n  }\n\n  private renderIcon(name: LucideIconName) {\n    const iconNode = icons[name];\n    if (!iconNode) {\n      return nothing;\n    }\n\n    const svgAttrs: Record<string, string | number> = {\n      xmlns: \"http://www.w3.org/2000/svg\",\n      viewBox: \"0 0 24 24\",\n      fill: \"none\",\n      stroke: \"currentColor\",\n      \"stroke-width\": \"1.5\",\n      \"stroke-linecap\": \"round\",\n      \"stroke-linejoin\": \"round\",\n      class: \"h-3.5 w-3.5\",\n    };\n\n    const svgMarkup = `<svg ${this.serializeAttributes(svgAttrs)}>${iconNode\n      .map(([tag, attrs]) => `<${tag} ${this.serializeAttributes(attrs)} />`)\n      .join(\"\")}</svg>`;\n\n    return unsafeHTML(svgMarkup);\n  }\n\n  private renderDockControls() {\n    if (this.dockMode === 'floating') {\n      // Show dock left button\n      return html`\n        <button\n          class=\"flex h-8 w-8 items-center justify-center rounded-md text-gray-400 transition hover:bg-gray-100 hover:text-gray-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-400\"\n          type=\"button\"\n          aria-label=\"Dock to left\"\n          title=\"Dock Left\"\n          @click=${() => this.handleDockClick('docked-left')}\n        >\n          ${this.renderIcon(\"PanelLeft\")}\n        </button>\n      `;\n    } else {\n      // Show float button\n      return html`\n        <button\n          class=\"flex h-8 w-8 items-center justify-center rounded-md text-gray-400 transition hover:bg-gray-100 hover:text-gray-600 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-gray-400\"\n          type=\"button\"\n          aria-label=\"Float window\"\n          title=\"Float\"\n          @click=${() => this.handleDockClick('floating')}\n        >\n          ${this.renderIcon(\"Maximize2\")}\n        </button>\n      `;\n    }\n  }\n\n  private getDockedWindowStyles(): Record<string, string> {\n    if (this.dockMode === 'docked-left') {\n      return {\n        position: 'fixed',\n        top: '0',\n        left: '0',\n        bottom: '0',\n        width: `${Math.round(this.contextState.window.size.width)}px`,\n        height: '100vh',\n        minWidth: `${MIN_WINDOW_WIDTH_DOCKED_LEFT}px`,\n        borderRadius: '0',\n      };\n    }\n    // Default to floating styles\n    return {\n      width: `${Math.round(this.contextState.window.size.width)}px`,\n      height: `${Math.round(this.contextState.window.size.height)}px`,\n      minWidth: `${MIN_WINDOW_WIDTH}px`,\n      minHeight: `${MIN_WINDOW_HEIGHT}px`,\n    };\n  }\n\n  private handleDockClick(mode: DockMode): void {\n    this.setDockMode(mode);\n  }\n\n  private serializeAttributes(attributes: Record<string, string | number | undefined>): string {\n    return Object.entries(attributes)\n      .filter(([key, value]) => key !== \"key\" && value !== undefined && value !== null && value !== \"\")\n      .map(([key, value]) => `${key}=\"${String(value).replace(/\"/g, \"&quot;\")}\"`)\n      .join(\" \");\n  }\n\n  private sanitizeForLogging(value: unknown, depth = 0, seen = new WeakSet<object>()): SanitizedValue {\n    if (value === undefined) {\n      return \"[undefined]\";\n    }\n\n    if (value === null || typeof value === \"number\" || typeof value === \"boolean\") {\n      return value;\n    }\n\n    if (typeof value === \"string\") {\n      return value;\n    }\n\n    if (typeof value === \"bigint\" || typeof value === \"symbol\" || typeof value === \"function\") {\n      return String(value);\n    }\n\n    if (value instanceof Date) {\n      return value.toISOString();\n    }\n\n    if (Array.isArray(value)) {\n      if (depth >= 4) {\n        return \"[Truncated depth]\" as SanitizedValue;\n      }\n      return value.map((item) => this.sanitizeForLogging(item, depth + 1, seen));\n    }\n\n    if (typeof value === \"object\") {\n      if (seen.has(value as object)) {\n        return \"[Circular]\" as SanitizedValue;\n      }\n      seen.add(value as object);\n\n      if (depth >= 4) {\n        return \"[Truncated depth]\" as SanitizedValue;\n      }\n\n      const result: Record<string, SanitizedValue> = {};\n      for (const [key, entry] of Object.entries(value as Record<string, unknown>)) {\n        result[key] = this.sanitizeForLogging(entry, depth + 1, seen);\n      }\n      return result;\n    }\n\n    return String(value);\n  }\n\n  private normalizeEventPayload(_type: InspectorAgentEventType, payload: unknown): SanitizedValue {\n    if (payload && typeof payload === \"object\" && \"event\" in payload) {\n      const { event, ...rest } = payload as Record<string, unknown>;\n      const cleaned = Object.keys(rest).length === 0 ? event : { event, ...rest };\n      return this.sanitizeForLogging(cleaned);\n    }\n\n    return this.sanitizeForLogging(payload);\n  }\n\n  private normalizeMessageContent(content: unknown): string {\n    if (typeof content === \"string\") {\n      return content;\n    }\n\n    if (content && typeof content === \"object\" && \"text\" in (content as Record<string, unknown>)) {\n      const maybeText = (content as Record<string, unknown>).text;\n      if (typeof maybeText === \"string\") {\n        return maybeText;\n      }\n    }\n\n    if (content === null || content === undefined) {\n      return \"\";\n    }\n\n    if (typeof content === \"object\") {\n      try {\n        return JSON.stringify(this.sanitizeForLogging(content));\n      } catch {\n        return \"\";\n      }\n    }\n\n    return String(content);\n  }\n\n  private normalizeToolCalls(raw: unknown): InspectorToolCall[] {\n    if (!Array.isArray(raw)) {\n      return [];\n    }\n\n    return raw\n      .map((entry) => {\n        if (!entry || typeof entry !== \"object\") {\n          return null;\n        }\n        const call = entry as Record<string, unknown>;\n        const fn = call.function as Record<string, unknown> | undefined;\n        const functionName = typeof fn?.name === \"string\" ? fn.name : typeof call.toolName === \"string\" ? call.toolName : undefined;\n        const args = fn && \"arguments\" in fn ? (fn as Record<string, unknown>).arguments : call.arguments;\n\n        const normalized: InspectorToolCall = {\n          id: typeof call.id === \"string\" ? call.id : undefined,\n          toolName: typeof call.toolName === \"string\" ? call.toolName : functionName,\n          status: typeof call.status === \"string\" ? call.status : undefined,\n        };\n\n        if (functionName) {\n          normalized.function = {\n            name: functionName,\n            arguments: this.sanitizeForLogging(args),\n          };\n        }\n\n        return normalized;\n      })\n      .filter((call): call is InspectorToolCall => Boolean(call));\n  }\n\n  private normalizeAgentMessage(message: unknown): InspectorMessage | null {\n    if (!message || typeof message !== \"object\") {\n      return null;\n    }\n\n    const raw = message as Record<string, unknown>;\n    const role = typeof raw.role === \"string\" ? raw.role : \"unknown\";\n    const contentText = this.normalizeMessageContent(raw.content);\n    const toolCalls = this.normalizeToolCalls(raw.toolCalls);\n\n    return {\n      id: typeof raw.id === \"string\" ? raw.id : undefined,\n      role,\n      contentText,\n      contentRaw: raw.content !== undefined ? this.sanitizeForLogging(raw.content) : undefined,\n      toolCalls,\n    };\n  }\n\n  private normalizeAgentMessages(messages: unknown): InspectorMessage[] | null {\n    if (!Array.isArray(messages)) {\n      return null;\n    }\n\n    const normalized = messages\n      .map((message) => this.normalizeAgentMessage(message))\n      .filter((msg): msg is InspectorMessage => msg !== null);\n\n    return normalized;\n  }\n\n  private normalizeContextStore(\n    context: Readonly<Record<string, unknown>> | null | undefined,\n  ): Record<string, { description?: string; value: unknown }> {\n    if (!context || typeof context !== \"object\") {\n      return {};\n    }\n\n    const normalized: Record<string, { description?: string; value: unknown }> = {};\n    for (const [key, entry] of Object.entries(context)) {\n      if (entry && typeof entry === \"object\" && \"value\" in (entry as Record<string, unknown>)) {\n        const candidate = entry as Record<string, unknown>;\n        const description =\n          typeof candidate.description === \"string\" && candidate.description.trim().length > 0\n            ? candidate.description\n            : undefined;\n        normalized[key] = { description, value: candidate.value };\n      } else {\n        normalized[key] = { value: entry };\n      }\n    }\n\n    return normalized;\n  }\n\n  private contextOptions: Array<{ key: string; label: string }> = [\n    { key: \"all-agents\", label: \"All Agents\" },\n  ];\n\n  private selectedContext = \"all-agents\";\n  private expandedRows: Set<string> = new Set();\n  private copiedEvents: Set<string> = new Set();\n  private expandedTools: Set<string> = new Set();\n  private expandedContextItems: Set<string> = new Set();\n  private copiedContextItems: Set<string> = new Set();\n\n  private getSelectedMenu(): MenuItem {\n    const found = this.menuItems.find((item) => item.key === this.selectedMenu);\n    return found ?? this.menuItems[0]!;\n  }\n\n  private renderCoreWarningBanner() {\n    if (this._core) {\n      return nothing;\n    }\n\n    return html`\n      <div class=\"mx-4 my-3 flex items-start gap-2 rounded-md border border-amber-200 bg-amber-50 px-3 py-2 text-xs text-amber-800\">\n        <span class=\"mt-0.5 shrink-0 text-amber-600\">${this.renderIcon(\"AlertTriangle\")}</span>\n        <div class=\"space-y-1\">\n          <div class=\"font-semibold text-amber-900\">CopilotKit core not attached</div>\n          <p class=\"text-[11px] leading-snug text-amber-800\">\n            Pass a live <code>CopilotKitCore</code> instance to <code>&lt;cpk-web-inspector&gt;</code> or expose it on\n            <code>window.__COPILOTKIT_CORE__</code> for auto-attach.\n          </p>\n        </div>\n      </div>\n    `;\n  }\n\n  private getCoreStatusSummary(): { label: string; tone: string; description: string } {\n    if (!this._core) {\n      return {\n        label: \"Core not attached\",\n        tone: \"border border-amber-200 bg-amber-50 text-amber-800\",\n        description: \"Pass a CopilotKitCore instance to <cpk-web-inspector> or enable auto-attach.\",\n      };\n    }\n\n    const status = this.runtimeStatus ?? CopilotKitCoreRuntimeConnectionStatus.Disconnected;\n    const lastErrorMessage = this.lastCoreError?.message;\n\n    if (status === CopilotKitCoreRuntimeConnectionStatus.Error) {\n      return {\n        label: \"Runtime error\",\n        tone: \"border border-rose-200 bg-rose-50 text-rose-700\",\n        description: lastErrorMessage ?? \"CopilotKit runtime reported an error.\",\n      };\n    }\n\n    if (status === CopilotKitCoreRuntimeConnectionStatus.Connecting) {\n      return {\n        label: \"Connecting\",\n        tone: \"border border-amber-200 bg-amber-50 text-amber-800\",\n        description: \"Waiting for CopilotKit runtime to finish connecting.\",\n      };\n    }\n\n    if (status === CopilotKitCoreRuntimeConnectionStatus.Connected) {\n      return {\n        label: \"Connected\",\n        tone: \"border border-emerald-200 bg-emerald-50 text-emerald-700\",\n        description: \"Live runtime connection established.\",\n      };\n    }\n\n    return {\n      label: \"Disconnected\",\n      tone: \"border border-gray-200 bg-gray-50 text-gray-700\",\n      description: lastErrorMessage ?? \"Waiting for CopilotKit runtime to connect.\",\n    };\n  }\n\n  private renderMainContent() {\n    if (this.selectedMenu === \"ag-ui-events\") {\n      return this.renderEventsTable();\n    }\n\n    if (this.selectedMenu === \"agents\") {\n      return this.renderAgentsView();\n    }\n\n    if (this.selectedMenu === \"frontend-tools\") {\n      return this.renderToolsView();\n    }\n\n    if (this.selectedMenu === \"agent-context\") {\n      return this.renderContextView();\n    }\n\n    return nothing;\n  }\n\n  private renderEventsTable() {\n    const events = this.getEventsForSelectedContext();\n    const filteredEvents = this.filterEvents(events);\n    const selectedLabel = this.selectedContext === \"all-agents\" ? \"all agents\" : `agent ${this.selectedContext}`;\n\n    if (events.length === 0) {\n      return html`\n        <div class=\"flex h-full items-center justify-center px-4 py-8 text-center\">\n          <div class=\"max-w-md\">\n            <div class=\"mb-3 flex justify-center text-gray-300 [&>svg]:!h-8 [&>svg]:!w-8\">\n              ${this.renderIcon(\"Zap\")}\n            </div>\n            <p class=\"text-sm text-gray-600\">No events yet</p>\n            <p class=\"mt-2 text-xs text-gray-500\">Trigger an agent run to see live activity.</p>\n          </div>\n        </div>\n      `;\n    }\n\n    if (filteredEvents.length === 0) {\n      return html`\n        <div class=\"flex h-full items-center justify-center px-4 py-8 text-center\">\n          <div class=\"max-w-md space-y-3\">\n            <div class=\"flex justify-center text-gray-300 [&>svg]:!h-8 [&>svg]:!w-8\">\n              ${this.renderIcon(\"Filter\")}\n            </div>\n            <p class=\"text-sm text-gray-600\">No events match the current filters.</p>\n            <div>\n              <button\n                type=\"button\"\n                class=\"inline-flex items-center gap-1 rounded-md bg-gray-900 px-3 py-1.5 text-[11px] font-medium text-white transition hover:bg-gray-800\"\n                @click=${this.resetEventFilters}\n              >\n                ${this.renderIcon(\"RefreshCw\")}\n                <span>Reset filters</span>\n              </button>\n            </div>\n          </div>\n        </div>\n      `;\n    }\n\n    return html`\n      <div class=\"flex h-full flex-col\">\n        <div class=\"flex flex-col gap-1.5 border-b border-gray-200 bg-white px-4 py-2.5\">\n          <div class=\"flex flex-wrap items-center gap-2\">\n            <div class=\"relative min-w-[200px] flex-1\">\n              <input\n                type=\"search\"\n                class=\"w-full rounded-md border border-gray-200 px-3 py-1.5 text-[11px] text-gray-700 shadow-sm outline-none ring-1 ring-transparent transition focus:border-gray-300 focus:ring-gray-200\"\n                placeholder=\"Search agent, type, payload\"\n                .value=${this.eventFilterText}\n                @input=${this.handleEventFilterInput}\n              />\n            </div>\n            <select\n              class=\"w-40 rounded-md border border-gray-200 bg-white px-2 py-1.5 text-[11px] text-gray-700 shadow-sm outline-none transition focus:border-gray-300 focus:ring-2 focus:ring-gray-200\"\n              .value=${this.eventTypeFilter}\n              @change=${this.handleEventTypeChange}\n            >\n              <option value=\"all\">All event types</option>\n              ${AGENT_EVENT_TYPES.map(\n                (type) =>\n                  html`<option value=${type}>${type.toLowerCase().replace(/_/g, \" \")}</option>`,\n              )}\n            </select>\n            <div class=\"flex items-center gap-1 text-[11px]\">\n              <button\n                type=\"button\"\n                class=\"tooltip-target flex h-8 w-8 items-center justify-center rounded-md border border-gray-200 bg-white text-gray-600 transition hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50\"\n                title=\"Reset filters\"\n                data-tooltip=\"Reset filters\"\n                aria-label=\"Reset filters\"\n                @click=${this.resetEventFilters}\n                ?disabled=${!this.eventFilterText && this.eventTypeFilter === \"all\"}\n              >\n                ${this.renderIcon(\"RotateCw\")}\n              </button>\n              <button\n                type=\"button\"\n                class=\"tooltip-target flex h-8 w-8 items-center justify-center rounded-md border border-gray-200 bg-white text-gray-600 transition hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50\"\n                title=\"Export JSON\"\n                data-tooltip=\"Export JSON\"\n                aria-label=\"Export JSON\"\n                @click=${() => this.exportEvents(filteredEvents)}\n                ?disabled=${filteredEvents.length === 0}\n              >\n                ${this.renderIcon(\"Download\")}\n              </button>\n              <button\n                type=\"button\"\n                class=\"tooltip-target flex h-8 w-8 items-center justify-center rounded-md border border-gray-200 bg-white text-gray-600 transition hover:bg-gray-50 disabled:cursor-not-allowed disabled:opacity-50\"\n                title=\"Clear events\"\n                data-tooltip=\"Clear events\"\n                aria-label=\"Clear events\"\n                @click=${this.handleClearEvents}\n                ?disabled=${events.length === 0}\n              >\n                ${this.renderIcon(\"Trash2\")}\n              </button>\n            </div>\n          </div>\n          <div class=\"text-[11px] text-gray-500\">\n            Showing ${filteredEvents.length} of ${events.length}${this.selectedContext === \"all-agents\" ? \"\" : ` for ${selectedLabel}`}\n          </div>\n        </div>\n        <div class=\"relative h-full w-full overflow-y-auto overflow-x-hidden\">\n          <table class=\"w-full table-fixed border-collapse text-xs box-border\">\n            <thead class=\"sticky top-0 z-10\">\n              <tr class=\"bg-white\">\n                <th class=\"border-b border-gray-200 bg-white px-3 py-2 text-left font-medium text-gray-900\">\n                  Agent\n                </th>\n                <th class=\"border-b border-gray-200 bg-white px-3 py-2 text-left font-medium text-gray-900\">\n                  Time\n                </th>\n                <th class=\"border-b border-gray-200 bg-white px-3 py-2 text-left font-medium text-gray-900\">\n                  Event Type\n                </th>\n                <th class=\"border-b border-gray-200 bg-white px-3 py-2 text-left font-medium text-gray-900\">\n                  AG-UI Event\n                </th>\n              </tr>\n            </thead>\n            <tbody>\n              ${filteredEvents.map((event, index) => {\n                const rowBg = index % 2 === 0 ? \"bg-white\" : \"bg-gray-50/50\";\n                const badgeClasses = this.getEventBadgeClasses(event.type);\n                const extractedEvent = this.extractEventFromPayload(event.payload);\n                const inlineEvent = this.stringifyPayload(extractedEvent, false) || \"\";\n                const prettyEvent = this.stringifyPayload(extractedEvent, true) || inlineEvent;\n                const isExpanded = this.expandedRows.has(event.id);\n\n                return html`\n                  <tr\n                    class=\"${rowBg} cursor-pointer transition hover:bg-blue-50/50\"\n                    @click=${() => this.toggleRowExpansion(event.id)}\n                  >\n                    <td class=\"border-l border-r border-b border-gray-200 px-3 py-2\">\n                      <span class=\"font-mono text-[11px] text-gray-600\">${event.agentId}</span>\n                    </td>\n                    <td class=\"border-r border-b border-gray-200 px-3 py-2 font-mono text-[11px] text-gray-600\">\n                      <span title=${new Date(event.timestamp).toLocaleString()}>\n                        ${new Date(event.timestamp).toLocaleTimeString()}\n                      </span>\n                    </td>\n                    <td class=\"border-r border-b border-gray-200 px-3 py-2\">\n                      <span class=${badgeClasses}>${event.type}</span>\n                    </td>\n                    <td class=\"border-r border-b border-gray-200 px-3 py-2 font-mono text-[10px] text-gray-600 ${isExpanded ? '' : 'truncate max-w-xs'}\">\n                      ${isExpanded\n                        ? html`\n                            <div class=\"group relative\">\n                              <pre class=\"m-0 whitespace-pre-wrap break-words text-[10px] font-mono text-gray-600\">${prettyEvent}</pre>\n                              <button\n                                class=\"absolute right-0 top-0 cursor-pointer rounded px-2 py-1 text-[10px] opacity-0 transition group-hover:opacity-100 ${\n                                  this.copiedEvents.has(event.id)\n                                    ? 'bg-green-100 text-green-700'\n                                    : 'bg-gray-100 text-gray-600 hover:bg-gray-200 hover:text-gray-900'\n                                }\"\n                                @click=${(e: Event) => {\n                                  e.stopPropagation();\n                                  this.copyToClipboard(prettyEvent, event.id);\n                                }}\n                              >\n                                ${this.copiedEvents.has(event.id)\n                                  ? html`<span> Copied</span>`\n                                  : html`<span>Copy</span>`}\n                              </button>\n                            </div>\n                          `\n                        : inlineEvent}\n                    </td>\n                  </tr>\n                `;\n              })}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    `;\n  }\n\n  private handleEventFilterInput(event: Event): void {\n    const target = event.target as HTMLInputElement | null;\n    this.eventFilterText = target?.value ?? \"\";\n    this.requestUpdate();\n  }\n\n  private handleEventTypeChange(event: Event): void {\n    const target = event.target as HTMLSelectElement | null;\n    const value = target?.value as InspectorAgentEventType | \"all\" | undefined;\n    if (!value) {\n      return;\n    }\n    this.eventTypeFilter = value;\n    this.requestUpdate();\n  }\n\n  private resetEventFilters(): void {\n    this.eventFilterText = \"\";\n    this.eventTypeFilter = \"all\";\n    this.requestUpdate();\n  }\n\n  private handleClearEvents = (): void => {\n    if (this.selectedContext === \"all-agents\") {\n      this.agentEvents.clear();\n      this.flattenedEvents = [];\n    } else {\n      this.agentEvents.delete(this.selectedContext);\n      this.flattenedEvents = this.flattenedEvents.filter((event) => event.agentId !== this.selectedContext);\n    }\n\n    this.expandedRows.clear();\n    this.copiedEvents.clear();\n    this.requestUpdate();\n  };\n\n  private exportEvents(events: InspectorEvent[]): void {\n    try {\n      const payload = JSON.stringify(events, null, 2);\n      const blob = new Blob([payload], { type: \"application/json\" });\n      const url = URL.createObjectURL(blob);\n      const anchor = document.createElement(\"a\");\n      anchor.href = url;\n      anchor.download = `copilotkit-events-${Date.now()}.json`;\n      anchor.click();\n      URL.revokeObjectURL(url);\n    } catch (error) {\n      console.error(\"Failed to export events\", error);\n    }\n  }\n\n  private renderAgentsView() {\n    // Show message if \"all-agents\" is selected or no agents available\n    if (this.selectedContext === \"all-agents\") {\n      return html`\n        <div class=\"flex h-full items-center justify-center px-4 py-8 text-center\">\n          <div class=\"max-w-md\">\n            <div class=\"mb-3 flex justify-center text-gray-300 [&>svg]:!h-8 [&>svg]:!w-8\">\n              ${this.renderIcon(\"Bot\")}\n            </div>\n            <p class=\"text-sm text-gray-600\">No agent selected</p>\n            <p class=\"mt-2 text-xs text-gray-500\">Select an agent from the dropdown above to view details.</p>\n          </div>\n        </div>\n      `;\n    }\n\n    const agentId = this.selectedContext;\n    const status = this.getAgentStatus(agentId);\n    const stats = this.getAgentStats(agentId);\n    const state = this.getLatestStateForAgent(agentId);\n    const messages = this.getLatestMessagesForAgent(agentId);\n\n    const statusColors = {\n      running: \"bg-emerald-50 text-emerald-700\",\n      idle: \"bg-gray-100 text-gray-600\",\n      error: \"bg-rose-50 text-rose-700\",\n    };\n\n    return html`\n      <div class=\"flex flex-col gap-4 p-4 overflow-auto\">\n        <!-- Agent Overview Card -->\n        <div class=\"rounded-lg border border-gray-200 bg-white p-4\">\n          <div class=\"flex items-start justify-between mb-4\">\n            <div class=\"flex items-center gap-3\">\n              <div class=\"flex h-10 w-10 items-center justify-center rounded-lg bg-blue-100 text-blue-600\">\n                ${this.renderIcon(\"Bot\")}\n              </div>\n              <div>\n                <h3 class=\"font-semibold text-sm text-gray-900\">${agentId}</h3>\n                <span class=\"inline-flex items-center gap-1.5 rounded-full px-2 py-0.5 text-xs font-medium ${statusColors[status]} relative -translate-y-[2px]\">\n                  <span class=\"h-1.5 w-1.5 rounded-full ${status === 'running' ? 'bg-emerald-500 animate-pulse' : status === 'error' ? 'bg-rose-500' : 'bg-gray-400'}\"></span>\n                  ${status.charAt(0).toUpperCase() + status.slice(1)}\n                </span>\n              </div>\n            </div>\n            ${stats.lastActivity\n              ? html`<span class=\"text-xs text-gray-500\">Last activity: ${new Date(stats.lastActivity).toLocaleTimeString()}</span>`\n              : nothing}\n          </div>\n          <div class=\"grid grid-cols-2 gap-4 md:grid-cols-4\">\n            <button\n              type=\"button\"\n              class=\"rounded-md bg-gray-50 px-3 py-2 text-left transition hover:bg-gray-100 cursor-pointer overflow-hidden\"\n              @click=${() => this.handleMenuSelect(\"ag-ui-events\")}\n              title=\"View all events in AG-UI Events\"\n            >\n              <div class=\"truncate whitespace-nowrap text-xs text-gray-600\">Total Events</div>\n              <div class=\"text-lg font-semibold text-gray-900\">${stats.totalEvents}</div>\n            </button>\n            <div class=\"rounded-md bg-gray-50 px-3 py-2 overflow-hidden\">\n              <div class=\"truncate whitespace-nowrap text-xs text-gray-600\">Messages</div>\n              <div class=\"text-lg font-semibold text-gray-900\">${stats.messages}</div>\n            </div>\n            <div class=\"rounded-md bg-gray-50 px-3 py-2 overflow-hidden\">\n              <div class=\"truncate whitespace-nowrap text-xs text-gray-600\">Tool Calls</div>\n              <div class=\"text-lg font-semibold text-gray-900\">${stats.toolCalls}</div>\n            </div>\n            <div class=\"rounded-md bg-gray-50 px-3 py-2 overflow-hidden\">\n              <div class=\"truncate whitespace-nowrap text-xs text-gray-600\">Errors</div>\n              <div class=\"text-lg font-semibold text-gray-900\">${stats.errors}</div>\n            </div>\n          </div>\n        </div>\n\n        <!-- Current State Section -->\n        <div class=\"rounded-lg border border-gray-200 bg-white\">\n          <div class=\"border-b border-gray-200 px-4 py-3\">\n            <h4 class=\"text-sm font-semibold text-gray-900\">Current State</h4>\n          </div>\n          <div class=\"overflow-auto p-4\">\n            ${this.hasRenderableState(state)\n              ? html`\n                  <pre class=\"overflow-auto rounded-md bg-gray-50 p-3 text-xs text-gray-800 max-h-64\"><code>${this.formatStateForDisplay(state)}</code></pre>\n                `\n              : html`\n                  <div class=\"flex h-40 items-center justify-center text-xs text-gray-500\">\n                    <div class=\"flex items-center gap-2 text-gray-500\">\n                      <span class=\"text-lg text-gray-400\">${this.renderIcon(\"Database\")}</span>\n                      <span>State is empty</span>\n                    </div>\n                  </div>\n                `}\n          </div>\n        </div>\n\n        <!-- Current Messages Section -->\n        <div class=\"rounded-lg border border-gray-200 bg-white\">\n          <div class=\"border-b border-gray-200 px-4 py-3\">\n            <h4 class=\"text-sm font-semibold text-gray-900\">Current Messages</h4>\n          </div>\n          <div class=\"overflow-auto\">\n            ${messages && messages.length > 0\n              ? html`\n                  <table class=\"w-full text-xs\">\n                    <thead class=\"bg-gray-50\">\n                      <tr>\n                        <th class=\"px-4 py-2 text-left font-medium text-gray-700\">Role</th>\n                        <th class=\"px-4 py-2 text-left font-medium text-gray-700\">Content</th>\n                      </tr>\n                    </thead>\n                    <tbody class=\"divide-y divide-gray-200\">\n                      ${messages.map((msg) => {\n                        const role = msg.role || \"unknown\";\n                        const roleColors: Record<string, string> = {\n                          user: \"bg-blue-100 text-blue-800\",\n                          assistant: \"bg-green-100 text-green-800\",\n                          system: \"bg-gray-100 text-gray-800\",\n                          tool: \"bg-amber-100 text-amber-800\",\n                          unknown: \"bg-gray-100 text-gray-600\",\n                        };\n\n                        const rawContent = msg.contentText ?? \"\";\n                        const toolCalls = msg.toolCalls ?? [];\n                        const hasContent = rawContent.trim().length > 0;\n                        const contentFallback = toolCalls.length > 0 ? \"Invoked tool call\" : \"\";\n\n                        return html`\n                          <tr>\n                            <td class=\"px-4 py-2 align-top\">\n                              <span class=\"inline-flex rounded px-2 py-0.5 text-[10px] font-medium ${roleColors[role] || roleColors.unknown}\">\n                                ${role}\n                              </span>\n                            </td>\n                            <td class=\"px-4 py-2\">\n                              ${hasContent\n                                ? html`<div class=\"max-w-2xl whitespace-pre-wrap break-words text-gray-700\">${rawContent}</div>`\n                                : html`<div class=\"text-xs italic text-gray-400\">${contentFallback}</div>`}\n                              ${role === 'assistant' && toolCalls.length > 0\n                                ? this.renderToolCallDetails(toolCalls)\n                                : nothing}\n                            </td>\n                          </tr>\n                        `;\n                      })}\n                    </tbody>\n                  </table>\n                `\n              : html`\n                  <div class=\"flex h-40 items-center justify-center text-xs text-gray-500\">\n                    <div class=\"flex items-center gap-2 text-gray-500\">\n                      <span class=\"text-lg text-gray-400\">${this.renderIcon(\"MessageSquare\")}</span>\n                      <span>No messages available</span>\n                    </div>\n                  </div>\n                `}\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  private renderContextDropdown() {\n    // Filter out \"all-agents\" when in agents view\n    const filteredOptions = this.selectedMenu === \"agents\"\n      ? this.contextOptions.filter((opt) => opt.key !== \"all-agents\")\n      : this.contextOptions;\n\n    const selectedLabel = filteredOptions.find((opt) => opt.key === this.selectedContext)?.label ?? \"\";\n\n    return html`\n      <div class=\"relative z-40 min-w-0 flex-1\" data-context-dropdown-root=\"true\">\n        <button\n          type=\"button\"\n          class=\"relative z-40 flex w-full min-w-0 max-w-[240px] items-center gap-1.5 rounded-md border border-gray-200 px-2 py-1 text-xs font-medium text-gray-700 transition hover:border-gray-300 hover:bg-gray-50\"\n          @pointerdown=${this.handleContextDropdownToggle}\n        >\n          <span class=\"truncate flex-1 text-left\">${selectedLabel}</span>\n          <span class=\"shrink-0 text-gray-400\">${this.renderIcon(\"ChevronDown\")}</span>\n        </button>\n        ${this.contextMenuOpen\n          ? html`\n              <div\n                class=\"absolute left-0 z-50 mt-1.5 w-40 rounded-md border border-gray-200 bg-white py-1 shadow-md ring-1 ring-black/5\"\n                data-context-dropdown-root=\"true\"\n              >\n                ${filteredOptions.map(\n                  (option) => html`\n                    <button\n                      type=\"button\"\n                      class=\"flex w-full items-center justify-between px-3 py-1.5 text-left text-xs transition hover:bg-gray-50 focus:bg-gray-50 focus:outline-none\"\n                      data-context-dropdown-root=\"true\"\n                      @click=${() => this.handleContextOptionSelect(option.key)}\n                    >\n                      <span class=\"truncate ${option.key === this.selectedContext ? 'text-gray-900 font-medium' : 'text-gray-600'}\">${option.label}</span>\n                      ${option.key === this.selectedContext\n                        ? html`<span class=\"text-gray-500\">${this.renderIcon(\"Check\")}</span>`\n                        : nothing}\n                    </button>\n                  `,\n                )}\n              </div>\n            `\n          : nothing}\n      </div>\n    `;\n  }\n\n  private handleMenuSelect(key: MenuKey): void {\n    if (!this.menuItems.some((item) => item.key === key)) {\n      return;\n    }\n\n    this.selectedMenu = key;\n\n    // If switching to agents view and \"all-agents\" is selected, switch to default or first agent\n    if (key === \"agents\" && this.selectedContext === \"all-agents\") {\n      const agentOptions = this.contextOptions.filter((opt) => opt.key !== \"all-agents\");\n      if (agentOptions.length > 0) {\n        // Try to find \"default\" agent first\n        const defaultAgent = agentOptions.find((opt) => opt.key === \"default\");\n        this.selectedContext = defaultAgent ? defaultAgent.key : agentOptions[0]!.key;\n      }\n    }\n\n    this.contextMenuOpen = false;\n    this.persistState();\n    this.requestUpdate();\n  }\n\n  private handleContextDropdownToggle(event: PointerEvent): void {\n    event.preventDefault();\n    event.stopPropagation();\n    this.contextMenuOpen = !this.contextMenuOpen;\n    this.requestUpdate();\n  }\n\n  private handleContextOptionSelect(key: string): void {\n    if (!this.contextOptions.some((option) => option.key === key)) {\n      return;\n    }\n\n    if (this.selectedContext !== key) {\n      this.selectedContext = key;\n      this.expandedRows.clear();\n    }\n\n    this.contextMenuOpen = false;\n    this.persistState();\n    this.requestUpdate();\n  }\n\n  private renderToolsView() {\n    if (!this._core) {\n      return html`\n        <div class=\"flex h-full items-center justify-center px-4 py-8 text-xs text-gray-500\">\n          No core instance available\n        </div>\n      `;\n    }\n\n    this.refreshToolsSnapshot();\n    const allTools = this.cachedTools;\n\n    if (allTools.length === 0) {\n      return html`\n        <div class=\"flex h-full items-center justify-center px-4 py-8 text-center\">\n          <div class=\"max-w-md\">\n            <div class=\"mb-3 flex justify-center text-gray-300 [&>svg]:!h-8 [&>svg]:!w-8\">\n              ${this.renderIcon(\"Hammer\")}\n            </div>\n            <p class=\"text-sm text-gray-600\">No tools available</p>\n            <p class=\"mt-2 text-xs text-gray-500\">Tools will appear here once agents are configured with tool handlers or renderers.</p>\n          </div>\n        </div>\n      `;\n    }\n\n    // Filter tools by selected agent\n    const filteredTools = this.selectedContext === \"all-agents\"\n      ? allTools\n      : allTools.filter((tool) => !tool.agentId || tool.agentId === this.selectedContext);\n\n    return html`\n      <div class=\"flex h-full flex-col overflow-hidden\">\n        <div class=\"overflow-auto p-4\">\n          <div class=\"space-y-3\">\n            ${filteredTools.map(tool => this.renderToolCard(tool))}\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  private extractToolsFromAgents(): InspectorToolDefinition[] {\n    if (!this._core) {\n      return [];\n    }\n\n    const tools: InspectorToolDefinition[] = [];\n\n    // Start with tools registered on the core (frontend tools / HIL)\n    for (const coreTool of this._core.tools ?? []) {\n      tools.push({\n        agentId: coreTool.agentId ?? \"\",\n        name: coreTool.name,\n        description: coreTool.description,\n        parameters: coreTool.parameters,\n        type: 'handler',\n      });\n    }\n\n    // Augment with agent-level tool handlers/renderers\n    for (const [agentId, agent] of Object.entries(this._core.agents)) {\n      if (!agent) continue;\n\n      // Try to extract tool handlers\n      const handlers = (agent as { toolHandlers?: Record<string, unknown> }).toolHandlers;\n      if (handlers && typeof handlers === 'object') {\n        for (const [toolName, handler] of Object.entries(handlers)) {\n          if (handler && typeof handler === 'object') {\n            const handlerObj = handler as Record<string, unknown>;\n            tools.push({\n              agentId,\n              name: toolName,\n              description:\n                (typeof handlerObj.description === \"string\" && handlerObj.description) ||\n                (handlerObj.tool as { description?: string } | undefined)?.description,\n              parameters:\n                handlerObj.parameters ??\n                (handlerObj.tool as { parameters?: unknown } | undefined)?.parameters,\n              type: 'handler',\n            });\n          }\n        }\n      }\n\n      // Try to extract tool renderers\n      const renderers = (agent as { toolRenderers?: Record<string, unknown> }).toolRenderers;\n      if (renderers && typeof renderers === 'object') {\n        for (const [toolName, renderer] of Object.entries(renderers)) {\n          // Don't duplicate if we already have it as a handler\n          if (!tools.some(t => t.agentId === agentId && t.name === toolName)) {\n            if (renderer && typeof renderer === 'object') {\n              const rendererObj = renderer as Record<string, unknown>;\n              tools.push({\n                agentId,\n                name: toolName,\n                description:\n                  (typeof rendererObj.description === \"string\" && rendererObj.description) ||\n                  (rendererObj.tool as { description?: string } | undefined)?.description,\n                parameters:\n                  rendererObj.parameters ??\n                  (rendererObj.tool as { parameters?: unknown } | undefined)?.parameters,\n                type: 'renderer',\n              });\n            }\n          }\n        }\n      }\n    }\n\n    return tools.sort((a, b) => {\n      const agentCompare = a.agentId.localeCompare(b.agentId);\n      if (agentCompare !== 0) return agentCompare;\n      return a.name.localeCompare(b.name);\n    });\n  }\n\n  private renderToolCard(tool: InspectorToolDefinition) {\n    const isExpanded = this.expandedTools.has(`${tool.agentId}:${tool.name}`);\n    const schema = this.extractSchemaInfo(tool.parameters);\n\n    const typeColors = {\n      handler: \"bg-blue-50 text-blue-700 border-blue-200\",\n      renderer: \"bg-purple-50 text-purple-700 border-purple-200\",\n    };\n\n    return html`\n      <div class=\"rounded-lg border border-gray-200 bg-white overflow-hidden\">\n        <button\n          type=\"button\"\n          class=\"w-full px-4 py-3 text-left transition hover:bg-gray-50\"\n          @click=${() => this.toggleToolExpansion(`${tool.agentId}:${tool.name}`)}\n        >\n          <div class=\"flex items-start justify-between gap-3\">\n            <div class=\"flex-1 min-w-0\">\n              <div class=\"flex items-center gap-2 mb-1\">\n                <span class=\"font-mono text-sm font-semibold text-gray-900\">${tool.name}</span>\n                <span class=\"inline-flex items-center rounded-sm border px-1.5 py-0.5 text-[10px] font-medium ${typeColors[tool.type]}\">\n                  ${tool.type}\n                </span>\n              </div>\n              <div class=\"flex items-center gap-2 text-xs text-gray-500\">\n                <span class=\"flex items-center gap-1\">\n                  ${this.renderIcon(\"Bot\")}\n                  <span class=\"font-mono\">${tool.agentId}</span>\n                </span>\n                ${schema.properties.length > 0\n                  ? html`\n                      <span class=\"text-gray-300\"></span>\n                      <span>${schema.properties.length} parameter${schema.properties.length !== 1 ? 's' : ''}</span>\n                    `\n                  : nothing}\n              </div>\n              ${tool.description\n                ? html`<p class=\"mt-2 text-xs text-gray-600\">${tool.description}</p>`\n                : nothing}\n            </div>\n            <span class=\"shrink-0 text-gray-400 transition ${isExpanded ? 'rotate-180' : ''}\">\n              ${this.renderIcon(\"ChevronDown\")}\n            </span>\n          </div>\n        </button>\n\n        ${isExpanded\n          ? html`\n              <div class=\"border-t border-gray-200 bg-gray-50/50 px-4 py-3\">\n                ${schema.properties.length > 0\n                  ? html`\n                      <h5 class=\"mb-3 text-xs font-semibold text-gray-700\">Parameters</h5>\n                      <div class=\"space-y-3\">\n                        ${schema.properties.map(prop => html`\n                          <div class=\"rounded-md border border-gray-200 bg-white p-3\">\n                            <div class=\"flex items-start justify-between gap-2 mb-1\">\n                              <span class=\"font-mono text-xs font-medium text-gray-900\">${prop.name}</span>\n                              <div class=\"flex items-center gap-1.5 shrink-0\">\n                                ${prop.required\n                                  ? html`<span class=\"text-[9px] rounded border border-rose-200 bg-rose-50 px-1 py-0.5 font-medium text-rose-700\">required</span>`\n                                  : html`<span class=\"text-[9px] rounded border border-gray-200 bg-gray-50 px-1 py-0.5 font-medium text-gray-600\">optional</span>`}\n                                ${prop.type\n                                  ? html`<span class=\"text-[9px] rounded border border-gray-200 bg-gray-50 px-1 py-0.5 font-mono text-gray-600\">${prop.type}</span>`\n                                  : nothing}\n                              </div>\n                            </div>\n                            ${prop.description\n                              ? html`<p class=\"mt-1 text-xs text-gray-600\">${prop.description}</p>`\n                              : nothing}\n                            ${prop.defaultValue !== undefined\n                              ? html`\n                                  <div class=\"mt-2 flex items-center gap-1.5 text-[10px] text-gray-500\">\n                                    <span>Default:</span>\n                                    <code class=\"rounded bg-gray-100 px-1 py-0.5 font-mono\">${JSON.stringify(prop.defaultValue)}</code>\n                                  </div>\n                                `\n                              : nothing}\n                            ${prop.enum && prop.enum.length > 0\n                              ? html`\n                                  <div class=\"mt-2\">\n                                    <span class=\"text-[10px] text-gray-500\">Allowed values:</span>\n                                    <div class=\"mt-1 flex flex-wrap gap-1\">\n                                      ${prop.enum.map(val => html`\n                                        <code class=\"rounded border border-gray-200 bg-gray-50 px-1.5 py-0.5 text-[10px] font-mono text-gray-700\">${JSON.stringify(val)}</code>\n                                      `)}\n                                    </div>\n                                  </div>\n                                `\n                              : nothing}\n                          </div>\n                        `)}\n                      </div>\n                    `\n                  : html`\n                      <div class=\"flex items-center justify-center py-4 text-xs text-gray-500\">\n                        <span>No parameters defined</span>\n                      </div>\n                    `}\n              </div>\n            `\n          : nothing}\n      </div>\n    `;\n  }\n\n  private extractSchemaInfo(parameters: unknown): {\n    properties: Array<{\n      name: string;\n      type?: string;\n      description?: string;\n      required: boolean;\n      defaultValue?: unknown;\n      enum?: unknown[];\n    }>;\n  } {\n    const result: {\n      properties: Array<{\n        name: string;\n        type?: string;\n        description?: string;\n        required: boolean;\n        defaultValue?: unknown;\n        enum?: unknown[];\n      }>;\n    } = { properties: [] };\n\n    if (!parameters || typeof parameters !== 'object') {\n      return result;\n    }\n\n    // Try Zod schema introspection\n    const zodDef = (parameters as { _def?: Record<string, unknown> })._def;\n    if (zodDef && typeof zodDef === \"object\") {\n      // Handle Zod object schema\n      if (zodDef.typeName === 'ZodObject') {\n        const rawShape = zodDef.shape;\n        const shape =\n          typeof rawShape === \"function\"\n            ? (rawShape as () => Record<string, unknown>)()\n            : (rawShape as Record<string, unknown> | undefined);\n\n        if (!shape || typeof shape !== \"object\") {\n          return result;\n        }\n        const requiredKeys = new Set<string>();\n\n        // Get required fields\n        if (zodDef.unknownKeys === 'strict' || !zodDef.catchall) {\n          Object.keys(shape || {}).forEach((key) => {\n            const candidate = (shape as Record<string, unknown>)[key];\n            const fieldDef = (candidate as { _def?: Record<string, unknown> } | undefined)?._def;\n            if (fieldDef && !this.isZodOptional(candidate)) {\n              requiredKeys.add(key);\n            }\n          });\n        }\n\n        // Extract properties\n        for (const [key, value] of Object.entries(shape || {})) {\n          const fieldInfo = this.extractZodFieldInfo(value);\n          result.properties.push({\n            name: key,\n            type: fieldInfo.type,\n            description: fieldInfo.description,\n            required: requiredKeys.has(key),\n            defaultValue: fieldInfo.defaultValue,\n            enum: fieldInfo.enum,\n          });\n        }\n      }\n    } else if (\n      (parameters as { type?: string; properties?: Record<string, unknown> }).type === 'object' &&\n      (parameters as { properties?: Record<string, unknown> }).properties\n    ) {\n      // Handle JSON Schema format\n      const props = (parameters as { properties?: Record<string, unknown> }).properties;\n      const required = new Set(\n        Array.isArray((parameters as { required?: string[] }).required)\n          ? (parameters as { required?: string[] }).required\n          : [],\n      );\n\n      for (const [key, value] of Object.entries(props ?? {})) {\n        const prop = value as Record<string, unknown>;\n        result.properties.push({\n          name: key,\n          type: prop.type as string | undefined,\n          description: typeof prop.description === \"string\" ? prop.description : undefined,\n          required: required.has(key),\n          defaultValue: prop.default,\n          enum: Array.isArray(prop.enum) ? prop.enum : undefined,\n        });\n      }\n    }\n\n    return result;\n  }\n\n  private isZodOptional(zodSchema: unknown): boolean {\n    const schema = zodSchema as { _def?: Record<string, unknown> };\n    if (!schema?._def) return false;\n\n    const def = schema._def;\n\n    // Check if it's explicitly optional or nullable\n    if (def.typeName === 'ZodOptional' || def.typeName === 'ZodNullable') {\n      return true;\n    }\n\n    // Check if it has a default value\n    if (def.defaultValue !== undefined) {\n      return true;\n    }\n\n    return false;\n  }\n\n  private extractZodFieldInfo(zodSchema: unknown): {\n    type?: string;\n    description?: string;\n    defaultValue?: unknown;\n    enum?: unknown[];\n  } {\n    const info: {\n      type?: string;\n      description?: string;\n      defaultValue?: unknown;\n      enum?: unknown[];\n    } = {};\n\n    const schema = zodSchema as { _def?: Record<string, unknown> };\n    if (!schema?._def) return info;\n\n    let currentSchema = schema as { _def?: Record<string, unknown> };\n    let def = currentSchema._def as Record<string, unknown>;\n\n    // Unwrap optional/nullable\n    while (def.typeName === 'ZodOptional' || def.typeName === 'ZodNullable' || def.typeName === 'ZodDefault') {\n      if (def.typeName === 'ZodDefault' && def.defaultValue !== undefined) {\n        info.defaultValue = typeof def.defaultValue === 'function' ? def.defaultValue() : def.defaultValue;\n      }\n      currentSchema = (def.innerType as { _def?: Record<string, unknown> }) ?? currentSchema;\n      if (!currentSchema?._def) break;\n      def = currentSchema._def as Record<string, unknown>;\n    }\n\n    // Extract description\n    info.description = typeof def.description === \"string\" ? def.description : undefined;\n\n    const typeName = typeof def.typeName === \"string\" ? def.typeName : undefined;\n\n    // Extract type\n    const typeMap: Record<string, string> = {\n      ZodString: 'string',\n      ZodNumber: 'number',\n      ZodBoolean: 'boolean',\n      ZodArray: 'array',\n      ZodObject: 'object',\n      ZodEnum: 'enum',\n      ZodLiteral: 'literal',\n      ZodUnion: 'union',\n      ZodAny: 'any',\n      ZodUnknown: 'unknown',\n    };\n    info.type = typeName ? typeMap[typeName] || typeName.replace('Zod', '').toLowerCase() : undefined;\n\n    // Extract enum values\n    if (typeName === 'ZodEnum' && Array.isArray(def.values)) {\n      info.enum = def.values as unknown[];\n    } else if (typeName === 'ZodLiteral' && def.value !== undefined) {\n      info.enum = [def.value];\n    }\n\n    return info;\n  }\n\n  private toggleToolExpansion(toolId: string): void {\n    if (this.expandedTools.has(toolId)) {\n      this.expandedTools.delete(toolId);\n    } else {\n      this.expandedTools.add(toolId);\n    }\n    this.requestUpdate();\n  }\n\n  private renderContextView() {\n    const contextEntries = Object.entries(this.contextStore);\n\n    if (contextEntries.length === 0) {\n      return html`\n        <div class=\"flex h-full items-center justify-center px-4 py-8 text-center\">\n          <div class=\"max-w-md\">\n            <div class=\"mb-3 flex justify-center text-gray-300 [&>svg]:!h-8 [&>svg]:!w-8\">\n              ${this.renderIcon(\"FileText\")}\n            </div>\n            <p class=\"text-sm text-gray-600\">No context available</p>\n            <p class=\"mt-2 text-xs text-gray-500\">Context will appear here once added to CopilotKit.</p>\n          </div>\n        </div>\n      `;\n    }\n\n    return html`\n      <div class=\"flex h-full flex-col overflow-hidden\">\n        <div class=\"overflow-auto p-4\">\n          <div class=\"space-y-3\">\n            ${contextEntries.map(([id, context]) => this.renderContextCard(id, context))}\n          </div>\n        </div>\n      </div>\n    `;\n  }\n\n  private renderContextCard(id: string, context: { description?: string; value: unknown }) {\n    const isExpanded = this.expandedContextItems.has(id);\n    const valuePreview = this.getContextValuePreview(context.value);\n    const hasValue = context.value !== undefined && context.value !== null;\n    const title = context.description?.trim() || id;\n\n    return html`\n      <div class=\"rounded-lg border border-gray-200 bg-white overflow-hidden\">\n        <button\n          type=\"button\"\n          class=\"w-full px-4 py-3 text-left transition hover:bg-gray-50\"\n          @click=${() => this.toggleContextExpansion(id)}\n        >\n          <div class=\"flex items-start justify-between gap-3\">\n            <div class=\"flex-1 min-w-0\">\n              <p class=\"text-sm font-medium text-gray-900 mb-1\">${title}</p>\n              <div class=\"flex items-center gap-2 text-xs text-gray-500\">\n                <span class=\"font-mono truncate inline-block align-middle\" style=\"max-width: 180px;\">${id}</span>\n                ${hasValue\n                  ? html`\n                      <span class=\"text-gray-300\"></span>\n                      <span class=\"truncate\">${valuePreview}</span>\n                    `\n                  : nothing}\n              </div>\n            </div>\n            <span class=\"shrink-0 text-gray-400 transition ${isExpanded ? 'rotate-180' : ''}\">\n              ${this.renderIcon(\"ChevronDown\")}\n            </span>\n          </div>\n        </button>\n\n        ${isExpanded\n          ? html`\n              <div class=\"border-t border-gray-200 bg-gray-50/50 px-4 py-3\">\n                <div class=\"mb-3\">\n                  <h5 class=\"mb-1 text-xs font-semibold text-gray-700\">ID</h5>\n                  <code class=\"block rounded bg-white border border-gray-200 px-2 py-1 text-[10px] font-mono text-gray-600\">${id}</code>\n                </div>\n                ${hasValue\n                  ? html`\n                      <div class=\"mb-2 flex items-center justify-between gap-2\">\n                        <h5 class=\"text-xs font-semibold text-gray-700\">Value</h5>\n                        <button\n                          class=\"flex items-center gap-1 rounded-md border border-gray-200 bg-white px-2 py-1 text-[10px] font-medium text-gray-700 transition hover:bg-gray-50\"\n                          type=\"button\"\n                          @click=${(e: Event) => {\n                            e.stopPropagation();\n                            void this.copyContextValue(context.value, id);\n                          }}\n                        >\n                          ${this.copiedContextItems.has(id) ? \"Copied\" : \"Copy JSON\"}\n                        </button>\n                      </div>\n                      <div class=\"rounded-md border border-gray-200 bg-white p-3\">\n                        <pre class=\"overflow-auto text-xs text-gray-800 max-h-96\"><code>${this.formatContextValue(context.value)}</code></pre>\n                      </div>\n                    `\n                  : html`\n                      <div class=\"flex items-center justify-center py-4 text-xs text-gray-500\">\n                        <span>No value available</span>\n                      </div>\n                    `}\n              </div>\n            `\n          : nothing}\n      </div>\n    `;\n  }\n\n  private getContextValuePreview(value: unknown): string {\n    if (value === undefined || value === null) {\n      return '';\n    }\n\n    if (typeof value === 'string') {\n      return value.length > 50 ? `${value.substring(0, 50)}...` : value;\n    }\n\n    if (typeof value === 'number' || typeof value === 'boolean') {\n      return String(value);\n    }\n\n    if (Array.isArray(value)) {\n      return `Array(${value.length})`;\n    }\n\n    if (typeof value === 'object') {\n      const keys = Object.keys(value);\n      return `Object with ${keys.length} key${keys.length !== 1 ? 's' : ''}`;\n    }\n\n    if (typeof value === 'function') {\n      return 'Function';\n    }\n\n    return String(value);\n  }\n\n  private formatContextValue(value: unknown): string {\n    if (value === undefined) {\n      return 'undefined';\n    }\n\n    if (value === null) {\n      return 'null';\n    }\n\n    if (typeof value === 'function') {\n      return value.toString();\n    }\n\n    try {\n      return JSON.stringify(value, null, 2);\n    } catch {\n      return String(value);\n    }\n  }\n\n  private async copyContextValue(value: unknown, contextId: string): Promise<void> {\n    if (typeof navigator === \"undefined\" || !navigator.clipboard?.writeText) {\n      console.warn(\"Clipboard API is not available in this environment.\");\n      return;\n    }\n\n    const serialized = this.formatContextValue(value);\n    try {\n      await navigator.clipboard.writeText(serialized);\n      this.copiedContextItems.add(contextId);\n      this.requestUpdate();\n      setTimeout(() => {\n        this.copiedContextItems.delete(contextId);\n        this.requestUpdate();\n      }, 1500);\n    } catch (error) {\n      console.error(\"Failed to copy context value:\", error);\n    }\n  }\n\n  private toggleContextExpansion(contextId: string): void {\n    if (this.expandedContextItems.has(contextId)) {\n      this.expandedContextItems.delete(contextId);\n    } else {\n      this.expandedContextItems.add(contextId);\n    }\n    this.requestUpdate();\n  }\n\n  private handleGlobalPointerDown = (event: PointerEvent): void => {\n    if (!this.contextMenuOpen) {\n      return;\n    }\n\n    const clickedDropdown = event.composedPath().some((node) => {\n      return node instanceof HTMLElement && node.dataset?.contextDropdownRoot === \"true\";\n    });\n\n    if (!clickedDropdown) {\n      this.contextMenuOpen = false;\n      this.requestUpdate();\n    }\n  };\n\n  private toggleRowExpansion(eventId: string): void {\n    // Don't toggle if user is selecting text\n    const selection = window.getSelection();\n    if (selection && selection.toString().length > 0) {\n      return;\n    }\n\n    if (this.expandedRows.has(eventId)) {\n      this.expandedRows.delete(eventId);\n    } else {\n      this.expandedRows.add(eventId);\n    }\n    this.requestUpdate();\n  }\n\n  private renderAnnouncementPanel() {\n    if (!this.isOpen) {\n      return nothing;\n    }\n\n    // Ensure loading is triggered even if we mounted in an already-open state\n    this.ensureAnnouncementLoading();\n\n    if (!this.hasUnseenAnnouncement) {\n      return nothing;\n    }\n\n    if (!this.announcementLoaded && !this.announcementMarkdown) {\n      return html`<div class=\"mx-4 my-3 rounded-xl border border-slate-200 bg-white px-4 py-3 text-sm text-slate-800 shadow-[0_12px_30px_rgba(15,23,42,0.12)]\">\n        <div class=\"flex items-center gap-2 font-semibold\">\n          <span class=\"inline-flex h-6 w-6 items-center justify-center rounded-md bg-slate-900 text-white shadow-sm\">\n            ${this.renderIcon(\"Megaphone\")}\n          </span>\n          <span>Loading latest announcement</span>\n        </div>\n      </div>`;\n    }\n\n    if (this.announcementLoadError) {\n      return html`<div class=\"mx-4 my-3 rounded-xl border border-rose-200 bg-rose-50 px-4 py-3 text-sm text-rose-900 shadow-[0_12px_30px_rgba(15,23,42,0.12)]\">\n        <div class=\"flex items-center gap-2 font-semibold\">\n          <span class=\"inline-flex h-6 w-6 items-center justify-center rounded-md bg-rose-600 text-white shadow-sm\">\n            ${this.renderIcon(\"Megaphone\")}\n          </span>\n          <span>Announcement unavailable</span>\n        </div>\n        <p class=\"mt-2 text-xs text-rose-800\">We couldnt load the latest notice. Please try opening the inspector again.</p>\n      </div>`;\n    }\n\n    if (!this.announcementMarkdown) {\n      return nothing;\n    }\n\n    const content = this.announcementHtml\n      ? unsafeHTML(this.announcementHtml)\n      : html`<pre class=\"whitespace-pre-wrap text-sm text-gray-900\">${this.announcementMarkdown}</pre>`;\n\n    return html`<div class=\"mx-4 my-3 rounded-xl border border-slate-200 bg-white px-4 py-4 shadow-[0_12px_30px_rgba(15,23,42,0.12)]\">\n      <div class=\"mb-3 flex items-center gap-2 text-sm font-semibold text-slate-900\">\n        <span class=\"inline-flex h-7 w-7 items-center justify-center rounded-md bg-slate-900 text-white shadow-sm\">\n          ${this.renderIcon(\"Megaphone\")}\n        </span>\n        <span>Announcement</span>\n        <button class=\"announcement-dismiss ml-auto\" type=\"button\" @click=${this.handleDismissAnnouncement} aria-label=\"Dismiss announcement\">\n          Dismiss\n        </button>\n      </div>\n      <div class=\"announcement-content text-sm leading-relaxed text-gray-900\">${content}</div>\n    </div>`;\n  }\n\n  private ensureAnnouncementLoading(): void {\n    if (this.announcementPromise || typeof window === \"undefined\" || typeof fetch === \"undefined\") {\n      return;\n    }\n    this.announcementPromise = this.fetchAnnouncement();\n  }\n\n  private renderAnnouncementPreview() {\n    if (!this.hasUnseenAnnouncement || !this.showAnnouncementPreview || !this.announcementPreviewText) {\n      return nothing;\n    }\n\n    const side = this.contextState.button.anchor.horizontal === \"left\" ? \"right\" : \"left\";\n\n    return html`<div\n      class=\"announcement-preview\"\n      data-side=${side}\n      role=\"note\"\n      @click=${() => this.handleAnnouncementPreviewClick()}\n    >\n      <span>${this.announcementPreviewText}</span>\n      <span class=\"announcement-preview__arrow\"></span>\n    </div>`;\n  }\n\n  private handleAnnouncementPreviewClick(): void {\n    this.showAnnouncementPreview = false;\n    this.openInspector();\n  }\n\n  private handleDismissAnnouncement = (): void => {\n    this.markAnnouncementSeen();\n  };\n\n  private async fetchAnnouncement(): Promise<void> {\n    try {\n      const response = await fetch(ANNOUNCEMENT_URL, { cache: \"no-cache\" });\n      if (!response.ok) {\n        throw new Error(`Failed to load announcement (${response.status})`);\n      }\n\n      const data = (await response.json()) as {\n        timestamp?: unknown;\n        previewText?: unknown;\n        announcement?: unknown;\n      };\n\n      const timestamp = typeof data?.timestamp === \"string\" ? data.timestamp : null;\n      const previewText = typeof data?.previewText === \"string\" ? data.previewText : null;\n      const markdown = typeof data?.announcement === \"string\" ? data.announcement : null;\n\n      if (!timestamp || !markdown) {\n        throw new Error(\"Malformed announcement payload\");\n      }\n\n      const storedTimestamp = this.loadStoredAnnouncementTimestamp();\n\n      this.announcementTimestamp = timestamp;\n      this.announcementPreviewText = previewText ?? \"\";\n      this.announcementMarkdown = markdown;\n      this.hasUnseenAnnouncement = (!storedTimestamp || storedTimestamp !== timestamp) && !!this.announcementPreviewText;\n      this.showAnnouncementPreview = this.hasUnseenAnnouncement;\n      this.announcementHtml = await this.convertMarkdownToHtml(markdown);\n      this.announcementLoaded = true;\n\n      this.requestUpdate();\n    } catch (error) {\n      this.announcementLoadError = error;\n      this.announcementLoaded = true;\n      this.requestUpdate();\n    }\n  }\n\n  private async convertMarkdownToHtml(markdown: string): Promise<string | null> {\n    const renderer = new marked.Renderer();\n    renderer.link = (href, title, text) => {\n      const safeHref = this.escapeHtmlAttr(this.appendRefParam(href ?? \"\"));\n      const titleAttr = title ? ` title=\"${this.escapeHtmlAttr(title)}\"` : \"\";\n      return `<a href=\"${safeHref}\" target=\"_blank\" rel=\"noopener\"${titleAttr}>${text}</a>`;\n    };\n    return marked.parse(markdown, { renderer });\n  }\n\n  private appendRefParam(href: string): string {\n    try {\n      const url = new URL(href, typeof window !== \"undefined\" ? window.location.href : \"https://copilotkit.ai\");\n      if (!url.searchParams.has(\"ref\")) {\n        url.searchParams.append(\"ref\", \"cpk-inspector\");\n      }\n      return url.toString();\n    } catch {\n      return href;\n    }\n  }\n\n  private escapeHtmlAttr(value: string): string {\n    return value\n      .replace(/&/g, \"&amp;\")\n      .replace(/</g, \"&lt;\")\n      .replace(/>/g, \"&gt;\")\n      .replace(/\\\"/g, \"&quot;\")\n      .replace(/'/g, \"&#39;\");\n  }\n\n  private loadStoredAnnouncementTimestamp(): string | null {\n    if (typeof window === \"undefined\" || !window.localStorage) {\n      return null;\n    }\n    try {\n      const raw = window.localStorage.getItem(ANNOUNCEMENT_STORAGE_KEY);\n      if (!raw) {\n        return null;\n      }\n      const parsed = JSON.parse(raw);\n      if (parsed && typeof parsed.timestamp === \"string\") {\n        return parsed.timestamp;\n      }\n      // Backward compatibility: previous shape { hash }\n      return null;\n    } catch {\n      // ignore malformed storage\n    }\n    return null;\n  }\n\n  private persistAnnouncementTimestamp(timestamp: string): void {\n    if (typeof window === \"undefined\" || !window.localStorage) {\n      return;\n    }\n    try {\n      const payload = JSON.stringify({ timestamp });\n      window.localStorage.setItem(ANNOUNCEMENT_STORAGE_KEY, payload);\n    } catch {\n      // Non-fatal if storage is unavailable\n    }\n  }\n\n  private markAnnouncementSeen(): void {\n    // Clear badge only when explicitly dismissed\n    this.hasUnseenAnnouncement = false;\n    this.showAnnouncementPreview = false;\n\n    if (!this.announcementTimestamp) {\n      // If still loading, attempt once more after promise resolves; avoid infinite requeues\n      if (this.announcementPromise && !this.announcementLoaded) {\n        void this.announcementPromise.then(() => this.markAnnouncementSeen()).catch(() => undefined);\n      }\n      this.requestUpdate();\n      return;\n    }\n\n    this.persistAnnouncementTimestamp(this.announcementTimestamp);\n    this.requestUpdate();\n  }\n}\n\nexport function defineWebInspector(): void {\n  if (!customElements.get(WEB_INSPECTOR_TAG)) {\n    customElements.define(WEB_INSPECTOR_TAG, WebInspectorElement);\n  }\n}\n\ndefineWebInspector();\n\ndeclare global {\n  interface HTMLElementTagNameMap {\n    \"cpk-web-inspector\": WebInspectorElement;\n  }\n}\n","/*! tailwindcss v4.1.18 | MIT License | https://tailwindcss.com */\n@layer properties{@supports (((-webkit-hyphens:none)) and (not (margin-trim:inline))) or ((-moz-orient:inline) and (not (color:rgb(from red r g b)))){*,:before,:after,::backdrop{--tw-translate-x:0;--tw-translate-y:0;--tw-translate-z:0;--tw-rotate-x:initial;--tw-rotate-y:initial;--tw-rotate-z:initial;--tw-skew-x:initial;--tw-skew-y:initial;--tw-space-y-reverse:0;--tw-divide-y-reverse:0;--tw-border-style:solid;--tw-leading:initial;--tw-font-weight:initial;--tw-shadow:0 0 #0000;--tw-shadow-color:initial;--tw-shadow-alpha:100%;--tw-inset-shadow:0 0 #0000;--tw-inset-shadow-color:initial;--tw-inset-shadow-alpha:100%;--tw-ring-color:initial;--tw-ring-shadow:0 0 #0000;--tw-inset-ring-color:initial;--tw-inset-ring-shadow:0 0 #0000;--tw-ring-inset:initial;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-offset-shadow:0 0 #0000;--tw-backdrop-blur:initial;--tw-backdrop-brightness:initial;--tw-backdrop-contrast:initial;--tw-backdrop-grayscale:initial;--tw-backdrop-hue-rotate:initial;--tw-backdrop-invert:initial;--tw-backdrop-opacity:initial;--tw-backdrop-saturate:initial;--tw-backdrop-sepia:initial;--tw-scale-x:1;--tw-scale-y:1;--tw-scale-z:1;--tw-outline-style:solid}}}@layer theme{:root,:host{--font-sans:ui-sans-serif,system-ui,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\";--font-mono:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace;--color-amber-50:oklch(98.7% .022 95.277);--color-amber-100:oklch(96.2% .059 95.617);--color-amber-200:oklch(92.4% .12 95.746);--color-amber-600:oklch(66.6% .179 58.318);--color-amber-700:oklch(55.5% .163 48.998);--color-amber-800:oklch(47.3% .137 46.201);--color-amber-900:oklch(41.4% .112 45.904);--color-green-100:oklch(96.2% .044 156.743);--color-green-700:oklch(52.7% .154 150.069);--color-green-800:oklch(44.8% .119 151.328);--color-emerald-50:oklch(97.9% .021 166.113);--color-emerald-200:oklch(90.5% .093 164.15);--color-emerald-500:oklch(69.6% .17 162.48);--color-emerald-700:oklch(50.8% .118 165.612);--color-sky-50:oklch(97.7% .013 236.62);--color-sky-200:oklch(90.1% .058 230.902);--color-sky-700:oklch(50% .134 242.749);--color-blue-50:oklch(97% .014 254.604);--color-blue-100:oklch(93.2% .032 255.585);--color-blue-200:oklch(88.2% .059 254.128);--color-blue-600:oklch(54.6% .245 262.881);--color-blue-700:oklch(48.8% .243 264.376);--color-blue-800:oklch(42.4% .199 265.638);--color-violet-50:oklch(96.9% .016 293.756);--color-violet-200:oklch(89.4% .057 293.283);--color-violet-700:oklch(49.1% .27 292.581);--color-purple-50:oklch(97.7% .014 308.299);--color-purple-200:oklch(90.2% .063 306.703);--color-purple-700:oklch(49.6% .265 301.924);--color-rose-50:oklch(96.9% .015 12.422);--color-rose-200:oklch(89.2% .058 10.001);--color-rose-500:oklch(64.5% .246 16.439);--color-rose-600:oklch(58.6% .253 17.585);--color-rose-700:oklch(51.4% .222 16.935);--color-rose-800:oklch(45.5% .188 13.697);--color-rose-900:oklch(41% .159 10.272);--color-slate-200:oklch(92.9% .013 255.508);--color-slate-800:oklch(27.9% .041 260.031);--color-slate-900:oklch(20.8% .042 265.755);--color-slate-950:oklch(12.9% .042 264.695);--color-gray-50:oklch(98.5% .002 247.839);--color-gray-100:oklch(96.7% .003 264.542);--color-gray-200:oklch(92.8% .006 264.531);--color-gray-300:oklch(87.2% .01 258.338);--color-gray-400:oklch(70.7% .022 261.325);--color-gray-500:oklch(55.1% .027 264.364);--color-gray-600:oklch(44.6% .03 256.802);--color-gray-700:oklch(37.3% .034 259.733);--color-gray-800:oklch(27.8% .033 256.848);--color-gray-900:oklch(21% .034 264.665);--color-black:#000;--color-white:#fff;--spacing:.25rem;--container-xs:20rem;--container-md:28rem;--container-2xl:42rem;--text-xs:.75rem;--text-xs--line-height:calc(1/.75);--text-sm:.875rem;--text-sm--line-height:calc(1.25/.875);--text-lg:1.125rem;--text-lg--line-height:calc(1.75/1.125);--font-weight-medium:500;--font-weight-semibold:600;--leading-snug:1.375;--leading-relaxed:1.625;--radius-sm:.25rem;--radius-md:.375rem;--radius-lg:.5rem;--radius-xl:.75rem;--animate-pulse:pulse 2s cubic-bezier(.4,0,.6,1)infinite;--blur-sm:8px;--blur-md:12px;--default-transition-duration:.15s;--default-transition-timing-function:cubic-bezier(.4,0,.2,1);--default-font-family:var(--font-sans);--default-mono-font-family:var(--font-mono)}}@layer base{*,:after,:before,::backdrop{box-sizing:border-box;border:0 solid;margin:0;padding:0}::file-selector-button{box-sizing:border-box;border:0 solid;margin:0;padding:0}html,:host{-webkit-text-size-adjust:100%;tab-size:4;line-height:1.5;font-family:var(--default-font-family,ui-sans-serif,system-ui,sans-serif,\"Apple Color Emoji\",\"Segoe UI Emoji\",\"Segoe UI Symbol\",\"Noto Color Emoji\");font-feature-settings:var(--default-font-feature-settings,normal);font-variation-settings:var(--default-font-variation-settings,normal);-webkit-tap-highlight-color:transparent}hr{height:0;color:inherit;border-top-width:1px}abbr:where([title]){-webkit-text-decoration:underline dotted;text-decoration:underline dotted}h1,h2,h3,h4,h5,h6{font-size:inherit;font-weight:inherit}a{color:inherit;-webkit-text-decoration:inherit;-webkit-text-decoration:inherit;-webkit-text-decoration:inherit;text-decoration:inherit}b,strong{font-weight:bolder}code,kbd,samp,pre{font-family:var(--default-mono-font-family,ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,\"Liberation Mono\",\"Courier New\",monospace);font-feature-settings:var(--default-mono-font-feature-settings,normal);font-variation-settings:var(--default-mono-font-variation-settings,normal);font-size:1em}small{font-size:80%}sub,sup{vertical-align:baseline;font-size:75%;line-height:0;position:relative}sub{bottom:-.25em}sup{top:-.5em}table{text-indent:0;border-color:inherit;border-collapse:collapse}:-moz-focusring{outline:auto}progress{vertical-align:baseline}summary{display:list-item}ol,ul,menu{list-style:none}img,svg,video,canvas,audio,iframe,embed,object{vertical-align:middle;display:block}img,video{max-width:100%;height:auto}button,input,select,optgroup,textarea{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}::file-selector-button{font:inherit;font-feature-settings:inherit;font-variation-settings:inherit;letter-spacing:inherit;color:inherit;opacity:1;background-color:#0000;border-radius:0}:where(select:is([multiple],[size])) optgroup{font-weight:bolder}:where(select:is([multiple],[size])) optgroup option{padding-inline-start:20px}::file-selector-button{margin-inline-end:4px}::placeholder{opacity:1}@supports (not ((-webkit-appearance:-apple-pay-button))) or (contain-intrinsic-size:1px){::placeholder{color:currentColor}@supports (color:color-mix(in lab, red, red)){::placeholder{color:color-mix(in oklab,currentcolor 50%,transparent)}}}textarea{resize:vertical}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-date-and-time-value{min-height:1lh;text-align:inherit}::-webkit-datetime-edit{display:inline-flex}::-webkit-datetime-edit-fields-wrapper{padding:0}::-webkit-datetime-edit{padding-block:0}::-webkit-datetime-edit-year-field{padding-block:0}::-webkit-datetime-edit-month-field{padding-block:0}::-webkit-datetime-edit-day-field{padding-block:0}::-webkit-datetime-edit-hour-field{padding-block:0}::-webkit-datetime-edit-minute-field{padding-block:0}::-webkit-datetime-edit-second-field{padding-block:0}::-webkit-datetime-edit-millisecond-field{padding-block:0}::-webkit-datetime-edit-meridiem-field{padding-block:0}::-webkit-calendar-picker-indicator{line-height:1}:-moz-ui-invalid{box-shadow:none}button,input:where([type=button],[type=reset],[type=submit]){appearance:button}::file-selector-button{appearance:button}::-webkit-inner-spin-button{height:auto}::-webkit-outer-spin-button{height:auto}[hidden]:where(:not([hidden=until-found])){display:none!important}:host{font-family:var(--font-sans);color:var(--color-slate-900);background-color:#0000;display:block}}@layer components;@layer utilities{.pointer-events-auto{pointer-events:auto}.absolute{position:absolute}.fixed{position:fixed}.relative{position:relative}.static{position:static}.sticky{position:sticky}.top-0{top:calc(var(--spacing)*0)}.right-0{right:calc(var(--spacing)*0)}.right-1{right:calc(var(--spacing)*1)}.bottom-1{bottom:calc(var(--spacing)*1)}.left-0{left:calc(var(--spacing)*0)}.z-10{z-index:10}.z-30{z-index:30}.z-40{z-index:40}.z-50{z-index:50}.m-0{margin:calc(var(--spacing)*0)}.mx-4{margin-inline:calc(var(--spacing)*4)}.my-1{margin-block:calc(var(--spacing)*1)}.my-3{margin-block:calc(var(--spacing)*3)}.mt-0\\.5{margin-top:calc(var(--spacing)*.5)}.mt-1{margin-top:calc(var(--spacing)*1)}.mt-1\\.5{margin-top:calc(var(--spacing)*1.5)}.mt-2{margin-top:calc(var(--spacing)*2)}.mb-1{margin-bottom:calc(var(--spacing)*1)}.mb-2{margin-bottom:calc(var(--spacing)*2)}.mb-3{margin-bottom:calc(var(--spacing)*3)}.mb-4{margin-bottom:calc(var(--spacing)*4)}.ml-auto{margin-left:auto}.box-border{box-sizing:border-box}.block{display:block}.flex{display:flex}.grid{display:grid}.inline-block{display:inline-block}.inline-flex{display:inline-flex}.h-1\\.5{height:calc(var(--spacing)*1.5)}.h-3{height:calc(var(--spacing)*3)}.h-3\\.5{height:calc(var(--spacing)*3.5)}.h-5{height:calc(var(--spacing)*5)}.h-6{height:calc(var(--spacing)*6)}.h-7{height:calc(var(--spacing)*7)}.h-8{height:calc(var(--spacing)*8)}.h-10{height:calc(var(--spacing)*10)}.h-12{height:calc(var(--spacing)*12)}.h-40{height:calc(var(--spacing)*40)}.h-full{height:100%}.max-h-64{max-height:calc(var(--spacing)*64)}.max-h-96{max-height:calc(var(--spacing)*96)}.w-1\\.5{width:calc(var(--spacing)*1.5)}.w-3{width:calc(var(--spacing)*3)}.w-3\\.5{width:calc(var(--spacing)*3.5)}.w-5{width:calc(var(--spacing)*5)}.w-6{width:calc(var(--spacing)*6)}.w-7{width:calc(var(--spacing)*7)}.w-8{width:calc(var(--spacing)*8)}.w-10{width:calc(var(--spacing)*10)}.w-12{width:calc(var(--spacing)*12)}.w-40{width:calc(var(--spacing)*40)}.w-auto{width:auto}.w-full{width:100%}.max-w-2xl{max-width:var(--container-2xl)}.max-w-\\[240px\\]{max-width:240px}.max-w-md{max-width:var(--container-md)}.max-w-xs{max-width:var(--container-xs)}.min-w-0{min-width:calc(var(--spacing)*0)}.min-w-\\[160px\\]{min-width:160px}.min-w-\\[200px\\]{min-width:200px}.flex-1{flex:1}.shrink-0{flex-shrink:0}.table-fixed{table-layout:fixed}.border-collapse{border-collapse:collapse}.-translate-y-\\[2px\\]{--tw-translate-y:calc(2px*-1);translate:var(--tw-translate-x)var(--tw-translate-y)}.rotate-180{rotate:180deg}.transform{transform:var(--tw-rotate-x,)var(--tw-rotate-y,)var(--tw-rotate-z,)var(--tw-skew-x,)var(--tw-skew-y,)}.animate-pulse{animation:var(--animate-pulse)}.cursor-grab{cursor:grab}.cursor-grabbing{cursor:grabbing}.cursor-nwse-resize{cursor:nwse-resize}.cursor-pointer{cursor:pointer}.touch-none{touch-action:none}.resize{resize:both}.grid-cols-2{grid-template-columns:repeat(2,minmax(0,1fr))}.flex-col{flex-direction:column}.flex-wrap{flex-wrap:wrap}.items-center{align-items:center}.items-start{align-items:flex-start}.justify-between{justify-content:space-between}.justify-center{justify-content:center}.gap-1{gap:calc(var(--spacing)*1)}.gap-1\\.5{gap:calc(var(--spacing)*1.5)}.gap-2{gap:calc(var(--spacing)*2)}.gap-3{gap:calc(var(--spacing)*3)}.gap-4{gap:calc(var(--spacing)*4)}:where(.space-y-1>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*1)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*1)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-2>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*2)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*2)*calc(1 - var(--tw-space-y-reverse)))}:where(.space-y-3>:not(:last-child)){--tw-space-y-reverse:0;margin-block-start:calc(calc(var(--spacing)*3)*var(--tw-space-y-reverse));margin-block-end:calc(calc(var(--spacing)*3)*calc(1 - var(--tw-space-y-reverse)))}:where(.divide-y>:not(:last-child)){--tw-divide-y-reverse:0;border-bottom-style:var(--tw-border-style);border-top-style:var(--tw-border-style);border-top-width:calc(1px*var(--tw-divide-y-reverse));border-bottom-width:calc(1px*calc(1 - var(--tw-divide-y-reverse)))}:where(.divide-gray-200>:not(:last-child)){border-color:var(--color-gray-200)}.truncate{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.overflow-auto{overflow:auto}.overflow-hidden{overflow:hidden}.overflow-x-hidden{overflow-x:hidden}.overflow-y-auto{overflow-y:auto}.rounded{border-radius:.25rem}.rounded-full{border-radius:3.40282e38px}.rounded-lg{border-radius:var(--radius-lg)}.rounded-md{border-radius:var(--radius-md)}.rounded-sm{border-radius:var(--radius-sm)}.rounded-xl{border-radius:var(--radius-xl)}.border{border-style:var(--tw-border-style);border-width:1px}.border-t{border-top-style:var(--tw-border-style);border-top-width:1px}.border-r{border-right-style:var(--tw-border-style);border-right-width:1px}.border-b{border-bottom-style:var(--tw-border-style);border-bottom-width:1px}.border-l{border-left-style:var(--tw-border-style);border-left-width:1px}.border-dashed{--tw-border-style:dashed;border-style:dashed}.border-amber-200{border-color:var(--color-amber-200)}.border-blue-200{border-color:var(--color-blue-200)}.border-emerald-200{border-color:var(--color-emerald-200)}.border-gray-100{border-color:var(--color-gray-100)}.border-gray-200{border-color:var(--color-gray-200)}.border-purple-200{border-color:var(--color-purple-200)}.border-rose-200{border-color:var(--color-rose-200)}.border-sky-200{border-color:var(--color-sky-200)}.border-slate-200{border-color:var(--color-slate-200)}.border-violet-200{border-color:var(--color-violet-200)}.border-white\\/20{border-color:#fff3}@supports (color:color-mix(in lab, red, red)){.border-white\\/20{border-color:color-mix(in oklab,var(--color-white)20%,transparent)}}.bg-amber-50{background-color:var(--color-amber-50)}.bg-amber-100{background-color:var(--color-amber-100)}.bg-blue-50{background-color:var(--color-blue-50)}.bg-blue-100{background-color:var(--color-blue-100)}.bg-emerald-50{background-color:var(--color-emerald-50)}.bg-emerald-500{background-color:var(--color-emerald-500)}.bg-gray-50{background-color:var(--color-gray-50)}.bg-gray-50\\/50{background-color:#f9fafb80}@supports (color:color-mix(in lab, red, red)){.bg-gray-50\\/50{background-color:color-mix(in oklab,var(--color-gray-50)50%,transparent)}}.bg-gray-100{background-color:var(--color-gray-100)}.bg-gray-400{background-color:var(--color-gray-400)}.bg-gray-900{background-color:var(--color-gray-900)}.bg-green-100{background-color:var(--color-green-100)}.bg-purple-50{background-color:var(--color-purple-50)}.bg-rose-50{background-color:var(--color-rose-50)}.bg-rose-500{background-color:var(--color-rose-500)}.bg-rose-600{background-color:var(--color-rose-600)}.bg-sky-50{background-color:var(--color-sky-50)}.bg-slate-900{background-color:var(--color-slate-900)}.bg-slate-950\\/95{background-color:#020618f2}@supports (color:color-mix(in lab, red, red)){.bg-slate-950\\/95{background-color:color-mix(in oklab,var(--color-slate-950)95%,transparent)}}.bg-violet-50{background-color:var(--color-violet-50)}.bg-white{background-color:var(--color-white)}.bg-white\\/60{background-color:#fff9}@supports (color:color-mix(in lab, red, red)){.bg-white\\/60{background-color:color-mix(in oklab,var(--color-white)60%,transparent)}}.bg-white\\/95{background-color:#fffffff2}@supports (color:color-mix(in lab, red, red)){.bg-white\\/95{background-color:color-mix(in oklab,var(--color-white)95%,transparent)}}.p-2{padding:calc(var(--spacing)*2)}.p-3{padding:calc(var(--spacing)*3)}.p-4{padding:calc(var(--spacing)*4)}.px-1{padding-inline:calc(var(--spacing)*1)}.px-1\\.5{padding-inline:calc(var(--spacing)*1.5)}.px-2{padding-inline:calc(var(--spacing)*2)}.px-3{padding-inline:calc(var(--spacing)*3)}.px-4{padding-inline:calc(var(--spacing)*4)}.py-0\\.5{padding-block:calc(var(--spacing)*.5)}.py-1{padding-block:calc(var(--spacing)*1)}.py-1\\.5{padding-block:calc(var(--spacing)*1.5)}.py-2{padding-block:calc(var(--spacing)*2)}.py-2\\.5{padding-block:calc(var(--spacing)*2.5)}.py-3{padding-block:calc(var(--spacing)*3)}.py-4{padding-block:calc(var(--spacing)*4)}.py-8{padding-block:calc(var(--spacing)*8)}.text-center{text-align:center}.text-left{text-align:left}.align-middle{vertical-align:middle}.align-top{vertical-align:top}.font-mono{font-family:var(--font-mono)}.text-lg{font-size:var(--text-lg);line-height:var(--tw-leading,var(--text-lg--line-height))}.text-sm{font-size:var(--text-sm);line-height:var(--tw-leading,var(--text-sm--line-height))}.text-xs{font-size:var(--text-xs);line-height:var(--tw-leading,var(--text-xs--line-height))}.text-\\[9px\\]{font-size:9px}.text-\\[10px\\]{font-size:10px}.text-\\[11px\\]{font-size:11px}.leading-relaxed{--tw-leading:var(--leading-relaxed);line-height:var(--leading-relaxed)}.leading-snug{--tw-leading:var(--leading-snug);line-height:var(--leading-snug)}.font-medium{--tw-font-weight:var(--font-weight-medium);font-weight:var(--font-weight-medium)}.font-semibold{--tw-font-weight:var(--font-weight-semibold);font-weight:var(--font-weight-semibold)}.break-words{overflow-wrap:break-word}.whitespace-nowrap{white-space:nowrap}.whitespace-pre-wrap{white-space:pre-wrap}.text-amber-600{color:var(--color-amber-600)}.text-amber-700{color:var(--color-amber-700)}.text-amber-800{color:var(--color-amber-800)}.text-amber-900{color:var(--color-amber-900)}.text-blue-600{color:var(--color-blue-600)}.text-blue-700{color:var(--color-blue-700)}.text-blue-800{color:var(--color-blue-800)}.text-emerald-700{color:var(--color-emerald-700)}.text-gray-300{color:var(--color-gray-300)}.text-gray-400{color:var(--color-gray-400)}.text-gray-500{color:var(--color-gray-500)}.text-gray-600{color:var(--color-gray-600)}.text-gray-700{color:var(--color-gray-700)}.text-gray-800{color:var(--color-gray-800)}.text-gray-900{color:var(--color-gray-900)}.text-green-700{color:var(--color-green-700)}.text-green-800{color:var(--color-green-800)}.text-purple-700{color:var(--color-purple-700)}.text-rose-700{color:var(--color-rose-700)}.text-rose-800{color:var(--color-rose-800)}.text-rose-900{color:var(--color-rose-900)}.text-sky-700{color:var(--color-sky-700)}.text-slate-800{color:var(--color-slate-800)}.text-slate-900{color:var(--color-slate-900)}.text-violet-700{color:var(--color-violet-700)}.text-white{color:var(--color-white)}.italic{font-style:italic}.opacity-0{opacity:0}.opacity-80{opacity:.8}.shadow-\\[0_12px_30px_rgba\\(15\\,23\\,42\\,0\\.12\\)\\]{--tw-shadow:0 12px 30px var(--tw-shadow-color,#0f172a1f);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-lg{--tw-shadow:0 10px 15px -3px var(--tw-shadow-color,#0000001a),0 4px 6px -4px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-md{--tw-shadow:0 4px 6px -1px var(--tw-shadow-color,#0000001a),0 2px 4px -2px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.shadow-sm{--tw-shadow:0 1px 3px 0 var(--tw-shadow-color,#0000001a),0 1px 2px -1px var(--tw-shadow-color,#0000001a);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-1{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(1px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.ring-black\\/5{--tw-ring-color:#0000000d}@supports (color:color-mix(in lab, red, red)){.ring-black\\/5{--tw-ring-color:color-mix(in oklab,var(--color-black)5%,transparent)}}.ring-transparent{--tw-ring-color:transparent}.ring-white\\/10{--tw-ring-color:#ffffff1a}@supports (color:color-mix(in lab, red, red)){.ring-white\\/10{--tw-ring-color:color-mix(in oklab,var(--color-white)10%,transparent)}}.backdrop-blur-md{--tw-backdrop-blur:blur(var(--blur-md));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.backdrop-blur-sm{--tw-backdrop-blur:blur(var(--blur-sm));-webkit-backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,);backdrop-filter:var(--tw-backdrop-blur,)var(--tw-backdrop-brightness,)var(--tw-backdrop-contrast,)var(--tw-backdrop-grayscale,)var(--tw-backdrop-hue-rotate,)var(--tw-backdrop-invert,)var(--tw-backdrop-opacity,)var(--tw-backdrop-saturate,)var(--tw-backdrop-sepia,)}.transition{transition-property:color,background-color,border-color,outline-color,text-decoration-color,fill,stroke,--tw-gradient-from,--tw-gradient-via,--tw-gradient-to,opacity,box-shadow,transform,translate,scale,rotate,filter,-webkit-backdrop-filter,backdrop-filter,display,content-visibility,overlay,pointer-events;transition-timing-function:var(--tw-ease,var(--default-transition-timing-function));transition-duration:var(--tw-duration,var(--default-transition-duration))}.outline-none{--tw-outline-style:none;outline-style:none}.select-none{-webkit-user-select:none;user-select:none}@media (hover:hover){.group-hover\\:opacity-100:is(:where(.group):hover *){opacity:1}.hover\\:scale-105:hover{--tw-scale-x:105%;--tw-scale-y:105%;--tw-scale-z:105%;scale:var(--tw-scale-x)var(--tw-scale-y)}.hover\\:border-gray-300:hover{border-color:var(--color-gray-300)}.hover\\:border-white\\/30:hover{border-color:#ffffff4d}@supports (color:color-mix(in lab, red, red)){.hover\\:border-white\\/30:hover{border-color:color-mix(in oklab,var(--color-white)30%,transparent)}}.hover\\:bg-blue-50\\/50:hover{background-color:#eff6ff80}@supports (color:color-mix(in lab, red, red)){.hover\\:bg-blue-50\\/50:hover{background-color:color-mix(in oklab,var(--color-blue-50)50%,transparent)}}.hover\\:bg-gray-50:hover{background-color:var(--color-gray-50)}.hover\\:bg-gray-100:hover{background-color:var(--color-gray-100)}.hover\\:bg-gray-200:hover{background-color:var(--color-gray-200)}.hover\\:bg-gray-800:hover{background-color:var(--color-gray-800)}.hover\\:bg-slate-900\\/95:hover{background-color:#0f172bf2}@supports (color:color-mix(in lab, red, red)){.hover\\:bg-slate-900\\/95:hover{background-color:color-mix(in oklab,var(--color-slate-900)95%,transparent)}}.hover\\:text-gray-600:hover{color:var(--color-gray-600)}.hover\\:text-gray-900:hover{color:var(--color-gray-900)}}.focus\\:border-gray-300:focus{border-color:var(--color-gray-300)}.focus\\:bg-gray-50:focus{background-color:var(--color-gray-50)}.focus\\:ring-2:focus{--tw-ring-shadow:var(--tw-ring-inset,)0 0 0 calc(2px + var(--tw-ring-offset-width))var(--tw-ring-color,currentcolor);box-shadow:var(--tw-inset-shadow),var(--tw-inset-ring-shadow),var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow)}.focus\\:ring-gray-200:focus{--tw-ring-color:var(--color-gray-200)}.focus\\:outline-none:focus{--tw-outline-style:none;outline-style:none}.focus-visible\\:outline:focus-visible{outline-style:var(--tw-outline-style);outline-width:1px}.focus-visible\\:outline-2:focus-visible{outline-style:var(--tw-outline-style);outline-width:2px}.focus-visible\\:outline-offset-2:focus-visible{outline-offset:2px}.focus-visible\\:outline-gray-300:focus-visible{outline-color:var(--color-gray-300)}.focus-visible\\:outline-gray-400:focus-visible{outline-color:var(--color-gray-400)}.focus-visible\\:outline-rose-500:focus-visible{outline-color:var(--color-rose-500)}.disabled\\:cursor-not-allowed:disabled{cursor:not-allowed}.disabled\\:opacity-50:disabled{opacity:.5}@media (min-width:48rem){.md\\:grid-cols-4{grid-template-columns:repeat(4,minmax(0,1fr))}}.\\[\\&\\>svg\\]\\:\\!h-8>svg{height:calc(var(--spacing)*8)!important}.\\[\\&\\>svg\\]\\:\\!w-8>svg{width:calc(var(--spacing)*8)!important}.sr-only{clip:rect(0,0,0,0);white-space:nowrap;border-width:0;width:1px;height:1px;margin:-1px;padding:0;position:absolute;overflow:hidden}}@property --tw-translate-x{syntax:\"*\";inherits:false;initial-value:0}@property --tw-translate-y{syntax:\"*\";inherits:false;initial-value:0}@property --tw-translate-z{syntax:\"*\";inherits:false;initial-value:0}@property --tw-rotate-x{syntax:\"*\";inherits:false}@property --tw-rotate-y{syntax:\"*\";inherits:false}@property --tw-rotate-z{syntax:\"*\";inherits:false}@property --tw-skew-x{syntax:\"*\";inherits:false}@property --tw-skew-y{syntax:\"*\";inherits:false}@property --tw-space-y-reverse{syntax:\"*\";inherits:false;initial-value:0}@property --tw-divide-y-reverse{syntax:\"*\";inherits:false;initial-value:0}@property --tw-border-style{syntax:\"*\";inherits:false;initial-value:solid}@property --tw-leading{syntax:\"*\";inherits:false}@property --tw-font-weight{syntax:\"*\";inherits:false}@property --tw-shadow{syntax:\"*\";inherits:false;initial-value:0 0 #0000}@property --tw-shadow-color{syntax:\"*\";inherits:false}@property --tw-shadow-alpha{syntax:\"<percentage>\";inherits:false;initial-value:100%}@property --tw-inset-shadow{syntax:\"*\";inherits:false;initial-value:0 0 #0000}@property --tw-inset-shadow-color{syntax:\"*\";inherits:false}@property --tw-inset-shadow-alpha{syntax:\"<percentage>\";inherits:false;initial-value:100%}@property --tw-ring-color{syntax:\"*\";inherits:false}@property --tw-ring-shadow{syntax:\"*\";inherits:false;initial-value:0 0 #0000}@property --tw-inset-ring-color{syntax:\"*\";inherits:false}@property --tw-inset-ring-shadow{syntax:\"*\";inherits:false;initial-value:0 0 #0000}@property --tw-ring-inset{syntax:\"*\";inherits:false}@property --tw-ring-offset-width{syntax:\"<length>\";inherits:false;initial-value:0}@property --tw-ring-offset-color{syntax:\"*\";inherits:false;initial-value:#fff}@property --tw-ring-offset-shadow{syntax:\"*\";inherits:false;initial-value:0 0 #0000}@property --tw-backdrop-blur{syntax:\"*\";inherits:false}@property --tw-backdrop-brightness{syntax:\"*\";inherits:false}@property --tw-backdrop-contrast{syntax:\"*\";inherits:false}@property --tw-backdrop-grayscale{syntax:\"*\";inherits:false}@property --tw-backdrop-hue-rotate{syntax:\"*\";inherits:false}@property --tw-backdrop-invert{syntax:\"*\";inherits:false}@property --tw-backdrop-opacity{syntax:\"*\";inherits:false}@property --tw-backdrop-saturate{syntax:\"*\";inherits:false}@property --tw-backdrop-sepia{syntax:\"*\";inherits:false}@property --tw-scale-x{syntax:\"*\";inherits:false;initial-value:1}@property --tw-scale-y{syntax:\"*\";inherits:false;initial-value:1}@property --tw-scale-z{syntax:\"*\";inherits:false;initial-value:1}@property --tw-outline-style{syntax:\"*\";inherits:false;initial-value:solid}@keyframes pulse{50%{opacity:.5}}","import type { Anchor, ContextState, Position, Size } from './types';\n\nexport function updateSizeFromElement(\n  state: ContextState,\n  element: HTMLElement,\n  fallback: Size,\n): void {\n  const rect = element.getBoundingClientRect();\n  state.size = {\n    width: rect.width || fallback.width,\n    height: rect.height || fallback.height,\n  };\n}\n\nexport function clampSize(\n  size: Size,\n  viewport: Size,\n  edgeMargin: number,\n  minWidth: number,\n  minHeight: number,\n): Size {\n  const maxWidth = Math.max(minWidth, viewport.width - edgeMargin * 2);\n  const maxHeight = Math.max(minHeight, viewport.height - edgeMargin * 2);\n\n  return {\n    width: clamp(size.width, minWidth, maxWidth),\n    height: clamp(size.height, minHeight, maxHeight),\n  };\n}\n\nexport function constrainToViewport(\n  state: ContextState,\n  position: Position,\n  viewport: Size,\n  edgeMargin: number,\n): Position {\n  const maxX = Math.max(edgeMargin, viewport.width - state.size.width - edgeMargin);\n  const maxY = Math.max(edgeMargin, viewport.height - state.size.height - edgeMargin);\n\n  return {\n    x: clamp(position.x, edgeMargin, maxX),\n    y: clamp(position.y, edgeMargin, maxY),\n  };\n}\n\nexport function keepPositionWithinViewport(\n  state: ContextState,\n  viewport: Size,\n  edgeMargin: number,\n): void {\n  state.position = constrainToViewport(state, state.position, viewport, edgeMargin);\n}\n\nexport function centerContext(\n  state: ContextState,\n  viewport: Size,\n  edgeMargin: number,\n): Position {\n  const centered: Position = {\n    x: Math.round((viewport.width - state.size.width) / 2),\n    y: Math.round((viewport.height - state.size.height) / 2),\n  };\n\n  state.position = constrainToViewport(state, centered, viewport, edgeMargin);\n  updateAnchorFromPosition(state, viewport, edgeMargin);\n  return state.position;\n}\n\nexport function updateAnchorFromPosition(\n  state: ContextState,\n  viewport: Size,\n  edgeMargin: number,\n): void {\n  const centerX = state.position.x + state.size.width / 2;\n  const centerY = state.position.y + state.size.height / 2;\n\n  const horizontal: Anchor['horizontal'] = centerX < viewport.width / 2 ? 'left' : 'right';\n  const vertical: Anchor['vertical'] = centerY < viewport.height / 2 ? 'top' : 'bottom';\n\n  state.anchor = { horizontal, vertical };\n\n  const maxHorizontalOffset = Math.max(edgeMargin, viewport.width - state.size.width - edgeMargin);\n  const maxVerticalOffset = Math.max(edgeMargin, viewport.height - state.size.height - edgeMargin);\n\n  state.anchorOffset = {\n    x:\n      horizontal === 'left'\n        ? clamp(state.position.x, edgeMargin, maxHorizontalOffset)\n        : clamp(viewport.width - state.position.x - state.size.width, edgeMargin, maxHorizontalOffset),\n    y:\n      vertical === 'top'\n        ? clamp(state.position.y, edgeMargin, maxVerticalOffset)\n        : clamp(viewport.height - state.position.y - state.size.height, edgeMargin, maxVerticalOffset),\n  };\n}\n\nexport function applyAnchorPosition(\n  state: ContextState,\n  viewport: Size,\n  edgeMargin: number,\n): Position {\n  const maxHorizontalOffset = Math.max(edgeMargin, viewport.width - state.size.width - edgeMargin);\n  const maxVerticalOffset = Math.max(edgeMargin, viewport.height - state.size.height - edgeMargin);\n\n  const horizontalOffset = clamp(state.anchorOffset.x, edgeMargin, maxHorizontalOffset);\n  const verticalOffset = clamp(state.anchorOffset.y, edgeMargin, maxVerticalOffset);\n\n  const x =\n    state.anchor.horizontal === 'left'\n      ? horizontalOffset\n      : viewport.width - state.size.width - horizontalOffset;\n\n  const y =\n    state.anchor.vertical === 'top'\n      ? verticalOffset\n      : viewport.height - state.size.height - verticalOffset;\n\n  state.anchorOffset = { x: horizontalOffset, y: verticalOffset };\n  state.position = constrainToViewport(state, { x, y }, viewport, edgeMargin);\n  return state.position;\n}\n\nfunction clamp(value: number, min: number, max: number): number {\n  return Math.min(Math.max(min, value), max);\n}\n","import type { Anchor, DockMode, Position, Size } from './types';\n\nexport type PersistedContextState = {\n  anchor?: Anchor;\n  anchorOffset?: Position;\n  size?: Size;\n  hasCustomPosition?: boolean;\n};\n\nexport type PersistedState = {\n  button?: Omit<PersistedContextState, 'size'>;\n  window?: PersistedContextState;\n  isOpen?: boolean;\n  dockMode?: DockMode;\n  selectedMenu?: string;\n  selectedContext?: string;\n};\n\nexport function loadInspectorState(storageKey: string): PersistedState | null {\n  if (typeof window === \"undefined\") {\n    return null;\n  }\n\n  const raw = window.localStorage.getItem(storageKey);\n  if (raw) {\n    try {\n      const parsed = JSON.parse(raw);\n      if (parsed && typeof parsed === \"object\") {\n        return parsed as PersistedState;\n      }\n    } catch {\n      // Fall through to cookie migration path\n    }\n  }\n\n  // Backwards compatibility: try to read the legacy cookie and migrate it\n  if (typeof document !== \"undefined\") {\n    const prefix = `${storageKey}=`;\n    const entry = document.cookie.split(\"; \").find((cookie) => cookie.startsWith(prefix));\n    if (entry) {\n      const legacyRaw = entry.substring(prefix.length);\n      try {\n        const parsed = JSON.parse(decodeURIComponent(legacyRaw));\n        if (parsed && typeof parsed === \"object\") {\n          return parsed as PersistedState;\n        }\n      } catch {\n        return null;\n      }\n    }\n  }\n\n  return null;\n}\n\nexport function saveInspectorState(storageKey: string, state: PersistedState): void {\n  if (typeof window === \"undefined\") {\n    return;\n  }\n\n  try {\n    window.localStorage.setItem(storageKey, JSON.stringify(state));\n  } catch (error) {\n    console.warn(\"Failed to persist inspector state\", error);\n  }\n}\n\nexport function isValidAnchor(value: unknown): value is Anchor {\n  if (!value || typeof value !== 'object') {\n    return false;\n  }\n\n  const candidate = value as Anchor;\n  return (\n    (candidate.horizontal === 'left' || candidate.horizontal === 'right') &&\n    (candidate.vertical === 'top' || candidate.vertical === 'bottom')\n  );\n}\n\nexport function isValidPosition(value: unknown): value is Position {\n  if (!value || typeof value !== 'object') {\n    return false;\n  }\n\n  const candidate = value as Position;\n  return isFiniteNumber(candidate.x) && isFiniteNumber(candidate.y);\n}\n\nexport function isValidSize(value: unknown): value is Size {\n  if (!value || typeof value !== 'object') {\n    return false;\n  }\n\n  const candidate = value as Size;\n  return isFiniteNumber(candidate.width) && isFiniteNumber(candidate.height);\n}\n\nexport function isFiniteNumber(value: unknown): value is number {\n  return typeof value === 'number' && Number.isFinite(value);\n}\n\nexport function isValidDockMode(value: unknown): value is DockMode {\n  return value === 'floating' || value === 'docked-left';\n}\n"],"names":[],"mappings":"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"}}]
}