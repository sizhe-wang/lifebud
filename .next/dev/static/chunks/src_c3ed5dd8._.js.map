{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/src/lib/resource.ts"],"sourcesContent":["// --- 角色配置 (Micah 风格) ---\nexport const CHARACTERS = {\n  hero: {\n    name: \"我\",\n    avatar: \"/woman.png\",\n    style: \"left-[10%] bottom-[-11.5%] z-20\" \n  },\n  hero_1: {\n    name: \"我\",\n    avatar: \"/woman.png\",\n    style: \"left-[10%] bottom-[-11.5%] z-20 max-w-[280px]\" \n  },\n  hero_2: {\n    name: \"我\",\n    avatar: \"/woman_2.png\",\n    style: \"left-[15%] bottom-[-11.5%] z-20 max-w-[200px]\" \n  },\n  hero_3: {\n    name: \"我\",\n    avatar: \"/two_people.png\",\n    style: \"left-[-10%] bottom-[-14.5%] z-20 max-w-[380px] -translate-x-25\" \n  },\n  hero_4: {\n    name: \"我\",\n    avatar: \"/woman_3.png\",\n    style: \"left-[10%] bottom-[-14%] z-20 max-w-[330px]\" \n  },\n  husband: {\n    name: \"丈夫\",\n    avatar: \"/man.png\",\n    style: \"right-[10%] bottom-[-15%] z-10\" \n  },\n  doctor: {\n    name: \"医生\",\n    avatar: \"/npc.png\",\n    style: \"right-[10%] bottom-[-15%] z-10\" \n  },\n  nurse: {\n    name: \"护士\",\n    avatar: \"/npc.png\",\n    style: \"right-[10%] bottom-[-15%] z-10\" \n  },\n  guide: {\n    name: \"贴心姐姐\",\n    avatar: \"/tips.png\",\n    style: \"right-[-2%] bottom-[-5%] z-30\" \n  }\n};\n\n/**\n * 初始状态\n */\nexport const INITIAL_ATTRIBUTES = {\n  wealth: 80,\n  health: 80,\n  mental: 80,\n  marriage: 80,\n  childGrowth: 50,\n};\n\n/**\n *  章节\n */\nexport const STAGES = [\n  {\n    id: 1,\n    title: \"第一章：备孕\",\n    bgImage: \"/duihuabeijing.png\" \n  },\n  {\n    id: 2,\n    title: \"第二章：孕期\",\n    bgImage: \"/duihuabeijing.png\" \n  },\n  {\n    id: 3,\n    title: \"第三章：分娩\",\n    bgImage: \"/duihuabeijing.png\" \n  },\n  {\n    id: 4,\n    title: \"第四章：育儿\",\n    bgImage: \"/duihuabeijing.png\" \n  }\n];\n\n/**\n * 默认剧情\n */\nexport const FALLBACK_DB = {\n  1: [ \n    {\n      id: 'intro_1',\n      bgImage: \"/intro_1.png\",\n      dialogue: [\n        { speaker: 'narrator', text: '这是一个关于选择的故事。' },\n        { speaker: 'narrator', text: '每一个看似微小的决定，都可能改变你和孩子的一生。' },\n        // { speaker: 'hero', text: '呼……今天要和老公商量备孕的事情了。', mood: 'nervous' },\n      ],\n      autoNext: true\n    },\n    {\n      id: 'checkup',\n      title: '第一次孕前检查',\n      bgImage: \"/duihuabeijing.png\", \n      dialogue: [\n        { speaker: 'hero', text: '虽然说是“两个人的事”，但总觉得压力都在我这边……' },\n        { speaker: 'husband', text: '老婆，别紧张，不管是公立还是私立，我都陪你去。' },\n        { speaker: 'hero', text: '(看着手中的挂号单，心里有些忐忑……)' },\n      ],\n      type: 'choice',\n      knowledge: {\n        id: 'k_checkup',\n        title: \"优生检查科普\",\n        speaker: \"guide\",\n        text: \"别紧张！孕前优生检查包括TORCH五项、生殖系统检查等。这能有效规避流产和胎儿畸形风险，非常重要哦！\",\n        bilibiliId: \"BV1UB4y137iX\"\n      },\n      options: [\n        { \n          text: '去公立三甲，相信权威', \n          cost: 500, \n          changes: { health: 5, mental: -3 },\n          months: 1, \n          outcome: \"排队三小时，看病五分钟。虽然环境嘈杂，但医生的专业让你安心了不少。\"\n        },\n        { \n          text: '去私立医院，图个舒心', \n          cost: 2000, \n          changes: { health: 8, mental: 5 },\n          months: 1, \n          outcome: \"私密的环境和医生耐心的解答平复了你的不安，虽然钱包瘪了点。\"\n        }\n      ]\n    },\n    {\n      id: 'folic',\n      title: '医嘱：关于叶酸',\n      bgImage: \"/duihuabeijing.png\",\n      dialogue: [\n        { speaker: 'doctor', text: '这两项指标有点波动，不过问题不大。' },\n        { speaker: 'doctor', text: '这盒叶酸拿好。回去记得每天都要吃，一直吃到怀孕后三个月。' },\n        { speaker: 'hero', text: '好的医生。必须要天天吃吗？' },\n        { speaker: 'doctor', text: '当然，这可是为了孩子神经发育好，不能马虎。' },\n      ],\n      type: 'choice',\n      knowledge: {\n        id: 'k_folic',\n        title: \"叶酸的作用\",\n        speaker: \"guide\",\n        text: \"医生说得对！叶酸（维生素B9）缺乏是造成胎儿神经管畸形的主要原因。不仅你要吃，准爸爸最好也一起补充哦。\",\n        bilibiliId: \"BV1Zx411G7BT\"\n      },\n      options: [\n        { \n          text: '严格遵医嘱每日服用', \n          changes: { health: 10, childGrowth: 5 },\n          months: 2, \n          outcome: \"你定好了每日闹钟。虽然偶尔会感到反胃，但为了宝宝，这点苦不算什么。\"\n        },\n        { \n          text: '太忙了，随缘吃吧', \n          changes: { health: 3, childGrowth: -2 },\n          months: 2,\n          outcome: \"工作太忙，生活太乱。你总是安慰自己“少吃一次没关系”，心里却隐隐不安。\"\n        }\n      ]\n    }\n  ],\n  2: [\n    {\n      id: 'intro_2',\n      bgImage: \"/intro_2.png\",\n      dialogue: [\n        { speaker: 'narrator', text: '恭喜你成功怀孕！' },\n        { speaker: 'narrator', text: '从这一刻起，你的身体与人生都将进入全新的篇章。' },\n        { speaker: 'narrator', text: '激素波动带来的情绪起伏、职场与孕期的冲突、家人的过度关心……' },\n        { speaker: 'narrator', text: '你将在身体变化与外界压力中，学习成为一名母亲。' },\n      ],\n      autoNext: true\n    },\n    {\n      id: 'vomit',\n      title: '晨吐',\n      bgImage: \"/duihuabeijing.png\", \n      dialogue: [\n        { speaker: 'hero', text: '呕……咳咳……' },\n        { speaker: 'husband', text: '老婆你没事吧？这也吐得太厉害了。' },\n        { speaker: 'hero', text: '这几天早上醒来，感觉整个世界都在旋转，胃里翻江倒海。' },\n        { speaker: 'hero', text: '这就是传说中的“晨吐”吗？简直是全天候的晕车。' },\n      ],\n      type: 'choice',\n      knowledge: {\n        id: 'k_hcg',\n        title: \"早孕反应\",\n        speaker: \"guide\",\n        text: \"心疼你... 这是HCG激素在作祟，通常8-10周达到高峰。如果吐得太厉害，导致脱水或体重骤降，一定要去医院看医生！\",\n        bilibiliId: \"BV1pt4y1h7xh\"\n      },\n      options: [\n        { \n          text: '受不了了，去看医生', \n          cost: 800, \n          changes: { health: 7, mental: 5 },\n          months: 3, \n          outcome: \"医生给你开了一些维生素B6和止吐药。在药物的帮助下，你终于吃下了一顿完整的饭。\"\n        },\n        { \n          text: '为了孩子，我忍！', \n          changes: { health: -10, mental: -8, childGrowth: -3 },\n          months: 3,\n          outcome: \"你趴在马桶边吐到胆汁出来，眼泪止不住地流。这种纯粹靠意志力的忍耐，真的好辛苦。\"\n        }\n      ]\n    }\n  ],\n  3: [\n    {\n      id: 'intro_3',\n      bgImage: \"/intro_3.png\",\n      dialogue: [\n        { speaker: 'narrator', text: '预产期越来越近，产房的灯光已在眼前。' },\n        { speaker: 'narrator', text: '这是一场与时间赛跑的考验，你将直面疼痛、风险与未知。' },\n        { speaker: 'narrator', text: '选择生产方式、应对突发状况，每一次呼吸都关乎你与宝宝的安危。' },\n      ],\n      autoNext: true\n    },\n    {\n      id: 'delivery',\n      title: '临产',\n      bgImage: \"/duihuabeijing.png\",\n      dialogue: [\n        { speaker: 'nurse', text: '宫口开了三指了，家属在外面等着。' },\n        { speaker: 'nurse', text: '你现在情况有点特殊，顺产可能要遭罪，剖腹产恢复慢，你们商量下怎么选？' },\n        { speaker: 'hero', text: '（疼得满头大汗）我……我不知道……' },\n      ],\n      type: 'choice',\n      knowledge: {\n        id: 'k_delivery',\n        title: \"分娩方式\",\n        speaker: \"guide\",\n        text: \"这是个艰难的决定。顺产对宝宝肺部好，产后恢复快；剖腹产虽然避免了产痛，但毕竟是个大手术。听从医生建议最重要。\",\n        bilibiliId: \"BV1tp4y1u7tS\"\n      },\n      options: [\n        { \n          text: '坚持顺产', \n          cost: 5000, \n          changes: { health: -15, mental: 12, childGrowth: 10 },\n          months: 0, \n          outcome: \"经历了十级阵痛，你感觉身体被撕裂。但听到孩子第一声啼哭时，一切疼痛似乎都消失了。\"\n        },\n        { \n          text: '转剖腹产', \n          cost: 12000, \n          changes: { health: -20, mental: 8, childGrowth: 8 },\n          months: 1, \n          outcome: \"麻醉过后，伤口的疼痛让你连咳嗽都不敢。但看着身边熟睡的宝宝，你觉得这条疤痕是勇气的勋章。\"\n        }\n      ]\n    }\n  ],\n  4: [\n    {\n      id: 'intro_4',\n      bgImage: \"/intro_4.png\",\n      dialogue: [\n        { speaker: 'narrator', text: '宝宝终于来到了你的身边！' },\n        { speaker: 'narrator', text: '从第一次喂奶到第一声啼哭' },\n        { speaker: 'narrator', text: '从产假结束的复工抉择到育儿理念的冲突' },\n        { speaker: 'narrator', text: '你将在无数个琐碎又温暖的瞬间里，体会为人父母的酸甜苦辣。' },\n      ],\n      autoNext: true\n    },\n    {\n      id: 'backtowork',\n      title: '返岗',\n      bgImage: \"/duihuabeijing.png\", \n      dialogue: [\n        { speaker: 'hero', text: '（看着桌上的产假结束通知单，又看了看摇篮里的宝宝）' },\n        { speaker: 'hero', text: '该回去上班了吗？可是宝宝还这么小……' },\n        { speaker: 'husband', text: '老婆，不管你做什么决定，我都支持你。只是房贷压力确实有点大。' },\n      ],\n      type: 'choice',\n      story: {\n        id: 's_backtowork',\n        title: \"背奶妈妈\",\n        speaker: \"guide\",\n        text: \"我见过太多'背奶妈妈'了，她们躲在杂物间挤奶，背着冰包挤地铁。职场不相信眼泪，但母亲的爱是滚烫的。\",\n        bilibiliId: \"BV1dx4y1X7WV\"\n      },\n      options: [\n        { \n          text: '立即复工，请保姆', \n          cost: 6000, \n          changes: { mental: 8 }, \n          months: 6,\n          outcome: \"你成为了公司里的'背奶族'。虽然身体疲惫，但重回职场让你找回了一部分自我。\"\n        },\n        { \n          text: '辞职全职带娃', \n          cost: 1500, \n          changes: { health: 5, childGrowth: 7 },\n          months: 12,\n          outcome: \"你的世界缩小到了几十平米的家。虽然失去了收入，但你没有错过孩子成长的每一个瞬间。\"\n        }\n      ]\n    }\n  ]\n};"],"names":[],"mappings":"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"}},
    {"offset": {"line": 440, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/src/hooks/useGameLogic.tsx"],"sourcesContent":["import React, { useState, useMemo } from 'react';\nimport { Star, Shield, Smile } from 'lucide-react';\nimport { CHARACTERS, FALLBACK_DB, INITIAL_ATTRIBUTES, STAGES } from '@/lib/resource';\n\nexport type GameState = 'start' | 'setup' | 'playing' | 'end';\n\nexport interface Background {\n  age: number;\n  city: string;\n  partner: string;\n  workIntensity: number;\n}\n\nexport interface Attributes {\n  health: number;\n  mental: number;\n  marriage: number;\n  childGrowth: number;\n  [key: string]: number;\n}\n\nexport interface Option {\n  text: string;\n  cost?: number;\n  months?: number;\n  outcome?: string;\n  changes?: Partial<Attributes>;\n}\n\nexport interface DialogueLine {\n  speaker: string;\n  text: string;\n}\n\nexport interface Event {\n  id: string;\n  dialogue?: DialogueLine[];\n  options?: Option[];\n  autoNext?: boolean;\n  bgImage?: string;\n  knowledge?: any;\n  story?: any;\n}\n\nexport const useGameLogic = () => {\n  const [gameState, setGameState] = useState<GameState>('start'); \n  const [stageIndex, setStageIndex] = useState(0);\n  const [eventQueue, setEventQueue] = useState<Event[]>([]);\n  const [currentEventIndex, setCurrentEventIndex] = useState(0);\n  const [dialogueIndex, setDialogueIndex] = useState(0); \n  \n  const [attributes, setAttributes] = useState<Attributes>(INITIAL_ATTRIBUTES);\n  const [savings, setSavings] = useState(200000);\n  const [totalMonths, setTotalMonths] = useState(0);\n  \n  const [textCompleted, setTextCompleted] = useState(false);\n  const [mediaData, setMediaData] = useState<any>(null);\n  const [feedback, setFeedback] = useState<string | null>(null); \n  const [feedbackChanges, setFeedbackChanges] = useState<any>(null); \n  \n  const [background, setBackground] = useState<Background>({ age: 28, city: 'tier2', partner: 'supportive', workIntensity: 2 });\n\n  const currentAgeYear = background.age + Math.floor(totalMonths / 12);\n  const currentStage = STAGES[stageIndex];\n  const currentEvent = eventQueue[currentEventIndex];\n  \n  const currentDialogueLine = currentEvent?.dialogue ? currentEvent.dialogue[dialogueIndex] : null;\n  const isDialogueFinished = currentEvent?.dialogue ? dialogueIndex >= currentEvent.dialogue.length - 1 : false;\n  const activeSpeaker = currentDialogueLine?.speaker || null;\n\n  // 稳定显示人物\n  const activeNPC = useMemo(() => {\n    if (activeSpeaker && !activeSpeaker.startsWith('hero') && activeSpeaker !== 'narrator' && CHARACTERS[activeSpeaker as keyof typeof CHARACTERS]) {\n        return activeSpeaker;\n    }\n    if (currentEvent?.dialogue) {\n        const firstNpc = currentEvent.dialogue.find(line => !line.speaker.startsWith('hero') && line.speaker !== 'narrator' && CHARACTERS[line.speaker as keyof typeof CHARACTERS]);\n        return firstNpc ? firstNpc.speaker : null;\n    }\n    return null;\n  }, [activeSpeaker, currentEvent]);\n\n  const loadStage = (idx: number) => {\n    const stageId = STAGES[idx].id;\n    // 真实项目中这里是 fetch('/api/events?stage=' + stageId)\n    const events = FALLBACK_DB[stageId as keyof typeof FALLBACK_DB] || [];\n    setEventQueue(events as Event[]);\n    setCurrentEventIndex(0);\n    resetEventState();\n  };\n\n  const resetEventState = () => {\n    setDialogueIndex(0);\n    setTextCompleted(false);\n    setFeedback(null);\n    setFeedbackChanges(null);\n  };\n\n  const startGame = () => {\n    setAttributes(INITIAL_ATTRIBUTES);\n    setSavings(background.city === 'tier1' ? 300000 : 200000);\n    setStageIndex(0);\n    setTotalMonths(0);\n    setGameState('playing');\n    loadStage(0);\n  };\n\n  const handleOption = (opt: Option) => {\n    const newStats = { ...attributes };\n    if (opt.changes) {\n      Object.keys(opt.changes).forEach(k => {\n        if (newStats[k] !== undefined) newStats[k] = Math.min(100, Math.max(0, newStats[k] + (opt.changes![k] || 0)));\n      });\n    }\n    setAttributes(newStats);\n    setSavings(prev => prev - (opt.cost || 0));\n    setTotalMonths(prev => prev - -(opt.months || 0)); // Using subtraction of negative to ensure addition if it's string (safeguard), though type is number\n    setFeedback(opt.outcome || null);\n    setFeedbackChanges({ ...opt.changes, cost: opt.cost }); \n  };\n\n  const nextEvent = () => {\n    if (currentEventIndex < eventQueue.length - 1) {\n      setCurrentEventIndex(prev => prev + 1);\n      resetEventState();\n    } else {\n      if (stageIndex < STAGES.length - 1) {\n        setStageIndex(prev => prev + 1);\n        loadStage(stageIndex + 1);\n      } else {\n        setGameState('end');\n      }\n    }\n  };\n\n  const handleScreenClick = () => {\n    if (mediaData) return; \n    \n    if (feedback) {\n      return;\n    }\n\n    if (!textCompleted) {\n      setTextCompleted(true);\n      return;\n    }\n\n    if (currentEvent?.dialogue && dialogueIndex < currentEvent.dialogue.length - 1) {\n      setDialogueIndex(prev => prev + 1);\n      setTextCompleted(false);\n      return;\n    }\n\n    if (currentEvent?.autoNext) {\n      nextEvent();\n      return;\n    }\n  };\n\n  const endGameReport = useMemo(() => {\n    if (gameState !== 'end') return null;\n    const { health, mental, childGrowth } = attributes;\n    if (health >= 70 && mental >= 70 && childGrowth >= 80) {\n      return { title: \"完美人生\", icon: <Star size={40} />, comment: \"你用智慧与爱，平衡了自我与家庭，活出了令人羡慕的模样。\", suggestion: \"请继续保持这份从容，将幸福传递给更多人。\" };\n    } else if (childGrowth >= 80) {\n      return { title: \"奉献的母亲\", icon: <Shield size={40} />, comment: \"你将最好的一切都给了孩子，孩子茁壮成长，但你也为此付出了巨大的代价。\", suggestion: \"记得多爱自己一点，你首先是你自己，然后才是母亲。\" };\n    } else {\n      return { title: \"平凡之路\", icon: <Smile size={40} />, comment: \"生活没有十全十美，虽然有遗憾，但这就是真实的人生。\", suggestion: \"接纳不完美，生活依然充满阳光。\" };\n    }\n  }, [gameState, attributes]);\n\n  return {\n    gameState,\n    setGameState,\n    background,\n    setBackground,\n    startGame,\n    endGameReport,\n    currentAgeYear,\n    attributes,\n    savings,\n    currentStage,\n    currentEvent,\n    currentEventIndex,\n    eventQueue,\n    activeSpeaker,\n    activeNPC,\n    mediaData,\n    setMediaData,\n    handleScreenClick,\n    knowledgeVisible: (!!currentEvent?.knowledge || !!currentEvent?.story) && !feedback,\n    showOptions: !feedback && !!currentEvent?.options && isDialogueFinished && textCompleted,\n    currentDialogueLine,\n    textCompleted,\n    setTextCompleted,\n    feedback,\n    feedbackChanges,\n    handleOption,\n    nextEvent,\n    dialogueIndex\n  };\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 659, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/src/components/game/StartScreen.tsx"],"sourcesContent":["import React from 'react';\nimport { Play } from 'lucide-react';\n\ninterface StartScreenProps {\n  onStart: () => void;\n}\n\nexport const StartScreen: React.FC<StartScreenProps> = ({ onStart }) => (\n  <div className=\"h-screen w-full relative overflow-hidden flex flex-col items-center justify-center bg-yellow-50 font-sans\">\n     <div className=\"absolute inset-0 z-0 opacity-20\" style={{backgroundImage: 'radial-gradient(#000 1px, transparent 1px)', backgroundSize: '20px 20px'}}></div>\n     \n     <div className=\"relative z-10 text-center px-6 max-w-3xl\">\n        <div className=\"inline-block px-4 py-1 bg-black text-white font-black text-xs uppercase tracking-widest -rotate-2 mb-8\">\n          Interactive Visual Novel\n        </div>\n        <h1 className=\"text-7xl md:text-9xl font-black mb-6 tracking-tighter text-black drop-shadow-[5px_5px_0px_rgba(255,255,255,1)]\" style={{WebkitTextStroke: '2px white'}}>\n          生育<span className=\"text-rose-500\">模拟器</span>\n        </h1>\n        \n        <div className=\"bg-white border-4 border-black p-6 rounded-[2rem] shadow-[10px_10px_0px_0px_#000] mb-12 transform rotate-1\">\n          <p className=\"text-xl md:text-2xl text-slate-800 font-bold leading-relaxed font-comic\">\n             \"嘿，如果你能提前预演一遍<br/>\n             你会做出什么不同的<span className=\"bg-yellow-300 px-1\">选择</span>吗？\"\n          </p>\n        </div>\n\n        <button \n          onClick={onStart}\n          className=\"px-12 py-5 bg-black text-white rounded-2xl font-black text-2xl hover:scale-105 hover:bg-slate-800 transition-all shadow-[8px_8px_0px_0px_#f43f5e] flex items-center gap-3 mx-auto active:translate-x-[4px] active:translate-y-[4px] active:shadow-none\"\n        >\n          <Play fill=\"currentColor\" size={24} /> 开启剧本\n        </button>\n     </div>\n  </div>\n);\n"],"names":[],"mappings":";;;;;AACA;;;AAMO,MAAM,cAA0C,CAAC,EAAE,OAAO,EAAE,iBACjE,6LAAC;QAAI,WAAU;;0BACZ,6LAAC;gBAAI,WAAU;gBAAkC,OAAO;oBAAC,iBAAiB;oBAA8C,gBAAgB;gBAAW;;;;;;0BAEnJ,6LAAC;gBAAI,WAAU;;kCACZ,6LAAC;wBAAI,WAAU;kCAAyG;;;;;;kCAGxH,6LAAC;wBAAG,WAAU;wBAAiH,OAAO;4BAAC,kBAAkB;wBAAW;;4BAAG;0CACnK,6LAAC;gCAAK,WAAU;0CAAgB;;;;;;;;;;;;kCAGpC,6LAAC;wBAAI,WAAU;kCACb,cAAA,6LAAC;4BAAE,WAAU;;gCAA0E;8CACvE,6LAAC;;;;;gCAAI;8CACT,6LAAC;oCAAK,WAAU;8CAAqB;;;;;;gCAAS;;;;;;;;;;;;kCAI5D,6LAAC;wBACC,SAAS;wBACT,WAAU;;0CAEV,6LAAC,6MAAI;gCAAC,MAAK;gCAAe,MAAM;;;;;;4BAAM;;;;;;;;;;;;;;;;;;;KAvBnC"}},
    {"offset": {"line": 786, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/src/components/game/SetupWizard.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { MapPin, Home, Cloud, Heart, Briefcase, ArrowLeft, ArrowRight, CheckCircle } from 'lucide-react';\n\ninterface Background {\n  age: number;\n  city: string;\n  partner: string;\n  workIntensity: number;\n}\n\ninterface SetupWizardProps {\n  background: Background;\n  setBackground: (bg: Background) => void;\n  onComplete: () => void;\n}\n\nexport const SetupWizard: React.FC<SetupWizardProps> = ({ background, setBackground, onComplete }) => {\n  const [step, setStep] = useState(0);\n\n  const steps = [\n    {\n      id: 'age',\n      label: '请填写您的年龄',\n      valueLabel: `${background.age} 岁`,\n      render: (\n        <div className=\"w-full flex flex-col items-center\">\n           <input \n             type=\"range\" min=\"20\" max=\"45\" \n             value={background.age}\n             onChange={(e) => setBackground({...background, age: parseInt(e.target.value)})}\n             className=\"w-full max-w-sm h-3 bg-slate-200 rounded-lg appearance-none cursor-pointer accent-black mb-8\"\n           />\n           <div className=\"flex justify-between w-full max-w-sm text-xs text-slate-400 font-mono\">\n              <span>20</span>\n              <span>30</span>\n              <span>45</span>\n           </div>\n        </div>\n      )\n    },\n    {\n      id: 'city',\n      label: '请选择生活城市',\n      valueLabel: background.city === 'tier1' ? '一线城市' : background.city === 'tier2' ? '二线城市' : '小县城',\n      render: (\n        <div className=\"flex flex-col gap-4 w-full max-w-sm\">\n           {[{val: 'tier1', title: '一线城市', icon: <MapPin size={16}/>}, {val: 'tier2', title: '二线城市', icon: <Home size={16}/>}, {val: 'tier4', title: '小县城', icon: <Cloud size={16}/>}].map(opt => (\n             <button \n               key={opt.val} \n               onClick={() => setBackground({...background, city: opt.val})}\n               className={`p-4 rounded-xl border-2 transition-all flex items-center justify-between group ${background.city === opt.val ? 'border-black bg-slate-50' : 'border-slate-100 hover:border-slate-300'}`}\n             >\n                <div className=\"flex items-center gap-3 font-bold text-slate-900\">\n                   <div className={`p-2 rounded-full ${background.city === opt.val ? 'bg-black text-white' : 'bg-slate-100 text-slate-500'}`}>{opt.icon}</div>\n                   {opt.title}\n                </div>\n                {background.city === opt.val && <CheckCircle size={20} className=\"text-black\"/>}\n             </button>\n           ))}\n        </div>\n      )\n    },\n    {\n      id: 'partner',\n      label: '请选择伴侣类型',\n      valueLabel: background.partner === 'supportive' ? '神仙队友' : background.partner === 'rational' ? '理智直男' : '甩手掌柜',\n      render: (\n        <div className=\"flex flex-col gap-4 w-full max-w-sm\">\n           {[{val: 'supportive', title: '神仙队友'}, {val: 'rational', title: '理智直男'}, {val: 'avoidant', title: '甩手掌柜'}].map(opt => (\n             <button \n               key={opt.val} \n               onClick={() => setBackground({...background, partner: opt.val})}\n               className={`p-4 rounded-xl border-2 transition-all flex items-center justify-between group ${background.partner === opt.val ? 'border-rose-400 bg-rose-50' : 'border-slate-100 hover:border-rose-200'}`}\n             >\n                <div className=\"flex items-center gap-3 font-bold text-slate-900\">\n                   <Heart size={20} className={`${background.partner === opt.val ? 'text-rose-500 fill-rose-500' : 'text-slate-300'}`}/>\n                   {opt.title}\n                </div>\n             </button>\n           ))}\n        </div>\n      )\n    },\n    {\n      id: 'work',\n      label: '请选择工作强度',\n      valueLabel: background.workIntensity === 1 ? '早九晚五' : background.workIntensity === 2 ? '偶尔加班' : '996福报',\n      render: (\n        <div className=\"flex flex-col gap-4 w-full max-w-sm\">\n           {[1, 2, 3].map(lvl => (\n             <button \n               key={lvl} \n               onClick={() => setBackground({...background, workIntensity: lvl})}\n               className={`p-4 rounded-xl border-2 transition-all flex items-center justify-between group ${background.workIntensity === lvl ? 'border-indigo-600 bg-indigo-50' : 'border-slate-100 hover:border-indigo-200'}`}\n             >\n               <div className=\"flex items-center gap-3 font-bold text-slate-900\">\n                   <Briefcase size={20} className={`${background.workIntensity === lvl ? 'text-indigo-600' : 'text-slate-300'}`}/>\n                   {lvl === 1 ? '轻松' : lvl === 2 ? '适中' : '高压'}\n               </div>\n             </button>\n           ))}\n        </div>\n      )\n    }\n  ];\n\n  const currentStepData = steps[step];\n\n  const handleNext = () => {\n    if (step < steps.length - 1) {\n      setStep(prev => prev + 1);\n    } else {\n      onComplete();\n    }\n  };\n\n  const handleBack = () => {\n    if (step > 0) {\n      setStep(prev => prev - 1);\n    }\n  };\n\n  return (\n    <div className=\"h-screen w-full bg-white flex flex-col items-center p-6 font-sans relative overflow-hidden\">\n       {/* 背景装饰 */}\n       <div className=\"absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-gradient-to-br from-rose-50 to-blue-50 rounded-full blur-[100px] -z-10\" />\n       \n       <div className=\"w-full max-w-lg flex flex-col h-full py-12\">\n          {/* 顶部进度条 */}\n          <div className=\"flex gap-3 mb-16\">\n             {steps.map((_, idx) => (\n                <div key={idx} className={`h-1.5 flex-1 rounded-full transition-all duration-500 ${idx <= step ? 'bg-slate-900' : 'bg-slate-200'}`}></div>\n             ))}\n          </div>\n\n          {/* 核心内容区 */}\n          <div className=\"flex-1 flex flex-col items-center text-center animate-in fade-in slide-in-from-bottom-8 duration-500 key={step}\">\n             <h2 className=\"text-sm font-bold text-slate-400 uppercase tracking-widest mb-6\">{currentStepData.label}</h2>\n             \n             {/* 核心大数值显示 */}\n             <div className=\"text-6xl md:text-7xl font-black text-slate-900 tracking-tighter mb-12 drop-shadow-sm\">\n                {currentStepData.valueLabel}\n             </div>\n\n             {/* 交互控件 */}\n             <div className=\"w-full flex justify-center\">\n                {currentStepData.render}\n             </div>\n          </div>\n\n          {/* 底部导航 */}\n          <div className=\"flex items-center justify-between mt-auto\">\n             <button \n               onClick={handleBack} \n               disabled={step === 0}\n               className={`p-4 rounded-full transition-colors border border-slate-100 ${step === 0 ? 'text-slate-200 cursor-not-allowed opacity-0' : 'text-slate-600 hover:bg-slate-50'}`}\n             >\n                <ArrowLeft size={24} />\n             </button>\n             \n             <button \n               onClick={handleNext}\n               className=\"bg-slate-900 text-white px-10 py-4 rounded-full font-bold text-lg hover:bg-black transition-all shadow-xl hover:shadow-2xl hover:-translate-y-1 active:translate-y-0 active:scale-95 flex items-center gap-3\"\n             >\n                {step === steps.length - 1 ? '生成人生' : '继续'} \n                {step < steps.length - 1 && <ArrowRight size={20} />}\n             </button>\n          </div>\n       </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1192, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/src/components/game/EndGameScreen.tsx"],"sourcesContent":["import React from 'react';\nimport { Award, TrendingUp, RotateCcw, Star, Shield, Smile } from 'lucide-react';\n\ninterface Attributes {\n  health: number;\n  mental: number;\n  marriage: number;\n  childGrowth: number;\n  [key: string]: number;\n}\n\ninterface EndGameReport {\n  title: string;\n  icon: React.ReactElement;\n  comment: string;\n  suggestion: string;\n}\n\ninterface EndGameScreenProps {\n  report: EndGameReport;\n  age: number;\n  score: number;\n  attributes: Attributes;\n  savings: number;\n  onRestart: () => void;\n}\n\nexport const EndGameScreen: React.FC<EndGameScreenProps> = ({ report, age, score, attributes, savings, onRestart }) => (\n  <div className=\"h-screen w-full bg-slate-50 flex items-center justify-center p-4 font-sans overflow-hidden\">\n     <div className=\"w-full max-w-5xl bg-white rounded-[3rem] shadow-2xl overflow-hidden flex flex-col md:flex-row h-[85vh] animate-in zoom-in duration-500 border border-slate-100 relative\">\n        \n        {/* 左侧：形象与荣誉 */}\n        <div className=\"md:w-5/12 bg-slate-900 text-white p-10 flex flex-col relative overflow-hidden shrink-0\">\n           <div className=\"absolute top-0 right-0 w-96 h-96 bg-indigo-500 rounded-full blur-[120px] opacity-30 -translate-y-1/2 translate-x-1/2 pointer-events-none\"></div>\n           <div className=\"absolute bottom-0 left-0 w-96 h-96 bg-rose-500 rounded-full blur-[120px] opacity-30 translate-y-1/2 -translate-x-1/2 pointer-events-none\"></div>\n           \n           <div className=\"relative z-10 flex flex-col h-full\">\n              <div className=\"flex items-center gap-2 text-[10px] font-bold tracking-widest uppercase text-white/50 mb-auto\">\n                 <Award size={14} /> Life Report Card\n              </div>\n\n              <div className=\"text-center my-8\">\n                 <div className=\"w-32 h-32 mx-auto bg-white/10 rounded-full flex items-center justify-center mb-6 border border-white/10 backdrop-blur-md shadow-2xl\">\n                    {React.cloneElement(report.icon as React.ReactElement<any>, { className: \"w-16 h-16 text-white\" })}\n                 </div>\n                 <h1 className=\"text-3xl md:text-4xl font-black mb-3 leading-tight\">{report.title}</h1>\n                 <div className=\"w-12 h-1 bg-white/20 rounded-full mx-auto mb-4\"></div>\n                 <p className=\"text-white/70 text-sm leading-relaxed max-w-xs mx-auto font-light\">{report.comment}</p>\n              </div>\n\n              <div className=\"mt-auto bg-white/5 backdrop-blur-md rounded-2xl p-6 border border-white/10\">\n                 <div className=\"text-[10px] text-white/40 uppercase tracking-wider font-bold mb-2\">导师寄语</div>\n                 <div className=\"font-serif italic text-white/90 text-sm leading-relaxed\">\" {report.suggestion} \"</div>\n              </div>\n           </div>\n        </div>\n\n        {/* 右侧：详细数据面板 */}\n        <div className=\"flex-1 p-10 flex flex-col bg-white overflow-y-auto\">\n           {/* 核心指标网格 */}\n           <div className=\"grid grid-cols-2 gap-6 mb-8 shrink-0\">\n              <div className=\"p-6 bg-slate-50 rounded-[2rem] border border-slate-100 flex flex-col items-center justify-center text-center hover:bg-slate-100 transition-colors\">\n                 <div className=\"text-xs text-slate-400 font-bold uppercase tracking-wider mb-2\">最终年龄</div>\n                 <div className=\"text-5xl font-black text-slate-900\">{age}</div>\n              </div>\n              <div className=\"p-6 bg-slate-50 rounded-[2rem] border border-slate-100 flex flex-col items-center justify-center text-center hover:bg-slate-100 transition-colors\">\n                 <div className=\"text-xs text-slate-400 font-bold uppercase tracking-wider mb-2\">家庭存款</div>\n                 <div className=\"text-4xl font-black text-slate-900 tracking-tight flex items-baseline\">\n                    <span className=\"text-xl mr-1\">¥</span>{(savings/10000).toFixed(1)}w\n                 </div>\n              </div>\n           </div>\n\n           {/* 属性进度条 */}\n           <div className=\"flex-1 mb-8\">\n              <div className=\"flex justify-between items-end mb-6\">\n                 <h3 className=\"font-bold text-slate-900 flex items-center gap-2 text-lg\">\n                    <TrendingUp size={20} className=\"text-slate-400\"/> 人生维表\n                 </h3>\n                 <div className=\"text-xs font-bold px-3 py-1 bg-emerald-100 text-emerald-700 rounded-full\">\n                    成长分: {score}\n                 </div>\n              </div>\n              <div className=\"space-y-5\">\n                 {[\n                    { label: '身体健康', val: attributes.health, color: 'bg-rose-500' },\n                    { label: '心理状态', val: attributes.mental, color: 'bg-indigo-500' },\n                    { label: '亲密关系', val: attributes.marriage, color: 'bg-pink-500' },\n                 ].map((item, idx) => (\n                    <div key={idx}>\n                       <div className=\"flex justify-between text-xs font-bold text-slate-500 mb-2\">\n                          <span>{item.label}</span>\n                          <span>{item.val}/100</span>\n                       </div>\n                       <div className=\"h-3 bg-slate-100 rounded-full overflow-hidden\">\n                          <div \n                             className={`h-full ${item.color} rounded-full transition-all duration-1000 ease-out`} \n                             style={{width: `${item.val}%`}}\n                          ></div>\n                       </div>\n                    </div>\n                 ))}\n              </div>\n           </div>\n\n           <button \n             onClick={onRestart}\n             className=\"w-full py-5 bg-slate-900 text-white font-bold rounded-2xl text-lg hover:bg-black transition-all shadow-xl hover:-translate-y-1 active:translate-y-0 active:scale-[0.98] flex items-center justify-center gap-3 group shrink-0\"\n           >\n             <RotateCcw size={20} className=\"group-hover:-rotate-180 transition-transform duration-700\"/> \n             重启别样人生\n           </button>\n        </div>\n     </div>\n  </div>\n);\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AAAA;;;;AA0BO,MAAM,gBAA8C,CAAC,EAAE,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,UAAU,EAAE,OAAO,EAAE,SAAS,EAAE,iBAChH,6LAAC;QAAI,WAAU;kBACZ,cAAA,6LAAC;YAAI,WAAU;;8BAGZ,6LAAC;oBAAI,WAAU;;sCACZ,6LAAC;4BAAI,WAAU;;;;;;sCACf,6LAAC;4BAAI,WAAU;;;;;;sCAEf,6LAAC;4BAAI,WAAU;;8CACZ,6LAAC;oCAAI,WAAU;;sDACZ,6LAAC,gNAAK;4CAAC,MAAM;;;;;;wCAAM;;;;;;;8CAGtB,6LAAC;oCAAI,WAAU;;sDACZ,6LAAC;4CAAI,WAAU;sDACX,cAAA,wKAAK,CAAC,YAAY,CAAC,OAAO,IAAI,EAA6B;gDAAE,WAAW;4CAAuB;;;;;;sDAEnG,6LAAC;4CAAG,WAAU;sDAAsD,OAAO,KAAK;;;;;;sDAChF,6LAAC;4CAAI,WAAU;;;;;;sDACf,6LAAC;4CAAE,WAAU;sDAAqE,OAAO,OAAO;;;;;;;;;;;;8CAGnG,6LAAC;oCAAI,WAAU;;sDACZ,6LAAC;4CAAI,WAAU;sDAAoE;;;;;;sDACnF,6LAAC;4CAAI,WAAU;;gDAA0D;gDAAG,OAAO,UAAU;gDAAC;;;;;;;;;;;;;;;;;;;;;;;;;8BAMvG,6LAAC;oBAAI,WAAU;;sCAEZ,6LAAC;4BAAI,WAAU;;8CACZ,6LAAC;oCAAI,WAAU;;sDACZ,6LAAC;4CAAI,WAAU;sDAAiE;;;;;;sDAChF,6LAAC;4CAAI,WAAU;sDAAsC;;;;;;;;;;;;8CAExD,6LAAC;oCAAI,WAAU;;sDACZ,6LAAC;4CAAI,WAAU;sDAAiE;;;;;;sDAChF,6LAAC;4CAAI,WAAU;;8DACZ,6LAAC;oDAAK,WAAU;8DAAe;;;;;;gDAAS,CAAC,UAAQ,KAAK,EAAE,OAAO,CAAC;gDAAG;;;;;;;;;;;;;;;;;;;sCAM5E,6LAAC;4BAAI,WAAU;;8CACZ,6LAAC;oCAAI,WAAU;;sDACZ,6LAAC;4CAAG,WAAU;;8DACX,6LAAC,mOAAU;oDAAC,MAAM;oDAAI,WAAU;;;;;;gDAAkB;;;;;;;sDAErD,6LAAC;4CAAI,WAAU;;gDAA2E;gDACjF;;;;;;;;;;;;;8CAGZ,6LAAC;oCAAI,WAAU;8CACX;wCACE;4CAAE,OAAO;4CAAQ,KAAK,WAAW,MAAM;4CAAE,OAAO;wCAAc;wCAC9D;4CAAE,OAAO;4CAAQ,KAAK,WAAW,MAAM;4CAAE,OAAO;wCAAgB;wCAChE;4CAAE,OAAO;4CAAQ,KAAK,WAAW,QAAQ;4CAAE,OAAO;wCAAc;qCAClE,CAAC,GAAG,CAAC,CAAC,MAAM,oBACV,6LAAC;;8DACE,6LAAC;oDAAI,WAAU;;sEACZ,6LAAC;sEAAM,KAAK,KAAK;;;;;;sEACjB,6LAAC;;gEAAM,KAAK,GAAG;gEAAC;;;;;;;;;;;;;8DAEnB,6LAAC;oDAAI,WAAU;8DACZ,cAAA,6LAAC;wDACE,WAAW,CAAC,OAAO,EAAE,KAAK,KAAK,CAAC,mDAAmD,CAAC;wDACpF,OAAO;4DAAC,OAAO,GAAG,KAAK,GAAG,CAAC,CAAC,CAAC;wDAAA;;;;;;;;;;;;2CAR5B;;;;;;;;;;;;;;;;sCAgBnB,6LAAC;4BACC,SAAS;4BACT,WAAU;;8CAEV,6LAAC,gOAAS;oCAAC,MAAM;oCAAI,WAAU;;;;;;gCAA6D;;;;;;;;;;;;;;;;;;;;;;;;KAlF5F"}},
    {"offset": {"line": 1569, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/src/components/game/GameBackground.tsx"],"sourcesContent":["import React from 'react';\n\ninterface GameBackgroundProps {\n  image: string;\n}\n\nexport const GameBackground: React.FC<GameBackgroundProps> = ({ image }) => (\n  <div className=\"absolute inset-0 z-0\">\n     <img \n       src={image} \n       alt=\"Background\" \n       className=\"w-full h-full object-cover transition-all duration-1000 ease-in-out\" \n     />\n     {/* <div className=\"absolute inset-0 opacity-10 pointer-events-none\" style={{backgroundImage: 'radial-gradient(#000 2px, transparent 2px)', backgroundSize: '8px 8px'}}></div> */}\n     {/* <div className=\"absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-black/60 pointer-events-none\" /> */}\n     <div className=\"absolute inset-0 bg-gradient-to-b via-transparent pointer-events-none\" />\n  </div>\n);\n"],"names":[],"mappings":";;;;;;AAMO,MAAM,iBAAgD,CAAC,EAAE,KAAK,EAAE,iBACrE,6LAAC;QAAI,WAAU;;0BACZ,6LAAC;gBACC,KAAK;gBACL,KAAI;gBACJ,WAAU;;;;;;0BAIZ,6LAAC;gBAAI,WAAU;;;;;;;;;;;;KATP"}},
    {"offset": {"line": 1610, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/src/components/game/StatusBadge.tsx"],"sourcesContent":["import React from 'react';\n\ninterface StatusBadgeProps {\n  icon: React.ReactElement;\n  label?: string; // Defined in original props but not used in render, keeping it optional\n  value: string | number;\n  color: string;\n}\n\nexport const StatusBadge: React.FC<StatusBadgeProps> = ({ icon, value, color }) => (\n  <div className=\"flex items-center gap-1.5 bg-white/80 backdrop-blur-md border border-black/5 px-3 py-1.5 rounded-full shadow-sm text-slate-900 transition-transform hover:-translate-y-1\">\n    <div className={`p-1 rounded-full ${color}`}>\n      {React.cloneElement(icon as React.ReactElement<any>, { size: 10, className: \"text-white\" })}\n    </div>\n    <div className=\"flex flex-col leading-none\">\n       <span className=\"text-xs font-bold font-mono\">{value}</span>\n    </div>\n  </div>\n);\n"],"names":[],"mappings":";;;;;AAAA;;;AASO,MAAM,cAA0C,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,KAAK,EAAE,iBAC5E,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAI,WAAW,CAAC,iBAAiB,EAAE,OAAO;0BACxC,cAAA,wKAAK,CAAC,YAAY,CAAC,MAAiC;oBAAE,MAAM;oBAAI,WAAW;gBAAa;;;;;;0BAE3F,6LAAC;gBAAI,WAAU;0BACZ,cAAA,6LAAC;oBAAK,WAAU;8BAA+B;;;;;;;;;;;;;;;;;KANzC"}},
    {"offset": {"line": 1663, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/src/components/game/GameHUD.tsx"],"sourcesContent":["import React from 'react';\nimport { Wallet, SmartphoneCharging, Brain, Baby, Heart } from 'lucide-react';\nimport { StatusBadge } from './StatusBadge';\n\ninterface GameHUDProps {\n  currentStageTitle: string;\n  savings: number;\n  attributes: {\n    health: number;\n    mental: number;\n    childGrowth: number;\n    marriage: number;\n  };\n}\n\nexport const GameHUD: React.FC<GameHUDProps> = ({ currentStageTitle, savings, attributes }) => (\n  <div className=\"absolute top-0 left-0 right-0 z-50 p-4 pointer-events-none flex justify-center\">\n     {/* 左上角标题 */}\n     <div className=\"absolute top-4 left-4\">\n       <div className=\"bg-white/90 backdrop-blur border border-black/10 px-4 py-2 rounded-full shadow-sm\">\n          <h2 className=\"text-slate-900 font-bold text-sm flex items-center gap-2\">\n             {currentStageTitle}\n          </h2>\n       </div>\n     </div>\n\n     {/* 中间属性栏 */}\n     <div className=\"mt-2 flex gap-2 md:gap-4 justify-center bg-black/20 backdrop-blur-md p-2 px-6 rounded-full border border-white/10 shadow-lg\">\n        <StatusBadge icon={<Wallet />} value={`¥${(savings/10000).toFixed(1)}w`} color=\"bg-amber-500\" />\n        <StatusBadge icon={<SmartphoneCharging />} value={attributes.health} color=\"bg-emerald-500\" />\n        <StatusBadge icon={<Brain />} value={attributes.mental} color=\"bg-indigo-500\" />\n        <StatusBadge icon={<Heart />} value={attributes.marriage} color=\"bg-rose-500\" />\n        <StatusBadge icon={<Baby />} value={attributes.childGrowth} color=\"bg-emerald-500\" />\n     </div>\n  </div>\n);\n"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;;;AAaO,MAAM,UAAkC,CAAC,EAAE,iBAAiB,EAAE,OAAO,EAAE,UAAU,EAAE,iBACxF,6LAAC;QAAI,WAAU;;0BAEZ,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBAAI,WAAU;8BACZ,cAAA,6LAAC;wBAAG,WAAU;kCACV;;;;;;;;;;;;;;;;0BAMT,6LAAC;gBAAI,WAAU;;kCACZ,6LAAC,2JAAW;wBAAC,oBAAM,6LAAC,mNAAM;;;;;wBAAK,OAAO,CAAC,CAAC,EAAE,CAAC,UAAQ,KAAK,EAAE,OAAO,CAAC,GAAG,CAAC,CAAC;wBAAE,OAAM;;;;;;kCAC/E,6LAAC,2JAAW;wBAAC,oBAAM,6LAAC,2PAAkB;;;;;wBAAK,OAAO,WAAW,MAAM;wBAAE,OAAM;;;;;;kCAC3E,6LAAC,2JAAW;wBAAC,oBAAM,6LAAC,gNAAK;;;;;wBAAK,OAAO,WAAW,MAAM;wBAAE,OAAM;;;;;;kCAC9D,6LAAC,2JAAW;wBAAC,oBAAM,6LAAC,gNAAK;;;;;wBAAK,OAAO,WAAW,QAAQ;wBAAE,OAAM;;;;;;kCAChE,6LAAC,2JAAW;wBAAC,oBAAM,6LAAC,6MAAI;;;;;wBAAK,OAAO,WAAW,WAAW;wBAAE,OAAM;;;;;;;;;;;;;;;;;;KAjB7D"}},
    {"offset": {"line": 1792, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/src/components/game/CharacterLayer.tsx"],"sourcesContent":["import React from 'react';\nimport { CHARACTERS } from '@/lib/resource';\n\ninterface CharacterLayerProps {\n  activeSpeaker: string | null;\n  activeNPC: string | null;\n  currentStage: number | null;\n}\n\nexport const CharacterLayer: React.FC<CharacterLayerProps> = ({ activeSpeaker, activeNPC, currentStage }) => (\n  <div className=\"absolute inset-0 z-10 flex items-end justify-center pointer-events-none overflow-hidden\">\n    {/* 左侧：主角 */}\n    <div className={`\n          absolute transition-all duration-500 ease-out transform\n          ${CHARACTERS['hero'].style}\n          ${currentStage === 1 ? CHARACTERS['hero_1'].style :\n        currentStage === 2 ? CHARACTERS['hero_2'].style :\n        currentStage === 3 ? CHARACTERS['hero_3'].style:\n        currentStage === 4 ? CHARACTERS['hero_4'].style : ''\n        }\n          w-[70vw] h-[60vh] md:w-[40vw] md:h-[80vh] lg:w-[35vw] lg:h-[85vh]\n          \n          \n          ${activeSpeaker.startsWith('hero') || activeNPC !== null && activeNPC.startsWith('hero') ? 'opacity-100 scale-100 brightness-110' : activeSpeaker === 'narrator' ? 'opacity-100 scale-0 brightness-110' : 'opacity-80 scale-100 brightness-90'}\n       `}>\n        \n        {currentStage === 1 ? <img src={CHARACTERS['hero_1'].avatar} alt=\"Hero\" className=\"w-full h-full object-contain drop-shadow-2xl\" /> :\n        currentStage === 2 ? <img src={CHARACTERS['hero_2'].avatar} alt=\"Hero\" className=\"w-full h-full object-contain drop-shadow-2xl\" /> :\n        currentStage === 3 ? <img src={CHARACTERS['hero_3'].avatar} alt=\"Hero\" className=\"w-full h-full object-contain drop-shadow-2xl\" /> :\n        currentStage === 4 ? <img src={CHARACTERS['hero_4'].avatar} alt=\"Hero\" className=\"w-full h-full object-contain drop-shadow-2xl\" /> : <div></div>\n        }\n    </div>\n\n    {/* 右侧：配角 */}\n    {activeNPC && CHARACTERS[activeNPC as keyof typeof CHARACTERS] && (\n       <div className={`\n          absolute transition-all duration-500 ease-out transform\n          ${CHARACTERS[activeNPC as keyof typeof CHARACTERS].style}\n          w-[90vw] h-[75vh] md:w-[50vw] md:h-[90vh] lg:w-[45vw] lg:h-[95vh]\n          max-w-[300px]\n          ${activeSpeaker === activeNPC ? 'opacity-100 scale-100 brightness-110' : 'opacity-80 scale-100 brightness-90'}\n          animate-in slide-in-from-bottom-24 fade-in\n       `}>\n         {activeNPC.startsWith('hero') ? <div></div> : <img src={CHARACTERS[activeNPC as keyof typeof CHARACTERS].avatar} alt={activeNPC} className=\"w-full h-full object-contain drop-shadow-2xl\" />}\n       </div>\n    )}\n  </div>\n);\n"],"names":[],"mappings":";;;;;AACA;;;AAQO,MAAM,iBAAgD,CAAC,EAAE,aAAa,EAAE,SAAS,EAAE,YAAY,EAAE,iBACtG,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAW,CAAC;;UAEX,EAAE,uIAAU,CAAC,OAAO,CAAC,KAAK,CAAC;UAC3B,EAAE,iBAAiB,IAAI,uIAAU,CAAC,SAAS,CAAC,KAAK,GACnD,iBAAiB,IAAI,uIAAU,CAAC,SAAS,CAAC,KAAK,GAC/C,iBAAiB,IAAI,uIAAU,CAAC,SAAS,CAAC,KAAK,GAC/C,iBAAiB,IAAI,uIAAU,CAAC,SAAS,CAAC,KAAK,GAAG,GACjD;;;;UAIC,EAAE,cAAc,UAAU,CAAC,WAAW,cAAc,QAAQ,UAAU,UAAU,CAAC,UAAU,yCAAyC,kBAAkB,aAAa,uCAAuC,qCAAqC;OAClP,CAAC;0BAEC,iBAAiB,kBAAI,6LAAC;oBAAI,KAAK,uIAAU,CAAC,SAAS,CAAC,MAAM;oBAAE,KAAI;oBAAO,WAAU;;;;;+DAClF,iBAAiB,kBAAI,6LAAC;oBAAI,KAAK,uIAAU,CAAC,SAAS,CAAC,MAAM;oBAAE,KAAI;oBAAO,WAAU;;;;;+DACjF,iBAAiB,kBAAI,6LAAC;oBAAI,KAAK,uIAAU,CAAC,SAAS,CAAC,MAAM;oBAAE,KAAI;oBAAO,WAAU;;;;;+DACjF,iBAAiB,kBAAI,6LAAC;oBAAI,KAAK,uIAAU,CAAC,SAAS,CAAC,MAAM;oBAAE,KAAI;oBAAO,WAAU;;;;;6EAAoD,6LAAC;;;;;;;;;;YAKzI,aAAa,uIAAU,CAAC,UAAqC,kBAC3D,6LAAC;gBAAI,WAAW,CAAC;;UAEd,EAAE,uIAAU,CAAC,UAAqC,CAAC,KAAK,CAAC;;;UAGzD,EAAE,kBAAkB,YAAY,yCAAyC,qCAAqC;;OAEjH,CAAC;0BACE,UAAU,UAAU,CAAC,wBAAU,6LAAC;;;;6EAAa,6LAAC;oBAAI,KAAK,uIAAU,CAAC,UAAqC,CAAC,MAAM;oBAAE,KAAK;oBAAW,WAAU;;;;;;;;;;;;;;;;;KAlCvI"}},
    {"offset": {"line": 1898, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/src/components/game/KnowledgeButton.tsx"],"sourcesContent":["import React from 'react';\nimport { Lightbulb } from 'lucide-react';\n\ninterface KnowledgeButtonProps {\n  visible: boolean;\n  onClick: (e: React.MouseEvent) => void;\n}\n\n// export const KnowledgeButton: React.FC<KnowledgeButtonProps> = ({ visible, onClick }) => {\n//   if (!visible) return null;\n  \n//   return (\n//     <div \n//        className=\"absolute top-10 right-25 md:right-25 z-50 cursor-pointer group animate-bounce-slow pointer-events-auto\"\n//        onClick={onClick}\n//     >\n//        <div className=\"relative flex flex-col items-center\">\n//           <div className=\"w-0.1 h-20  \"></div>\n//             <img src={'/tips.png'} className=\"text-indigo-600 fill-indigo-600\" />\n              \n//        </div>\n//     </div>\n//   );\n// };\n\n\nimport React from 'react';\n\n// 假设的 Props 定义，如果你已有则忽略\ninterface KnowledgeButtonProps {\n  visible: boolean;\n  onClick: () => void;\n}\n\nexport const KnowledgeButton: React.FC<KnowledgeButtonProps> = ({ visible, onClick }) => {\n  if (!visible) return null;\n\n  return (\n    <>\n      {/* --- 1. 内嵌 CSS 动画定义 --- */}\n      <style>{`\n        /* 定义闹铃震动动画：总时长 2s */\n        @keyframes ring-with-pause {\n          /* 初始状态：静止 */\n          0% { transform: translate(0, 0) rotate(0); }\n\n          /* --- 震动阶段 (前20%的时间，约0.4秒) --- */\n          /* 通过快速切换正负位移和轻微旋转来模拟急促震动 */\n          4%  { transform: translate(-3px, 1px) rotate(-2deg); }\n          8%  { transform: translate(3px, -1px) rotate(2deg); }\n          12% { transform: translate(-3px, 1px) rotate(-2deg); }\n          16% { transform: translate(3px, -1px) rotate(2deg); }\n          \n          /* --- 静止阶段 (回到原位并保持到最后) --- */\n          20%  { transform: translate(0, 0) rotate(0); }\n          100% { transform: translate(0, 0) rotate(0); }\n        }\n      `}</style>\n\n      <div \n         className=\"absolute top-30 right-25 md:right-25 z-50 pointer-events-auto\"\n         onClick={onClick}\n      >\n         {/* --- 2. 动画容器 (Wrapper) --- \n             这里负责：周期性的震动动画\n             style: 应用我们刚才定义的 ring-with-pause 动画，时长2s，无限循环\n         */}\n         <div \n            className=\"group relative flex flex-col items-center cursor-pointer\"\n            style={{ \n              // 使用 linear 让震动感觉更机械、急促\n              animation: 'ring-with-pause 2s linear infinite',\n            }}\n         >\n            {/* (已删除绳子的 div) */}\n\n            {/* --- 3. 交互层 (Image) ---\n               这里负责：鼠标移入放大 (Scale) 和点击反馈\n               这些效果叠加在父级的震动动画之上，互不冲突\n            */}\n            <img \n              src={'/tips.png'} \n              className=\"\n                w-40 h-40 \n                object-contain\n                /* 确保 transition 不会影响震动的急促感，只作用于 scale */\n                transition-transform duration-200 ease-out\n                /* Hover 放大 */\n                group-hover:scale-115 group-hover:drop-shadow-lg group-hover:brightness-110\n                /* Active 点击缩小 */\n                group-active:scale-90\n              \" \n              alt=\"Tips\"\n            />\n         </div>\n      </div>\n    </>\n  );\n};\n"],"names":[],"mappings":";;;;;;AAkCO,MAAM,kBAAkD,CAAC,EAAE,OAAO,EAAE,OAAO,EAAE;IAClF,IAAI,CAAC,SAAS,OAAO;IAErB,qBACE;;0BAEE,6LAAC;0BAAO,CAAC;;;;;;;;;;;;;;;;;MAiBT,CAAC;;;;;;0BAED,6LAAC;gBACE,WAAU;gBACV,SAAS;0BAMT,cAAA,6LAAC;oBACE,WAAU;oBACV,OAAO;wBACL,wBAAwB;wBACxB,WAAW;oBACb;8BAQA,cAAA,6LAAC;wBACC,KAAK;wBACL,WAAU;wBAUV,KAAI;;;;;;;;;;;;;;;;;;AAMlB;KAhEa"}},
    {"offset": {"line": 1973, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/src/components/game/ThoughtCloud.tsx"],"sourcesContent":["import React from 'react';\nimport { Wallet, Clock } from 'lucide-react';\n\ninterface ThoughtCloudProps {\n  text: string;\n  cost?: number;\n  time?: number;\n  onClick: () => void;\n  delayIndex: number;\n}\n\nexport const ThoughtCloud: React.FC<ThoughtCloudProps> = ({ text, cost = 0, time = 0, onClick, delayIndex }) => (\n  <button \n    onClick={(e) => { e.stopPropagation(); onClick(); }}\n    className={`\n      relative group cursor-pointer transition-transform hover:scale-105 active:scale-95\n      animate-in fade-in zoom-in duration-500 fill-mode-backwards\n    `}\n    style={{ animationDelay: `${delayIndex * 150}ms` }}\n  >\n    <div className=\"relative bg-white/80 backdrop-blur border-2 border-slate-200 rounded-[2rem] p-4 px-6 shadow-lg hover:shadow-xl hover:border-rose-300 z-10 max-w-[200px] text-center\">\n       <div className=\"font-bold text-sm text-slate-900 group-hover:text-rose-600 transition-colors mb-1\">\n          {text}\n       </div>\n       <div className=\"text-[10px] font-medium text-slate-400 flex justify-center gap-3 uppercase tracking-wider\">\n          {cost > 0 && <span className=\"flex items-center gap-0.5\"><Wallet size={10}/> -{cost}</span>}\n          <span className=\"flex items-center gap-0.5\"><Clock size={10}/> {time}M</span>\n       </div>\n    </div>\n    \n    <div className=\"absolute -bottom-3 left-1/2 -translate-x-1/2 w-3 h-3 bg-white/80 rounded-full z-0\"></div>\n    <div className=\"absolute -bottom-6 left-1/2 -translate-x-1/2 -translate-y-1 w-1.5 h-1.5 bg-white/60 rounded-full z-0\"></div>\n  </button>\n);\n"],"names":[],"mappings":";;;;;AACA;AAAA;;;AAUO,MAAM,eAA4C,CAAC,EAAE,IAAI,EAAE,OAAO,CAAC,EAAE,OAAO,CAAC,EAAE,OAAO,EAAE,UAAU,EAAE,iBACzG,6LAAC;QACC,SAAS,CAAC;YAAQ,EAAE,eAAe;YAAI;QAAW;QAClD,WAAW,CAAC;;;IAGZ,CAAC;QACD,OAAO;YAAE,gBAAgB,GAAG,aAAa,IAAI,EAAE,CAAC;QAAC;;0BAEjD,6LAAC;gBAAI,WAAU;;kCACZ,6LAAC;wBAAI,WAAU;kCACX;;;;;;kCAEJ,6LAAC;wBAAI,WAAU;;4BACX,OAAO,mBAAK,6LAAC;gCAAK,WAAU;;kDAA4B,6LAAC,mNAAM;wCAAC,MAAM;;;;;;oCAAK;oCAAG;;;;;;;0CAC/E,6LAAC;gCAAK,WAAU;;kDAA4B,6LAAC,gNAAK;wCAAC,MAAM;;;;;;oCAAK;oCAAE;oCAAK;;;;;;;;;;;;;;;;;;;0BAI3E,6LAAC;gBAAI,WAAU;;;;;;0BACf,6LAAC;gBAAI,WAAU;;;;;;;;;;;;KApBN"}},
    {"offset": {"line": 2088, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/src/components/game/ComicBubble.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { CHARACTERS } from '@/lib/resource';\n\ninterface ComicBubbleProps {\n  speaker: string;\n  text: string;\n  onComplete?: () => void;\n}\n\nexport const ComicBubble: React.FC<ComicBubbleProps> = ({ speaker, text, onComplete }) => {\n  const [displayed, setDisplayed] = useState('');\n  const textRef = useRef(text);\n\n  useEffect(() => {\n    setDisplayed('');\n    textRef.current = text;\n    let i = 0;\n    const timer = setInterval(() => {\n      if (i < text.length) {\n        setDisplayed(prev => prev + text.charAt(i));\n        i++;\n      } else {\n        clearInterval(timer);\n        if (onComplete) onComplete();\n      }\n    }, 30);\n    return () => clearInterval(timer);\n  }, [text, onComplete]);\n\n  const isHero = speaker.startsWith('hero');\n  const isNarrator = speaker === 'narrator';\n  const charInfo = CHARACTERS[speaker] || { name: '旁白' };\n\n  if (isNarrator) {\n     return (\n        <div className=\"w-full max-w-2xl mx-auto mb-16 animate-in fade-in slide-in-from-bottom-4 z-40\">\n           <div className=\"bg-black/60 text-white px-6 py-3 rounded-full text-center font-medium text-base backdrop-blur-md border border-white/10 shadow-lg\">\n             {displayed}\n           </div>\n        </div>\n     );\n  }\n\n  const alignmentClass = isHero ? 'items-start ml-4 md:ml-[25%] -translate-y-50' : 'items-end mr-8 md:mr-[50%] -translate-y-20';\n  const bubbleRoundedClass = isHero ? 'rounded-2xl rounded-tl-none' : 'rounded-2xl rounded-tr-none';\n  const triangleClass = isHero ? '-left-[8px] top-[15px] border-r-white/70' : '-right-[8px] top-[15px] border-l-white/70';\n\n  return (\n    <div className={`w-full max-w-5xl mx-auto flex flex-col ${alignmentClass} mb-8 relative z-20`}>\n       <div className={`text-xs font-bold text-slate-300 mb-1 px-2 drop-shadow-md`}>\n          {charInfo.name}\n       </div>\n       \n       <div className={`\n          relative bg-white/70 backdrop-blur-md px-6 py-4 shadow-xl border border-white/20\n          max-w-[80%] md:max-w-md text-base leading-relaxed text-slate-900 font-medium\n          animate-in zoom-in-95 duration-200\n          ${bubbleRoundedClass}\n       `}>\n          {displayed}\n          <div className={`absolute w-0 h-0 border-y-[6px] border-y-transparent border-[8px] ${triangleClass}`}></div>\n       </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;;AAQO,MAAM,cAA0C,CAAC,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,EAAE;;IACnF,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,UAAU,IAAA,uKAAM,EAAC;IAEvB,IAAA,0KAAS;iCAAC;YACR,aAAa;YACb,QAAQ,OAAO,GAAG;YAClB,IAAI,IAAI;YACR,MAAM,QAAQ;+CAAY;oBACxB,IAAI,IAAI,KAAK,MAAM,EAAE;wBACnB;2DAAa,CAAA,OAAQ,OAAO,KAAK,MAAM,CAAC;;wBACxC;oBACF,OAAO;wBACL,cAAc;wBACd,IAAI,YAAY;oBAClB;gBACF;8CAAG;YACH;yCAAO,IAAM,cAAc;;QAC7B;gCAAG;QAAC;QAAM;KAAW;IAErB,MAAM,SAAS,QAAQ,UAAU,CAAC;IAClC,MAAM,aAAa,YAAY;IAC/B,MAAM,WAAW,uIAAU,CAAC,QAAQ,IAAI;QAAE,MAAM;IAAK;IAErD,IAAI,YAAY;QACb,qBACG,6LAAC;YAAI,WAAU;sBACZ,cAAA,6LAAC;gBAAI,WAAU;0BACZ;;;;;;;;;;;IAIZ;IAEA,MAAM,iBAAiB,SAAS,iDAAiD;IACjF,MAAM,qBAAqB,SAAS,gCAAgC;IACpE,MAAM,gBAAgB,SAAS,6CAA6C;IAE5E,qBACE,6LAAC;QAAI,WAAW,CAAC,uCAAuC,EAAE,eAAe,mBAAmB,CAAC;;0BAC1F,6LAAC;gBAAI,WAAW,CAAC,yDAAyD,CAAC;0BACvE,SAAS,IAAI;;;;;;0BAGjB,6LAAC;gBAAI,WAAW,CAAC;;;;UAId,EAAE,mBAAmB;OACxB,CAAC;;oBACG;kCACD,6LAAC;wBAAI,WAAW,CAAC,kEAAkE,EAAE,eAAe;;;;;;;;;;;;;;;;;;AAI9G;GAvDa;KAAA"}},
    {"offset": {"line": 2205, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/src/components/game/FeedbackModal.tsx"],"sourcesContent":["import React from 'react';\nimport { Sparkles, Wallet, Activity, Brain, Heart, Baby, Star, ArrowRight } from 'lucide-react';\n\ninterface FeedbackChanges {\n  cost?: number;\n  health?: number;\n  mental?: number;\n  marriage?: number;\n  childGrowth?: number;\n  [key: string]: number | undefined;\n}\n\ninterface FeedbackModalProps {\n  feedback: string | null;\n  feedbackChanges: FeedbackChanges | null;\n  onNext: () => void;\n}\n\nexport const FeedbackModal: React.FC<FeedbackModalProps> = ({ feedback, feedbackChanges, onNext }) => {\n  if (!feedback) return null;\n\n  return (\n    <div className=\"absolute inset-0 z-50 flex items-center justify-center bg-black/10 backdrop-blur-[2px]\">\n       <div className=\"pointer-events-auto animate-in fade-in zoom-in duration-500 w-full px-4 flex justify-center\">\n          {/* 压缩高度: py-4, 限制宽度 max-w-xl */}\n          {/* <div className=\"relative bg-[#F67807]/70 backdrop-blur-xl px-12 py-6 rounded-[1rem] border border-white/10 shadow-2xl w-full max-w-xl text-center flex flex-col items-center justify-center\"></div> */}\n          <div className=\"relative w-full max-w-xl rounded-[1rem] \">\n          <img \n            src={'/feedback.png'} \n            alt=\"Background\" \n            className=\"absolute inset-0  duration-1000 ease-in-out -top-35\" \n         />\n             <div className=\"relative z-10 flex flex-col items-center gap-3 w-full\">\n                {/* <div className=\"absolute -top-5 bg-[#F67807] p-2 rounded-full border border-white/10 shadow-lg\">\n                     <Sparkles size={20} className=\"text-amber-300\" />\n                </div> */}\n                \n                {/* 极简标题 */}\n                <h3 className=\"relative text-[10px] font-bold text-black/40 uppercase tracking-[0.4em] mt-2\">RESULT</h3>\n\n                {/* 内容 */}\n                <p className=\"relative text-sm md:text-base font-medium text-black leading-relaxed font-serif italic max-w-sm\">\n                      {feedback}\n                </p>\n\n                {/* 属性变化 */}\n                {feedbackChanges && (\n                   <div className=\"flex flex-wrap justify-center gap-2 mb-2 scale-90\">\n                      {feedbackChanges.cost !== undefined && feedbackChanges.cost > 0 && (\n                         <span className=\"px-2 py-0.5 bg-red-500/20 border border-red-500/30 rounded-full text-[10px] font-bold text-red-500 flex items-center gap-1\">\n                            <Wallet size={10} /> -{feedbackChanges.cost}\n                         </span>\n                      )}\n                      {Object.entries(feedbackChanges).map(([key, val]) => {\n                         if (key === 'cost' || val === 0 || val === undefined) return null;\n                         const isPositive = val > 0;\n                         const iconMap: {[key: string]: React.ReactElement} = { \n                           health: <Activity size={10}/>, \n                           mental: <Brain size={10}/>, \n                           marriage: <Heart size={10}/>, \n                           childGrowth: <Baby size={10}/> \n                         };\n                         return (\n                            <span key={key} className={`px-2 py-0.5 rounded-full text-[10px] font-bold flex items-center gap-1 border ${isPositive ? 'bg-green-500/20 border-green-500/30 text-green-500' : 'bg-red-500/20 border-red-500/30 text-red-500'}`}>\n                               {iconMap[key] || <Star size={10}/>} {isPositive ? '+' : ''}{val}\n                            </span>\n                         );\n                      })}\n                   </div>\n                )}\n\n                <button onClick={onNext} className=\"group inline-flex items-center gap-2 text-black/80 hover:text-black text-[10px] font-bold tracking-widest transition-colors border-b border-black pb-0.5 hover:border-black\">\n                      <span>CONTINUE</span> <ArrowRight size={10} className=\"group-hover:translate-x-1 transition-transform\"/>\n                </button>\n             </div>\n          </div>\n       </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;AAiBO,MAAM,gBAA8C,CAAC,EAAE,QAAQ,EAAE,eAAe,EAAE,MAAM,EAAE;IAC/F,IAAI,CAAC,UAAU,OAAO;IAEtB,qBACE,6LAAC;QAAI,WAAU;kBACZ,cAAA,6LAAC;YAAI,WAAU;sBAGZ,cAAA,6LAAC;gBAAI,WAAU;;kCACf,6LAAC;wBACC,KAAK;wBACL,KAAI;wBACJ,WAAU;;;;;;kCAET,6LAAC;wBAAI,WAAU;;0CAMZ,6LAAC;gCAAG,WAAU;0CAA+E;;;;;;0CAG7F,6LAAC;gCAAE,WAAU;0CACN;;;;;;4BAIN,iCACE,6LAAC;gCAAI,WAAU;;oCACX,gBAAgB,IAAI,KAAK,aAAa,gBAAgB,IAAI,GAAG,mBAC3D,6LAAC;wCAAK,WAAU;;0DACb,6LAAC,mNAAM;gDAAC,MAAM;;;;;;4CAAM;4CAAG,gBAAgB,IAAI;;;;;;;oCAGhD,OAAO,OAAO,CAAC,iBAAiB,GAAG,CAAC,CAAC,CAAC,KAAK,IAAI;wCAC7C,IAAI,QAAQ,UAAU,QAAQ,KAAK,QAAQ,WAAW,OAAO;wCAC7D,MAAM,aAAa,MAAM;wCACzB,MAAM,UAA+C;4CACnD,sBAAQ,6LAAC,yNAAQ;gDAAC,MAAM;;;;;;4CACxB,sBAAQ,6LAAC,gNAAK;gDAAC,MAAM;;;;;;4CACrB,wBAAU,6LAAC,gNAAK;gDAAC,MAAM;;;;;;4CACvB,2BAAa,6LAAC,6MAAI;gDAAC,MAAM;;;;;;wCAC3B;wCACA,qBACG,6LAAC;4CAAe,WAAW,CAAC,8EAA8E,EAAE,aAAa,uDAAuD,gDAAgD;;gDAC5N,OAAO,CAAC,IAAI,kBAAI,6LAAC,6MAAI;oDAAC,MAAM;;;;;;gDAAM;gDAAE,aAAa,MAAM;gDAAI;;2CADpD;;;;;oCAIjB;;;;;;;0CAIN,6LAAC;gCAAO,SAAS;gCAAQ,WAAU;;kDAC7B,6LAAC;kDAAK;;;;;;oCAAe;kDAAC,6LAAC,mOAAU;wCAAC,MAAM;wCAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAO5E;KA7Da"}},
    {"offset": {"line": 2395, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/src/components/game/MediaOverlay.tsx"],"sourcesContent":["import React from 'react';\nimport { X } from 'lucide-react';\nimport { CHARACTERS } from '@/lib/resource';\n\ninterface MediaData {\n  speaker?: string;\n  bilibiliId?: string;\n  videoUrl?: string;\n  title?: string;\n  text?: string;\n}\n\ninterface MediaOverlayProps {\n  data: MediaData | null;\n  onClose: () => void;\n}\n\nexport const MediaOverlay: React.FC<MediaOverlayProps> = ({ data, onClose }) => {\n  if (!data) return null;\n  const char = CHARACTERS[(data.speaker || 'guide') as keyof typeof CHARACTERS];\n  \n  return (\n    <div className=\"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-300\">\n       <div className=\"w-full max-w-4xl bg-white rounded-3xl overflow-hidden shadow-2xl flex flex-col md:flex-row max-h-[85vh]\">\n          <div className=\"flex-1 bg-black flex items-center justify-center relative aspect-video md:aspect-auto\">\n             {data.bilibiliId ? (\n                <iframe src={`//player.bilibili.com/player.html?bvid=${data.bilibiliId}&page=1&high_quality=1&danmaku=0`} scrolling=\"no\" frameBorder=\"0\" allowFullScreen={true} className=\"w-full h-full absolute inset-0\"></iframe>\n             ) : (\n                <video controls className=\"w-full h-full object-contain\"><source src={data.videoUrl} type=\"video/mp4\"/></video>\n             )}\n          </div>\n          \n          <div className=\"md:w-80 p-6 flex flex-col bg-slate-50\">\n             <div className=\"flex justify-between items-start mb-6\">\n                <h3 className=\"text-lg font-bold text-slate-900\">{data.title}</h3>\n                <button onClick={onClose} className=\"p-1 hover:bg-slate-200 rounded-full transition-all\"><X size={20}/></button>\n             </div>\n             \n             <div className=\"flex-1 overflow-y-auto custom-scrollbar\">\n                <div className=\"flex flex-col items-center mb-4\">\n                   <div className=\"w-16 h-16 bg-white rounded-full mb-3 overflow-hidden shadow-md border-2 border-white\">\n                      <img src={char.avatar} alt={char.name} className=\"w-full h-full object-cover\"/>\n                   </div>\n                   <div className=\"bg-white p-4 rounded-2xl shadow-sm text-sm text-slate-600 relative\">\n                      {data.text}\n                      <div className=\"absolute -top-2 left-1/2 -translate-x-1/2 w-4 h-4 bg-white transform rotate-45\"></div>\n                   </div>\n                </div>\n             </div>\n             \n             <button onClick={onClose} className=\"w-full py-3 bg-slate-900 text-white hover:bg-slate-800 rounded-xl font-bold transition-all shadow-lg mt-4 text-sm\">\n                Get it! 回到剧情\n             </button>\n          </div>\n       </div>\n    </div>\n  );\n};\n"],"names":[],"mappings":";;;;;AACA;AACA;;;;AAeO,MAAM,eAA4C,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE;IACzE,IAAI,CAAC,MAAM,OAAO;IAClB,MAAM,OAAO,uIAAU,CAAE,KAAK,OAAO,IAAI,QAAoC;IAE7E,qBACE,6LAAC;QAAI,WAAU;kBACZ,cAAA,6LAAC;YAAI,WAAU;;8BACZ,6LAAC;oBAAI,WAAU;8BACX,KAAK,UAAU,iBACb,6LAAC;wBAAO,KAAK,CAAC,uCAAuC,EAAE,KAAK,UAAU,CAAC,gCAAgC,CAAC;wBAAE,WAAU;wBAAK,aAAY;wBAAI,iBAAiB;wBAAM,WAAU;;;;;iFAE1K,6LAAC;wBAAM,QAAQ;wBAAC,WAAU;kCAA+B,cAAA,6LAAC;4BAAO,KAAK,KAAK,QAAQ;4BAAE,MAAK;;;;;;;;;;;;;;;;8BAIhG,6LAAC;oBAAI,WAAU;;sCACZ,6LAAC;4BAAI,WAAU;;8CACZ,6LAAC;oCAAG,WAAU;8CAAoC,KAAK,KAAK;;;;;;8CAC5D,6LAAC;oCAAO,SAAS;oCAAS,WAAU;8CAAqD,cAAA,6LAAC,oMAAC;wCAAC,MAAM;;;;;;;;;;;;;;;;;sCAGrG,6LAAC;4BAAI,WAAU;sCACZ,cAAA,6LAAC;gCAAI,WAAU;;kDACZ,6LAAC;wCAAI,WAAU;kDACZ,cAAA,6LAAC;4CAAI,KAAK,KAAK,MAAM;4CAAE,KAAK,KAAK,IAAI;4CAAE,WAAU;;;;;;;;;;;kDAEpD,6LAAC;wCAAI,WAAU;;4CACX,KAAK,IAAI;0DACV,6LAAC;gDAAI,WAAU;;;;;;;;;;;;;;;;;;;;;;;sCAKxB,6LAAC;4BAAO,SAAS;4BAAS,WAAU;sCAAoH;;;;;;;;;;;;;;;;;;;;;;;AAOrK;KAxCa"}},
    {"offset": {"line": 2567, "column": 0}, "map": {"version":3,"sources":["file:///Users/wsz/lifebud/version2/lifebud/src/app/game/page.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { useGameLogic } from '@/hooks/useGameLogic';\nimport { StartScreen } from '@/components/game/StartScreen';\nimport { SetupWizard } from '@/components/game/SetupWizard';\nimport { EndGameScreen } from '@/components/game/EndGameScreen';\nimport { GameBackground } from '@/components/game/GameBackground';\nimport { GameHUD } from '@/components/game/GameHUD';\nimport { CharacterLayer } from '@/components/game/CharacterLayer';\nimport { KnowledgeButton } from '@/components/game/KnowledgeButton';\nimport { ThoughtCloud } from '@/components/game/ThoughtCloud';\nimport { ComicBubble } from '@/components/game/ComicBubble';\nimport { FeedbackModal } from '@/components/game/FeedbackModal';\nimport { MediaOverlay } from '@/components/game/MediaOverlay';\n\nexport default function ParentingSimulator() {\n  const {\n    gameState,\n    setGameState,\n    background,\n    setBackground,\n    startGame,\n    endGameReport,\n    currentAgeYear,\n    attributes,\n    savings,\n    currentStage,\n    currentEvent,\n    currentEventIndex,\n    eventQueue,\n    activeSpeaker,\n    activeNPC,\n    mediaData,\n    setMediaData,\n    handleScreenClick,\n    knowledgeVisible,\n    showOptions,\n    currentDialogueLine,\n    textCompleted,\n    setTextCompleted,\n    feedback,\n    feedbackChanges,\n    handleOption,\n    nextEvent,\n    dialogueIndex\n  } = useGameLogic();\n\n  if (gameState === 'start') {\n    return <StartScreen onStart={() => setGameState('setup')} />;\n  }\n\n  if (gameState === 'setup') {\n    return (\n      <SetupWizard \n        background={background} \n        setBackground={setBackground} \n        onComplete={startGame} \n      />\n    );\n  }\n\n  if (gameState === 'end' && endGameReport) {\n    return (\n      <EndGameScreen \n        report={endGameReport} \n        age={currentAgeYear} \n        score={attributes.childGrowth}\n        attributes={attributes}\n        savings={savings}\n        onRestart={() => setGameState('start')} \n      />\n    );\n  }\n\n  // gameState === 'playing'\n  return (\n    <div className=\"h-screen w-full relative bg-black font-sans overflow-hidden select-none\" onClick={handleScreenClick}>\n      {/* 1. 背景层 */}\n      <GameBackground image={currentEvent?.bgImage || currentStage?.bgImage} />\n\n      {/* 2. 顶部状态栏 (HUD) */}\n      <GameHUD \n        currentStageTitle={currentStage.title}\n        savings={savings}\n        attributes={attributes}\n      />\n\n      {/* 3. 角色立绘层 */}\n      <CharacterLayer activeSpeaker={activeSpeaker} activeNPC={activeNPC} currentStage={currentStage.id}/>\n      \n      {/* 4. 知识点悬挂入口 */}\n      <KnowledgeButton \n        visible={knowledgeVisible}\n        onClick={(e) => { e.stopPropagation(); setMediaData(currentEvent.knowledge || currentEvent.story); }}\n      />\n\n      {/* 5. 交互与对话层 */}\n      <div className=\"absolute inset-0 z-40 flex flex-col justify-end pb-8 md:pb-12 pointer-events-none\">\n         {/* 选项云朵 */}\n         <div className=\"flex-1 flex flex-col items-center justify-center w-full max-w-5xl mx-auto px-4 relative pointer-events-auto\">\n             {showOptions && currentEvent?.options && (\n                <div className=\"flex flex-col gap-3 md:flex-row md:gap-12 items-center justify-center mb-32 md:mb-16 w-full\">\n                   {currentEvent.options.map((opt, idx) => (\n                      <ThoughtCloud \n                        key={idx}\n                        text={opt.text}\n                        cost={opt.cost}\n                        time={opt.months}\n                        onClick={() => handleOption(opt)}\n                        delayIndex={idx}\n                      />\n                   ))}\n                </div>\n             )}\n         </div>\n\n         {/* 底部对话框 */}\n         <div className=\"pointer-events-auto px-4\">\n            {currentDialogueLine && !feedback && (\n               <ComicBubble \n                  key={`${currentEventIndex}-${dialogueIndex}`} \n                  speaker={currentDialogueLine.speaker} \n                  text={currentDialogueLine.text}\n                  onComplete={() => setTextCompleted(true)}\n               />\n            )}\n\n            {/* 反馈信息显示 */}\n            <FeedbackModal \n              feedback={feedback}\n              feedbackChanges={feedbackChanges}\n              onNext={nextEvent}\n            />\n         </div>\n      </div>\n\n      {/* 6. 模态层 */}\n      <MediaOverlay data={mediaData} onClose={() => setMediaData(null)} />\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAdA;;;;;;;;;;;;;AAgBe,SAAS;;IACtB,MAAM,EACJ,SAAS,EACT,YAAY,EACZ,UAAU,EACV,aAAa,EACb,SAAS,EACT,aAAa,EACb,cAAc,EACd,UAAU,EACV,OAAO,EACP,YAAY,EACZ,YAAY,EACZ,iBAAiB,EACjB,UAAU,EACV,aAAa,EACb,SAAS,EACT,SAAS,EACT,YAAY,EACZ,iBAAiB,EACjB,gBAAgB,EAChB,WAAW,EACX,mBAAmB,EACnB,aAAa,EACb,gBAAgB,EAChB,QAAQ,EACR,eAAe,EACf,YAAY,EACZ,SAAS,EACT,aAAa,EACd,GAAG,IAAA,gJAAY;IAEhB,IAAI,cAAc,SAAS;QACzB,qBAAO,6LAAC,2JAAW;YAAC,SAAS,IAAM,aAAa;;;;;;IAClD;IAEA,IAAI,cAAc,SAAS;QACzB,qBACE,6LAAC,2JAAW;YACV,YAAY;YACZ,eAAe;YACf,YAAY;;;;;;IAGlB;IAEA,IAAI,cAAc,SAAS,eAAe;QACxC,qBACE,6LAAC,+JAAa;YACZ,QAAQ;YACR,KAAK;YACL,OAAO,WAAW,WAAW;YAC7B,YAAY;YACZ,SAAS;YACT,WAAW,IAAM,aAAa;;;;;;IAGpC;IAEA,0BAA0B;IAC1B,qBACE,6LAAC;QAAI,WAAU;QAA0E,SAAS;;0BAEhG,6LAAC,iKAAc;gBAAC,OAAO,cAAc,WAAW,cAAc;;;;;;0BAG9D,6LAAC,mJAAO;gBACN,mBAAmB,aAAa,KAAK;gBACrC,SAAS;gBACT,YAAY;;;;;;0BAId,6LAAC,iKAAc;gBAAC,eAAe;gBAAe,WAAW;gBAAW,cAAc,aAAa,EAAE;;;;;;0BAGjG,6LAAC,mKAAe;gBACd,SAAS;gBACT,SAAS,CAAC;oBAAQ,EAAE,eAAe;oBAAI,aAAa,aAAa,SAAS,IAAI,aAAa,KAAK;gBAAG;;;;;;0BAIrG,6LAAC;gBAAI,WAAU;;kCAEZ,6LAAC;wBAAI,WAAU;kCACV,eAAe,cAAc,yBAC3B,6LAAC;4BAAI,WAAU;sCACX,aAAa,OAAO,CAAC,GAAG,CAAC,CAAC,KAAK,oBAC7B,6LAAC,6JAAY;oCAEX,MAAM,IAAI,IAAI;oCACd,MAAM,IAAI,IAAI;oCACd,MAAM,IAAI,MAAM;oCAChB,SAAS,IAAM,aAAa;oCAC5B,YAAY;mCALP;;;;;;;;;;;;;;;kCAapB,6LAAC;wBAAI,WAAU;;4BACX,uBAAuB,CAAC,0BACtB,6LAAC,2JAAW;gCAET,SAAS,oBAAoB,OAAO;gCACpC,MAAM,oBAAoB,IAAI;gCAC9B,YAAY,IAAM,iBAAiB;+BAH9B,GAAG,kBAAkB,CAAC,EAAE,eAAe;;;;;0CAQlD,6LAAC,+JAAa;gCACZ,UAAU;gCACV,iBAAiB;gCACjB,QAAQ;;;;;;;;;;;;;;;;;;0BAMhB,6LAAC,6JAAY;gBAAC,MAAM;gBAAW,SAAS,IAAM,aAAa;;;;;;;;;;;;AAGjE;GA7HwB;;QA8BlB,gJAAY;;;KA9BM"}}]
}