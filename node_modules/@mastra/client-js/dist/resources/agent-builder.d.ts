import type { RequestContext } from '@mastra/core/request-context';
import type { WorkflowInfo } from '@mastra/core/workflows';
import type { ClientOptions, ListWorkflowRunsParams } from '../types.js';
import { BaseResource } from './base.js';
export interface AgentBuilderActionRequest {
    /** Input data specific to the workflow type */
    inputData: any;
    /** Request context for the action execution */
    requestContext?: RequestContext;
}
export interface AgentBuilderActionResult {
    success: boolean;
    applied: boolean;
    branchName?: string;
    message: string;
    validationResults?: any;
    error?: string;
    errors?: string[];
    stepResults?: any;
}
/**
 * Agent Builder resource: operations related to agent-builder workflows via server endpoints.
 */
export declare class AgentBuilder extends BaseResource {
    private actionId;
    constructor(options: ClientOptions, actionId: string);
    transformWorkflowResult(result: any): AgentBuilderActionResult;
    /**
     * Creates a transform stream that parses binary chunks into JSON records.
     */
    private createRecordParserTransform;
    /**
     * Creates a new agent builder action run and returns the runId.
     * This calls `/api/agent-builder/:actionId/create-run`.
     */
    createRun(params?: {
        runId?: string;
    }): Promise<{
        runId: string;
    }>;
    /**
     * Starts agent builder action asynchronously and waits for completion.
     * This calls `/api/agent-builder/:actionId/start-async`.
     */
    startAsync(params: AgentBuilderActionRequest, runId?: string): Promise<AgentBuilderActionResult>;
    /**
     * Starts an existing agent builder action run.
     * This calls `/api/agent-builder/:actionId/start`.
     */
    startActionRun(params: AgentBuilderActionRequest, runId: string): Promise<{
        message: string;
    }>;
    /**
     * Resumes a suspended agent builder action step.
     * This calls `/api/agent-builder/:actionId/resume`.
     */
    resume(params: {
        step?: string | string[];
        resumeData?: unknown;
        requestContext?: RequestContext;
    }, runId: string): Promise<{
        message: string;
    }>;
    /**
     * Resumes a suspended agent builder action step asynchronously.
     * This calls `/api/agent-builder/:actionId/resume-async`.
     */
    resumeAsync(params: {
        step?: string | string[];
        resumeData?: unknown;
        requestContext?: RequestContext;
    }, runId: string): Promise<AgentBuilderActionResult>;
    /**
     * Creates an async generator that processes a readable stream and yields action records
     * separated by the Record Separator character (\x1E)
     *
     * @param stream - The readable stream to process
     * @returns An async generator that yields parsed records
     */
    private streamProcessor;
    /**
     * Streams agent builder action progress in real-time.
     * This calls `/api/agent-builder/:actionId/stream`.
     */
    stream(params: AgentBuilderActionRequest, runId?: string): Promise<import("stream/web").ReadableStream<{
        type: string;
        payload: any;
    }>>;
    /**
     * Observes an existing agent builder action run stream.
     * Replays cached execution from the beginning, then continues with live stream.
     * This is the recommended method for recovery after page refresh/hot reload.
     * This calls `/api/agent-builder/:actionId/observe`
     */
    observeStream(params: {
        runId: string;
    }): Promise<import("stream/web").ReadableStream<{
        type: string;
        payload: any;
    }>>;
    /**
     * Observes an existing agent builder action run stream using legacy streaming API.
     * Replays cached execution from the beginning, then continues with live stream.
     * This calls `/api/agent-builder/:actionId/observe-stream-legacy`.
     */
    observeStreamLegacy(params: {
        runId: string;
    }): Promise<import("stream/web").ReadableStream<{
        type: string;
        payload: any;
    }>>;
    /**
     * Resumes a suspended agent builder action and streams the results.
     * This calls `/api/agent-builder/:actionId/resume-stream`.
     */
    resumeStream(params: {
        runId: string;
        step: string | string[];
        resumeData?: unknown;
        requestContext?: RequestContext;
    }): Promise<ReadableStream>;
    /**
     * Gets a specific action run by its ID.
     * This calls `/api/agent-builder/:actionId/runs/:runId`.
     * @param runId - The ID of the action run to retrieve
     * @param options - Optional configuration
     * @param options.fields - Optional array of fields to return (e.g., ['result', 'steps']). Available fields: result, error, payload, steps, activeStepsPath, serializedStepGraph. Metadata fields (runId, workflowName, resourceId, createdAt, updatedAt) and status are always included.
     * @param options.withNestedWorkflows - Whether to include nested workflow data in steps. Defaults to true. Set to false for better performance when you don't need nested workflow details.
     * @returns Promise containing the action run details with metadata and processed execution state
     */
    runById(runId: string, options?: {
        fields?: string[];
        withNestedWorkflows?: boolean;
    }): Promise<unknown>;
    /**
     * Gets details about this agent builder action.
     * This calls `/api/agent-builder/:actionId`.
     */
    details(): Promise<WorkflowInfo>;
    /**
     * Gets all runs for this agent builder action.
     * This calls `/api/agent-builder/:actionId/runs`.
     */
    runs(params?: ListWorkflowRunsParams): Promise<unknown>;
    /**
     * Cancels an agent builder action run.
     * This calls `/api/agent-builder/:actionId/runs/:runId/cancel`.
     */
    cancelRun(runId: string): Promise<{
        message: string;
    }>;
}
//# sourceMappingURL=agent-builder.d.ts.map