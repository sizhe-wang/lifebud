# Core API Reference

> API reference for core - 32 entries


---

## Reference: Mastra Class

> Documentation for the `Mastra` class in Mastra, the core entry point for managing agents, workflows, MCP servers, and server endpoints.

The `Mastra` class is the central orchestrator in any Mastra application, managing agents, workflows, storage, logging, observability, and more. Typically, you create a single instance of `Mastra` to coordinate your application.

Think of `Mastra` as a top-level registry where you register agents, workflows, tools, and other components that need to be accessible throughout your application.

## Usage example

```typescript title="src/mastra/index.ts"
import { Mastra } from "@mastra/core";
import { PinoLogger } from "@mastra/loggers";
import { LibSQLStore } from "@mastra/libsql";
import { weatherWorkflow } from "./workflows/weather-workflow";
import { weatherAgent } from "./agents/weather-agent";

export const mastra = new Mastra({
  workflows: { weatherWorkflow },
  agents: { weatherAgent },
  storage: new LibSQLStore({
    id: 'mastra-storage',
    url: ":memory:",
  }),
  logger: new PinoLogger({
    name: "Mastra",
    level: "info",
  }),
});
```

## Constructor parameters

Visit the [Configuration reference](https://mastra.ai/reference/v1/configuration) for detailed documentation on all available configuration options.

---

## Reference: MastraModelGateway

> Base class for creating custom model gateways

Abstract base class for implementing custom model gateways. Gateways handle provider-specific logic for accessing language models, including provider configuration, authentication, URL construction, and model instantiation.

## Class Overview

```typescript
import { MastraModelGateway, type ProviderConfig } from '@mastra/core/llm';
import { createOpenAICompatible } from '@ai-sdk/openai-compatible-v5';
import type { LanguageModelV2 } from '@ai-sdk/provider-v5';

class MyCustomGateway extends MastraModelGateway {
  readonly id = 'custom';
  readonly name = 'My Custom Gateway';

  async fetchProviders(): Promise<Record<string, ProviderConfig>> {
    return {
      'my-provider': {
        name: 'My Provider',
        models: ['model-1', 'model-2'],
        apiKeyEnvVar: 'MY_API_KEY',
        gateway: this.id,
      },
    };
  }

  buildUrl(modelId: string, envVars?: Record<string, string>): string {
    return 'https://api.my-provider.com/v1';
  }

  async getApiKey(modelId: string): Promise<string> {
    const apiKey = process.env.MY_API_KEY;
    if (!apiKey) throw new Error('MY_API_KEY not set');
    return apiKey;
  }

  async resolveLanguageModel({
    modelId,
    providerId,
    apiKey,
  }: {
    modelId: string;
    providerId: string;
    apiKey: string;
  }): Promise<LanguageModelV2> {
    const baseURL = this.buildUrl(`${providerId}/${modelId}`);
    return createOpenAICompatible({
      name: providerId,
      apiKey,
      baseURL,
    }).chatModel(modelId);
  }
}
```

## Required Properties

## Required Methods

### fetchProviders()

Fetches provider configurations from the gateway.

**Returns:** `Promise<Record<string, ProviderConfig>>`

**ProviderConfig Structure:**

### buildUrl()

Builds the API URL for a specific model/provider combination.

**Parameters:**

**Returns:** `string | undefined | Promise<string | undefined>`

### getApiKey()

Retrieves the API key for authentication.

**Parameters:**

**Returns:** `Promise<string>`

### resolveLanguageModel()

Creates a language model instance.

**Parameters:**

**Returns:** `Promise<LanguageModelV2> | LanguageModelV2`

## Instance Methods

### getId()

Returns the gateway's unique identifier.

**Returns:** `string` - The gateway's `id` property

## Model ID Format

For true gateways, the gateway ID is used as a prefix and models are accessed using this format:

```
[gateway-id]/[provider]/[model]
```

Examples:
- Gateway with `id = 'custom'`: `'custom/my-provider/model-1'`

## Built-in Implementations

- **NetlifyGateway** - Netlify AI Gateway integration
- **ModelsDevGateway** - Registry of OpenAI-compatible providers

## Related

- [Custom Gateways Guide](https://mastra.ai/models/v1/gateways/custom-gateways) - Complete guide to creating custom gateways
- [Mastra.addGateway()](https://mastra.ai/reference/v1/core/addGateway) - Add a gateway to Mastra
- [Mastra.getGateway()](https://mastra.ai/reference/v1/core/getGateway) - Get gateway by registration key
- [Mastra.getGatewayById()](https://mastra.ai/reference/v1/core/getGatewayById) - Get gateway by ID
- [Mastra.listGateways()](https://mastra.ai/reference/v1/core/listGateways) - List all gateways

---

## Reference: Mastra.addGateway()

> Add a gateway to the Mastra instance

Dynamically adds a gateway to the Mastra instance. Can be used during or after initialization.

## Usage example

```typescript
import { Mastra } from '@mastra/core';

const mastra = new Mastra();

// Add with explicit key
mastra.addGateway(new MyCustomGateway(), 'myGateway');

// Add using gateway's ID as the key
mastra.addGateway(new MyCustomGateway());
// Stored with key 'my-custom-gateway' (the gateway's id)
```

## Parameters

## Returns

Void. The gateway is added to the internal registry.

## Behavior

- If a gateway with the same key already exists, the addition is skipped
- In development mode (`MASTRA_DEV=true`), automatically triggers type generation for custom gateways
- The gateway becomes available immediately for model resolution

## Related

- [Mastra.getGateway()](https://mastra.ai/reference/v1/core/getGateway) - Get gateway by registration key
- [Mastra.getGatewayById()](https://mastra.ai/reference/v1/core/getGatewayById) - Get gateway by ID
- [Mastra.listGateways()](https://mastra.ai/reference/v1/core/listGateways) - List all gateways
- [MastraModelGateway](https://mastra.ai/reference/v1/core/mastra-model-gateway) - Gateway base class
- [Custom Gateways Guide](https://mastra.ai/models/v1/gateways/custom-gateways) - Creating custom gateways

---

## Reference: Mastra.getAgent()

> Documentation for the `Agent.getAgent()` method in Mastra, which retrieves an agent by name.

The `.getAgent()` method is used to retrieve an agent. The method accepts a single `string` parameter for the agent's name.

## Usage example

```typescript
mastra.getAgent("testAgent");
```

## Parameters

## Returns

## Related

- [Agents overview](https://mastra.ai/docs/v1/agents/overview)

---

## Reference: Mastra.getAgentById()

> Documentation for the `Mastra.getAgentById()` method in Mastra, which retrieves an agent by its ID.

The `.getAgentById()` method is used to retrieve an agent by its ID. The method accepts a single `string` parameter for the agent's ID.

## Usage example

```typescript
mastra.getAgentById("test-agent-123");
```

## Parameters

## Returns

## Related

- [Agents overview](https://mastra.ai/docs/v1/agents/overview)

---

## Reference: Mastra.getDeployer()

> Documentation for the `Mastra.getDeployer()` method in Mastra, which retrieves the configured deployer instance.

The `.getDeployer()` method is used to retrieve the deployer instance that has been configured in the Mastra instance.

## Usage example

```typescript
mastra.getDeployer();
```

## Parameters

This method does not accept any parameters.

## Returns

## Related

- [Deployment overview](https://mastra.ai/docs/v1/deployment/overview)
- [Deployer reference](https://mastra.ai/reference/v1/deployer/)

---

## Reference: Mastra.getGateway()

> Retrieve a registered gateway by its registration key

Retrieves a gateway by its registration key (the key used when adding the gateway to Mastra).

## Usage example

```typescript
import { Mastra } from '@mastra/core';

const mastra = new Mastra({
  gateways: {
    myGateway: new MyCustomGateway(),
  },
});

const gateway = mastra.getGateway('myGateway');
console.log(gateway.name); // 'My Custom Gateway'
```

## Parameters

## Returns

## Throws

Throws an error if no gateway is found with the specified key.

## Related

- [Mastra.getGatewayById()](https://mastra.ai/reference/v1/core/getGatewayById) - Get gateway by ID
- [Mastra.listGateways()](https://mastra.ai/reference/v1/core/listGateways) - List all gateways
- [Mastra.addGateway()](https://mastra.ai/reference/v1/core/addGateway) - Add a gateway
- [MastraModelGateway](https://mastra.ai/reference/v1/core/mastra-model-gateway) - Gateway base class
- [Custom Gateways Guide](https://mastra.ai/models/v1/gateways/custom-gateways) - Creating custom gateways

---

## Reference: Mastra.getGatewayById()

> Retrieve a registered gateway by its unique ID

Retrieves a gateway by its unique ID (the `id` property of the gateway instance). This is useful when you need to find a gateway by its intrinsic identifier rather than its registration key.

## Usage example

```typescript
import { Mastra } from '@mastra/core';

const mastra = new Mastra({
  gateways: {
    customKey: new MyCustomGateway(), // id = 'my-custom-gateway'
  },
});

// Retrieve by ID (not registration key)
const gateway = mastra.getGatewayById('my-custom-gateway');
console.log(gateway.name); // 'My Custom Gateway'
```

## Use Cases

- Gateway versioning: Different versions with unique IDs (`'gateway-v1'`, `'gateway-v2'`)
- Finding gateways when registration keys are unknown
- Identifying gateways across different Mastra instances

## Parameters

## Returns

## Related

- [Mastra.getGateway()](https://mastra.ai/reference/v1/core/getGateway) - Get gateway by registration key
- [Mastra.listGateways()](https://mastra.ai/reference/v1/core/listGateways) - List all gateways
- [Mastra.addGateway()](https://mastra.ai/reference/v1/core/addGateway) - Add a gateway
- [MastraModelGateway](https://mastra.ai/reference/v1/core/mastra-model-gateway) - Gateway base class
- [Custom Gateways Guide](https://mastra.ai/models/v1/gateways/custom-gateways) - Creating custom gateways

---

## Reference: Mastra.getLogger()

> Documentation for the `Mastra.getLogger()` method in Mastra, which retrieves the configured logger instance.

The `.getLogger()` method is used to retrieve the logger instance that has been configured in the Mastra instance.

## Usage example

```typescript
mastra.getLogger();
```

## Parameters

This method does not accept any parameters.

## Returns

## Related

- [Logging overview](https://mastra.ai/docs/v1/observability/logging)
- [Logger reference](https://mastra.ai/reference/v1/logging/pino-logger)

---

## Reference: Mastra.getMCPServer()

> Documentation for the `Mastra.getMCPServer()` method in Mastra, which retrieves a specific MCP server instance by ID and optional version.

The `.getMCPServer()` method retrieves an MCP server instance by its registry key (the key used when registering the server in the `mcpServers` configuration). For retrieving by the server's intrinsic `id` property, use `.getMCPServerById()` instead.

## Usage example

```typescript
// Register an MCP server with a registry key
const myServer = new MCPServer({
  id: 'my-mcp-server',
  name: 'My Server',
  version: '1.0.0',
  tools: { /* ... */ },
});

export const mastra = new Mastra({
  mcpServers: {
    customKey: myServer,  // 'customKey' is the registry key
  },
});

// Retrieve by registry key
const server = mastra.getMCPServer('customKey');

// Alternatively, retrieve by intrinsic ID
const serverById = mastra.getMCPServerById('my-mcp-server');
```

## Parameters

## Returns

## Related Methods

- [Mastra.getMCPServerById()](https://mastra.ai/reference/v1/core/getMCPServerById) - Retrieve an MCP server by its intrinsic `id` property
- [Mastra.listMCPServers()](https://mastra.ai/reference/v1/core/listMCPServers) - List all registered MCP servers

## See Also

- [MCP overview](https://mastra.ai/docs/v1/mcp/overview)
- [MCP server reference](https://mastra.ai/reference/v1/tools/mcp-server)

---

## Reference: Mastra.getMCPServerById()

> Documentation for the `Mastra.getMCPServerById()` method in Mastra, which retrieves a specific MCP server instance by its intrinsic id property.

The `.getMCPServerById()` method retrieves an MCP server instance by its intrinsic `id` property. For retrieving by registry key (the key used in configuration), use `.getMCPServer()` instead.

## Usage example

```typescript
// Register an MCP server with a registry key
const myServer = new MCPServer({
  id: 'my-mcp-server',
  name: 'My Server',
  version: '1.0.0',
  tools: { /* ... */ },
});

export const mastra = new Mastra({
  mcpServers: {
    customKey: myServer,  // 'customKey' is the registry key
  },
});

// Retrieve by intrinsic ID
const server = mastra.getMCPServerById('my-mcp-server');

// Alternatively, retrieve by registry key
const serverByKey = mastra.getMCPServer('customKey');
```

## Parameters

## Returns

## Notes

- The server's `id` is slugified during construction, so `'myMcpServer'` becomes `'my-mcp-server'`
- If multiple servers have the same `id` but different versions, you must provide the `version` parameter to disambiguate
- If no `version` is provided and multiple versions exist, the method returns the first match

## Related Methods

- [Mastra.getMCPServer()](https://mastra.ai/reference/v1/core/getMCPServer) - Retrieve an MCP server by its registry key
- [Mastra.listMCPServers()](https://mastra.ai/reference/v1/core/listMCPServers) - List all registered MCP servers

## See Also

- [MCP overview](https://mastra.ai/docs/v1/mcp/overview)
- [MCP server reference](https://mastra.ai/reference/v1/tools/mcp-server)

---

## Reference: Mastra.getMemory()

> Documentation for the `Mastra.getMemory()` method in Mastra, which retrieves a registered memory instance by its registry key.

The `.getMemory()` method retrieves a memory instance from the Mastra registry by its key. Memory instances are registered in the Mastra constructor and can be referenced by stored agents.

## Usage example

```typescript
const memory = mastra.getMemory("conversationMemory");

// Use the memory instance
const thread = await memory.createThread({
  resourceId: "user-123",
  title: "New Conversation",
});
```

## Parameters

## Returns

## Example: Registering and Retrieving Memory

```typescript
import { Mastra } from "@mastra/core";
import { Memory } from "@mastra/memory";
import { LibSQLStore } from "@mastra/libsql";

const conversationMemory = new Memory({
  storage: new LibSQLStore({ id: 'conversation-store', url: ":memory:" }),
});

const mastra = new Mastra({
  memory: {
    conversationMemory,
  },
});

// Later, retrieve the memory instance
const memory = mastra.getMemory("conversationMemory");
```

## Related

- [Mastra.listMemory()](https://mastra.ai/reference/v1/core/listMemory)
- [Memory overview](https://mastra.ai/docs/v1/memory/overview)
- [Agent Memory](https://mastra.ai/docs/v1/agents/agent-memory)

---

## Reference: getScorer()

> Documentation for the `getScorer()` method in Mastra, which retrieves a specific scorer by its registration key.

The `getScorer()` method retrieves a specific scorer that was registered with the Mastra instance using its registration key. This method provides type-safe access to scorers and throws an error if the requested scorer is not found.

## Usage Example

```typescript
import { mastra } from "./mastra";

// Get a specific scorer by key
const relevancyScorer = mastra.getScorer("relevancyScorer");

const weatherAgent = mastra.getAgent("weatherAgent");

// Use the scorer to evaluate an AI output
await weatherAgent.generate("What is the weather in Rome", {
  scorers: {
    answerRelevancy: {
      scorer: relevancyScorer,
    },
  },
});
```

## Parameters

## Returns

## Error Handling

This method throws a `MastraError` if:

- The scorer with the specified key is not found
- No scorers are registered with the Mastra instance

```typescript
try {
  const scorer = mastra.getScorer("nonExistentScorer");
} catch (error) {
  if (error.id === "MASTRA_GET_SCORER_NOT_FOUND") {
    console.log("Scorer not found, using default evaluation");
  }
}
```

## Related

- [listScorers()](https://mastra.ai/reference/v1/core/listScorers) - Get all registered scorers
- [getScorerById()](https://mastra.ai/reference/v1/core/getScorerById) - Get a scorer by its id property
- [Custom Scorers](https://mastra.ai/docs/v1/evals/custom-scorers) - Learn how to create custom scorers

---

## Reference: getScorerById()

> Documentation for the `getScorerById()` method in Mastra, which retrieves a scorer by its id property rather than registration key.

The `getScorerById()` method retrieves a scorer by searching for its `id` property (or `name` property as a fallback) rather than the registration key. This is useful when you know the scorer's id but not necessarily how it was registered in the Mastra instance.

## Usage Example

```typescript
import { mastra } from "./mastra";

// Get a scorer by its id property
const relevancyScorer = mastra.getScorerById("answer-relevancy-scorer");

const weatherAgent = mastra.getAgent("weatherAgent");

// Use the scorer to evaluate an AI output
await weatherAgent.generate("What is the weather in Rome", {
  scorers: {
    answerRelevancy: {
      scorer: relevancyScorer,
    },
  },
});
```

## Parameters

## Returns

## Error Handling

This method throws a `MastraError` if:

- No scorer with the specified id is found
- No scorers are registered with the Mastra instance

```typescript
try {
  const scorer = mastra.getScorerById("non-existent-scorer");
} catch (error) {
  if (error.id === "MASTRA_GET_SCORER_BY_ID_NOT_FOUND") {
    console.log("Scorer with that id not found");
  }
}
```

## Related

- [getScorer()](https://mastra.ai/reference/v1/core/getScorer) - Get a scorer by its registration key
- [listScorers()](https://mastra.ai/reference/v1/core/listScorers) - Get all registered scorers
- [createScorer()](https://mastra.ai/reference/v1/evals/create-scorer) - Learn how to create scorers with ids

---

## Reference: Mastra.getServer()

> Documentation for the `Mastra.getServer()` method in Mastra, which retrieves the configured server configuration.

The `.getServer()` method is used to retrieve the server configuration that has been configured in the Mastra instance.

## Usage example

```typescript
mastra.getServer();
```

## Parameters

This method does not accept any parameters.

## Returns

## Related

- [Server deployment](https://mastra.ai/docs/v1/deployment/mastra-server)
- [Server configuration](https://mastra.ai/docs/v1/server/custom-api-routes)

---

## Reference: Mastra.getStorage()

> Documentation for the `Mastra.getStorage()` method in Mastra, which retrieves the configured storage instance.

The `.getStorage()` method is used to retrieve the storage instance that has been configured in the Mastra instance.

## Usage example

```typescript
mastra.getStorage();
```

## Parameters

This method does not accept any parameters.

## Returns

## Related

- [Storage overview](https://mastra.ai/reference/v1/storage/overview)
- [Storage reference](https://mastra.ai/reference/v1/storage/libsql)

---

## Reference: Mastra.getStoredAgentById()

> Documentation for the `Mastra.getStoredAgentById()` method in Mastra, which retrieves an agent from storage and creates an executable Agent instance.

The `.getStoredAgentById()` method retrieves an agent configuration from storage by its ID and creates an executable `Agent` instance. Stored agents allow you to persist agent configurations in a database and dynamically load them at runtime.

## Usage example

```typescript
// Get an Agent instance from storage
const agent = await mastra.getStoredAgentById("my-stored-agent");

if (agent) {
  const response = await agent.generate({ messages: "Hello!" });
  console.log(response.text);
}
```

```typescript
// Get the raw storage data instead of an Agent instance
const storedConfig = await mastra.getStoredAgentById("my-stored-agent", { raw: true });

if (storedConfig) {
  console.log(storedConfig.instructions);
  console.log(storedConfig.createdAt);
}
```

## Parameters

### Options

## Returns

## Primitive Resolution

When creating an `Agent` instance from stored configuration, the method resolves references to registered primitives:

- **Tools**: Resolved from `tools` registered in Mastra config
- **Workflows**: Resolved from `workflows` registered in Mastra config
- **Sub-agents**: Resolved from `agents` registered in Mastra config
- **Memory**: Resolved from `memory` registered in Mastra config
- **Scorers**: Resolved from `scorers` registered in Mastra config, including sampling configuration

If a referenced primitive is not found in the registry, a warning is logged but the agent is still created.

## StorageAgentType

When using `raw: true`, the returned object has the following structure:

## Related

- [Mastra.listStoredAgents()](https://mastra.ai/reference/v1/core/listStoredAgents)
- [Storage overview](https://mastra.ai/reference/v1/storage/overview)
- [Agents overview](https://mastra.ai/docs/v1/agents/overview)

---

## Reference: Mastra.getTelemetry()

> Documentation for the `Mastra.getTelemetry()` method in Mastra, which retrieves the configured telemetry instance.

The `.getTelemetry()` method is used to retrieve the telemetry instance that has been configured in the Mastra instance.

## Usage example

```typescript
mastra.getTelemetry();
```

## Parameters

This method does not accept any parameters.

## Returns

## Related

- [Tracing](https://mastra.ai/docs/v1/observability/tracing/overview)
- [Observability Configuration](https://mastra.ai/reference/v1/observability/tracing/configuration)

---

## Reference: Mastra.getVector()

> Documentation for the `Mastra.getVector()` method in Mastra, which retrieves a vector store by name.

The `.getVector()` method is used to retrieve a vector store by its name. The method accepts a single `string` parameter for the vector store's name.

## Usage example

```typescript
mastra.getVector("testVectorStore");
```

## Parameters

## Returns

## Related

- [Vector stores overview](https://mastra.ai/docs/v1/rag/vector-databases)
- [RAG overview](https://mastra.ai/docs/v1/rag/overview)

---

## Reference: Mastra.getWorkflow()

> Documentation for the `Mastra.getWorkflow()` method in Mastra, which retrieves a workflow by ID.

The `.getWorkflow()` method is used to retrieve a workflow by its ID. The method accepts a workflow ID and an optional options object.

## Usage example

```typescript
mastra.getWorkflow("testWorkflow");
```

## Parameters

## Returns

## Related

- [Workflows overview](https://mastra.ai/docs/v1/workflows/overview)

---

## Reference: Mastra.listAgents()

> Documentation for the `Mastra.listAgents()` method in Mastra, which retrieves all configured agents.

The `.listAgents()` method is used to retrieve all agents that have been configured in the Mastra instance.

## Usage example

```typescript
mastra.listAgents();
```

## Parameters

This method does not accept any parameters.

## Returns

## Related

- [Agents overview](https://mastra.ai/docs/v1/agents/overview)

---

## Reference: Mastra.listGateways()

> List all registered gateways

Returns a record of all registered gateways, indexed by their registration keys.

## Usage example

```typescript
import { Mastra } from '@mastra/core';

const mastra = new Mastra({
  gateways: {
    myGateway: new MyCustomGateway(),
    anotherGateway: new AnotherGateway(),
  },
});

const gateways = mastra.listGateways();
console.log(Object.keys(gateways)); // ['myGateway', 'anotherGateway']

// Iterate over all gateways
for (const [key, gateway] of Object.entries(gateways)) {
  console.log(`${key}: ${gateway.name}`);
}
```

## Parameters

None.

## Returns

## Related

- [Mastra.getGateway()](https://mastra.ai/reference/v1/core/getGateway) - Get gateway by registration key
- [Mastra.getGatewayById()](https://mastra.ai/reference/v1/core/getGatewayById) - Get gateway by ID
- [Mastra.addGateway()](https://mastra.ai/reference/v1/core/addGateway) - Add a gateway
- [MastraModelGateway](https://mastra.ai/reference/v1/core/mastra-model-gateway) - Gateway base class
- [Custom Gateways Guide](https://mastra.ai/models/v1/gateways/custom-gateways) - Creating custom gateways

---

## Reference: Mastra.listLogs()

> Documentation for the `Mastra.listLogs()` method in Mastra, which retrieves all logs for a specific transport ID.

The `.listLogs()` method is used to retrieve all logs for a specific transport ID. This method requires a configured logger that supports the `listLogs` operation.

## Usage example

```typescript
mastra.listLogs("456");
```

## Parameters

### Options

## Returns

## Related

- [Logging overview](https://mastra.ai/docs/v1/observability/logging)
- [Logger reference](https://mastra.ai/reference/v1/logging/pino-logger)

---

## Reference: Mastra.listLogsByRunId()

> Documentation for the `Mastra.listLogsByRunId()` method in Mastra, which retrieves logs for a specific run ID and transport ID.

The `.listLogsByRunId()` method is used to retrieve logs for a specific run ID and transport ID. This method requires a configured logger that supports the `listLogsByRunId` operation.

## Usage example

```typescript
mastra.listLogsByRunId({ runId: "123", transportId: "456" });
```

## Parameters

## Returns

## Related

- [Logging overview](https://mastra.ai/docs/v1/observability/logging)
- [Logger reference](https://mastra.ai/reference/v1/logging/pino-logger)

---

## Reference: Mastra.listMCPServers()

> Documentation for the `Mastra.listMCPServers()` method in Mastra, which retrieves all registered MCP server instances.

The `.listMCPServers()` method is used to retrieve all MCP server instances that have been registered in the Mastra instance. The returned record uses registry keys (the keys from the `mcpServers` configuration) as keys.

## Usage example

```typescript
// Register MCP servers
const server1 = new MCPServer({
  id: 'server-one',
  name: 'Server One',
  version: '1.0.0',
  tools: { /* ... */ },
});

const server2 = new MCPServer({
  id: 'server-two',
  name: 'Server Two',
  version: '1.0.0',
  tools: { /* ... */ },
});

export const mastra = new Mastra({
  mcpServers: {
    firstServer: server1,   // Registry key: 'firstServer'
    secondServer: server2,  // Registry key: 'secondServer'
  },
});

// List all registered servers
const servers = mastra.listMCPServers();
// Returns: { firstServer: MCPServerBase, secondServer: MCPServerBase }
```

## Parameters

This method does not accept any parameters.

## Returns

## Related Methods

- [Mastra.getMCPServer()](https://mastra.ai/reference/v1/core/getMCPServer) - Retrieve an MCP server by its registry key
- [Mastra.getMCPServerById()](https://mastra.ai/reference/v1/core/getMCPServerById) - Retrieve an MCP server by its intrinsic `id` property

## See Also

- [MCP overview](https://mastra.ai/docs/v1/mcp/overview)
- [MCP server reference](https://mastra.ai/reference/v1/tools/mcp-server)

---

## Reference: Mastra.listMemory()

> Documentation for the `Mastra.listMemory()` method in Mastra, which returns all registered memory instances.

The `.listMemory()` method returns all memory instances registered with the Mastra instance.

## Usage example

```typescript
const memoryInstances = mastra.listMemory();

for (const [key, memory] of Object.entries(memoryInstances)) {
  console.log(`Memory "${key}": ${memory.id}`);
}
```

## Parameters

This method takes no parameters.

## Returns

## Example: Checking Registered Memory

```typescript
import { Mastra } from "@mastra/core";
import { Memory } from "@mastra/memory";
import { LibSQLStore } from "@mastra/libsql";

const conversationMemory = new Memory({
  id: "conversation-memory",
  storage: new LibSQLStore({ id: 'conversation-store', url: ":memory:" }),
});

const analyticsMemory = new Memory({
  id: "analytics-memory",
  storage: new LibSQLStore({ id: 'analytics-store', url: ":memory:" }),
});

const mastra = new Mastra({
  memory: {
    conversationMemory,
    analyticsMemory,
  },
});

// List all registered memory instances
const allMemory = mastra.listMemory();
console.log(Object.keys(allMemory)); // ["conversationMemory", "analyticsMemory"]
```

## Related

- [Mastra.getMemory()](https://mastra.ai/reference/v1/core/getMemory)
- [Memory overview](https://mastra.ai/docs/v1/memory/overview)
- [Agent Memory](https://mastra.ai/docs/v1/agents/agent-memory)

---

## Reference: listScorers()

> Documentation for the `listScorers()` method in Mastra, which returns all registered scorers for evaluating AI outputs.

The `listScorers()` method returns all scorers that have been registered with the Mastra instance. Scorers are used for evaluating AI outputs and can override default scorers during agent generation or workflow execution.

## Usage Example

```typescript
import { mastra } from "./mastra";

// Get all registered scorers
const allScorers = mastra.listScorers();

// Access a specific scorer
const myScorer = allScorers.relevancyScorer;
```

## Parameters

This method takes no parameters.

## Returns

## Related

- [getScorer()](https://mastra.ai/reference/v1/core/getScorer) - Get a specific scorer by key
- [getScorerById()](https://mastra.ai/reference/v1/core/getScorerById) - Get a scorer by its id property
- [Scorers Overview](https://mastra.ai/docs/v1/evals/overview) - Learn about creating and using scorers

---

## Reference: Mastra.listStoredAgents()

> Documentation for the `Mastra.listStoredAgents()` method in Mastra, which retrieves a paginated list of agents from storage.

The `.listStoredAgents()` method retrieves a paginated list of agent configurations from storage. By default, it returns executable `Agent` instances, but can also return raw storage data.

## Usage example

```typescript
// Get Agent instances from storage
const { agents, total, hasMore } = await mastra.listStoredAgents();

for (const agent of agents) {
  console.log(agent.id, agent.name);
  // Each agent is ready to use
  // const response = await agent.generate({ messages: "Hello!" });
}
```

```typescript
// Get paginated results with raw storage data
const result = await mastra.listStoredAgents({
  page: 0,
  perPage: 10,
  raw: true,
});

console.log(`Showing ${result.agents.length} of ${result.total} agents`);
console.log(`Has more: ${result.hasMore}`);

for (const config of result.agents) {
  console.log(config.id, config.name, config.createdAt);
}
```

## Parameters

### Args Options

## Returns

## Primitive Resolution

When creating `Agent` instances (default behavior), each stored agent's configuration is resolved against registered primitives:

- **Tools**: Resolved from `tools` registered in Mastra config
- **Workflows**: Resolved from `workflows` registered in Mastra config
- **Sub-agents**: Resolved from `agents` registered in Mastra config
- **Memory**: Resolved from `memory` registered in Mastra config
- **Scorers**: Resolved from `scorers` registered in Mastra config

If a referenced primitive is not found, a warning is logged but the agent is still created.

## Example: Iterating Through All Stored Agents

```typescript
async function getAllStoredAgents(mastra: Mastra) {
  const allAgents: Agent[] = [];
  let page = 0;
  let hasMore = true;

  while (hasMore) {
    const result = await mastra.listStoredAgents({ page, perPage: 50 });
    allAgents.push(...result.agents);
    hasMore = result.hasMore;
    page++;
  }

  return allAgents;
}
```

## Related

- [Mastra.getStoredAgentById()](https://mastra.ai/reference/v1/core/getStoredAgentById)
- [Storage overview](https://mastra.ai/reference/v1/storage/overview)
- [Agents overview](https://mastra.ai/docs/v1/agents/overview)

---

## Reference: Mastra.listVectors()

> Documentation for the `Mastra.listVectors()` method in Mastra, which retrieves all configured vector stores.

The `.listVectors()` method is used to retrieve all vector stores that have been configured in the Mastra instance.

## Usage example

```typescript
mastra.listVectors();
```

## Parameters

This method does not accept any parameters.

## Returns

## Related

- [Vector stores overview](https://mastra.ai/docs/v1/rag/vector-databases)
- [RAG overview](https://mastra.ai/docs/v1/rag/overview)

---

## Reference: Mastra.listWorkflows()

> Documentation for the `Mastra.listWorkflows()` method in Mastra, which retrieves all configured workflows.

The `.listWorkflows()` method is used to retrieve all workflows that have been configured in the Mastra instance. The method accepts an optional options object.

## Usage example

```typescript
mastra.listWorkflows();
```

## Parameters

## Returns

## Related

- [Workflows overview](https://mastra.ai/docs/v1/workflows/overview)

---

## Reference: Mastra.setLogger()

> Documentation for the `Mastra.setLogger()` method in Mastra, which sets the logger for all components (agents, workflows, etc.).

The `.setLogger()` method is used to set the logger for all components (agents, workflows, etc.) in the Mastra instance. This method accepts a single object parameter with a logger property.

## Usage example

```typescript
mastra.setLogger({ logger: new PinoLogger({ name: "testLogger" }) });
```

## Parameters

### Options

## Returns

This method does not return a value.

## Related

- [Logging overview](https://mastra.ai/docs/v1/observability/logging)
- [Logger reference](https://mastra.ai/reference/v1/logging/pino-logger)

---

## Reference: Mastra.setStorage()

> Documentation for the `Mastra.setStorage()` method in Mastra, which sets the storage instance for the Mastra instance.

The `.setStorage()` method is used to set the storage instance for the Mastra instance. This method accepts a single `MastraStorage` parameter.

## Usage example

```typescript
mastra.setStorage(
  new LibSQLStore({
    id: 'mastra-storage',
    url: ":memory:",
  }),
);
```

## Parameters

## Returns

This method does not return a value.

## Related

- [Storage overview](https://mastra.ai/reference/v1/storage/overview)
- [Storage reference](https://mastra.ai/reference/v1/storage/libsql)