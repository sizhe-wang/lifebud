# Core API Reference

> API reference for core - 3 entries


---

## Reference: Mastra Class

> Documentation for the `Mastra` class in Mastra, the core entry point for managing agents, workflows, MCP servers, and server endpoints.

The `Mastra` class is the central orchestrator in any Mastra application, managing agents, workflows, storage, logging, observability, and more. Typically, you create a single instance of `Mastra` to coordinate your application.

Think of `Mastra` as a top-level registry where you register agents, workflows, tools, and other components that need to be accessible throughout your application.

## Usage example

```typescript title="src/mastra/index.ts"
import { Mastra } from "@mastra/core";
import { PinoLogger } from "@mastra/loggers";
import { LibSQLStore } from "@mastra/libsql";
import { weatherWorkflow } from "./workflows/weather-workflow";
import { weatherAgent } from "./agents/weather-agent";

export const mastra = new Mastra({
  workflows: { weatherWorkflow },
  agents: { weatherAgent },
  storage: new LibSQLStore({
    id: 'mastra-storage',
    url: ":memory:",
  }),
  logger: new PinoLogger({
    name: "Mastra",
    level: "info",
  }),
});
```

## Constructor parameters

Visit the [Configuration reference](https://mastra.ai/reference/v1/configuration) for detailed documentation on all available configuration options.

---

## Reference: Mastra.getMemory()

> Documentation for the `Mastra.getMemory()` method in Mastra, which retrieves a registered memory instance by its registry key.

The `.getMemory()` method retrieves a memory instance from the Mastra registry by its key. Memory instances are registered in the Mastra constructor and can be referenced by stored agents.

## Usage example

```typescript
const memory = mastra.getMemory("conversationMemory");

// Use the memory instance
const thread = await memory.createThread({
  resourceId: "user-123",
  title: "New Conversation",
});
```

## Parameters

## Returns

## Example: Registering and Retrieving Memory

```typescript
import { Mastra } from "@mastra/core";
import { Memory } from "@mastra/memory";
import { LibSQLStore } from "@mastra/libsql";

const conversationMemory = new Memory({
  storage: new LibSQLStore({ id: 'conversation-store', url: ":memory:" }),
});

const mastra = new Mastra({
  memory: {
    conversationMemory,
  },
});

// Later, retrieve the memory instance
const memory = mastra.getMemory("conversationMemory");
```

## Related

- [Mastra.listMemory()](https://mastra.ai/reference/v1/core/listMemory)
- [Memory overview](https://mastra.ai/docs/v1/memory/overview)
- [Agent Memory](https://mastra.ai/docs/v1/agents/agent-memory)

---

## Reference: Mastra.listMemory()

> Documentation for the `Mastra.listMemory()` method in Mastra, which returns all registered memory instances.

The `.listMemory()` method returns all memory instances registered with the Mastra instance.

## Usage example

```typescript
const memoryInstances = mastra.listMemory();

for (const [key, memory] of Object.entries(memoryInstances)) {
  console.log(`Memory "${key}": ${memory.id}`);
}
```

## Parameters

This method takes no parameters.

## Returns

## Example: Checking Registered Memory

```typescript
import { Mastra } from "@mastra/core";
import { Memory } from "@mastra/memory";
import { LibSQLStore } from "@mastra/libsql";

const conversationMemory = new Memory({
  id: "conversation-memory",
  storage: new LibSQLStore({ id: 'conversation-store', url: ":memory:" }),
});

const analyticsMemory = new Memory({
  id: "analytics-memory",
  storage: new LibSQLStore({ id: 'analytics-store', url: ":memory:" }),
});

const mastra = new Mastra({
  memory: {
    conversationMemory,
    analyticsMemory,
  },
});

// List all registered memory instances
const allMemory = mastra.listMemory();
console.log(Object.keys(allMemory)); // ["conversationMemory", "analyticsMemory"]
```

## Related

- [Mastra.getMemory()](https://mastra.ai/reference/v1/core/getMemory)
- [Memory overview](https://mastra.ai/docs/v1/memory/overview)
- [Agent Memory](https://mastra.ai/docs/v1/agents/agent-memory)