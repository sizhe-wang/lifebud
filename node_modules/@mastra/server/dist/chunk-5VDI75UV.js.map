{"version":3,"sources":["../src/server/schemas/system.ts","../src/server/handlers/system.ts"],"names":[],"mappings":";;;;;AAEO,IAAM,mBAAA,GAAsB,EAAE,MAAA,CAAO;AAAA,EAC1C,IAAA,EAAM,EAAE,MAAA,EAAO;AAAA,EACf,OAAA,EAAS,EAAE,MAAA;AACb,CAAC,CAAA;AAEM,IAAM,4BAAA,GAA+B,EAAE,MAAA,CAAO;AAAA,EACnD,QAAA,EAAU,CAAA,CAAE,KAAA,CAAM,mBAAmB;AACvC,CAAC,CAAA;;;ACFM,IAAM,4BAA4B,WAAA,CAAY;AAAA,EACnD,MAAA,EAAQ,KAAA;AAAA,EACR,IAAA,EAAM,sBAAA;AAAA,EACN,YAAA,EAAc,MAAA;AAAA,EACd,cAAA,EAAgB,4BAAA;AAAA,EAChB,OAAA,EAAS,+BAAA;AAAA,EACT,WAAA,EAAa,qFAAA;AAAA,EACb,IAAA,EAAM,CAAC,QAAQ,CAAA;AAAA,EACf,SAAS,YAAY;AACnB,IAAA,IAAI;AACF,MAAA,MAAM,gBAAA,GAAmB,QAAQ,GAAA,CAAI,oBAAA;AAErC,MAAA,IAAI,WAA4B,EAAC;AAEjC,MAAA,IAAI,gBAAA,EAAkB;AACpB,QAAA,IAAI;AACF,UAAA,MAAM,WAAA,GAAc,YAAA,CAAa,gBAAA,EAAkB,OAAO,CAAA;AAC1D,UAAA,QAAA,GAAW,IAAA,CAAK,MAAM,WAAW,CAAA;AAAA,QACnC,CAAA,CAAA,MAAQ;AACN,UAAA,QAAA,GAAW,EAAC;AAAA,QACd;AAAA,MACF;AAEA,MAAA,OAAO,EAAE,QAAA,EAAS;AAAA,IACpB,SAAS,KAAA,EAAO;AACd,MAAA,OAAO,WAAA,CAAY,OAAO,+BAA+B,CAAA;AAAA,IAC3D;AAAA,EACF;AACF,CAAC","file":"chunk-5VDI75UV.js","sourcesContent":["import { z } from 'zod';\n\nexport const mastraPackageSchema = z.object({\n  name: z.string(),\n  version: z.string(),\n});\n\nexport const systemPackagesResponseSchema = z.object({\n  packages: z.array(mastraPackageSchema),\n});\n\nexport type MastraPackage = z.infer<typeof mastraPackageSchema>;\nexport type SystemPackagesResponse = z.infer<typeof systemPackagesResponseSchema>;\n","import { readFileSync } from 'node:fs';\n\nimport type { MastraPackage } from '../schemas/system';\nimport { systemPackagesResponseSchema } from '../schemas/system';\nimport { createRoute } from '../server-adapter/routes/route-builder';\nimport { handleError } from './error';\n\nexport const GET_SYSTEM_PACKAGES_ROUTE = createRoute({\n  method: 'GET',\n  path: '/api/system/packages',\n  responseType: 'json',\n  responseSchema: systemPackagesResponseSchema,\n  summary: 'Get installed Mastra packages',\n  description: 'Returns a list of all installed Mastra packages and their versions from the project',\n  tags: ['System'],\n  handler: async () => {\n    try {\n      const packagesFilePath = process.env.MASTRA_PACKAGES_FILE;\n\n      let packages: MastraPackage[] = [];\n\n      if (packagesFilePath) {\n        try {\n          const fileContent = readFileSync(packagesFilePath, 'utf-8');\n          packages = JSON.parse(fileContent);\n        } catch {\n          packages = [];\n        }\n      }\n\n      return { packages };\n    } catch (error) {\n      return handleError(error, 'Error getting system packages');\n    }\n  },\n});\n"]}