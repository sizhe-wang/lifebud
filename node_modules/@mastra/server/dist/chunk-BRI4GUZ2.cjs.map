{"version":3,"sources":["../src/server/schemas/agents.ts"],"names":["z","coreMessageSchema","tracingOptionsSchema","messageResponseSchema"],"mappings":"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","file":"chunk-BRI4GUZ2.cjs","sourcesContent":["import z from 'zod';\nimport { tracingOptionsSchema, coreMessageSchema, messageResponseSchema } from './common';\n\n// Path parameter schemas\nexport const agentIdPathParams = z.object({\n  agentId: z.string().describe('Unique identifier for the agent'),\n});\n\nexport const toolIdPathParams = z.object({\n  toolId: z.string().describe('Unique identifier for the tool'),\n});\n\nexport const agentToolPathParams = agentIdPathParams.extend({\n  toolId: z.string().describe('Unique identifier for the tool'),\n});\n\nexport const modelConfigIdPathParams = agentIdPathParams.extend({\n  modelConfigId: z.string().describe('Unique identifier for the model configuration'),\n});\n\n/**\n * Schema for serialized processor metadata\n */\nexport const serializedProcessorSchema = z.object({\n  id: z.string(),\n  name: z.string().optional(),\n});\n\n/**\n * Schema for serialized tool with JSON schemas\n * Uses passthrough() to allow additional tool properties beyond core fields\n */\nexport const serializedToolSchema = z.object({\n  id: z.string(),\n  description: z.string().optional(),\n  inputSchema: z.string().optional(),\n  outputSchema: z.string().optional(),\n  requireApproval: z.boolean().optional(),\n});\n\n/**\n * Schema for serialized workflow with steps\n */\nexport const serializedWorkflowSchema = z.object({\n  name: z.string(),\n  steps: z\n    .record(\n      z.string(),\n      z.object({\n        id: z.string(),\n        description: z.string().optional(),\n      }),\n    )\n    .optional(),\n});\n\n/**\n * Schema for serialized agent definition (referenced by other agents)\n */\nexport const serializedAgentDefinitionSchema = z.object({\n  id: z.string(),\n  name: z.string(),\n});\n\n/**\n * Schema for SystemMessage type\n * Can be string, string[], or various message objects\n */\nconst systemMessageSchema = z.union([\n  z.string(),\n  z.array(z.string()),\n  z.any(), // CoreSystemMessage or SystemModelMessage\n  z.array(z.any()),\n]);\n\n/**\n * Schema for model configuration in model list\n */\nconst modelConfigSchema = z.object({\n  model: z.object({\n    modelId: z.string(),\n    provider: z.string(),\n    modelVersion: z.string(),\n  }),\n  // Additional fields from AgentModelManagerConfig can be added here\n});\n\n/**\n * Main schema for serialized agent representation\n */\nexport const serializedAgentSchema = z.object({\n  name: z.string(),\n  description: z.string().optional(),\n  instructions: systemMessageSchema.optional(),\n  tools: z.record(z.string(), serializedToolSchema),\n  agents: z.record(z.string(), serializedAgentDefinitionSchema),\n  workflows: z.record(z.string(), serializedWorkflowSchema),\n  inputProcessors: z.array(serializedProcessorSchema),\n  outputProcessors: z.array(serializedProcessorSchema),\n  provider: z.string().optional(),\n  modelId: z.string().optional(),\n  modelVersion: z.string().optional(),\n  modelList: z.array(modelConfigSchema).optional(),\n  defaultOptions: z.record(z.string(), z.any()).optional(),\n  defaultGenerateOptionsLegacy: z.record(z.string(), z.any()).optional(),\n  defaultStreamOptionsLegacy: z.record(z.string(), z.any()).optional(),\n});\n\n/**\n * Schema for agent with ID\n */\nexport const serializedAgentWithIdSchema = serializedAgentSchema.extend({\n  id: z.string(),\n});\n\n/**\n * Schema for individual provider information\n */\nexport const providerSchema = z.object({\n  id: z.string(),\n  name: z.string(),\n  label: z.string().optional(),\n  description: z.string().optional(),\n});\n\n/**\n * Schema for providers endpoint response\n */\nexport const providersResponseSchema = z.object({\n  providers: z.array(providerSchema),\n});\n\n/**\n * Schema for list agents endpoint response\n * Returns a record of agent ID to serialized agent\n */\nexport const listAgentsResponseSchema = z.record(z.string(), serializedAgentSchema);\n\n/**\n * Schema for list tools endpoint response\n * Returns a record of tool ID to serialized tool\n */\nexport const listToolsResponseSchema = z.record(z.string(), serializedToolSchema);\n\n// ============================================================================\n// Agent Execution Body Schemas\n// ============================================================================\n\n/**\n * Schema for agent memory option\n */\nconst agentMemoryOptionSchema = z.object({\n  thread: z.union([z.string(), z.object({ id: z.string() }).passthrough()]),\n  resource: z.string(),\n  options: z.record(z.string(), z.any()).optional(),\n  readOnly: z.boolean().optional(),\n});\n\n/**\n * Schema for tool choice configuration\n */\nconst toolChoiceSchema = z.union([\n  z.enum(['auto', 'none', 'required']),\n  z.object({ type: z.literal('tool'), toolName: z.string() }),\n]);\n\n/**\n * Comprehensive body schema for agent generate and stream endpoints\n * Validates common fields while using passthrough for complex nested objects\n *\n * EXCLUDED FIELDS (not serializable):\n * - Callbacks: onStepFinish, onFinish, onChunk, onError, onAbort, prepareStep\n * - Class instances: inputProcessors, outputProcessors\n * - Non-serializable: abortSignal, tracingContext\n */\nexport const agentExecutionBodySchema = z\n  .object({\n    // REQUIRED\n    messages: z.union([\n      z.array(coreMessageSchema), // Array of messages\n      z.string(), // Single user message shorthand\n    ]),\n\n    // Message Configuration\n    instructions: systemMessageSchema.optional(),\n    system: systemMessageSchema.optional(),\n    context: z.array(coreMessageSchema).optional(),\n\n    // Memory & Persistence\n    memory: agentMemoryOptionSchema.optional(),\n    runId: z.string().optional(),\n    savePerStep: z.boolean().optional(),\n\n    // Request Context (handler-specific field - merged with server's requestContext)\n    requestContext: z.record(z.string(), z.any()).optional(),\n\n    // Execution Control\n    maxSteps: z.number().optional(),\n    stopWhen: z.any().optional(),\n\n    // Model Configuration\n    providerOptions: z\n      .object({\n        anthropic: z.record(z.string(), z.any()).optional(),\n        google: z.record(z.string(), z.any()).optional(),\n        openai: z.record(z.string(), z.any()).optional(),\n        xai: z.record(z.string(), z.any()).optional(),\n      })\n      .optional(),\n    modelSettings: z.any().optional(),\n\n    // Tool Configuration\n    activeTools: z.array(z.string()).optional(),\n    toolsets: z.record(z.string(), z.any()).optional(),\n    clientTools: z.record(z.string(), z.any()).optional(),\n    toolChoice: toolChoiceSchema.optional(),\n    requireToolApproval: z.boolean().optional(),\n\n    // Evaluation\n    scorers: z\n      .union([\n        z.record(z.string(), z.any()),\n        z.record(\n          z.string(),\n          z.object({\n            scorer: z.string(),\n            sampling: z.any().optional(),\n          }),\n        ),\n      ])\n      .optional(),\n    returnScorerData: z.boolean().optional(),\n\n    // Observability\n    tracingOptions: tracingOptionsSchema.optional(),\n\n    // Structured Output\n    output: z.any().optional(), // Zod schema, JSON schema, or structured output object\n    structuredOutput: z\n      .object({\n        schema: z.object({}).passthrough(),\n        model: z.union([z.string(), z.any()]).optional(),\n        instructions: z.string().optional(),\n        jsonPromptInjection: z.boolean().optional(),\n        errorStrategy: z.enum(['strict', 'warn', 'fallback']).optional(),\n        fallbackValue: z.any().optional(),\n      })\n      .optional(),\n  })\n  .passthrough(); // Allow additional fields for forward compatibility\n\n/**\n * Legacy body schema for deprecated endpoints that still use threadId/resourceId\n * Used by /api/agents/:agentId/generate-legacy and /api/agents/:agentId/stream-legacy\n */\nexport const agentExecutionLegacyBodySchema = agentExecutionBodySchema.extend({\n  resourceId: z.string().optional(),\n  resourceid: z.string().optional(), // lowercase variant\n  threadId: z.string().optional(),\n});\n\n/**\n * Body schema for tool execute endpoint\n * Simple schema - tool validates its own input data\n * Note: Using z.custom() instead of z.any()/z.any() because those are treated as optional by Zod\n */\n\nconst executeToolDataBodySchema = z.object({\n  data: z.custom<unknown>(x => x !== undefined, { message: 'data is required' }),\n});\n\nexport const executeToolBodySchema = executeToolDataBodySchema.extend({\n  requestContext: z.record(z.string(), z.any()).optional(),\n});\n\nexport const executeToolContextBodySchema = executeToolDataBodySchema.extend({\n  requestContext: z.record(z.string(), z.any()).optional(),\n});\n\n/**\n * Response schema for voice speakers endpoint\n * Flexible to accommodate provider-specific metadata\n */\nexport const voiceSpeakersResponseSchema = z.array(\n  z\n    .object({\n      voiceId: z.string(),\n    })\n    .passthrough(), // Allow provider-specific fields like name, language, etc.\n);\n\n// ============================================================================\n// Tool Approval Schemas\n// ============================================================================\n\n/**\n * Base schema for tool approval/decline operations\n * Both approve and decline use the same parameters\n */\nconst toolCallActionBodySchema = z.object({\n  runId: z.string(),\n  requestContext: z.record(z.string(), z.any()).optional(),\n  toolCallId: z.string(),\n  format: z.string().optional(),\n});\nconst networkToolCallActionBodySchema = z.object({\n  runId: z.string(),\n  requestContext: z.record(z.string(), z.any()).optional(),\n  format: z.string().optional(),\n});\n\n/**\n * Body schema for approving tool call\n */\nexport const approveToolCallBodySchema = toolCallActionBodySchema;\n\n/**\n * Body schema for declining tool call\n */\nexport const declineToolCallBodySchema = toolCallActionBodySchema;\n\n/**\n * Body schema for approving network tool call\n */\nexport const approveNetworkToolCallBodySchema = networkToolCallActionBodySchema;\n\n/**\n * Body schema for declining network tool call\n */\nexport const declineNetworkToolCallBodySchema = networkToolCallActionBodySchema;\n\n/**\n * Response schema for tool approval/decline\n */\nexport const toolCallResponseSchema = z.object({\n  fullStream: z.any(), // ReadableStream\n});\n\n// ============================================================================\n// Model Management Schemas\n// ============================================================================\n\n/**\n * Body schema for updating agent model\n */\nexport const updateAgentModelBodySchema = z.object({\n  modelId: z.string(),\n  provider: z.string(),\n});\n\n/**\n * Body schema for reordering agent model list\n */\nexport const reorderAgentModelListBodySchema = z.object({\n  reorderedModelIds: z.array(z.string()),\n});\n\n/**\n * Body schema for updating model in model list\n */\nexport const updateAgentModelInModelListBodySchema = z.object({\n  model: z\n    .object({\n      modelId: z.string(),\n      provider: z.string(),\n    })\n    .optional(),\n  maxRetries: z.number().optional(),\n  enabled: z.boolean().optional(),\n});\n\n/**\n * Response schema for model management operations\n */\nexport const modelManagementResponseSchema = messageResponseSchema;\n\n// ============================================================================\n// Voice Schemas\n// ============================================================================\n\n/**\n * Body schema for generating speech\n */\nexport const generateSpeechBodySchema = z.object({\n  text: z.string(),\n  speakerId: z.string().optional(),\n});\n\n/**\n * Body schema for transcribing speech\n */\nexport const transcribeSpeechBodySchema = z.object({\n  audio: z.any(), // Buffer\n  options: z.record(z.string(), z.any()).optional(),\n});\n\n/**\n * Response schema for transcribe speech\n */\nexport const transcribeSpeechResponseSchema = z.object({\n  text: z.string(),\n});\n\n/**\n * Response schema for get listener\n */\nexport const getListenerResponseSchema = z.any(); // Listener info structure varies\n\n/**\n * Response schema for agent generation endpoints\n * These return AI SDK types which have complex structures\n */\nexport const generateResponseSchema = z.any(); // AI SDK GenerateResult type\nexport const streamResponseSchema = z.any(); // AI SDK StreamResult type\nexport const speakResponseSchema = z.any(); // Voice synthesis result\nexport const executeToolResponseSchema = z.any(); // Tool execution result varies by tool\n\n// ============================================================================\n// Instruction Enhancement Schemas\n// ============================================================================\n\n/**\n * Body schema for enhancing agent instructions\n */\nexport const enhanceInstructionsBodySchema = z.object({\n  instructions: z.string().describe('The current agent instructions to enhance'),\n  comment: z.string().describe('User comment describing how to enhance the instructions'),\n});\n\n/**\n * Response schema for enhanced instructions\n */\nexport const enhanceInstructionsResponseSchema = z.object({\n  explanation: z.string().describe('Explanation of the changes made'),\n  new_prompt: z.string().describe('The enhanced instructions'),\n});\n"]}