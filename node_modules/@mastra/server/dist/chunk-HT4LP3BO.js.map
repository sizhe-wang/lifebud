{"version":3,"sources":["../src/server/schemas/common.ts"],"names":[],"mappings":"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","file":"chunk-HT4LP3BO.js","sourcesContent":["import z from 'zod';\n\n// Path parameter schemas\nexport const runIdSchema = z.object({\n  runId: z.string().describe('Unique identifier for the run'),\n});\n\n/**\n * Query parameter schema for runId (optional)\n * Used by create-run route where runId is optional\n */\nexport const optionalRunIdSchema = z.object({\n  runId: z.string().optional(),\n});\n\n// ============================================================================\n// Pagination Schemas\n// ============================================================================\n\n/**\n * Pagination response info\n * Used across all paginated endpoints\n */\nexport const paginationInfoSchema = z.object({\n  total: z.number(),\n  page: z.number(),\n  perPage: z.union([z.number(), z.literal(false)]),\n  hasMore: z.boolean(),\n});\n\n/**\n * Factory function for page/perPage pagination query params\n * @param defaultPerPage - Default value for perPage (omit for no default)\n */\nexport const createPagePaginationSchema = (defaultPerPage?: number) => {\n  const baseSchema = {\n    page: z.coerce.number().optional().default(0),\n  };\n\n  if (defaultPerPage !== undefined) {\n    return z.object({\n      ...baseSchema,\n      perPage: z.coerce.number().optional().default(defaultPerPage),\n    });\n  } else {\n    return z.object({\n      ...baseSchema,\n      perPage: z.coerce.number().optional(),\n    });\n  }\n};\n\n/**\n * Factory function for pagination that supports both page/perPage and limit/offset\n * Use this when you need backwards compatibility with older clients using limit/offset\n */\nexport const createCombinedPaginationSchema = () => {\n  return z.object({\n    page: z.coerce.number().optional(),\n    perPage: z.coerce.number().optional(),\n    /**\n     * @deprecated Use page and perPage instead\n     */\n    offset: z.coerce.number().optional(),\n    /**\n     * @deprecated Use page and perPage instead\n     */\n    limit: z.coerce.number().optional(),\n  });\n};\n\n// ============================================================================\n// Observability Schemas\n// ============================================================================\n\n/**\n * Tracing options for observability\n * Used by agents and workflows\n */\nexport const tracingOptionsSchema = z.object({\n  metadata: z.record(z.string(), z.unknown()).optional(),\n  requestContextKeys: z.array(z.string()).optional(),\n  traceId: z.string().optional(),\n  parentSpanId: z.string().optional(),\n});\n\n// ============================================================================\n// Message Schemas\n// ============================================================================\n\n/**\n * Core message schema from AI SDK\n * Represents messages exchanged with AI models\n * Content can be string, array of content parts, or object (for complex message types)\n */\nexport const coreMessageSchema = z.any();\n// .object({\n//   role: z.enum(['system', 'user', 'assistant', 'tool']),\n//   content: z.union([\n//     z.string(),\n//     z.array(\n//       z\n//         .object({\n//           type: z.enum(['text', 'image', 'file', 'tool-call', 'tool-result']),\n//         })\n//         .passthrough(), // Preserve additional fields like text, image, toolCall, etc.\n//     ),\n//     z.any(), // For complex message content objects\n//   ]),\n// })\n// .passthrough();\n\n// ============================================================================\n// Common Response Schemas\n// ============================================================================\n\n/**\n * Standard success response schema\n * Used by operations that return only a success boolean\n */\nexport const successResponseSchema = z.object({\n  success: z.boolean(),\n});\n\n/**\n * Standard message response schema\n * Used by operations that return only a message string\n */\nexport const messageResponseSchema = z.object({\n  message: z.string(),\n});\n\n/**\n * Partial data query parameter schema\n * Used by list endpoints to return minimal data without schemas\n */\nexport const partialQuerySchema = z.object({\n  partial: z.string().optional(),\n});\n\n// ============================================================================\n// Logging Schemas\n// ============================================================================\n\n/**\n * Base log message schema\n */\nexport const baseLogMessageSchema = z.object({\n  level: z.enum(['debug', 'info', 'warn', 'error', 'silent']),\n  msg: z.string(),\n  time: z.date(),\n  context: z.record(z.string(), z.unknown()).optional(),\n  runId: z.string().optional(),\n  pid: z.number(),\n  hostname: z.string(),\n  name: z.string(),\n});\n"]}