{"version":3,"sources":["../../../src/server/server-adapter/routes/a2a.ts","../../../src/server/server-adapter/routes/agent-builder.ts","../../../src/server/server-adapter/routes/agents.ts","../../../src/server/server-adapter/routes/legacy.ts","../../../src/server/server-adapter/routes/logs.ts","../../../src/server/server-adapter/routes/mcp.ts","../../../src/server/server-adapter/routes/memory.ts","../../../src/server/server-adapter/routes/observability.ts","../../../src/server/server-adapter/routes/scorers.ts","../../../src/server/server-adapter/routes/stored-agents.ts","../../../src/server/server-adapter/routes/system.ts","../../../src/server/server-adapter/routes/tools.ts","../../../src/server/server-adapter/routes/vectors.ts","../../../src/server/server-adapter/routes/workflows.ts","../../../src/server/server-adapter/routes/index.ts","../../../src/server/server-adapter/redact.ts","../../../src/server/server-adapter/index.ts"],"names":["GET_AGENT_CARD_ROUTE","AGENT_EXECUTION_ROUTE","LIST_AGENT_BUILDER_ACTIONS_ROUTE","GET_AGENT_BUILDER_ACTION_BY_ID_ROUTE","LIST_AGENT_BUILDER_ACTION_RUNS_ROUTE","GET_AGENT_BUILDER_ACTION_RUN_BY_ID_ROUTE","CREATE_AGENT_BUILDER_ACTION_RUN_ROUTE","STREAM_AGENT_BUILDER_ACTION_ROUTE","START_ASYNC_AGENT_BUILDER_ACTION_ROUTE","START_AGENT_BUILDER_ACTION_RUN_ROUTE","OBSERVE_STREAM_AGENT_BUILDER_ACTION_ROUTE","RESUME_ASYNC_AGENT_BUILDER_ACTION_ROUTE","RESUME_AGENT_BUILDER_ACTION_ROUTE","RESUME_STREAM_AGENT_BUILDER_ACTION_ROUTE","CANCEL_AGENT_BUILDER_ACTION_RUN_ROUTE","LIST_AGENTS_ROUTE","GET_PROVIDERS_ROUTE","GET_AGENT_BY_ID_ROUTE","GET_SPEAKERS_ROUTE","GET_SPEAKERS_DEPRECATED_ROUTE","GENERATE_AGENT_ROUTE","GENERATE_AGENT_VNEXT_ROUTE","STREAM_GENERATE_ROUTE","STREAM_GENERATE_VNEXT_DEPRECATED_ROUTE","EXECUTE_AGENT_TOOL_ROUTE","APPROVE_TOOL_CALL_ROUTE","DECLINE_TOOL_CALL_ROUTE","APPROVE_NETWORK_TOOL_CALL_ROUTE","DECLINE_NETWORK_TOOL_CALL_ROUTE","STREAM_NETWORK_ROUTE","UPDATE_AGENT_MODEL_ROUTE","RESET_AGENT_MODEL_ROUTE","REORDER_AGENT_MODEL_LIST_ROUTE","UPDATE_AGENT_MODEL_IN_MODEL_LIST_ROUTE","ENHANCE_INSTRUCTIONS_ROUTE","GET_AGENT_TOOL_ROUTE","GENERATE_SPEECH_ROUTE","GENERATE_SPEECH_DEPRECATED_ROUTE","TRANSCRIBE_SPEECH_ROUTE","TRANSCRIBE_SPEECH_DEPRECATED_ROUTE","GET_LISTENER_ROUTE","STREAM_VNEXT_DEPRECATED_ROUTE","STREAM_UI_MESSAGE_VNEXT_DEPRECATED_ROUTE","STREAM_UI_MESSAGE_DEPRECATED_ROUTE","GENERATE_LEGACY_ROUTE","STREAM_GENERATE_LEGACY_ROUTE","STREAM_LEGACY_WORKFLOW_ROUTE","OBSERVE_STREAM_LEGACY_WORKFLOW_ROUTE","STREAM_LEGACY_AGENT_BUILDER_ACTION_ROUTE","OBSERVE_STREAM_LEGACY_AGENT_BUILDER_ACTION_ROUTE","LIST_LOG_TRANSPORTS_ROUTE","LIST_LOGS_ROUTE","LIST_LOGS_BY_RUN_ID_ROUTE","LIST_MCP_SERVERS_ROUTE","GET_MCP_SERVER_DETAIL_ROUTE","LIST_MCP_SERVER_TOOLS_ROUTE","GET_MCP_SERVER_TOOL_DETAIL_ROUTE","EXECUTE_MCP_SERVER_TOOL_ROUTE","MCP_HTTP_TRANSPORT_ROUTE","MCP_SSE_TRANSPORT_ROUTE","MCP_SSE_MESSAGES_ROUTE","GET_MEMORY_STATUS_ROUTE","GET_MEMORY_CONFIG_ROUTE","LIST_THREADS_ROUTE","GET_THREAD_BY_ID_ROUTE","LIST_MESSAGES_ROUTE","GET_WORKING_MEMORY_ROUTE","SAVE_MESSAGES_ROUTE","CREATE_THREAD_ROUTE","UPDATE_THREAD_ROUTE","DELETE_THREAD_ROUTE","CLONE_THREAD_ROUTE","UPDATE_WORKING_MEMORY_ROUTE","DELETE_MESSAGES_ROUTE","SEARCH_MEMORY_ROUTE","GET_MEMORY_STATUS_NETWORK_ROUTE","LIST_THREADS_NETWORK_ROUTE","GET_THREAD_BY_ID_NETWORK_ROUTE","LIST_MESSAGES_NETWORK_ROUTE","SAVE_MESSAGES_NETWORK_ROUTE","CREATE_THREAD_NETWORK_ROUTE","UPDATE_THREAD_NETWORK_ROUTE","DELETE_THREAD_NETWORK_ROUTE","DELETE_MESSAGES_NETWORK_ROUTE","LIST_TRACES_ROUTE","GET_TRACE_ROUTE","SCORE_TRACES_ROUTE","LIST_SCORES_BY_SPAN_ROUTE","LIST_SCORERS_ROUTE","GET_SCORER_ROUTE","LIST_SCORES_BY_RUN_ID_ROUTE","LIST_SCORES_BY_SCORER_ID_ROUTE","LIST_SCORES_BY_ENTITY_ID_ROUTE","SAVE_SCORE_ROUTE","LIST_STORED_AGENTS_ROUTE","GET_STORED_AGENT_ROUTE","CREATE_STORED_AGENT_ROUTE","UPDATE_STORED_AGENT_ROUTE","DELETE_STORED_AGENT_ROUTE","GET_SYSTEM_PACKAGES_ROUTE","LIST_TOOLS_ROUTE","GET_TOOL_BY_ID_ROUTE","EXECUTE_TOOL_ROUTE","UPSERT_VECTORS_ROUTE","CREATE_INDEX_ROUTE","QUERY_VECTORS_ROUTE","LIST_INDEXES_ROUTE","DESCRIBE_INDEX_ROUTE","DELETE_INDEX_ROUTE","LIST_WORKFLOWS_ROUTE","GET_WORKFLOW_BY_ID_ROUTE","LIST_WORKFLOW_RUNS_ROUTE","GET_WORKFLOW_RUN_BY_ID_ROUTE","DELETE_WORKFLOW_RUN_BY_ID_ROUTE","CREATE_WORKFLOW_RUN_ROUTE","STREAM_WORKFLOW_ROUTE","RESUME_STREAM_WORKFLOW_ROUTE","START_ASYNC_WORKFLOW_ROUTE","START_WORKFLOW_RUN_ROUTE","OBSERVE_STREAM_WORKFLOW_ROUTE","RESUME_ASYNC_WORKFLOW_ROUTE","RESUME_WORKFLOW_ROUTE","CANCEL_WORKFLOW_RUN_ROUTE","TIME_TRAVEL_WORKFLOW_ROUTE","TIME_TRAVEL_ASYNC_WORKFLOW_ROUTE","TIME_TRAVEL_STREAM_WORKFLOW_ROUTE","RESTART_WORKFLOW_ROUTE","RESTART_ASYNC_WORKFLOW_ROUTE","RESTART_ALL_ACTIVE_WORKFLOW_RUNS_ROUTE","RESTART_ALL_ACTIVE_WORKFLOW_RUNS_ASYNC_ROUTE","MastraServerBase","requestContext","RequestContext","generateOpenAPIDocument"],"mappings":"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","file":"index.cjs","sourcesContent":["import { GET_AGENT_CARD_ROUTE, AGENT_EXECUTION_ROUTE } from '../../handlers/a2a';\nimport type { ServerRoute } from '.';\n\nexport const A2A_ROUTES: ServerRoute<any, any, any>[] = [GET_AGENT_CARD_ROUTE, AGENT_EXECUTION_ROUTE];\n","import {\n  LIST_AGENT_BUILDER_ACTIONS_ROUTE,\n  GET_AGENT_BUILDER_ACTION_BY_ID_ROUTE,\n  LIST_AGENT_BUILDER_ACTION_RUNS_ROUTE,\n  GET_AGENT_BUILDER_ACTION_RUN_BY_ID_ROUTE,\n  CREATE_AGENT_BUILDER_ACTION_RUN_ROUTE,\n  STREAM_AGENT_BUILDER_ACTION_ROUTE,\n  START_ASYNC_AGENT_BUILDER_ACTION_ROUTE,\n  START_AGENT_BUILDER_ACTION_RUN_ROUTE,\n  OBSERVE_STREAM_AGENT_BUILDER_ACTION_ROUTE,\n  RESUME_ASYNC_AGENT_BUILDER_ACTION_ROUTE,\n  RESUME_AGENT_BUILDER_ACTION_ROUTE,\n  RESUME_STREAM_AGENT_BUILDER_ACTION_ROUTE,\n  CANCEL_AGENT_BUILDER_ACTION_RUN_ROUTE,\n} from '../../handlers/agent-builder';\nimport type { ServerRoute } from '.';\n\nexport const AGENT_BUILDER_ROUTES: ServerRoute<any, any, any>[] = [\n  LIST_AGENT_BUILDER_ACTIONS_ROUTE,\n  GET_AGENT_BUILDER_ACTION_BY_ID_ROUTE,\n  LIST_AGENT_BUILDER_ACTION_RUNS_ROUTE,\n  GET_AGENT_BUILDER_ACTION_RUN_BY_ID_ROUTE,\n  CREATE_AGENT_BUILDER_ACTION_RUN_ROUTE,\n  STREAM_AGENT_BUILDER_ACTION_ROUTE,\n  START_ASYNC_AGENT_BUILDER_ACTION_ROUTE,\n  START_AGENT_BUILDER_ACTION_RUN_ROUTE,\n  OBSERVE_STREAM_AGENT_BUILDER_ACTION_ROUTE,\n  RESUME_ASYNC_AGENT_BUILDER_ACTION_ROUTE,\n  RESUME_AGENT_BUILDER_ACTION_ROUTE,\n  RESUME_STREAM_AGENT_BUILDER_ACTION_ROUTE,\n  CANCEL_AGENT_BUILDER_ACTION_RUN_ROUTE,\n];\n","import {\n  // Agent route objects\n  LIST_AGENTS_ROUTE,\n  GET_AGENT_BY_ID_ROUTE,\n  GENERATE_AGENT_ROUTE,\n  GENERATE_AGENT_VNEXT_ROUTE,\n  STREAM_GENERATE_ROUTE,\n  STREAM_GENERATE_VNEXT_DEPRECATED_ROUTE,\n  GET_PROVIDERS_ROUTE,\n  APPROVE_TOOL_CALL_ROUTE,\n  DECLINE_TOOL_CALL_ROUTE,\n  STREAM_NETWORK_ROUTE,\n  UPDATE_AGENT_MODEL_ROUTE,\n  RESET_AGENT_MODEL_ROUTE,\n  REORDER_AGENT_MODEL_LIST_ROUTE,\n  UPDATE_AGENT_MODEL_IN_MODEL_LIST_ROUTE,\n  ENHANCE_INSTRUCTIONS_ROUTE,\n  STREAM_VNEXT_DEPRECATED_ROUTE,\n  STREAM_UI_MESSAGE_VNEXT_DEPRECATED_ROUTE,\n  STREAM_UI_MESSAGE_DEPRECATED_ROUTE,\n  APPROVE_NETWORK_TOOL_CALL_ROUTE,\n  DECLINE_NETWORK_TOOL_CALL_ROUTE,\n} from '../../handlers/agents';\nimport { GET_AGENT_TOOL_ROUTE, EXECUTE_AGENT_TOOL_ROUTE } from '../../handlers/tools';\nimport {\n  GET_SPEAKERS_ROUTE,\n  GET_SPEAKERS_DEPRECATED_ROUTE,\n  GENERATE_SPEECH_ROUTE,\n  GENERATE_SPEECH_DEPRECATED_ROUTE,\n  TRANSCRIBE_SPEECH_ROUTE,\n  TRANSCRIBE_SPEECH_DEPRECATED_ROUTE,\n  GET_LISTENER_ROUTE,\n} from '../../handlers/voice';\nimport type { ServerRoute } from '.';\n\nexport const AGENTS_ROUTES: ServerRoute<any, any, any>[] = [\n  // ============================================================================\n  // Agent Core Routes\n  // ============================================================================\n  LIST_AGENTS_ROUTE,\n  GET_PROVIDERS_ROUTE,\n  GET_AGENT_BY_ID_ROUTE,\n\n  // ============================================================================\n  // Voice Routes\n  // ============================================================================\n  GET_SPEAKERS_ROUTE,\n  GET_SPEAKERS_DEPRECATED_ROUTE,\n\n  // ============================================================================\n  // Agent Execution Routes\n  // ============================================================================\n  GENERATE_AGENT_ROUTE,\n  GENERATE_AGENT_VNEXT_ROUTE,\n  STREAM_GENERATE_ROUTE,\n  STREAM_GENERATE_VNEXT_DEPRECATED_ROUTE,\n\n  // ============================================================================\n  // Tool Routes\n  // ============================================================================\n  EXECUTE_AGENT_TOOL_ROUTE,\n  APPROVE_TOOL_CALL_ROUTE,\n  DECLINE_TOOL_CALL_ROUTE,\n  APPROVE_NETWORK_TOOL_CALL_ROUTE,\n  DECLINE_NETWORK_TOOL_CALL_ROUTE,\n\n  // ============================================================================\n  // Network Routes\n  // ============================================================================\n  STREAM_NETWORK_ROUTE,\n\n  // ============================================================================\n  // Model Management Routes\n  // ============================================================================\n  UPDATE_AGENT_MODEL_ROUTE,\n  RESET_AGENT_MODEL_ROUTE,\n  REORDER_AGENT_MODEL_LIST_ROUTE,\n  UPDATE_AGENT_MODEL_IN_MODEL_LIST_ROUTE,\n\n  // ============================================================================\n  // Instruction Enhancement Routes\n  // ============================================================================\n  ENHANCE_INSTRUCTIONS_ROUTE,\n\n  // ============================================================================\n  // Agent Tool Routes\n  // ============================================================================\n  GET_AGENT_TOOL_ROUTE,\n\n  // ============================================================================\n  // Voice/Speech Routes\n  // ============================================================================\n  GENERATE_SPEECH_ROUTE,\n  GENERATE_SPEECH_DEPRECATED_ROUTE,\n  TRANSCRIBE_SPEECH_ROUTE,\n  TRANSCRIBE_SPEECH_DEPRECATED_ROUTE,\n  GET_LISTENER_ROUTE,\n\n  // ============================================================================\n  // Deprecated Routes\n  // ============================================================================\n  STREAM_VNEXT_DEPRECATED_ROUTE,\n  STREAM_UI_MESSAGE_VNEXT_DEPRECATED_ROUTE,\n  STREAM_UI_MESSAGE_DEPRECATED_ROUTE,\n];\n","/**\n * Legacy routes that are deprecated but still exist in deployer for backward compatibility.\n * These routes should not be used in new code and will be removed in a future version.\n */\n\nimport {\n  STREAM_LEGACY_AGENT_BUILDER_ACTION_ROUTE,\n  OBSERVE_STREAM_LEGACY_AGENT_BUILDER_ACTION_ROUTE,\n} from '../../handlers/agent-builder';\nimport { GENERATE_LEGACY_ROUTE, STREAM_GENERATE_LEGACY_ROUTE } from '../../handlers/agents';\nimport { STREAM_LEGACY_WORKFLOW_ROUTE, OBSERVE_STREAM_LEGACY_WORKFLOW_ROUTE } from '../../handlers/workflows';\nimport type { ServerRoute } from '.';\n\nexport const LEGACY_ROUTES: ServerRoute<any, any, any>[] = [\n  // ============================================================================\n  // Legacy Agent Routes\n  // ============================================================================\n  GENERATE_LEGACY_ROUTE,\n  STREAM_GENERATE_LEGACY_ROUTE,\n\n  // ============================================================================\n  // Legacy Workflow Routes\n  // ============================================================================\n  STREAM_LEGACY_WORKFLOW_ROUTE,\n  OBSERVE_STREAM_LEGACY_WORKFLOW_ROUTE,\n\n  // ============================================================================\n  // Legacy Agent Builder Routes\n  // ============================================================================\n  STREAM_LEGACY_AGENT_BUILDER_ACTION_ROUTE,\n  OBSERVE_STREAM_LEGACY_AGENT_BUILDER_ACTION_ROUTE,\n];\n","import { LIST_LOG_TRANSPORTS_ROUTE, LIST_LOGS_ROUTE, LIST_LOGS_BY_RUN_ID_ROUTE } from '../../handlers/logs';\nimport type { ServerRoute } from '.';\n\nexport const LOGS_ROUTES: ServerRoute<any, any, any>[] = [\n  LIST_LOG_TRANSPORTS_ROUTE,\n  LIST_LOGS_ROUTE,\n  LIST_LOGS_BY_RUN_ID_ROUTE,\n];\n","import {\n  LIST_MCP_SERVERS_ROUTE,\n  GET_MCP_SERVER_DETAIL_ROUTE,\n  LIST_MCP_SERVER_TOOLS_ROUTE,\n  GET_MCP_SERVER_TOOL_DETAIL_ROUTE,\n  EXECUTE_MCP_SERVER_TOOL_ROUTE,\n  MCP_HTTP_TRANSPORT_ROUTE,\n  MCP_SSE_TRANSPORT_ROUTE,\n  MCP_SSE_MESSAGES_ROUTE,\n} from '../../handlers/mcp';\nimport type { ServerRoute } from '.';\n\n/**\n * MCP Routes\n *\n * Registry routes provide access to the MCP server registry and tools.\n * Transport routes handle the MCP protocol communication (HTTP and SSE).\n */\nexport const MCP_ROUTES: ServerRoute<any, any, any>[] = [\n  // ============================================================================\n  // MCP Server Registry Routes\n  // ============================================================================\n  LIST_MCP_SERVERS_ROUTE,\n  GET_MCP_SERVER_DETAIL_ROUTE,\n\n  // ============================================================================\n  // MCP Server Tool Routes\n  // ============================================================================\n  LIST_MCP_SERVER_TOOLS_ROUTE,\n  GET_MCP_SERVER_TOOL_DETAIL_ROUTE,\n  EXECUTE_MCP_SERVER_TOOL_ROUTE,\n\n  // ============================================================================\n  // MCP Transport Routes (handled by adapters)\n  // ============================================================================\n  MCP_HTTP_TRANSPORT_ROUTE,\n  MCP_SSE_TRANSPORT_ROUTE,\n  MCP_SSE_MESSAGES_ROUTE,\n];\n","import {\n  GET_MEMORY_STATUS_ROUTE,\n  GET_MEMORY_CONFIG_ROUTE,\n  LIST_THREADS_ROUTE,\n  GET_THREAD_BY_ID_ROUTE,\n  LIST_MESSAGES_ROUTE,\n  GET_WORKING_MEMORY_ROUTE,\n  SAVE_MESSAGES_ROUTE,\n  CREATE_THREAD_ROUTE,\n  UPDATE_THREAD_ROUTE,\n  DELETE_THREAD_ROUTE,\n  CLONE_THREAD_ROUTE,\n  UPDATE_WORKING_MEMORY_ROUTE,\n  DELETE_MESSAGES_ROUTE,\n  SEARCH_MEMORY_ROUTE,\n  GET_MEMORY_STATUS_NETWORK_ROUTE,\n  LIST_THREADS_NETWORK_ROUTE,\n  GET_THREAD_BY_ID_NETWORK_ROUTE,\n  LIST_MESSAGES_NETWORK_ROUTE,\n  SAVE_MESSAGES_NETWORK_ROUTE,\n  CREATE_THREAD_NETWORK_ROUTE,\n  UPDATE_THREAD_NETWORK_ROUTE,\n  DELETE_THREAD_NETWORK_ROUTE,\n  DELETE_MESSAGES_NETWORK_ROUTE,\n} from '../../handlers/memory';\nimport type { ServerRoute } from '.';\n\nexport const MEMORY_ROUTES: ServerRoute<any, any, any>[] = [\n  GET_MEMORY_STATUS_ROUTE,\n  GET_MEMORY_CONFIG_ROUTE,\n  LIST_THREADS_ROUTE,\n  GET_THREAD_BY_ID_ROUTE,\n  LIST_MESSAGES_ROUTE,\n  GET_WORKING_MEMORY_ROUTE,\n  SAVE_MESSAGES_ROUTE,\n  CREATE_THREAD_ROUTE,\n  UPDATE_THREAD_ROUTE,\n  DELETE_THREAD_ROUTE,\n  CLONE_THREAD_ROUTE,\n  UPDATE_WORKING_MEMORY_ROUTE,\n  DELETE_MESSAGES_ROUTE,\n  SEARCH_MEMORY_ROUTE,\n  GET_MEMORY_STATUS_NETWORK_ROUTE,\n  LIST_THREADS_NETWORK_ROUTE,\n  GET_THREAD_BY_ID_NETWORK_ROUTE,\n  LIST_MESSAGES_NETWORK_ROUTE,\n  SAVE_MESSAGES_NETWORK_ROUTE,\n  CREATE_THREAD_NETWORK_ROUTE,\n  UPDATE_THREAD_NETWORK_ROUTE,\n  DELETE_THREAD_NETWORK_ROUTE,\n  DELETE_MESSAGES_NETWORK_ROUTE,\n];\n","import {\n  LIST_TRACES_ROUTE,\n  GET_TRACE_ROUTE,\n  SCORE_TRACES_ROUTE,\n  LIST_SCORES_BY_SPAN_ROUTE,\n} from '../../handlers/observability';\nimport type { ServerRoute } from '.';\n\nexport const OBSERVABILITY_ROUTES: ServerRoute<any, any, any>[] = [\n  LIST_TRACES_ROUTE,\n  GET_TRACE_ROUTE,\n  SCORE_TRACES_ROUTE,\n  LIST_SCORES_BY_SPAN_ROUTE,\n];\n","import {\n  LIST_SCORERS_ROUTE,\n  GET_SCORER_ROUTE,\n  LIST_SCORES_BY_RUN_ID_ROUTE,\n  LIST_SCORES_BY_SCORER_ID_ROUTE,\n  LIST_SCORES_BY_ENTITY_ID_ROUTE,\n  SAVE_SCORE_ROUTE,\n} from '../../handlers/scores';\nimport type { ServerRoute } from '.';\n\nexport const SCORES_ROUTES: ServerRoute<any, any, any>[] = [\n  LIST_SCORERS_ROUTE,\n  GET_SCORER_ROUTE,\n  LIST_SCORES_BY_RUN_ID_ROUTE,\n  LIST_SCORES_BY_SCORER_ID_ROUTE,\n  LIST_SCORES_BY_ENTITY_ID_ROUTE,\n  SAVE_SCORE_ROUTE,\n];\n","import {\n  LIST_STORED_AGENTS_ROUTE,\n  GET_STORED_AGENT_ROUTE,\n  CREATE_STORED_AGENT_ROUTE,\n  UPDATE_STORED_AGENT_ROUTE,\n  DELETE_STORED_AGENT_ROUTE,\n} from '../../handlers/stored-agents';\nimport type { ServerRoute } from '.';\n\n/**\n * Routes for stored agents CRUD operations.\n * These routes provide API access to agent configurations stored in the database,\n * enabling dynamic creation and management of agents via Mastra Studio.\n */\nexport const STORED_AGENTS_ROUTES: ServerRoute<any, any, any>[] = [\n  // ============================================================================\n  // Stored Agents CRUD Routes\n  // ============================================================================\n  LIST_STORED_AGENTS_ROUTE,\n  GET_STORED_AGENT_ROUTE,\n  CREATE_STORED_AGENT_ROUTE,\n  UPDATE_STORED_AGENT_ROUTE,\n  DELETE_STORED_AGENT_ROUTE,\n];\n","import { GET_SYSTEM_PACKAGES_ROUTE } from '../../handlers/system';\n\n/**\n * System Routes\n *\n * Routes for system information and diagnostics.\n */\nexport const SYSTEM_ROUTES = [GET_SYSTEM_PACKAGES_ROUTE] as const;\n","import { LIST_TOOLS_ROUTE, GET_TOOL_BY_ID_ROUTE, EXECUTE_TOOL_ROUTE } from '../../handlers/tools';\nimport type { ServerRoute } from '.';\n\nexport const TOOLS_ROUTES: ServerRoute<any, any, any>[] = [LIST_TOOLS_ROUTE, GET_TOOL_BY_ID_ROUTE, EXECUTE_TOOL_ROUTE];\n","import {\n  UPSERT_VECTORS_ROUTE,\n  CREATE_INDEX_ROUTE,\n  QUERY_VECTORS_ROUTE,\n  LIST_INDEXES_ROUTE,\n  DESCRIBE_INDEX_ROUTE,\n  DELETE_INDEX_ROUTE,\n} from '../../handlers/vector';\nimport type { ServerRoute } from '.';\n\nexport const VECTORS_ROUTES: ServerRoute<any, any, any>[] = [\n  UPSERT_VECTORS_ROUTE,\n  CREATE_INDEX_ROUTE,\n  QUERY_VECTORS_ROUTE,\n  LIST_INDEXES_ROUTE,\n  DESCRIBE_INDEX_ROUTE,\n  DELETE_INDEX_ROUTE,\n];\n","import {\n  LIST_WORKFLOWS_ROUTE,\n  GET_WORKFLOW_BY_ID_ROUTE,\n  LIST_WORKFLOW_RUNS_ROUTE,\n  GET_WORKFLOW_RUN_BY_ID_ROUTE,\n  CREATE_WORKFLOW_RUN_ROUTE,\n  STREAM_WORKFLOW_ROUTE,\n  RESUME_STREAM_WORKFLOW_ROUTE,\n  START_ASYNC_WORKFLOW_ROUTE,\n  START_WORKFLOW_RUN_ROUTE,\n  OBSERVE_STREAM_WORKFLOW_ROUTE,\n  RESUME_ASYNC_WORKFLOW_ROUTE,\n  RESUME_WORKFLOW_ROUTE,\n  CANCEL_WORKFLOW_RUN_ROUTE,\n  TIME_TRAVEL_WORKFLOW_ROUTE,\n  TIME_TRAVEL_STREAM_WORKFLOW_ROUTE,\n  RESTART_WORKFLOW_ROUTE,\n  RESTART_ASYNC_WORKFLOW_ROUTE,\n  RESTART_ALL_ACTIVE_WORKFLOW_RUNS_ROUTE,\n  RESTART_ALL_ACTIVE_WORKFLOW_RUNS_ASYNC_ROUTE,\n  TIME_TRAVEL_ASYNC_WORKFLOW_ROUTE,\n  DELETE_WORKFLOW_RUN_BY_ID_ROUTE,\n} from '../../handlers/workflows';\nimport type { ServerRoute } from '.';\n\nexport const WORKFLOWS_ROUTES: ServerRoute<any, any, any>[] = [\n  LIST_WORKFLOWS_ROUTE,\n  GET_WORKFLOW_BY_ID_ROUTE,\n  LIST_WORKFLOW_RUNS_ROUTE,\n  GET_WORKFLOW_RUN_BY_ID_ROUTE,\n  DELETE_WORKFLOW_RUN_BY_ID_ROUTE,\n  CREATE_WORKFLOW_RUN_ROUTE,\n  STREAM_WORKFLOW_ROUTE,\n  RESUME_STREAM_WORKFLOW_ROUTE,\n  START_ASYNC_WORKFLOW_ROUTE,\n  START_WORKFLOW_RUN_ROUTE,\n  OBSERVE_STREAM_WORKFLOW_ROUTE,\n  RESUME_ASYNC_WORKFLOW_ROUTE,\n  RESUME_WORKFLOW_ROUTE,\n  CANCEL_WORKFLOW_RUN_ROUTE,\n  TIME_TRAVEL_WORKFLOW_ROUTE,\n  TIME_TRAVEL_ASYNC_WORKFLOW_ROUTE,\n  TIME_TRAVEL_STREAM_WORKFLOW_ROUTE,\n  RESTART_WORKFLOW_ROUTE,\n  RESTART_ASYNC_WORKFLOW_ROUTE,\n  RESTART_ALL_ACTIVE_WORKFLOW_RUNS_ROUTE,\n  RESTART_ALL_ACTIVE_WORKFLOW_RUNS_ASYNC_ROUTE,\n];\n","import type { Mastra } from '@mastra/core';\nimport type { ToolsInput } from '@mastra/core/agent';\nimport type { RequestContext } from '@mastra/core/request-context';\nimport type { ApiRoute } from '@mastra/core/server';\nimport type z from 'zod';\nimport type { InMemoryTaskStore } from '../../a2a/store';\nimport { A2A_ROUTES } from './a2a';\nimport { AGENT_BUILDER_ROUTES } from './agent-builder';\nimport { AGENTS_ROUTES } from './agents';\nimport { LEGACY_ROUTES } from './legacy';\nimport { LOGS_ROUTES } from './logs';\nimport { MCP_ROUTES } from './mcp';\nimport { MEMORY_ROUTES } from './memory';\nimport { OBSERVABILITY_ROUTES } from './observability';\nimport { SCORES_ROUTES } from './scorers';\nimport { STORED_AGENTS_ROUTES } from './stored-agents';\nimport type { MastraStreamReturn } from './stream-types';\nimport { SYSTEM_ROUTES } from './system';\nimport { TOOLS_ROUTES } from './tools';\nimport { VECTORS_ROUTES } from './vectors';\nimport { WORKFLOWS_ROUTES } from './workflows';\n\n/**\n * Server context fields that are available to route handlers.\n * These are injected by the server adapters (Express, Hono, etc.)\n * Fields other than `mastra` are optional to allow direct handler testing.\n */\nexport type ServerContext = {\n  mastra: Mastra;\n  requestContext: RequestContext;\n  tools?: ToolsInput;\n  taskStore?: InMemoryTaskStore;\n  abortSignal: AbortSignal;\n};\n\n/**\n * Utility type to infer parameters from Zod schemas.\n * Merges path params, query params, and body params into a single type.\n */\nexport type InferParams<\n  TPathSchema extends z.ZodTypeAny | undefined,\n  TQuerySchema extends z.ZodTypeAny | undefined,\n  TBodySchema extends z.ZodTypeAny | undefined,\n> = (TPathSchema extends z.ZodTypeAny ? z.infer<TPathSchema> : {}) &\n  (TQuerySchema extends z.ZodTypeAny ? z.infer<TQuerySchema> : {}) &\n  (TBodySchema extends z.ZodTypeAny ? z.infer<TBodySchema> : {});\n\n/**\n * All supported response types for server routes.\n * - 'json': Standard JSON response\n * - 'stream': Streaming response (SSE or raw stream)\n * - 'datastream-response': Pre-built Response object for data streams\n * - 'mcp-http': MCP Streamable HTTP transport (handled by adapter)\n * - 'mcp-sse': MCP SSE transport (handled by adapter)\n */\nexport type ResponseType = 'stream' | 'json' | 'datastream-response' | 'mcp-http' | 'mcp-sse';\n\nexport type ServerRouteHandler<\n  TParams = Record<string, unknown>,\n  TResponse = unknown,\n  TResponseType extends ResponseType = 'json',\n> = (\n  params: TParams & ServerContext,\n) => Promise<\n  TResponseType extends 'stream'\n    ? MastraStreamReturn\n    : TResponseType extends 'datastream-response'\n      ? Response\n      : TResponse\n>;\n\nexport type ServerRoute<\n  TParams = Record<string, unknown>,\n  TResponse = unknown,\n  TResponseType extends ResponseType = 'json',\n> = Omit<ApiRoute, 'handler' | 'createHandler'> & {\n  responseType: TResponseType;\n  streamFormat?: 'sse' | 'stream'; // Only used when responseType is 'stream', defaults to 'stream'\n  handler: ServerRouteHandler<TParams, TResponse, TResponseType>;\n  pathParamSchema?: z.ZodSchema;\n  queryParamSchema?: z.ZodSchema;\n  bodySchema?: z.ZodSchema;\n  responseSchema?: z.ZodSchema;\n  openapi?: any; // Auto-generated OpenAPI spec for this route\n  maxBodySize?: number; // Optional route-specific body size limit in bytes\n  deprecated?: boolean; // Flag for deprecated routes (used for route parity, skipped in tests)\n};\n\nexport const SERVER_ROUTES: ServerRoute<any, any, any>[] = [\n  ...AGENTS_ROUTES,\n  ...WORKFLOWS_ROUTES,\n  ...TOOLS_ROUTES,\n  ...MEMORY_ROUTES,\n  ...SCORES_ROUTES,\n  ...OBSERVABILITY_ROUTES,\n  ...LOGS_ROUTES,\n  ...VECTORS_ROUTES,\n  ...A2A_ROUTES,\n  ...AGENT_BUILDER_ROUTES,\n  ...LEGACY_ROUTES,\n  ...MCP_ROUTES,\n  ...STORED_AGENTS_ROUTES,\n  ...SYSTEM_ROUTES,\n];\n\n// Export route builder and OpenAPI utilities\nexport { createRoute, pickParams, jsonQueryParam, wrapSchemaForQueryParams } from './route-builder';\nexport { generateOpenAPIDocument } from '../openapi-utils';\n","import type { ChunkType } from '@mastra/core/stream';\n\n/**\n * Redacts request data from a v2 format payload.\n * Removes `metadata.request` and `output.steps[].request` from the payload.\n */\nfunction redactV2Payload(payload: Record<string, unknown>): Record<string, unknown> {\n  const redactedPayload = { ...payload };\n\n  // Remove metadata.request\n  if (redactedPayload.metadata && typeof redactedPayload.metadata === 'object') {\n    const { request, ...metadataRest } = redactedPayload.metadata as Record<string, unknown>;\n    redactedPayload.metadata = metadataRest;\n  }\n\n  // Remove request from output.steps[]\n  if (redactedPayload.output && typeof redactedPayload.output === 'object') {\n    const output = { ...(redactedPayload.output as Record<string, unknown>) };\n    if (Array.isArray(output.steps)) {\n      output.steps = output.steps.map((step: Record<string, unknown>) => {\n        if (step && typeof step === 'object') {\n          const { request, ...stepRest } = step;\n          return stepRest;\n        }\n        return step;\n      });\n    }\n    redactedPayload.output = output;\n  }\n\n  return redactedPayload;\n}\n\n/**\n * Redacts sensitive data from stream chunks before they are sent to clients.\n *\n * This function strips out request bodies that may contain sensitive information\n * such as system prompts, tool definitions, API keys, and other configuration data.\n *\n * Handles both v1 (legacy) and v2 stream formats:\n *\n * v1 format (fields at root level):\n * - `step-start.request` - Contains the full LLM request body\n * - `step-finish.request` - Contains the request body\n * - `finish.request` - Contains the request body (if present)\n *\n * v2 format (fields nested in payload):\n * - `step-start.payload.request` - Contains the full LLM request body\n * - `step-finish.payload.metadata.request` - Contains the request metadata\n * - `step-finish.payload.output.steps[].request` - Contains request data for each step\n * - `finish.payload.metadata.request` - Contains the request metadata\n * - `finish.payload.output.steps[].request` - Contains request data for each step\n *\n * @param chunk - The stream chunk to redact\n * @returns A new chunk with sensitive data removed, or the original chunk if no redaction needed\n */\nexport function redactStreamChunk<OUTPUT = undefined>(chunk: ChunkType<OUTPUT>): ChunkType<OUTPUT> {\n  if (!chunk || typeof chunk !== 'object') {\n    return chunk;\n  }\n\n  const typedChunk = chunk as Record<string, unknown>;\n\n  switch (chunk.type) {\n    case 'step-start': {\n      // Check if this is v2 format (has payload) or v1 format (request at root)\n      if ('payload' in typedChunk && typedChunk.payload && typeof typedChunk.payload === 'object') {\n        // v2 format: Remove request from payload\n        const { payload, ...rest } = typedChunk;\n        const { request, ...payloadRest } = payload as Record<string, unknown>;\n        return {\n          ...rest,\n          type: 'step-start',\n          payload: {\n            ...payloadRest,\n            // Keep an empty request object to maintain structure but remove body\n            request: {},\n          },\n        } as ChunkType<OUTPUT>;\n      } else if ('request' in typedChunk) {\n        // v1 format: Remove request at root level\n        const { request, ...rest } = typedChunk;\n        return {\n          ...rest,\n          type: 'step-start',\n          // Keep an empty request object to maintain structure\n          request: {},\n        } as unknown as ChunkType<OUTPUT>;\n      }\n      return chunk;\n    }\n\n    case 'step-finish': {\n      // Check if this is v2 format (has payload) or v1 format (request at root)\n      if ('payload' in typedChunk && typedChunk.payload && typeof typedChunk.payload === 'object') {\n        // v2 format: Remove request from metadata and output.steps[].request\n        const { payload, ...rest } = typedChunk;\n        return {\n          ...rest,\n          type: 'step-finish',\n          payload: redactV2Payload(payload as Record<string, unknown>),\n        } as ChunkType<OUTPUT>;\n      } else if ('request' in typedChunk) {\n        // v1 format: Remove request at root level\n        const { request, ...rest } = typedChunk;\n        return {\n          ...rest,\n          type: 'step-finish',\n        } as unknown as ChunkType<OUTPUT>;\n      }\n      return chunk;\n    }\n\n    case 'finish': {\n      // Check if this is v2 format (has payload) or v1 format (request at root)\n      if ('payload' in typedChunk && typedChunk.payload && typeof typedChunk.payload === 'object') {\n        // v2 format: Remove request from metadata and output.steps[].request\n        const { payload, ...rest } = typedChunk;\n        return {\n          ...rest,\n          type: 'finish',\n          payload: redactV2Payload(payload as Record<string, unknown>),\n        } as ChunkType<OUTPUT>;\n      } else if ('request' in typedChunk) {\n        // v1 format: Remove request at root level\n        const { request, ...rest } = typedChunk;\n        return {\n          ...rest,\n          type: 'finish',\n        } as unknown as ChunkType<OUTPUT>;\n      }\n      return chunk;\n    }\n\n    default:\n      // Other chunk types don't contain sensitive request data\n      return chunk;\n  }\n}\n","import type { ToolsInput } from '@mastra/core/agent';\nimport type { Mastra } from '@mastra/core/mastra';\nimport { RequestContext } from '@mastra/core/request-context';\nimport { MastraServerBase } from '@mastra/core/server';\nimport type { InMemoryTaskStore } from '../a2a/store';\nimport { generateOpenAPIDocument } from './openapi-utils';\nimport { SERVER_ROUTES } from './routes';\nimport type { ServerRoute } from './routes';\n\nexport * from './routes';\nexport { redactStreamChunk } from './redact';\n\nexport { WorkflowRegistry } from '../utils';\n\nexport interface OpenAPIConfig {\n  title?: string;\n  version?: string;\n  description?: string;\n  path?: string;\n}\n\nexport interface BodyLimitOptions {\n  maxSize: number;\n  onError: (error: unknown) => unknown;\n}\n\nexport interface StreamOptions {\n  /**\n   * When true (default), redacts sensitive data from stream chunks\n   * (system prompts, tool definitions, API keys) before sending to clients.\n   *\n   * Set to false to include full request data in stream chunks (useful for\n   * debugging or internal services that need access to this data).\n   *\n   * @default true\n   */\n  redact?: boolean;\n}\n\n/**\n * Query parameter values parsed from HTTP requests.\n * Supports both single values and arrays (for repeated query params like ?tag=a&tag=b).\n */\nexport type QueryParamValue = string | string[];\n\n/**\n * Parsed request parameters returned by getParams().\n */\nexport interface ParsedRequestParams {\n  urlParams: Record<string, string>;\n  queryParams: Record<string, QueryParamValue>;\n  body: unknown;\n}\n\n/**\n * Normalizes query parameters from various HTTP framework formats to a consistent structure.\n * Handles both single string values and arrays (for repeated query params like ?tag=a&tag=b).\n * Filters out non-string values that some frameworks may include.\n *\n * @param rawQuery - Raw query parameters from the HTTP framework (may contain strings, arrays, or nested objects)\n * @returns Normalized query parameters as Record<string, string | string[]>\n */\nexport function normalizeQueryParams(rawQuery: Record<string, unknown>): Record<string, QueryParamValue> {\n  const queryParams: Record<string, QueryParamValue> = {};\n  for (const [key, value] of Object.entries(rawQuery)) {\n    if (typeof value === 'string') {\n      queryParams[key] = value;\n    } else if (Array.isArray(value)) {\n      // Filter to only string values (some frameworks include nested objects)\n      const stringValues = value.filter((v): v is string => typeof v === 'string');\n      // Convert single-value arrays back to strings for compatibility\n      queryParams[key] = stringValues.length === 1 ? stringValues[0]! : stringValues;\n    }\n  }\n  return queryParams;\n}\n\n/**\n * Abstract base class for server adapters that handle HTTP requests.\n *\n * This class extends `MastraServerBase` to inherit app storage functionality\n * and provides the framework for registering routes, middleware, and handling requests.\n *\n * Framework-specific adapters in @mastra/hono and @mastra/express extend this class\n * (both named `MastraServer` in their respective packages) and implement the abstract\n * methods for their specific framework.\n *\n * @template TApp - The type of the server app (e.g., Hono, Express Application)\n * @template TRequest - The type of the request object\n * @template TResponse - The type of the response object\n */\nexport abstract class MastraServer<TApp, TRequest, TResponse> extends MastraServerBase<TApp> {\n  protected mastra: Mastra;\n  protected bodyLimitOptions?: BodyLimitOptions;\n  protected tools?: ToolsInput;\n  protected prefix?: string;\n  protected openapiPath?: string;\n  protected taskStore?: InMemoryTaskStore;\n  protected customRouteAuthConfig?: Map<string, boolean>;\n  protected streamOptions: StreamOptions;\n\n  constructor({\n    app,\n    mastra,\n    bodyLimitOptions,\n    tools,\n    prefix = '',\n    openapiPath = '',\n    taskStore,\n    customRouteAuthConfig,\n    streamOptions,\n  }: {\n    app: TApp;\n    mastra: Mastra;\n    bodyLimitOptions?: BodyLimitOptions;\n    tools?: ToolsInput;\n    prefix?: string;\n    openapiPath?: string;\n    taskStore?: InMemoryTaskStore;\n    customRouteAuthConfig?: Map<string, boolean>;\n    streamOptions?: StreamOptions;\n  }) {\n    super({ app, name: 'MastraServer' });\n    this.mastra = mastra;\n    this.bodyLimitOptions = bodyLimitOptions;\n    this.tools = tools;\n    this.prefix = prefix;\n    this.openapiPath = openapiPath;\n    this.taskStore = taskStore;\n    this.customRouteAuthConfig = customRouteAuthConfig;\n    this.streamOptions = { redact: true, ...streamOptions };\n\n    // Automatically register this adapter with Mastra so getServerApp() works\n    mastra.setMastraServer(this);\n  }\n\n  protected mergeRequestContext({\n    paramsRequestContext,\n    bodyRequestContext,\n  }: {\n    paramsRequestContext?: Record<string, any>;\n    bodyRequestContext?: Record<string, any>;\n  }): RequestContext {\n    const requestContext = new RequestContext();\n    if (bodyRequestContext) {\n      for (const [key, value] of Object.entries(bodyRequestContext)) {\n        requestContext.set(key, value);\n      }\n    }\n    if (paramsRequestContext) {\n      for (const [key, value] of Object.entries(paramsRequestContext)) {\n        requestContext.set(key, value);\n      }\n    }\n    return requestContext;\n  }\n\n  abstract stream(route: ServerRoute, response: TResponse, result: unknown): Promise<unknown>;\n  abstract getParams(route: ServerRoute, request: TRequest): Promise<ParsedRequestParams>;\n  abstract sendResponse(route: ServerRoute, response: TResponse, result: unknown): Promise<unknown>;\n  abstract registerRoute(app: TApp, route: ServerRoute, { prefix }: { prefix?: string }): Promise<void>;\n  abstract registerContextMiddleware(): void;\n  abstract registerAuthMiddleware(): void;\n\n  async init() {\n    this.registerContextMiddleware();\n    this.registerAuthMiddleware();\n    await this.registerRoutes();\n  }\n\n  async registerOpenAPIRoute(app: TApp, config: OpenAPIConfig = {}, { prefix }: { prefix?: string }): Promise<void> {\n    const {\n      title = 'Mastra API',\n      version = '1.0.0',\n      description = 'Mastra Server API',\n      path = '/openapi.json',\n    } = config;\n\n    const openApiSpec = generateOpenAPIDocument(SERVER_ROUTES, {\n      title,\n      version,\n      description,\n    });\n\n    const openApiRoute: ServerRoute = {\n      method: 'GET',\n      path,\n      responseType: 'json',\n      handler: async () => openApiSpec,\n    };\n\n    await this.registerRoute(app, openApiRoute, { prefix });\n  }\n\n  async registerRoutes(): Promise<void> {\n    await Promise.all(SERVER_ROUTES.map(route => this.registerRoute(this.app, route, { prefix: this.prefix })));\n\n    if (this.openapiPath) {\n      await this.registerOpenAPIRoute(\n        this.app,\n        {\n          title: 'Mastra API',\n          version: '1.0.0',\n          description: 'Mastra Server API',\n          path: this.openapiPath,\n        },\n        { prefix: this.prefix },\n      );\n    }\n  }\n\n  async parsePathParams(route: ServerRoute, params: Record<string, string>): Promise<Record<string, any>> {\n    const pathParamSchema = route.pathParamSchema;\n    if (!pathParamSchema) {\n      return params;\n    }\n\n    return pathParamSchema.parseAsync(params);\n  }\n\n  async parseQueryParams(route: ServerRoute, params: Record<string, QueryParamValue>): Promise<Record<string, any>> {\n    const queryParamSchema = route.queryParamSchema;\n    if (!queryParamSchema) {\n      return params;\n    }\n\n    return queryParamSchema.parseAsync(params);\n  }\n\n  async parseBody(route: ServerRoute, body: unknown): Promise<unknown> {\n    const bodySchema = route.bodySchema;\n    if (!bodySchema) {\n      return body;\n    }\n\n    return bodySchema.parseAsync(body);\n  }\n}\n"]}