import type { Mastra } from '@mastra/core';
import type { ToolsInput } from '@mastra/core/agent';
import type { RequestContext } from '@mastra/core/request-context';
import type { ApiRoute } from '@mastra/core/server';
import type z from 'zod';
import type { InMemoryTaskStore } from '../../a2a/store.js';
import type { MastraStreamReturn } from './stream-types.js';
/**
 * Server context fields that are available to route handlers.
 * These are injected by the server adapters (Express, Hono, etc.)
 * Fields other than `mastra` are optional to allow direct handler testing.
 */
export type ServerContext = {
    mastra: Mastra;
    requestContext: RequestContext;
    tools?: ToolsInput;
    taskStore?: InMemoryTaskStore;
    abortSignal: AbortSignal;
};
/**
 * Utility type to infer parameters from Zod schemas.
 * Merges path params, query params, and body params into a single type.
 */
export type InferParams<TPathSchema extends z.ZodTypeAny | undefined, TQuerySchema extends z.ZodTypeAny | undefined, TBodySchema extends z.ZodTypeAny | undefined> = (TPathSchema extends z.ZodTypeAny ? z.infer<TPathSchema> : {}) & (TQuerySchema extends z.ZodTypeAny ? z.infer<TQuerySchema> : {}) & (TBodySchema extends z.ZodTypeAny ? z.infer<TBodySchema> : {});
/**
 * All supported response types for server routes.
 * - 'json': Standard JSON response
 * - 'stream': Streaming response (SSE or raw stream)
 * - 'datastream-response': Pre-built Response object for data streams
 * - 'mcp-http': MCP Streamable HTTP transport (handled by adapter)
 * - 'mcp-sse': MCP SSE transport (handled by adapter)
 */
export type ResponseType = 'stream' | 'json' | 'datastream-response' | 'mcp-http' | 'mcp-sse';
export type ServerRouteHandler<TParams = Record<string, unknown>, TResponse = unknown, TResponseType extends ResponseType = 'json'> = (params: TParams & ServerContext) => Promise<TResponseType extends 'stream' ? MastraStreamReturn : TResponseType extends 'datastream-response' ? Response : TResponse>;
export type ServerRoute<TParams = Record<string, unknown>, TResponse = unknown, TResponseType extends ResponseType = 'json'> = Omit<ApiRoute, 'handler' | 'createHandler'> & {
    responseType: TResponseType;
    streamFormat?: 'sse' | 'stream';
    handler: ServerRouteHandler<TParams, TResponse, TResponseType>;
    pathParamSchema?: z.ZodSchema;
    queryParamSchema?: z.ZodSchema;
    bodySchema?: z.ZodSchema;
    responseSchema?: z.ZodSchema;
    openapi?: any;
    maxBodySize?: number;
    deprecated?: boolean;
};
export declare const SERVER_ROUTES: ServerRoute<any, any, any>[];
export { createRoute, pickParams, jsonQueryParam, wrapSchemaForQueryParams } from './route-builder.js';
export { generateOpenAPIDocument } from '../openapi-utils.js';
//# sourceMappingURL=index.d.ts.map